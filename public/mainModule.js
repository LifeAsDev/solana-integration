/*! For license information please see mainModule.js.LICENSE.txt */
var e,t,r={22:(e,t,r)=>{const n=r(8341).v4,i=r(3289),s=function(e,t){if(!(this instanceof s))return new s(e,t);t||(t={}),this.options={reviver:void 0!==t.reviver?t.reviver:null,replacer:void 0!==t.replacer?t.replacer:null,generator:void 0!==t.generator?t.generator:function(){return n()},version:void 0!==t.version?t.version:2,notificationIdNull:"boolean"==typeof t.notificationIdNull&&t.notificationIdNull},this.callServer=e};e.exports=s,s.prototype.request=function(e,t,r,n){const s=this;let o=null;const a=Array.isArray(e)&&"function"==typeof t;if(1===this.options.version&&a)throw new TypeError("JSON-RPC 1.0 does not support batching");if(a||!a&&e&&"object"==typeof e&&"function"==typeof t)n=t,o=e;else{"function"==typeof r&&(n=r,r=void 0);const s="function"==typeof n;try{o=i(e,t,r,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(e){if(s)return n(e);throw e}if(!s)return o}let c;try{c=JSON.stringify(o,this.options.replacer)}catch(e){return n(e)}return this.callServer(c,(function(e,t){s._parseResponse(e,t,n)})),o},s.prototype._parseResponse=function(e,t,r){if(e)return void r(e);if(!t)return r();let n;try{n=JSON.parse(t,this.options.reviver)}catch(e){return r(e)}if(3===r.length){if(Array.isArray(n)){const e=function(e){return void 0!==e.error},t=function(t){return!e(t)};return r(null,n.filter(e),n.filter(t))}return r(null,n.error,n.result)}r(null,n)}},148:(e,t,r)=>{r.d(t,{z8:()=>n,tt:()=>l,Zv:()=>s.Z,EM:()=>u.E,RF:()=>i.RF,JX:()=>i.JX,ds:()=>i.ds});const n={interpolate(e,t,r){if(2!==e.length||2!==t.length)throw new Error("inputRange and outputRange must be an array of length 2");const n=e[0]||0,i=e[1]||0,s=t[0]||0,o=t[1]||0;return r<n?s:r>i?o:(o-s)/(i-n)*(r-n)+s}};var i=r(6109),s=r(3612),o=r(8169);const a=["receive","deposit","borrow","claim"],c=["withdraw","repay","burn"],l={getTransactionGroupTitle(e,t){const r=o.r.getYear(),n=o.r.getMonthNameByIndex(t);return e===r?n:`${n} ${e}`},getTransactionImages(e){const[t,r]=e,n=Boolean(t)&&e?.every((e=>Boolean(e.nft_info))),i=e?.length>1;return 2!==e?.length||n?i?e.map((e=>this.getTransactionImage(e))):[this.getTransactionImage(t)]:[this.getTransactionImage(t),this.getTransactionImage(r)]},getTransactionImage:e=>({type:l.getTransactionTransferTokenType(e),url:l.getTransactionImageURL(e)}),getTransactionImageURL(e){let t;const r=Boolean(e?.nft_info),n=Boolean(e?.fungible_info);return e&&r?t=e?.nft_info?.content?.preview?.url:e&&n&&(t=e?.fungible_info?.icon?.url),t},getTransactionTransferTokenType:e=>e?.fungible_info?"FUNGIBLE":e?.nft_info?"NFT":void 0,getTransactionDescriptions(e){const t=e?.metadata?.operationType,r=e?.transfers,n=e?.transfers?.length>0,i=e?.transfers?.length>1,o=n&&r?.every((e=>Boolean(e?.fungible_info))),[l,u]=r;let h=this.getTransferDescription(l),d=this.getTransferDescription(u);if(!n)return"send"!==t&&"receive"!==t||!o?[e.metadata.status]:(h=s.Z.getTruncateString({string:e?.metadata.sentFrom,charsStart:4,charsEnd:6,truncate:"middle"}),d=s.Z.getTruncateString({string:e?.metadata.sentTo,charsStart:4,charsEnd:6,truncate:"middle"}),[h,d]);if(i)return r.map((e=>this.getTransferDescription(e)));let p="";return a.includes(t)?p="+":c.includes(t)&&(p="-"),h=p.concat(h),[h]},getTransferDescription(e){let t="";return e?(e?.nft_info?t=e?.nft_info?.name||"-":e?.fungible_info&&(t=this.getFungibleTransferDescription(e)||"-"),t):t},getFungibleTransferDescription(e){return e?[this.getQuantityFixedValue(e?.quantity.numeric),e?.fungible_info?.symbol].join(" ").trim():null},getQuantityFixedValue:e=>e?parseFloat(e).toFixed(3):null};var u=r(3494)},152:(e,t,r)=>{r.d(t,{OH:()=>i,Vl:()=>a,gS:()=>s,hy:()=>n,s1:()=>o});const n=("undefined"!=typeof process&&void 0!==process.env?process.env.NEXT_PUBLIC_SECURE_SITE_SDK_URL:void 0)||"https://secure.walletconnect.org/sdk",i=("undefined"!=typeof process&&void 0!==process.env?process.env.NEXT_PUBLIC_DEFAULT_LOG_LEVEL:void 0)||"error",s=("undefined"!=typeof process&&void 0!==process.env?process.env.NEXT_PUBLIC_SECURE_SITE_SDK_VERSION:void 0)||"4",o={APP_EVENT_KEY:"@w3m-app/",FRAME_EVENT_KEY:"@w3m-frame/",RPC_METHOD_KEY:"RPC_",STORAGE_KEY:"@appkit-wallet/",SESSION_TOKEN_KEY:"SESSION_TOKEN_KEY",EMAIL_LOGIN_USED_KEY:"EMAIL_LOGIN_USED_KEY",LAST_USED_CHAIN_KEY:"LAST_USED_CHAIN_KEY",LAST_EMAIL_LOGIN_TIME:"LAST_EMAIL_LOGIN_TIME",EMAIL:"EMAIL",PREFERRED_ACCOUNT_TYPE:"PREFERRED_ACCOUNT_TYPE",SMART_ACCOUNT_ENABLED:"SMART_ACCOUNT_ENABLED",SMART_ACCOUNT_ENABLED_NETWORKS:"SMART_ACCOUNT_ENABLED_NETWORKS",SOCIAL_USERNAME:"SOCIAL_USERNAME",APP_SWITCH_NETWORK:"@w3m-app/SWITCH_NETWORK",APP_CONNECT_EMAIL:"@w3m-app/CONNECT_EMAIL",APP_CONNECT_DEVICE:"@w3m-app/CONNECT_DEVICE",APP_CONNECT_OTP:"@w3m-app/CONNECT_OTP",APP_CONNECT_SOCIAL:"@w3m-app/CONNECT_SOCIAL",APP_GET_SOCIAL_REDIRECT_URI:"@w3m-app/GET_SOCIAL_REDIRECT_URI",APP_GET_USER:"@w3m-app/GET_USER",APP_SIGN_OUT:"@w3m-app/SIGN_OUT",APP_IS_CONNECTED:"@w3m-app/IS_CONNECTED",APP_GET_CHAIN_ID:"@w3m-app/GET_CHAIN_ID",APP_RPC_REQUEST:"@w3m-app/RPC_REQUEST",APP_UPDATE_EMAIL:"@w3m-app/UPDATE_EMAIL",APP_UPDATE_EMAIL_PRIMARY_OTP:"@w3m-app/UPDATE_EMAIL_PRIMARY_OTP",APP_UPDATE_EMAIL_SECONDARY_OTP:"@w3m-app/UPDATE_EMAIL_SECONDARY_OTP",APP_AWAIT_UPDATE_EMAIL:"@w3m-app/AWAIT_UPDATE_EMAIL",APP_SYNC_THEME:"@w3m-app/SYNC_THEME",APP_SYNC_DAPP_DATA:"@w3m-app/SYNC_DAPP_DATA",APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS:"@w3m-app/GET_SMART_ACCOUNT_ENABLED_NETWORKS",APP_INIT_SMART_ACCOUNT:"@w3m-app/INIT_SMART_ACCOUNT",APP_SET_PREFERRED_ACCOUNT:"@w3m-app/SET_PREFERRED_ACCOUNT",APP_CONNECT_FARCASTER:"@w3m-app/CONNECT_FARCASTER",APP_GET_FARCASTER_URI:"@w3m-app/GET_FARCASTER_URI",APP_RELOAD:"@w3m-app/RELOAD",FRAME_SWITCH_NETWORK_ERROR:"@w3m-frame/SWITCH_NETWORK_ERROR",FRAME_SWITCH_NETWORK_SUCCESS:"@w3m-frame/SWITCH_NETWORK_SUCCESS",FRAME_CONNECT_EMAIL_ERROR:"@w3m-frame/CONNECT_EMAIL_ERROR",FRAME_CONNECT_EMAIL_SUCCESS:"@w3m-frame/CONNECT_EMAIL_SUCCESS",FRAME_CONNECT_DEVICE_ERROR:"@w3m-frame/CONNECT_DEVICE_ERROR",FRAME_CONNECT_DEVICE_SUCCESS:"@w3m-frame/CONNECT_DEVICE_SUCCESS",FRAME_CONNECT_OTP_SUCCESS:"@w3m-frame/CONNECT_OTP_SUCCESS",FRAME_CONNECT_OTP_ERROR:"@w3m-frame/CONNECT_OTP_ERROR",FRAME_CONNECT_SOCIAL_SUCCESS:"@w3m-frame/CONNECT_SOCIAL_SUCCESS",FRAME_CONNECT_SOCIAL_ERROR:"@w3m-frame/CONNECT_SOCIAL_ERROR",FRAME_CONNECT_FARCASTER_SUCCESS:"@w3m-frame/CONNECT_FARCASTER_SUCCESS",FRAME_CONNECT_FARCASTER_ERROR:"@w3m-frame/CONNECT_FARCASTER_ERROR",FRAME_GET_FARCASTER_URI_SUCCESS:"@w3m-frame/GET_FARCASTER_URI_SUCCESS",FRAME_GET_FARCASTER_URI_ERROR:"@w3m-frame/GET_FARCASTER_URI_ERROR",FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_SUCCESS",FRAME_GET_SOCIAL_REDIRECT_URI_ERROR:"@w3m-frame/GET_SOCIAL_REDIRECT_URI_ERROR",FRAME_GET_USER_SUCCESS:"@w3m-frame/GET_USER_SUCCESS",FRAME_GET_USER_ERROR:"@w3m-frame/GET_USER_ERROR",FRAME_SIGN_OUT_SUCCESS:"@w3m-frame/SIGN_OUT_SUCCESS",FRAME_SIGN_OUT_ERROR:"@w3m-frame/SIGN_OUT_ERROR",FRAME_IS_CONNECTED_SUCCESS:"@w3m-frame/IS_CONNECTED_SUCCESS",FRAME_IS_CONNECTED_ERROR:"@w3m-frame/IS_CONNECTED_ERROR",FRAME_GET_CHAIN_ID_SUCCESS:"@w3m-frame/GET_CHAIN_ID_SUCCESS",FRAME_GET_CHAIN_ID_ERROR:"@w3m-frame/GET_CHAIN_ID_ERROR",FRAME_RPC_REQUEST_SUCCESS:"@w3m-frame/RPC_REQUEST_SUCCESS",FRAME_RPC_REQUEST_ERROR:"@w3m-frame/RPC_REQUEST_ERROR",FRAME_SESSION_UPDATE:"@w3m-frame/SESSION_UPDATE",FRAME_UPDATE_EMAIL_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SUCCESS",FRAME_UPDATE_EMAIL_ERROR:"@w3m-frame/UPDATE_EMAIL_ERROR",FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_PRIMARY_OTP_ERROR",FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_SUCCESS",FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR:"@w3m-frame/UPDATE_EMAIL_SECONDARY_OTP_ERROR",FRAME_SYNC_THEME_SUCCESS:"@w3m-frame/SYNC_THEME_SUCCESS",FRAME_SYNC_THEME_ERROR:"@w3m-frame/SYNC_THEME_ERROR",FRAME_SYNC_DAPP_DATA_SUCCESS:"@w3m-frame/SYNC_DAPP_DATA_SUCCESS",FRAME_SYNC_DAPP_DATA_ERROR:"@w3m-frame/SYNC_DAPP_DATA_ERROR",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS",FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR:"@w3m-frame/GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR",FRAME_INIT_SMART_ACCOUNT_SUCCESS:"@w3m-frame/INIT_SMART_ACCOUNT_SUCCESS",FRAME_INIT_SMART_ACCOUNT_ERROR:"@w3m-frame/INIT_SMART_ACCOUNT_ERROR",FRAME_SET_PREFERRED_ACCOUNT_SUCCESS:"@w3m-frame/SET_PREFERRED_ACCOUNT_SUCCESS",FRAME_SET_PREFERRED_ACCOUNT_ERROR:"@w3m-frame/SET_PREFERRED_ACCOUNT_ERROR",FRAME_READY:"@w3m-frame/READY",FRAME_RELOAD_SUCCESS:"@w3m-frame/RELOAD_SUCCESS",FRAME_RELOAD_ERROR:"@w3m-frame/RELOAD_ERROR",RPC_RESPONSE_TYPE_ERROR:"RPC_RESPONSE_ERROR",RPC_RESPONSE_TYPE_TX:"RPC_RESPONSE_TRANSACTION_HASH",RPC_RESPONSE_TYPE_OBJECT:"RPC_RESPONSE_OBJECT"},a={SAFE_RPC_METHODS:["eth_accounts","eth_blockNumber","eth_call","eth_chainId","eth_estimateGas","eth_feeHistory","eth_gasPrice","eth_getAccount","eth_getBalance","eth_getBlockByHash","eth_getBlockByNumber","eth_getBlockReceipts","eth_getBlockTransactionCountByHash","eth_getBlockTransactionCountByNumber","eth_getCode","eth_getFilterChanges","eth_getFilterLogs","eth_getLogs","eth_getProof","eth_getStorageAt","eth_getTransactionByBlockHashAndIndex","eth_getTransactionByBlockNumberAndIndex","eth_getTransactionByHash","eth_getTransactionCount","eth_getTransactionReceipt","eth_getUncleCountByBlockHash","eth_getUncleCountByBlockNumber","eth_maxPriorityFeePerGas","eth_newBlockFilter","eth_newFilter","eth_newPendingTransactionFilter","eth_sendRawTransaction","eth_syncing","eth_uninstallFilter","wallet_getCapabilities","wallet_getCallsStatus","eth_getUserOperationReceipt","eth_estimateUserOperationGas","eth_getUserOperationByHash","eth_supportedEntryPoints","wallet_getAssets"],NOT_SAFE_RPC_METHODS:["personal_sign","eth_signTypedData_v4","eth_sendTransaction","solana_signMessage","solana_signTransaction","solana_signAllTransactions","solana_signAndSendTransaction","wallet_sendCalls","wallet_grantPermissions","wallet_revokePermissions","eth_sendUserOperation"],GET_CHAIN_ID:"eth_chainId",RPC_METHOD_NOT_ALLOWED_MESSAGE:"Requested RPC call is not allowed",RPC_METHOD_NOT_ALLOWED_UI_MESSAGE:"Action not allowed",ACCOUNT_TYPES:{EOA:"eoa",SMART_ACCOUNT:"smartAccount"}}},184:(e,t,r)=>{r.d(t,{E:()=>g});var n=r(9073),i=r(4376),s=r(6036),o=r(6742),a=r(5905),c=r(3450),l=r(1655),u=r(2733);const h=o.w.getAnalyticsUrl(),d=new a.Z({baseUrl:h,clientId:null}),p=["MODAL_CREATED"],f=(0,n.BX)({timestamp:Date.now(),reportedErrors:{},data:{type:"track",event:"MODAL_CREATED"}}),g={state:f,subscribe:e=>(0,n.B1)(f,(()=>e(f))),getSdkProperties(){const{projectId:e,sdkType:t,sdkVersion:r}=u.H.state;return{projectId:e,st:t,sv:r||"html-wagmi-4.2.2"}},async _sendAnalyticsEvent(e){try{const t=c.U.state.address;if(p.includes(e.data.event)||"undefined"==typeof window)return;await d.post({path:"/e",params:g.getSdkProperties(),body:{eventId:o.w.getUUID(),url:window.location.href,domain:window.location.hostname,timestamp:e.timestamp,props:{...e.data,address:t}}}),f.reportedErrors.FORBIDDEN=!1}catch(e){e instanceof Error&&e.cause instanceof Response&&e.cause.status===i.o.HTTP_STATUS_CODES.FORBIDDEN&&!f.reportedErrors.FORBIDDEN&&(l.h.open({shortMessage:"Invalid App Configuration",longMessage:`Origin ${(0,s.IP)()?window.origin:"uknown"} not found on Allowlist - update configuration on cloud.reown.com`},"error"),f.reportedErrors.FORBIDDEN=!0)}},sendEvent(e){f.timestamp=Date.now(),f.data=e,u.H.state.features?.analytics&&g._sendAnalyticsEvent(f)}}},221:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fromMiliseconds=t.toMiliseconds=void 0;const n=r(9026);t.toMiliseconds=function(e){return e*n.ONE_THOUSAND},t.fromMiliseconds=function(e){return Math.floor(e/n.ONE_THOUSAND)}},251:(e,t)=>{t.read=function(e,t,r,n,i){var s,o,a=8*i-n-1,c=(1<<a)-1,l=c>>1,u=-7,h=r?i-1:0,d=r?-1:1,p=e[t+h];for(h+=d,s=p&(1<<-u)-1,p>>=-u,u+=a;u>0;s=256*s+e[t+h],h+=d,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=n;u>0;o=256*o+e[t+h],h+=d,u-=8);if(0===s)s=1-l;else{if(s===c)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,n),s-=l}return(p?-1:1)*o*Math.pow(2,s-n)},t.write=function(e,t,r,n,i,s){var o,a,c,l=8*s-i-1,u=(1<<l)-1,h=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:s-1,f=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),(t+=o+h>=1?d/c:d*Math.pow(2,1-h))*c>=2&&(o++,c/=2),o+h>=u?(a=0,o=u):o+h>=1?(a=(t*c-1)*Math.pow(2,i),o+=h):(a=t*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;e[r+p]=255&a,p+=f,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;e[r+p]=255&o,p+=f,o/=256,l-=8);e[r+p-f]|=128*g}},601:(e,t,r)=>{t.I0=t.DH=t.NX=t.u8=t.cY=void 0,t.av=t.O6=t.w3=t.Wg=void 0;const n=r(8287);function i(e){if(!(e instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}function s(e){return i(e),n.Buffer.from(e.buffer,e.byteOffset,e.length)}class o{constructor(e,t){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=t}makeDestinationObject(){return{}}getSpan(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}fromArray(e){}}function a(e,t){return t.property?e+"["+t.property+"]":e}class c extends o{isCount(){throw new Error("ExternalLayout is abstract")}}class l extends c{constructor(e,t=0,r){if(!(e instanceof o))throw new TypeError("layout must be a Layout");if(!Number.isInteger(t))throw new TypeError("offset must be integer or undefined");super(e.span,r||e.property),this.layout=e,this.offset=t}isCount(){return this.layout instanceof u||this.layout instanceof h}decode(e,t=0){return this.layout.decode(e,t+this.offset)}encode(e,t,r=0){return this.layout.encode(e,t,r+this.offset)}}class u extends o{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return s(e).readUIntLE(t,this.span)}encode(e,t,r=0){return s(t).writeUIntLE(e,r,this.span),this.span}}class h extends o{constructor(e,t){if(super(e,t),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,t=0){return s(e).readUIntBE(t,this.span)}encode(e,t,r=0){return s(t).writeUIntBE(e,r,this.span),this.span}}const d=Math.pow(2,32);function p(e){const t=Math.floor(e/d);return{hi32:t,lo32:e-t*d}}function f(e,t){return e*d+t}class g extends o{constructor(e){super(8,e)}decode(e,t=0){const r=s(e),n=r.readUInt32LE(t);return f(r.readUInt32LE(t+4),n)}encode(e,t,r=0){const n=p(e),i=s(t);return i.writeUInt32LE(n.lo32,r),i.writeUInt32LE(n.hi32,r+4),8}}class m extends o{constructor(e){super(8,e)}decode(e,t=0){const r=s(e),n=r.readUInt32LE(t);return f(r.readInt32LE(t+4),n)}encode(e,t,r=0){const n=p(e),i=s(t);return i.writeUInt32LE(n.lo32,r),i.writeInt32LE(n.hi32,r+4),8}}class y extends o{constructor(e,t,r){if(!(e instanceof o))throw new TypeError("elementLayout must be a Layout");if(!(t instanceof c&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let n=-1;!(t instanceof c)&&0<e.span&&(n=t*e.span),super(n,r),this.elementLayout=e,this.count=t}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0,n=this.count;if(n instanceof c&&(n=n.decode(e,t)),0<this.elementLayout.span)r=n*this.elementLayout.span;else{let i=0;for(;i<n;)r+=this.elementLayout.getSpan(e,t+r),++i}return r}decode(e,t=0){const r=[];let n=0,i=this.count;for(i instanceof c&&(i=i.decode(e,t));n<i;)r.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),n+=1;return r}encode(e,t,r=0){const n=this.elementLayout,i=e.reduce(((e,i)=>e+n.encode(i,t,r+e)),0);return this.count instanceof c&&this.count.encode(e.length,t,r),i}}class w extends o{constructor(e,t,r){if(!Array.isArray(e)||!e.reduce(((e,t)=>e&&t instanceof o),!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof t&&void 0===r&&(r=t,t=void 0);for(const t of e)if(0>t.span&&void 0===t.property)throw new Error("fields cannot contain unnamed variable-length layout");let n=-1;try{n=e.reduce(((e,t)=>e+t.getSpan()),0)}catch(e){}super(n,t),this.fields=e,this.decodePrefixes=!!r}getSpan(e,t=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce(((r,n)=>{const i=n.getSpan(e,t);return t+=i,r+i}),0)}catch(e){throw new RangeError("indeterminate span")}return r}decode(e,t=0){i(e);const r=this.makeDestinationObject();for(const n of this.fields)if(void 0!==n.property&&(r[n.property]=n.decode(e,t)),t+=n.getSpan(e,t),this.decodePrefixes&&e.length===t)break;return r}encode(e,t,r=0){const n=r;let i=0,s=0;for(const n of this.fields){let o=n.span;if(s=0<o?o:0,void 0!==n.property){const i=e[n.property];void 0!==i&&(s=n.encode(i,t,r),0>o&&(o=n.getSpan(t,r)))}i=r,r+=o}return i+s-n}fromArray(e){const t=this.makeDestinationObject();for(const r of this.fields)void 0!==r.property&&0<e.length&&(t[r.property]=e.shift());return t}layoutFor(e){if("string"!=typeof e)throw new TypeError("property must be string");for(const t of this.fields)if(t.property===e)return t}offsetOf(e){if("string"!=typeof e)throw new TypeError("property must be string");let t=0;for(const r of this.fields){if(r.property===e)return t;0>r.span?t=-1:0<=t&&(t+=r.span)}}}class b extends o{constructor(e,t){if(!(e instanceof c&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;e instanceof c||(r=e),super(r,t),this.length=e}getSpan(e,t){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),r}decode(e,t=0){let r=this.span;return 0>r&&(r=this.length.decode(e,t)),s(e).slice(t,t+r)}encode(e,t,r){let n=this.length;if(this.length instanceof c&&(n=e.length),!(e instanceof Uint8Array&&n===e.length))throw new TypeError(a("Blob.encode",this)+" requires (length "+n+") Uint8Array as src");if(r+n>t.length)throw new RangeError("encoding overruns Uint8Array");const i=s(e);return s(t).write(i.toString("hex"),r,n,"hex"),this.length instanceof c&&this.length.encode(n,t,r),n}}t.cY=(e,t,r)=>new l(e,t,r),t.u8=e=>new u(1,e),t.NX=e=>new u(2,e),t.DH=e=>new u(4,e),t.I0=e=>new g(e),t.Wg=e=>new m(e),t.w3=(e,t,r)=>new w(e,t,r),t.O6=(e,t,r)=>new y(e,t,r),t.av=(e,t)=>new b(e,t)},615:(e,t,r)=>{r.d(t,{Xf:()=>f,hT:()=>p,hp:()=>g});var n=r(8030),i=r(8293);const s=BigInt(0),o=BigInt(1);function a(e,t){const r=t.negate();return e?r:t}function c(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function l(e,t){return c(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}const u=new WeakMap,h=new WeakMap;function d(e){return h.get(e)||1}function p(e,t){return{constTimeNegate:a,hasPrecomputes:e=>1!==d(e),unsafeLadder(t,r,n=e.ZERO){let i=t;for(;r>s;)r&o&&(n=n.add(i)),i=i.double(),r>>=o;return n},precomputeWindow(e,r){const{windows:n,windowSize:i}=l(r,t),s=[];let o=e,a=o;for(let e=0;e<n;e++){a=o,s.push(a);for(let e=1;e<i;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(r,n,i){const{windows:s,windowSize:c}=l(r,t);let u=e.ZERO,h=e.BASE;const d=BigInt(2**r-1),p=2**r,f=BigInt(r);for(let e=0;e<s;e++){const t=e*c;let r=Number(i&d);i>>=f,r>c&&(r-=p,i+=o);const s=t,l=t+Math.abs(r)-1,g=e%2!=0,m=r<0;0===r?h=h.add(a(g,n[s])):u=u.add(a(m,n[l]))}return{p:u,f:h}},wNAFUnsafe(r,n,i,a=e.ZERO){const{windows:c,windowSize:u}=l(r,t),h=BigInt(2**r-1),d=2**r,p=BigInt(r);for(let e=0;e<c;e++){const t=e*u;if(i===s)break;let r=Number(i&h);if(i>>=p,r>u&&(r-=d,i+=o),0===r)continue;let c=n[t+Math.abs(r)-1];r<0&&(c=c.negate()),a=a.add(c)}return a},getPrecomputes(e,t,r){let n=u.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&u.set(t,r(n))),n},wNAFCached(e,t,r){const n=d(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)},wNAFCachedUnsafe(e,t,r,n){const i=d(e);return 1===i?this.unsafeLadder(e,t,n):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),t,n)},setWindowSize(e,r){c(r,t),h.set(e,r),u.delete(e)}}}function f(e,t,r,n){if(function(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach(((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)}))}(r,e),function(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach(((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)}))}(n,t),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const s=e.ZERO,o=(0,i.dJ)(BigInt(r.length)),a=o>12?o-3:o>4?o-2:o?2:1,c=(1<<a)-1,l=new Array(c+1).fill(s);let u=s;for(let e=Math.floor((t.BITS-1)/a)*a;e>=0;e-=a){l.fill(s);for(let t=0;t<n.length;t++){const i=n[t],s=Number(i>>BigInt(e)&BigInt(c));l[s]=l[s].add(r[t])}let t=s;for(let e=l.length-1,r=s;e>0;e--)r=r.add(l[e]),t=t.add(r);if(u=u.add(t),0!==e)for(let e=0;e<a;e++)u=u.double()}return u}function g(e){return(0,n.jr)(e.Fp),(0,i.Q5)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,n.LH)(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}},793:e=>{function t(e){try{return JSON.stringify(e)}catch(e){return'"[Circular]"'}}e.exports=function(e,r,n){var i=n&&n.stringify||t;if("object"==typeof e&&null!==e){var s=r.length+1;if(1===s)return e;var o=new Array(s);o[0]=i(e);for(var a=1;a<s;a++)o[a]=i(r[a]);return o.join(" ")}if("string"!=typeof e)return e;var c=r.length;if(0===c)return e;for(var l="",u=0,h=-1,d=e&&e.length||0,p=0;p<d;){if(37===e.charCodeAt(p)&&p+1<d){switch(h=h>-1?h:0,e.charCodeAt(p+1)){case 100:case 102:if(u>=c)break;if(null==r[u])break;h<p&&(l+=e.slice(h,p)),l+=Number(r[u]),h=p+2,p++;break;case 105:if(u>=c)break;if(null==r[u])break;h<p&&(l+=e.slice(h,p)),l+=Math.floor(Number(r[u])),h=p+2,p++;break;case 79:case 111:case 106:if(u>=c)break;if(void 0===r[u])break;h<p&&(l+=e.slice(h,p));var f=typeof r[u];if("string"===f){l+="'"+r[u]+"'",h=p+2,p++;break}if("function"===f){l+=r[u].name||"<anonymous>",h=p+2,p++;break}l+=i(r[u]),h=p+2,p++;break;case 115:if(u>=c)break;h<p&&(l+=e.slice(h,p)),l+=String(r[u]),h=p+2,p++;break;case 37:h<p&&(l+=e.slice(h,p)),l+="%",h=p+2,p++,u--}++u}++p}return-1===h?e:(h<d&&(l+=e.slice(h)),l)}},842:(e,t,r)=>{r.d(t,{mN:()=>I,AH:()=>l,W3:()=>A,Ec:()=>S,iz:()=>c});const n=globalThis,i=n.ShadowRoot&&(void 0===n.ShadyCSS||n.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,s=Symbol(),o=new WeakMap;class a{constructor(e,t,r){if(this._$cssResult$=!0,r!==s)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(i&&void 0===e){const r=void 0!==t&&1===t.length;r&&(e=o.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&o.set(t,e))}return e}toString(){return this.cssText}}const c=e=>new a("string"==typeof e?e:e+"",void 0,s),l=(e,...t)=>{const r=1===e.length?e[0]:t.reduce(((t,r,n)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(r)+e[n+1]),e[0]);return new a(r,e,s)},u=(e,t)=>{if(i)e.adoptedStyleSheets=t.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet));else for(const r of t){const t=document.createElement("style"),i=n.litNonce;void 0!==i&&t.setAttribute("nonce",i),t.textContent=r.cssText,e.appendChild(t)}},h=i?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const r of e.cssRules)t+=r.cssText;return c(t)})(e):e,{is:d,defineProperty:p,getOwnPropertyDescriptor:f,getOwnPropertyNames:g,getOwnPropertySymbols:m,getPrototypeOf:y}=Object,w=globalThis,b=w.trustedTypes,v=b?b.emptyScript:"",E=w.reactiveElementPolyfillSupport,_=(e,t)=>e,A={toAttribute(e,t){switch(t){case Boolean:e=e?v:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let r=e;switch(t){case Boolean:r=null!==e;break;case Number:r=null===e?null:Number(e);break;case Object:case Array:try{r=JSON.parse(e)}catch(e){r=null}}return r}},S=(e,t)=>!d(e,t),C={attribute:!0,type:String,converter:A,reflect:!1,useDefault:!1,hasChanged:S};Symbol.metadata??=Symbol("metadata"),w.litPropertyMetadata??=new WeakMap;class I extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=C){if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){const r=Symbol(),n=this.getPropertyDescriptor(e,r,t);void 0!==n&&p(this.prototype,e,n)}}static getPropertyDescriptor(e,t,r){const{get:n,set:i}=f(this.prototype,e)??{get(){return this[t]},set(e){this[t]=e}};return{get:n,set(t){const s=n?.call(this);i?.call(this,t),this.requestUpdate(e,s,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??C}static _$Ei(){if(this.hasOwnProperty(_("elementProperties")))return;const e=y(this);e.finalize(),void 0!==e.l&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(_("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(_("properties"))){const e=this.properties,t=[...g(e),...m(e)];for(const r of t)this.createProperty(r,e[r])}const e=this[Symbol.metadata];if(null!==e){const t=litPropertyMetadata.get(e);if(void 0!==t)for(const[e,r]of t)this.elementProperties.set(e,r)}this._$Eh=new Map;for(const[e,t]of this.elementProperties){const r=this._$Eu(e,t);void 0!==r&&this._$Eh.set(r,e)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const e of r)t.unshift(h(e))}else void 0!==e&&t.push(h(e));return t}static _$Eu(e,t){const r=t.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof e?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((e=>e(this)))}addController(e){(this._$EO??=new Set).add(e),void 0!==this.renderRoot&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,t=this.constructor.elementProperties;for(const r of t.keys())this.hasOwnProperty(r)&&(e.set(r,this[r]),delete this[r]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return u(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((e=>e.hostConnected?.()))}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach((e=>e.hostDisconnected?.()))}attributeChangedCallback(e,t,r){this._$AK(e,r)}_$ET(e,t){const r=this.constructor.elementProperties.get(e),n=this.constructor._$Eu(e,r);if(void 0!==n&&!0===r.reflect){const i=(void 0!==r.converter?.toAttribute?r.converter:A).toAttribute(t,r.type);this._$Em=e,null==i?this.removeAttribute(n):this.setAttribute(n,i),this._$Em=null}}_$AK(e,t){const r=this.constructor,n=r._$Eh.get(e);if(void 0!==n&&this._$Em!==n){const e=r.getPropertyOptions(n),i="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==e.converter?.fromAttribute?e.converter:A;this._$Em=n,this[n]=i.fromAttribute(t,e.type)??this._$Ej?.get(n)??null,this._$Em=null}}requestUpdate(e,t,r){if(void 0!==e){const n=this.constructor,i=this[e];if(r??=n.getPropertyOptions(e),!((r.hasChanged??S)(i,t)||r.useDefault&&r.reflect&&i===this._$Ej?.get(e)&&!this.hasAttribute(n._$Eu(e,r))))return;this.C(e,t,r)}!1===this.isUpdatePending&&(this._$ES=this._$EP())}C(e,t,{useDefault:r,reflect:n,wrapped:i},s){r&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,s??t??this[e]),!0!==i||void 0!==s)||(this._$AL.has(e)||(this.hasUpdated||r||(t=void 0),this._$AL.set(e,t)),!0===n&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[e,t]of this._$Ep)this[e]=t;this._$Ep=void 0}const e=this.constructor.elementProperties;if(e.size>0)for(const[t,r]of e){const{wrapped:e}=r,n=this[t];!0!==e||this._$AL.has(t)||void 0===n||this.C(t,void 0,r,n)}}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),this._$EO?.forEach((e=>e.hostUpdate?.())),this.update(t)):this._$EM()}catch(t){throw e=!1,this._$EM(),t}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$EO?.forEach((e=>e.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach((e=>this._$ET(e,this[e]))),this._$EM()}updated(e){}firstUpdated(e){}}I.elementStyles=[],I.shadowRootOptions={mode:"open"},I[_("elementProperties")]=new Map,I[_("finalized")]=new Map,E?.({ReactiveElement:I}),(w.reactiveElementVersions??=[]).push("2.1.0")},1089:(e,t)=>{function r(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product}function n(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowser=t.isNode=t.isReactNative=void 0,t.isReactNative=r,t.isNode=n,t.isBrowser=function(){return!r()&&!n()}},1122:(e,t,r)=>{r.d(t,{U:()=>g}),r(7305);var n=r(4376),i=r(152),s=r(3450),o=r(7388),a=r(9177),c=r(9088),l=r(184),u=r(6396),h=r(2733),d=r(8508),p=r(1871),f=r(6742);const g={getSIWX:()=>h.H.state.siwx,async initializeIfEnabled(){const e=h.H.state.siwx,t=o.W.getActiveCaipAddress();if(!e||!t)return;const[r,n,i]=t.split(":");if(o.W.checkIfSupportedNetwork(r))try{if((await e.getSessions(`${r}:${n}`,i)).length)return;await u.W.open({view:"SIWXSignMessage"})}catch(e){console.error("SIWXUtil:initializeIfEnabled",e),l.E.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:this.getSIWXEventProperties()}),await(a.x._getClient()?.disconnect().catch(console.error)),d.I.reset("Connect"),p.P.showError("A problem occurred while trying initialize authentication")}},async requestSignMessage(){const e=h.H.state.siwx,t=f.w.getPlainAddress(o.W.getActiveCaipAddress()),r=o.W.getActiveCaipNetwork(),i=a.x._getClient();if(!e)throw new Error("SIWX is not enabled");if(!t)throw new Error("No ActiveCaipAddress found");if(!r)throw new Error("No ActiveCaipNetwork or client found");if(!i)throw new Error("No ConnectionController client found");try{const s=await e.createMessage({chainId:r.caipNetworkId,accountAddress:t}),o=s.toString();c.a.getConnectorId(r.chainNamespace)===n.o.CONNECTOR_ID.AUTH&&d.I.pushTransactionStack({view:null,goBack:!1,replace:!0});const a=await i.signMessage(o);await e.addSession({data:s,message:o,signature:a}),u.W.close(),l.E.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:this.getSIWXEventProperties()})}catch(e){const t=this.getSIWXEventProperties();u.W.state.open&&"ApproveTransaction"!==d.I.state.view||await u.W.open({view:"SIWXSignMessage"}),t.isSmartAccount?p.P.showError("This application might not support Smart Accounts"):p.P.showError("Signature declined"),l.E.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:t}),console.error("SWIXUtil:requestSignMessage",e)}},async cancelSignMessage(){try{const e=this.getSIWX(),t=e?.getRequired?.();t?await a.x.disconnect():u.W.close(),d.I.reset("Connect"),l.E.sendEvent({event:"CLICK_CANCEL_SIWX",type:"track",properties:this.getSIWXEventProperties()})}catch(e){console.error("SIWXUtil:cancelSignMessage",e)}},async getSessions(){const e=h.H.state.siwx,t=f.w.getPlainAddress(o.W.getActiveCaipAddress()),r=o.W.getActiveCaipNetwork();return e&&t&&r?e.getSessions(r.caipNetworkId,t):[]},async isSIWXCloseDisabled(){const e=this.getSIWX();if(e){const t="ApproveTransaction"===d.I.state.view,r="SIWXSignMessage"===d.I.state.view;if(t||r)return e.getRequired?.()&&0===(await this.getSessions()).length}return!1},async universalProviderAuthenticate({universalProvider:e,chains:t,methods:r}){const n=g.getSIWX(),i=new Set(t.map((e=>e.split(":")[0])));if(!n||1!==i.size||!i.has("eip155"))return!1;const a=await n.createMessage({chainId:o.W.getActiveCaipNetwork()?.caipNetworkId||"",accountAddress:""}),c=await e.authenticate({nonce:a.nonce,domain:a.domain,uri:a.uri,exp:a.expirationTime,iat:a.issuedAt,nbf:a.notBefore,requestId:a.requestId,version:a.version,resources:a.resources,statement:a.statement,chainId:a.chainId,methods:r,chains:[a.chainId,...t.filter((e=>e!==a.chainId))]});if(p.P.showLoading("Authenticating...",{autoClose:!1}),s.U.setConnectedWalletInfo({...c.session.peer.metadata,name:c.session.peer.metadata.name,icon:c.session.peer.metadata.icons?.[0],type:"WALLET_CONNECT"},Array.from(i)[0]),c?.auths?.length){const t=c.auths.map((t=>{const r=e.client.formatAuthMessage({request:t.p,iss:t.p.iss});return{data:{...t.p,accountAddress:t.p.iss.split(":").slice(-1).join(""),chainId:t.p.iss.split(":").slice(2,4).join(":"),uri:t.p.aud,version:t.p.version||a.version,expirationTime:t.p.exp,issuedAt:t.p.iat,notBefore:t.p.nbf},message:r,signature:t.s.s,cacao:t}}));try{await n.setSessions(t),l.E.sendEvent({type:"track",event:"SIWX_AUTH_SUCCESS",properties:g.getSIWXEventProperties()})}catch(t){throw console.error("SIWX:universalProviderAuth - failed to set sessions",t),l.E.sendEvent({type:"track",event:"SIWX_AUTH_ERROR",properties:g.getSIWXEventProperties()}),await e.disconnect().catch(console.error),t}finally{p.P.hide()}}return!0},getSIWXEventProperties(){const e=o.W.state.activeChain;return{network:o.W.state.activeCaipNetwork?.caipNetworkId||"",isSmartAccount:s.U.state.preferredAccountTypes?.[e]===i.Vl.ACCOUNT_TYPES.SMART_ACCOUNT}},async clearSessions(){const e=this.getSIWX();e&&await e.setSessions([])}}},1222:(e,t,r)=>{var n="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==r.g&&r.g,i=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();!function(e){!function(t){var n=void 0!==e&&e||"undefined"!=typeof self&&self||void 0!==r.g&&r.g||{},i="URLSearchParams"in n,s="Symbol"in n&&"iterator"in Symbol,o="FileReader"in n&&"Blob"in n&&function(){try{return new Blob,!0}catch(e){return!1}}(),a="FormData"in n,c="ArrayBuffer"in n;if(c)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(e){return e&&l.indexOf(Object.prototype.toString.call(e))>-1};function h(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function d(e){return"string"!=typeof e&&(e=String(e)),e}function p(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return s&&(t[Symbol.iterator]=function(){return t}),t}function f(e){this.map={},e instanceof f?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){if(2!=e.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+e.length);this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function g(e){if(!e._noBody)return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function m(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function y(e){var t=new FileReader,r=m(t);return t.readAsArrayBuffer(e),r}function w(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:o&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:a&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:i&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():c&&o&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=w(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c&&(ArrayBuffer.prototype.isPrototypeOf(e)||u(e))?this._bodyArrayBuffer=w(e):this._bodyText=e=Object.prototype.toString.call(e):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var e=g(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer)return g(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer));if(o)return this.blob().then(y);throw new Error("could not read as ArrayBuffer")},this.text=function(){var e,t,r,n,i,s=g(this);if(s)return s;if(this._bodyBlob)return e=this._bodyBlob,r=m(t=new FileReader),i=(n=/charset=([A-Za-z0-9_-]+)/.exec(e.type))?n[1]:"utf-8",t.readAsText(e,i),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}f.prototype.append=function(e,t){e=h(e),t=d(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},f.prototype.delete=function(e){delete this.map[h(e)]},f.prototype.get=function(e){return e=h(e),this.has(e)?this.map[e]:null},f.prototype.has=function(e){return this.map.hasOwnProperty(h(e))},f.prototype.set=function(e,t){this.map[h(e)]=d(t)},f.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},f.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),p(e)},f.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),p(e)},f.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),p(e)},s&&(f.prototype[Symbol.iterator]=f.prototype.entries);var v=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function E(e,t){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,i,s=(t=t||{}).body;if(e instanceof E){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new f(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,s||null==e._bodyInit||(s=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new f(t.headers)),this.method=(i=(r=t.method||this.method||"GET").toUpperCase(),v.indexOf(i)>-1?i:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal||function(){if("AbortController"in n)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&s)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(s),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var o=/([?&])_=[^&]*/;o.test(this.url)?this.url=this.url.replace(o,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function _(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}})),t}function A(e,t){if(!(this instanceof A))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new f(t.headers),this.url=t.url||"",this._initBody(e)}E.prototype.clone=function(){return new E(this,{body:this._bodyInit})},b.call(E.prototype),b.call(A.prototype),A.prototype.clone=function(){return new A(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},A.error=function(){var e=new A(null,{status:200,statusText:""});return e.ok=!1,e.status=0,e.type="error",e};var S=[301,302,303,307,308];A.redirect=function(e,t){if(-1===S.indexOf(t))throw new RangeError("Invalid status code");return new A(null,{status:t,headers:{location:e}})},t.DOMException=n.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function C(e,r){return new Promise((function(i,s){var a=new E(e,r);if(a.signal&&a.signal.aborted)return s(new t.DOMException("Aborted","AbortError"));var l=new XMLHttpRequest;function u(){l.abort()}if(l.onload=function(){var e,t,r={statusText:l.statusText,headers:(e=l.getAllResponseHeaders()||"",t=new f,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();try{t.append(n,i)}catch(e){console.warn("Response "+e.message)}}})),t)};0===a.url.indexOf("file://")&&(l.status<200||l.status>599)?r.status=200:r.status=l.status,r.url="responseURL"in l?l.responseURL:r.headers.get("X-Request-URL");var n="response"in l?l.response:l.responseText;setTimeout((function(){i(new A(n,r))}),0)},l.onerror=function(){setTimeout((function(){s(new TypeError("Network request failed"))}),0)},l.ontimeout=function(){setTimeout((function(){s(new TypeError("Network request timed out"))}),0)},l.onabort=function(){setTimeout((function(){s(new t.DOMException("Aborted","AbortError"))}),0)},l.open(a.method,function(e){try{return""===e&&n.location.href?n.location.href:e}catch(t){return e}}(a.url),!0),"include"===a.credentials?l.withCredentials=!0:"omit"===a.credentials&&(l.withCredentials=!1),"responseType"in l&&(o?l.responseType="blob":c&&(l.responseType="arraybuffer")),r&&"object"==typeof r.headers&&!(r.headers instanceof f||n.Headers&&r.headers instanceof n.Headers)){var p=[];Object.getOwnPropertyNames(r.headers).forEach((function(e){p.push(h(e)),l.setRequestHeader(e,d(r.headers[e]))})),a.headers.forEach((function(e,t){-1===p.indexOf(t)&&l.setRequestHeader(t,e)}))}else a.headers.forEach((function(e,t){l.setRequestHeader(t,e)}));a.signal&&(a.signal.addEventListener("abort",u),l.onreadystatechange=function(){4===l.readyState&&a.signal.removeEventListener("abort",u)}),l.send(void 0===a._bodyInit?null:a._bodyInit)}))}C.polyfill=!0,n.fetch||(n.fetch=C,n.Headers=f,n.Request=E,n.Response=A),t.Headers=f,t.Request=E,t.Response=A,t.fetch=C,Object.defineProperty(t,"__esModule",{value:!0})}({})}(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var s=n.fetch?n:i;(t=s.fetch).default=s.fetch,t.fetch=s.fetch,t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response,e.exports=t},1307:(e,t,r)=>{r.d(t,{A:()=>n});const n=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");const t=new Uint8Array(256);for(let e=0;e<t.length;e++)t[e]=255;for(let r=0;r<e.length;r++){const n=e.charAt(r),i=n.charCodeAt(0);if(255!==t[i])throw new TypeError(n+" is ambiguous");t[i]=r}const r=e.length,n=e.charAt(0),i=Math.log(r)/Math.log(256),s=Math.log(256)/Math.log(r);function o(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;let s=0,o=0,a=0;for(;e[s]===n;)o++,s++;const c=(e.length-s)*i+1>>>0,l=new Uint8Array(c);for(;s<e.length;){const n=e.charCodeAt(s);if(n>255)return;let i=t[n];if(255===i)return;let o=0;for(let e=c-1;(0!==i||o<a)&&-1!==e;e--,o++)i+=r*l[e]>>>0,l[e]=i%256>>>0,i=i/256>>>0;if(0!==i)throw new Error("Non-zero carry");a=o,s++}let u=c-a;for(;u!==c&&0===l[u];)u++;const h=new Uint8Array(o+(c-u));let d=o;for(;u!==c;)h[d++]=l[u++];return h}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";let i=0,o=0,a=0;const c=t.length;for(;a!==c&&0===t[a];)a++,i++;const l=(c-a)*s+1>>>0,u=new Uint8Array(l);for(;a!==c;){let e=t[a],n=0;for(let t=l-1;(0!==e||n<o)&&-1!==t;t--,n++)e+=256*u[t]>>>0,u[t]=e%r>>>0,e=e/r>>>0;if(0!==e)throw new Error("Non-zero carry");o=n,a++}let h=l-o;for(;h!==l&&0===u[h];)h++;let d=n.repeat(i);for(;h<l;++h)d+=e.charAt(u[h]);return d},decodeUnsafe:o,decode:function(e){const t=o(e);if(t)return t;throw new Error("Non-base"+r+" character")}}}("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},1462:(e,t,r)=>{var n=r(2861).Buffer;e.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==t[o])throw new TypeError(s+" is ambiguous");t[o]=i}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return n.alloc(0);for(var r=0,i=0,s=0;e[r]===c;)i++,r++;for(var o=(e.length-r)*l+1>>>0,u=new Uint8Array(o);r<e.length;){var h=e.charCodeAt(r);if(h>255)return;var d=t[h];if(255===d)return;for(var p=0,f=o-1;(0!==d||p<s)&&-1!==f;f--,p++)d+=a*u[f]>>>0,u[f]=d%256>>>0,d=d/256>>>0;if(0!==d)throw new Error("Non-zero carry");s=p,r++}for(var g=o-s;g!==o&&0===u[g];)g++;var m=n.allocUnsafe(i+(o-g));m.fill(0,0,i);for(var y=i;g!==o;)m[y++]=u[g++];return m}return{encode:function(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=n.from(t)),!n.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";for(var r=0,i=0,s=0,o=t.length;s!==o&&0===t[s];)s++,r++;for(var l=(o-s)*u+1>>>0,h=new Uint8Array(l);s!==o;){for(var d=t[s],p=0,f=l-1;(0!==d||p<i)&&-1!==f;f--,p++)d+=256*h[f]>>>0,h[f]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");i=p,s++}for(var g=l-i;g!==l&&0===h[g];)g++;for(var m=c.repeat(r);g<l;++g)m+=e.charAt(h[g]);return m},decodeUnsafe:h,decode:function(e){var t=h(e);if(t)return t;throw new Error("Non-base"+a+" character")}}}},1482:(e,t,r)=>{r.d(t,{o:()=>n});const n={ACCOUNT_TABS:[{label:"Tokens"},{label:"NFTs"},{label:"Activity"}],SECURE_SITE_ORIGIN:("undefined"!=typeof process&&void 0!==process.env?process.env.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",VIEW_DIRECTION:{Next:"next",Prev:"prev"},DEFAULT_CONNECT_METHOD_ORDER:["email","social","wallet"],ANIMATION_DURATIONS:{HeaderText:120,ModalHeight:150,ViewTransition:150}}},1591:e=>{e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},1655:(e,t,r)=>{r.d(t,{h:()=>a});var n=r(9073),i=r(4707),s=r(2733);const o=(0,n.BX)({message:"",variant:"info",open:!1}),a={state:o,subscribeKey:(e,t)=>(0,i.u$)(o,e,t),open(e,t){const{debug:r}=s.H.state,{shortMessage:n,longMessage:i}=e;r&&(o.message=n,o.variant=t,o.open=!0),i&&console.error("function"==typeof i?i():i)},close(){o.open=!1,o.message="",o.variant="info"}}},1861:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_YEAR=t.FOUR_WEEKS=t.THREE_WEEKS=t.TWO_WEEKS=t.ONE_WEEK=t.THIRTY_DAYS=t.SEVEN_DAYS=t.FIVE_DAYS=t.THREE_DAYS=t.ONE_DAY=t.TWENTY_FOUR_HOURS=t.TWELVE_HOURS=t.SIX_HOURS=t.THREE_HOURS=t.ONE_HOUR=t.SIXTY_MINUTES=t.THIRTY_MINUTES=t.TEN_MINUTES=t.FIVE_MINUTES=t.ONE_MINUTE=t.SIXTY_SECONDS=t.THIRTY_SECONDS=t.TEN_SECONDS=t.FIVE_SECONDS=t.ONE_SECOND=void 0,t.ONE_SECOND=1,t.FIVE_SECONDS=5,t.TEN_SECONDS=10,t.THIRTY_SECONDS=30,t.SIXTY_SECONDS=60,t.ONE_MINUTE=t.SIXTY_SECONDS,t.FIVE_MINUTES=5*t.ONE_MINUTE,t.TEN_MINUTES=10*t.ONE_MINUTE,t.THIRTY_MINUTES=30*t.ONE_MINUTE,t.SIXTY_MINUTES=60*t.ONE_MINUTE,t.ONE_HOUR=t.SIXTY_MINUTES,t.THREE_HOURS=3*t.ONE_HOUR,t.SIX_HOURS=6*t.ONE_HOUR,t.TWELVE_HOURS=12*t.ONE_HOUR,t.TWENTY_FOUR_HOURS=24*t.ONE_HOUR,t.ONE_DAY=t.TWENTY_FOUR_HOURS,t.THREE_DAYS=3*t.ONE_DAY,t.FIVE_DAYS=5*t.ONE_DAY,t.SEVEN_DAYS=7*t.ONE_DAY,t.THIRTY_DAYS=30*t.ONE_DAY,t.ONE_WEEK=t.SEVEN_DAYS,t.TWO_WEEKS=2*t.ONE_WEEK,t.THREE_WEEKS=3*t.ONE_WEEK,t.FOUR_WEEKS=4*t.ONE_WEEK,t.ONE_YEAR=365*t.ONE_DAY},1871:(e,t,r)=>{r.d(t,{P:()=>c});var n=r(9073),i=r(4707),s=r(6742);const o=Object.freeze({message:"",variant:"success",svg:void 0,open:!1,autoClose:!0}),a=(0,n.BX)({...o}),c={state:a,subscribeKey:(e,t)=>(0,i.u$)(a,e,t),showLoading(e,t={}){this._showMessage({message:e,variant:"loading",...t})},showSuccess(e){this._showMessage({message:e,variant:"success"})},showSvg(e,t){this._showMessage({message:e,svg:t})},showError(e){const t=s.w.parseError(e);this._showMessage({message:t,variant:"error"})},hide(){a.message=o.message,a.variant=o.variant,a.svg=o.svg,a.open=o.open,a.autoClose=o.autoClose},_showMessage({message:e,svg:t,variant:r="success",autoClose:n=o.autoClose}){a.open?(a.open=!1,setTimeout((()=>{a.message=e,a.variant=r,a.svg=t,a.open=!0,a.autoClose=n}),150)):(a.message=e,a.variant=r,a.svg=t,a.open=!0,a.autoClose=n)}}},2010:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),r(5215).__exportStar(r(3093),t)},2531:(e,t,r)=>{r.d(t,{Vw:()=>d,Fc:()=>l,Id:()=>h,O8:()=>o,qv:()=>c,po:()=>f,Ow:()=>a,ZJ:()=>u,DH:()=>s,ld:()=>p});const n="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;var i=r(9190);function s(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function o(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function a(e,t){return e<<32-t|e>>>t}const c=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])();function l(e){for(let r=0;r<e.length;r++)e[r]=(t=e[r])<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;var t}function u(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),(0,i.DO)(e),e}function h(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];(0,i.DO)(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}class d{clone(){return this._cloneInto()}}function p(e){const t=t=>e().update(u(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function f(e=32){if(n&&"function"==typeof n.getRandomValues)return n.getRandomValues(new Uint8Array(e));if(n&&"function"==typeof n.randomBytes)return n.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}},2618:(e,t,r)=>{r.d(t,{WF:()=>o,AH:()=>n.AH,qy:()=>i.qy,JW:()=>i.JW,iz:()=>n.iz});var n=r(842),i=r(6752);const s=globalThis;class o extends n.mN{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=(0,i.XX)(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return i.c0}}o._$litElement$=!0,o.finalized=!0,s.litElementHydrateSupport?.({LitElement:o});const a=s.litElementPolyfillSupport;a?.({LitElement:o}),(s.litElementVersions??=[]).push("4.2.0")},2733:(e,t,r)=>{r.d(t,{H:()=>l});var n=r(9073),i=r(4707),s=r(2944),o=r(6742);const a={getFeatureValue(e,t){const r=t?.[e];return void 0===r?s.oU.DEFAULT_FEATURES[e]:r},filterSocialsByPlatform(e){if(!e||!e.length)return e;if(o.w.isTelegram()){if(o.w.isIos())return e.filter((e=>"google"!==e));if(o.w.isMac())return e.filter((e=>"x"!==e));if(o.w.isAndroid())return e.filter((e=>!["facebook","x"].includes(e)))}return e}},c=(0,n.BX)({features:s.oU.DEFAULT_FEATURES,projectId:"",sdkType:"appkit",sdkVersion:"html-wagmi-undefined",defaultAccountTypes:{solana:"eoa",bip122:"payment",polkadot:"eoa",eip155:"smartAccount"},enableNetworkSwitch:!0}),l={state:c,subscribeKey:(e,t)=>(0,i.u$)(c,e,t),setOptions(e){Object.assign(c,e)},setFeatures(e){if(!e)return;c.features||(c.features=s.oU.DEFAULT_FEATURES);const t={...c.features,...e};c.features=t,c.features.socials&&(c.features.socials=a.filterSocialsByPlatform(c.features.socials))},setProjectId(e){c.projectId=e},setCustomRpcUrls(e){c.customRpcUrls=e},setAllWallets(e){c.allWallets=e},setIncludeWalletIds(e){c.includeWalletIds=e},setExcludeWalletIds(e){c.excludeWalletIds=e},setFeaturedWalletIds(e){c.featuredWalletIds=e},setTokens(e){c.tokens=e},setTermsConditionsUrl(e){c.termsConditionsUrl=e},setPrivacyPolicyUrl(e){c.privacyPolicyUrl=e},setCustomWallets(e){c.customWallets=e},setIsSiweEnabled(e){c.isSiweEnabled=e},setIsUniversalProvider(e){c.isUniversalProvider=e},setSdkVersion(e){c.sdkVersion=e},setMetadata(e){c.metadata=e},setDisableAppend(e){c.disableAppend=e},setEIP6963Enabled(e){c.enableEIP6963=e},setDebug(e){c.debug=e},setEnableWalletConnect(e){c.enableWalletConnect=e},setEnableWalletGuide(e){c.enableWalletGuide=e},setEnableAuthLogger(e){c.enableAuthLogger=e},setEnableWallets(e){c.enableWallets=e},setHasMultipleAddresses(e){c.hasMultipleAddresses=e},setSIWX(e){c.siwx=e},setConnectMethodsOrder(e){c.features={...c.features,connectMethodsOrder:e}},setWalletFeaturesOrder(e){c.features={...c.features,walletFeaturesOrder:e}},setSocialsOrder(e){c.features={...c.features,socials:e}},setCollapseWallets(e){c.features={...c.features,collapseWallets:e}},setEnableEmbedded(e){c.enableEmbedded=e},setAllowUnsupportedChain(e){c.allowUnsupportedChain=e},setManualWCControl(e){c.manualWCControl=e},setEnableNetworkSwitch(e){c.enableNetworkSwitch=e},setDefaultAccountTypes(e={}){Object.entries(e).forEach((([e,t])=>{t&&(c.defaultAccountTypes[e]=t)}))},setUniversalProviderConfigOverride(e){c.universalProviderConfigOverride=e},getUniversalProviderConfigOverride:()=>c.universalProviderConfigOverride,getSnapshot:()=>(0,n.P9)(c)}},2755:function(e,t,r){var n=r(8287).Buffer,i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__decorate||function(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o},a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.hasOwnProperty.call(e,r)&&i(t,e,r);return s(t,e),t},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeUnchecked=t.deserialize=t.serialize=t.BinaryReader=t.BinaryWriter=t.BorshError=t.baseDecode=t.baseEncode=void 0;const l=c(r(9404)),u=c(r(4989)),h=a(r(4281)),d=new("function"!=typeof TextDecoder?h.TextDecoder:TextDecoder)("utf-8",{fatal:!0});t.baseEncode=function(e){return"string"==typeof e&&(e=n.from(e,"utf8")),u.default.encode(n.from(e))},t.baseDecode=function(e){return n.from(u.default.decode(e))};const p=1024;class f extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}t.BorshError=f;class g{constructor(){this.buf=n.alloc(p),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=n.concat([this.buf,n.alloc(p)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(n.from(new l.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(n.from(new l.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(n.from(new l.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(n.from(new l.default(e).toArray("le",64)))}writeBuffer(e){this.buf=n.concat([n.from(this.buf.subarray(0,this.length)),e,n.alloc(p)]),this.length+=e.length}writeString(e){this.maybeResize();const t=n.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}writeFixedArray(e){this.writeBuffer(n.from(e))}writeArray(e,t){this.maybeResize(),this.writeU32(e.length);for(const r of e)this.maybeResize(),t(r)}toArray(){return this.buf.subarray(0,this.length)}}function m(e,t,r){const n=r.value;r.value=function(...e){try{return n.apply(this,e)}catch(e){if(e instanceof RangeError){const t=e.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(t)>=0)throw new f("Reached the end of buffer when deserializing")}throw e}}}t.BinaryWriter=g;class y{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new l.default(e,"le")}readU128(){const e=this.readBuffer(16);return new l.default(e,"le")}readU256(){const e=this.readBuffer(32);return new l.default(e,"le")}readU512(){const e=this.readBuffer(64);return new l.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new f(`Expected buffer length ${e} isn't within bounds`);const t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}readString(){const e=this.readU32(),t=this.readBuffer(e);try{return d.decode(t)}catch(e){throw new f(`Error decoding UTF-8 string: ${e}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const t=this.readU32(),r=Array();for(let n=0;n<t;++n)r.push(e());return r}}function w(e){return e.charAt(0).toUpperCase()+e.slice(1)}function b(e,t,r,n,i){try{if("string"==typeof n)i[`write${w(n)}`](r);else if(n instanceof Array)if("number"==typeof n[0]){if(r.length!==n[0])throw new f(`Expecting byte array of length ${n[0]}, but got ${r.length} bytes`);i.writeFixedArray(r)}else if(2===n.length&&"number"==typeof n[1]){if(r.length!==n[1])throw new f(`Expecting byte array of length ${n[1]}, but got ${r.length} bytes`);for(let t=0;t<n[1];t++)b(e,null,r[t],n[0],i)}else i.writeArray(r,(r=>{b(e,t,r,n[0],i)}));else if(void 0!==n.kind)switch(n.kind){case"option":null==r?i.writeU8(0):(i.writeU8(1),b(e,t,r,n.type,i));break;case"map":i.writeU32(r.size),r.forEach(((r,s)=>{b(e,t,s,n.key,i),b(e,t,r,n.value,i)}));break;default:throw new f(`FieldType ${n} unrecognized`)}else v(e,r,i)}catch(e){throw e instanceof f&&e.addToFieldPath(t),e}}function v(e,t,r){if("function"==typeof t.borshSerialize)return void t.borshSerialize(r);const n=e.get(t.constructor);if(!n)throw new f(`Class ${t.constructor.name} is missing in schema`);if("struct"===n.kind)n.fields.map((([n,i])=>{b(e,n,t[n],i,r)}));else{if("enum"!==n.kind)throw new f(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`);{const i=t[n.field];for(let s=0;s<n.values.length;++s){const[o,a]=n.values[s];if(o===i){r.writeU8(s),b(e,o,t[o],a,r);break}}}}}function E(e,t,r,n){try{if("string"==typeof r)return n[`read${w(r)}`]();if(r instanceof Array){if("number"==typeof r[0])return n.readFixedArray(r[0]);if("number"==typeof r[1]){const t=[];for(let i=0;i<r[1];i++)t.push(E(e,null,r[0],n));return t}return n.readArray((()=>E(e,t,r[0],n)))}if("option"===r.kind)return n.readU8()?E(e,t,r.type,n):void 0;if("map"===r.kind){let i=new Map;const s=n.readU32();for(let o=0;o<s;o++){const s=E(e,t,r.key,n),o=E(e,t,r.value,n);i.set(s,o)}return i}return _(e,r,n)}catch(e){throw e instanceof f&&e.addToFieldPath(t),e}}function _(e,t,r){if("function"==typeof t.borshDeserialize)return t.borshDeserialize(r);const n=e.get(t);if(!n)throw new f(`Class ${t.name} is missing in schema`);if("struct"===n.kind){const n={};for(const[i,s]of e.get(t).fields)n[i]=E(e,i,s,r);return new t(n)}if("enum"===n.kind){const i=r.readU8();if(i>=n.values.length)throw new f(`Enum index: ${i} is out of range`);const[s,o]=n.values[i],a=E(e,s,o,r);return new t({[s]:a})}throw new f(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}o([m],y.prototype,"readU8",null),o([m],y.prototype,"readU16",null),o([m],y.prototype,"readU32",null),o([m],y.prototype,"readU64",null),o([m],y.prototype,"readU128",null),o([m],y.prototype,"readU256",null),o([m],y.prototype,"readU512",null),o([m],y.prototype,"readString",null),o([m],y.prototype,"readFixedArray",null),o([m],y.prototype,"readArray",null),t.BinaryReader=y,t.serialize=function(e,t,r=g){const n=new r;return v(e,t,n),n.toArray()},t.deserialize=function(e,t,r,n=y){const i=new n(r),s=_(e,t,i);if(i.offset<r.length)throw new f(`Unexpected ${r.length-i.offset} bytes after deserialized data`);return s},t.deserializeUnchecked=function(e,t,r,n=y){return _(e,t,new n(r))}},2861:(e,t,r)=>{var n=r(8287),i=n.Buffer;function s(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(s(n,t),t.Buffer=o),o.prototype=Object.create(i.prototype),s(i,o),o.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=i(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},2939:(e,t)=>{function r(e){let t;return"undefined"!=typeof window&&void 0!==window[e]&&(t=window[e]),t}function n(e){const t=r(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.getLocalStorage=t.getLocalStorageOrThrow=t.getCrypto=t.getCryptoOrThrow=t.getLocation=t.getLocationOrThrow=t.getNavigator=t.getNavigatorOrThrow=t.getDocument=t.getDocumentOrThrow=t.getFromWindowOrThrow=t.getFromWindow=void 0,t.getFromWindow=r,t.getFromWindowOrThrow=n,t.getDocumentOrThrow=function(){return n("document")},t.getDocument=function(){return r("document")},t.getNavigatorOrThrow=function(){return n("navigator")},t.getNavigator=function(){return r("navigator")},t.getLocationOrThrow=function(){return n("location")},t.getLocation=function(){return r("location")},t.getCryptoOrThrow=function(){return n("crypto")},t.getCrypto=function(){return r("crypto")},t.getLocalStorageOrThrow=function(){return n("localStorage")},t.getLocalStorage=function(){return r("localStorage")}},2944:(e,t,r)=>{r.d(t,{Db:()=>s,oU:()=>o,tM:()=>i});const n=("undefined"!=typeof process&&void 0!==process.env?process.env.NEXT_PUBLIC_SECURE_SITE_ORIGIN:void 0)||"https://secure.walletconnect.org",i=[{label:"Coinbase",name:"coinbase",feeRange:"1-2%",url:"",supportedChains:["eip155"]},{label:"Meld.io",name:"meld",feeRange:"1-2%",url:"https://meldcrypto.com",supportedChains:["eip155","solana"]}],s="WXETMuFUQmqqybHuRkSgxv:25B8LJHSfpG6LVjR2ytU5Cwh7Z4Sch2ocoU",o={FOUR_MINUTES_MS:24e4,TEN_SEC_MS:1e4,FIVE_SEC_MS:5e3,THREE_SEC_MS:3e3,ONE_SEC_MS:1e3,SECURE_SITE:n,SECURE_SITE_DASHBOARD:`${n}/dashboard`,SECURE_SITE_FAVICON:`${n}/images/favicon.png`,RESTRICTED_TIMEZONES:["ASIA/SHANGHAI","ASIA/URUMQI","ASIA/CHONGQING","ASIA/HARBIN","ASIA/KASHGAR","ASIA/MACAU","ASIA/HONG_KONG","ASIA/MACAO","ASIA/BEIJING","ASIA/HARBIN"],WC_COINBASE_PAY_SDK_CHAINS:["ethereum","arbitrum","polygon","berachain","avalanche-c-chain","optimism","celo","base"],WC_COINBASE_PAY_SDK_FALLBACK_CHAIN:"ethereum",WC_COINBASE_PAY_SDK_CHAIN_NAME_MAP:{Ethereum:"ethereum","Arbitrum One":"arbitrum",Polygon:"polygon",Berachain:"berachain",Avalanche:"avalanche-c-chain","OP Mainnet":"optimism",Celo:"celo",Base:"base"},WC_COINBASE_ONRAMP_APP_ID:"bf18c88d-495a-463b-b249-0b9d3656cf5e",SWAP_SUGGESTED_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP"],SWAP_POPULAR_TOKENS:["ETH","UNI","1INCH","AAVE","SOL","ADA","AVAX","DOT","LINK","NITRO","GAIA","MILK","TRX","NEAR","GNO","WBTC","DAI","WETH","USDC","USDT","ARB","BAL","BICO","CRV","ENS","MATIC","OP","METAL","DAI","CHAMP","WOLF","SALE","BAL","BUSD","MUST","BTCpx","ROUTE","HEX","WELT","amDAI","VSQ","VISION","AURUM","pSP","SNX","VC","LINK","CHP","amUSDT","SPHERE","FOX","GIDDY","GFC","OMEN","OX_OLD","DE","WNT"],BALANCE_SUPPORTED_CHAINS:["eip155","solana"],SWAP_SUPPORTED_NETWORKS:["eip155:1","eip155:42161","eip155:10","eip155:324","eip155:8453","eip155:56","eip155:137","eip155:100","eip155:43114","eip155:250","eip155:8217","eip155:1313161554"],NAMES_SUPPORTED_CHAIN_NAMESPACES:["eip155"],ONRAMP_SUPPORTED_CHAIN_NAMESPACES:["eip155","solana"],ACTIVITY_ENABLED_CHAIN_NAMESPACES:["eip155"],NATIVE_TOKEN_ADDRESS:{eip155:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",solana:"So11111111111111111111111111111111111111111",polkadot:"0x",bip122:"0x"},CONVERT_SLIPPAGE_TOLERANCE:1,CONNECT_LABELS:{MOBILE:"Open and continue in a new browser tab"},DEFAULT_FEATURES:{swaps:!0,onramp:!0,receive:!0,send:!0,email:!0,emailShowWallets:!0,socials:["google","x","discord","farcaster","github","apple","facebook"],connectorTypeOrder:["walletConnect","recent","injected","featured","custom","external","recommended"],history:!0,analytics:!0,allWallets:!0,legalCheckbox:!1,smartSessions:!1,collapseWallets:!1,walletFeaturesOrder:["onramp","swaps","receive","send"],connectMethodsOrder:void 0},DEFAULT_ACCOUNT_TYPES:{bip122:"payment",eip155:"smartAccount",polkadot:"eoa",solana:"eoa"},ADAPTER_TYPES:{UNIVERSAL:"universal",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5",BITCOIN:"bitcoin"}}},2959:(e,t,r)=>{r.d(t,{secp256k1:()=>N});var n=r(8226),i=r(9190),s=r(2531);class o extends s.Vw{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,i.sd)(e);const r=(0,s.ZJ)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,o=new Uint8Array(n);o.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<o.length;e++)o[e]^=54;this.iHash.update(o),this.oHash=e.create();for(let e=0;e<o.length;e++)o[e]^=106;this.oHash.update(o),o.fill(0)}update(e){return(0,i.CC)(this),this.iHash.update(e),this}digestInto(e){(0,i.CC)(this),(0,i.DO)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:o}=this;return e.finished=n,e.destroyed=i,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const a=(e,t,r)=>new o(e,t).update(r).digest();a.create=(e,t)=>new o(e,t);var c=r(615),l=r(8030),u=r(8293);function h(e){void 0!==e.lowS&&(0,u.e8)("lowS",e.lowS),void 0!==e.prehash&&(0,u.e8)("prehash",e.prehash)}const{Ph:d,aT:p}=u;class f extends Error{constructor(e=""){super(e)}}const g={Err:f,_tlv:{encode:(e,t)=>{const{Err:r}=g;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");const n=t.length/2,i=u.zW(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?u.zW(i.length/2|128):"";return u.zW(e)+s+i+t},decode(e,t){const{Err:r}=g;let n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");const i=t[n++];let s=0;if(128&i){const e=127&i;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");const o=t.subarray(n,n+e);if(o.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===o[0])throw new r("tlv.decode(long): zero leftmost byte");for(const e of o)s=s<<8|e;if(n+=e,s<128)throw new r("tlv.decode(long): not minimal encoding")}else s=i;const o=t.subarray(n,n+s);if(o.length!==s)throw new r("tlv.decode: wrong value length");return{v:o,l:t.subarray(n+s)}}},_int:{encode(e){const{Err:t}=g;if(e<m)throw new t("integer: negative integers are not allowed");let r=u.zW(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){const{Err:t}=g;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return d(e)}},toSig(e){const{Err:t,_int:r,_tlv:n}=g,i="string"==typeof e?p(e):e;u.DO(i);const{v:s,l:o}=n.decode(48,i);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,s),{v:l,l:h}=n.decode(2,c);if(h.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(l)}},hexFromSig(e){const{_tlv:t,_int:r}=g,n=t.encode(2,r.encode(e.r))+t.encode(2,r.encode(e.s));return t.encode(48,n)}},m=BigInt(0),y=BigInt(1),w=(BigInt(2),BigInt(3));function b(e){const t=function(e){const t=(0,c.hp)(e);return u.Q5(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n}=t,i=r.BYTES+1,s=2*r.BYTES+1;function o(e){return(0,l.zi)(e,n)}function a(e){return(0,l.B8)(e,n)}const{ProjectivePoint:d,normPrivateKeyToScalar:p,weierstrassEquation:f,isWithinCurveOrder:b}=function(e){const t=function(e){const t=(0,c.hp)(e);u.Q5(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,n=(0,l.D0)(t.n,t.nBitLength),i=t.toBytes||((e,t,n)=>{const i=t.toAffine();return u.Id(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),s=t.fromBytes||(e=>{const t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function o(e){const{a:n,b:i}=t,s=r.sqr(e),o=r.mul(s,e);return r.add(r.add(o,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function a(e){const{allowedPrivateKeyLengths:r,nByteLength:n,wrapPrivateKey:i,n:s}=t;if(r&&"bigint"!=typeof e){if(u.aY(e)&&(e=u.My(e)),"string"!=typeof e||!r.includes(e.length))throw new Error("invalid private key");e=e.padStart(2*n,"0")}let o;try{o="bigint"==typeof e?e:u.Ph((0,u.qj)("private key",e,n))}catch(t){throw new Error("invalid private key, expected hex or "+n+" bytes, got "+typeof e)}return i&&(o=(0,l.zi)(o,s)),u.aK("private key",o,y,s),o}function h(e){if(!(e instanceof f))throw new Error("ProjectivePoint expected")}const d=(0,u.x)(((e,t)=>{const{px:n,py:i,pz:s}=e;if(r.eql(s,r.ONE))return{x:n,y:i};const o=e.is0();null==t&&(t=o?r.ONE:r.inv(s));const a=r.mul(n,t),c=r.mul(i,t),l=r.mul(s,t);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(l,r.ONE))throw new Error("invZ was invalid");return{x:a,y:c}})),p=(0,u.x)((e=>{if(e.is0()){if(t.allowInfinityPoint&&!r.is0(e.py))return;throw new Error("bad point: ZERO")}const{x:n,y:i}=e.toAffine();if(!r.isValid(n)||!r.isValid(i))throw new Error("bad point: x or y not FE");const s=r.sqr(i),a=o(n);if(!r.eql(s,a))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class f{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw new Error("x required");if(null==t||!r.isValid(t))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required");Object.freeze(this)}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw new Error("invalid affine point");if(e instanceof f)throw new Error("projective point not allowed");const i=e=>r.eql(e,r.ZERO);return i(t)&&i(n)?f.ZERO:new f(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(f.fromAffine)}static fromHex(e){const t=f.fromAffine(s((0,u.qj)("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return f.BASE.multiply(a(e))}static msm(e,t){return(0,c.Xf)(f,n,e,t)}_setWindowSize(e){b.setWindowSize(this,e)}assertValidity(){p(this)}hasEvenY(){const{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){h(e);const{px:t,py:n,pz:i}=this,{px:s,py:o,pz:a}=e,c=r.eql(r.mul(t,a),r.mul(s,i)),l=r.eql(r.mul(n,a),r.mul(o,i));return c&&l}negate(){return new f(this.px,r.neg(this.py),this.pz)}double(){const{a:e,b:n}=t,i=r.mul(n,w),{px:s,py:o,pz:a}=this;let c=r.ZERO,l=r.ZERO,u=r.ZERO,h=r.mul(s,s),d=r.mul(o,o),p=r.mul(a,a),g=r.mul(s,o);return g=r.add(g,g),u=r.mul(s,a),u=r.add(u,u),c=r.mul(e,u),l=r.mul(i,p),l=r.add(c,l),c=r.sub(d,l),l=r.add(d,l),l=r.mul(c,l),c=r.mul(g,c),u=r.mul(i,u),p=r.mul(e,p),g=r.sub(h,p),g=r.mul(e,g),g=r.add(g,u),u=r.add(h,h),h=r.add(u,h),h=r.add(h,p),h=r.mul(h,g),l=r.add(l,h),p=r.mul(o,a),p=r.add(p,p),h=r.mul(p,g),c=r.sub(c,h),u=r.mul(p,d),u=r.add(u,u),u=r.add(u,u),new f(c,l,u)}add(e){h(e);const{px:n,py:i,pz:s}=this,{px:o,py:a,pz:c}=e;let l=r.ZERO,u=r.ZERO,d=r.ZERO;const p=t.a,g=r.mul(t.b,w);let m=r.mul(n,o),y=r.mul(i,a),b=r.mul(s,c),v=r.add(n,i),E=r.add(o,a);v=r.mul(v,E),E=r.add(m,y),v=r.sub(v,E),E=r.add(n,s);let _=r.add(o,c);return E=r.mul(E,_),_=r.add(m,b),E=r.sub(E,_),_=r.add(i,s),l=r.add(a,c),_=r.mul(_,l),l=r.add(y,b),_=r.sub(_,l),d=r.mul(p,E),l=r.mul(g,b),d=r.add(l,d),l=r.sub(y,d),d=r.add(y,d),u=r.mul(l,d),y=r.add(m,m),y=r.add(y,m),b=r.mul(p,b),E=r.mul(g,E),y=r.add(y,b),b=r.sub(m,b),b=r.mul(p,b),E=r.add(E,b),m=r.mul(y,E),u=r.add(u,m),m=r.mul(_,E),l=r.mul(v,l),l=r.sub(l,m),m=r.mul(v,y),d=r.mul(_,d),d=r.add(d,m),new f(l,u,d)}subtract(e){return this.add(e.negate())}is0(){return this.equals(f.ZERO)}wNAF(e){return b.wNAFCached(this,e,f.normalizeZ)}multiplyUnsafe(e){const{endo:n,n:i}=t;u.aK("scalar",e,m,i);const s=f.ZERO;if(e===m)return s;if(this.is0()||e===y)return this;if(!n||b.hasPrecomputes(this))return b.wNAFCachedUnsafe(this,e,f.normalizeZ);let{k1neg:o,k1:a,k2neg:c,k2:l}=n.splitScalar(e),h=s,d=s,p=this;for(;a>m||l>m;)a&y&&(h=h.add(p)),l&y&&(d=d.add(p)),p=p.double(),a>>=y,l>>=y;return o&&(h=h.negate()),c&&(d=d.negate()),d=new f(r.mul(d.px,n.beta),d.py,d.pz),h.add(d)}multiply(e){const{endo:n,n:i}=t;let s,o;if(u.aK("scalar",e,y,i),n){const{k1neg:t,k1:i,k2neg:a,k2:c}=n.splitScalar(e);let{p:l,f:u}=this.wNAF(i),{p:h,f:d}=this.wNAF(c);l=b.constTimeNegate(t,l),h=b.constTimeNegate(a,h),h=new f(r.mul(h.px,n.beta),h.py,h.pz),s=l.add(h),o=u.add(d)}else{const{p:t,f:r}=this.wNAF(e);s=t,o=r}return f.normalizeZ([s,o])[0]}multiplyAndAddUnsafe(e,t,r){const n=f.BASE,i=(e,t)=>t!==m&&t!==y&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),s=i(this,t).add(i(e,r));return s.is0()?void 0:s}toAffine(e){return d(this,e)}isTorsionFree(){const{h:e,isTorsionFree:r}=t;if(e===y)return!0;if(r)return r(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:r}=t;return e===y?this:r?r(f,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return(0,u.e8)("isCompressed",e),this.assertValidity(),i(f,this,e)}toHex(e=!0){return(0,u.e8)("isCompressed",e),u.My(this.toRawBytes(e))}}f.BASE=new f(t.Gx,t.Gy,r.ONE),f.ZERO=new f(r.ZERO,r.ONE,r.ZERO);const g=t.nBitLength,b=(0,c.hT)(f,t.endo?Math.ceil(g/2):g);return{CURVE:t,ProjectivePoint:f,normPrivateKeyToScalar:a,weierstrassEquation:o,isWithinCurveOrder:function(e){return u.r4(e,y,t.n)}}}({...t,toBytes(e,t,n){const i=t.toAffine(),s=r.toBytes(i.x),o=u.Id;return(0,u.e8)("isCompressed",n),n?o(Uint8Array.from([t.hasEvenY()?2:3]),s):o(Uint8Array.from([4]),s,r.toBytes(i.y))},fromBytes(e){const t=e.length,n=e[0],o=e.subarray(1);if(t!==i||2!==n&&3!==n){if(t===s&&4===n)return{x:r.fromBytes(o.subarray(0,r.BYTES)),y:r.fromBytes(o.subarray(r.BYTES,2*r.BYTES))};throw new Error("invalid Point, expected length of "+i+", or uncompressed "+s+", got "+t)}{const e=u.Ph(o);if(!u.r4(e,y,r.ORDER))throw new Error("Point is not on curve");const t=f(e);let i;try{i=r.sqrt(t)}catch(e){const t=e instanceof Error?": "+e.message:"";throw new Error("Point is not on curve"+t)}return!(1&~n)!=((i&y)===y)&&(i=r.neg(i)),{x:e,y:i}}}}),v=e=>u.My(u.lq(e,t.nByteLength));function E(e){return e>n>>y}const _=(e,t,r)=>u.Ph(e.slice(t,r));class A{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){const r=t.nByteLength;return e=(0,u.qj)("compactSignature",e,2*r),new A(_(e,0,r),_(e,r,2*r))}static fromDER(e){const{r:t,s:r}=g.toSig((0,u.qj)("DER",e));return new A(t,r)}assertValidity(){u.aK("r",this.r,y,n),u.aK("s",this.s,y,n)}addRecoveryBit(e){return new A(this.r,this.s,e)}recoverPublicKey(e){const{r:n,s:i,recovery:s}=this,c=N((0,u.qj)("msgHash",e));if(null==s||![0,1,2,3].includes(s))throw new Error("recovery id invalid");const l=2===s||3===s?n+t.n:n;if(l>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=1&s?"03":"02",p=d.fromHex(h+v(l)),f=a(l),g=o(-c*f),m=o(i*f),y=d.BASE.multiplyAndAddUnsafe(p,g,m);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return E(this.s)}normalizeS(){return this.hasHighS()?new A(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return u.aT(this.toDERHex())}toDERHex(){return g.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return u.aT(this.toCompactHex())}toCompactHex(){return v(this.r)+v(this.s)}}const S={isValidPrivateKey(e){try{return p(e),!0}catch(e){return!1}},normPrivateKeyToScalar:p,randomPrivateKey:()=>{const e=(0,l.Tp)(t.n);return(0,l.qy)(t.randomBytes(e),t.n)},precompute:(e=8,t=d.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function C(e){const t=u.aY(e),r="string"==typeof e,n=(t||r)&&e.length;return t?n===i||n===s:r?n===2*i||n===2*s:e instanceof d}const I=t.bits2int||function(e){if(e.length>8192)throw new Error("input is too large");const r=u.Ph(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},N=t.bits2int_modN||function(e){return o(I(e))},k=u.OG(t.nBitLength);function T(e){return u.aK("num < 2^"+t.nBitLength,e,m,k),u.lq(e,t.nByteLength)}const x={lowS:t.lowS,prehash:!1},P={lowS:t.lowS,prehash:!1};return d.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return d.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(C(e))throw new Error("first arg must be private key");if(!C(t))throw new Error("second arg must be public key");return d.fromHex(t).multiply(p(e)).toRawBytes(r)},sign:function(e,n,i=x){const{seed:s,k2sig:c}=function(e,n,i=x){if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:s,randomBytes:c}=t;let{lowS:l,prehash:f,extraEntropy:g}=i;null==l&&(l=!0),e=(0,u.qj)("msgHash",e),h(i),f&&(e=(0,u.qj)("prehashed msgHash",s(e)));const w=N(e),v=p(n),_=[T(v),T(w)];if(null!=g&&!1!==g){const e=!0===g?c(r.BYTES):g;_.push((0,u.qj)("extraEntropy",e))}const S=u.Id(..._),C=w;return{seed:S,k2sig:function(e){const t=I(e);if(!b(t))return;const r=a(t),n=d.BASE.multiply(t).toAffine(),i=o(n.x);if(i===m)return;const s=o(r*o(C+i*v));if(s===m)return;let c=(n.x===i?0:2)|Number(n.y&y),u=s;return l&&E(s)&&(u=function(e){return E(e)?o(-e):e}(s),c^=1),new A(i,u,c)}}}(e,n,i),l=t;return u.fg(l.hash.outputLen,l.nByteLength,l.hmac)(s,c)},verify:function(e,r,n,i=P){const s=e;r=(0,u.qj)("msgHash",r),n=(0,u.qj)("publicKey",n);const{lowS:c,prehash:l,format:p}=i;if(h(i),"strict"in i)throw new Error("options.strict was renamed to lowS");if(void 0!==p&&"compact"!==p&&"der"!==p)throw new Error("format must be compact or der");const f="string"==typeof s||u.aY(s),m=!f&&!p&&"object"==typeof s&&null!==s&&"bigint"==typeof s.r&&"bigint"==typeof s.s;if(!f&&!m)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let y,w;try{if(m&&(y=new A(s.r,s.s)),f){try{"compact"!==p&&(y=A.fromDER(s))}catch(e){if(!(e instanceof g.Err))throw e}y||"der"===p||(y=A.fromCompact(s))}w=d.fromHex(n)}catch(e){return!1}if(!y)return!1;if(c&&y.hasHighS())return!1;l&&(r=t.hash(r));const{r:b,s:v}=y,E=N(r),_=a(v),S=o(E*_),C=o(b*_),I=d.BASE.multiplyAndAddUnsafe(w,S,C)?.toAffine();return!!I&&o(I.x)===b},ProjectivePoint:d,Signature:A,utils:S}}function v(e){return{hash:e,hmac:(t,...r)=>a(e,t,(0,s.Id)(...r)),randomBytes:s.po}}BigInt(4);const E=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),_=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),A=BigInt(1),S=BigInt(2),C=(e,t)=>(e+t/S)/t;const I=(0,l.D0)(E,void 0,void 0,{sqrt:function(e){const t=E,r=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,h=u*u*e%t,d=(0,l.zH)(h,r,t)*h%t,p=(0,l.zH)(d,r,t)*h%t,f=(0,l.zH)(p,S,t)*u%t,g=(0,l.zH)(f,i,t)*f%t,m=(0,l.zH)(g,s,t)*g%t,y=(0,l.zH)(m,a,t)*m%t,w=(0,l.zH)(y,c,t)*y%t,b=(0,l.zH)(w,a,t)*m%t,v=(0,l.zH)(b,r,t)*h%t,_=(0,l.zH)(v,o,t)*g%t,A=(0,l.zH)(_,n,t)*u%t,C=(0,l.zH)(A,S,t);if(!I.eql(I.sqr(C),e))throw new Error("Cannot find square root");return C}}),N=function(e,t){const r=t=>b({...e,...v(t)});return{...r(t),create:r}}({a:BigInt(0),b:BigInt(7),Fp:I,n:_,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=_,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-A*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,o=BigInt("0x100000000000000000000000000000000"),a=C(s*e,t),c=C(-n*e,t);let u=(0,l.zi)(e-a*r-c*i,t),h=(0,l.zi)(-a*n-c*s,t);const d=u>o,p=h>o;if(d&&(u=t-u),p&&(h=t-h),u>o||h>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:u,k2neg:p,k2:h}}}},n.sc);BigInt(0),N.ProjectivePoint},2985:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.delay=void 0,t.delay=function(e){return new Promise((t=>{setTimeout((()=>{t(!0)}),e)}))}},3093:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IWatch=void 0,t.IWatch=class{}},3096:(e,t,r)=>{function n(e,t){return"light"===t?{"--w3m-accent":e?.["--w3m-accent"]||"hsla(231, 100%, 70%, 1)","--w3m-background":"#fff"}:{"--w3m-accent":e?.["--w3m-accent"]||"hsla(230, 100%, 67%, 1)","--w3m-background":"#121313"}}r.d(t,{o:()=>n})},3289:(e,t,r)=>{const n=r(8341).v4;e.exports=function(e,t,r,i){if("string"!=typeof e)throw new TypeError(e+" must be a string");const s="number"==typeof(i=i||{}).version?i.version:2;if(1!==s&&2!==s)throw new TypeError(s+" must be 1 or 2");const o={method:e};if(2===s&&(o.jsonrpc="2.0"),t){if("object"!=typeof t&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");o.params=t}if(void 0===r){const e="function"==typeof i.generator?i.generator:function(){return n()};o.id=e(o,i)}else 2===s&&null===r?i.notificationIdNull&&(o.id=null):o.id=r;return o}},3337:(e,t,r)=>{r.d(t,{j:()=>o});var n=r(9073),i=r(4707);const s=(0,n.BX)({walletImages:{},networkImages:{},chainImages:{},connectorImages:{},tokenImages:{},currencyImages:{}}),o={state:s,subscribeNetworkImages:e=>(0,n.B1)(s.networkImages,(()=>e(s.networkImages))),subscribeKey:(e,t)=>(0,i.u$)(s,e,t),subscribe:e=>(0,n.B1)(s,(()=>e(s))),setWalletImage(e,t){s.walletImages[e]=t},setNetworkImage(e,t){s.networkImages[e]=t},setChainImage(e,t){s.chainImages[e]=t},setConnectorImage(e,t){s.connectorImages={...s.connectorImages,[e]:t}},setTokenImage(e,t){s.tokenImages[e]=t},setCurrencyImage(e,t){s.currencyImages[e]=t}}},3450:(e,t,r)=>{r.d(t,{U:()=>u});var n=r(9073),i=r(2944),s=r(6742),o=r(5595),a=r(7388),c=r(1871);const l=(0,n.BX)({currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[]}),u={state:l,replaceState(e){e&&Object.assign(l,(0,n.KR)(e))},subscribe:e=>a.W.subscribeChainProp("accountState",(t=>{if(t)return e(t)})),subscribeKey(e,t,r){let n;return a.W.subscribeChainProp("accountState",(r=>{if(r){const i=r[e];n!==i&&(n=i,t(i))}}),r)},setStatus(e,t){a.W.setAccountProp("status",e,t)},getCaipAddress:e=>a.W.getAccountProp("caipAddress",e),setCaipAddress(e,t){const r=e?s.w.getPlainAddress(e):void 0;t===a.W.state.activeChain&&(a.W.state.activeCaipAddress=e),a.W.setAccountProp("caipAddress",e,t),a.W.setAccountProp("address",r,t)},setBalance(e,t,r){a.W.setAccountProp("balance",e,r),a.W.setAccountProp("balanceSymbol",t,r)},setProfileName(e,t){a.W.setAccountProp("profileName",e,t)},setProfileImage(e,t){a.W.setAccountProp("profileImage",e,t)},setUser(e,t){a.W.setAccountProp("user",e,t)},setAddressExplorerUrl(e,t){a.W.setAccountProp("addressExplorerUrl",e,t)},setSmartAccountDeployed(e,t){a.W.setAccountProp("smartAccountDeployed",e,t)},setCurrentTab(e){a.W.setAccountProp("currentTab",e,a.W.state.activeChain)},setTokenBalance(e,t){e&&a.W.setAccountProp("tokenBalance",e,t)},setShouldUpdateToAddress(e,t){a.W.setAccountProp("shouldUpdateToAddress",e,t)},setAllAccounts(e,t){a.W.setAccountProp("allAccounts",e,t)},addAddressLabel(e,t,r){const n=a.W.getAccountProp("addressLabels",r)||new Map;n.set(e,t),a.W.setAccountProp("addressLabels",n,r)},removeAddressLabel(e,t){const r=a.W.getAccountProp("addressLabels",t)||new Map;r.delete(e),a.W.setAccountProp("addressLabels",r,t)},setConnectedWalletInfo(e,t){a.W.setAccountProp("connectedWalletInfo",e,t,!1)},setPreferredAccountType(e,t){a.W.setAccountProp("preferredAccountTypes",{...l.preferredAccountTypes,[t]:e},t)},setPreferredAccountTypes(e){l.preferredAccountTypes=e},setSocialProvider(e,t){e&&a.W.setAccountProp("socialProvider",e,t)},setSocialWindow(e,t){a.W.setAccountProp("socialWindow",e?(0,n.KR)(e):void 0,t)},setFarcasterUrl(e,t){a.W.setAccountProp("farcasterUrl",e,t)},async fetchTokenBalance(e){l.balanceLoading=!0;const t=a.W.state.activeCaipNetwork?.caipNetworkId,r=a.W.state.activeCaipNetwork?.chainNamespace,n=a.W.state.activeCaipAddress,u=n?s.w.getPlainAddress(n):void 0;if(l.lastRetry&&!s.w.isAllowedRetry(l.lastRetry,30*i.oU.ONE_SEC_MS))return l.balanceLoading=!1,[];try{if(u&&t&&r){const e=(await o.T.getBalance(u,t)).balances.filter((e=>"0"!==e.quantity.decimals));return this.setTokenBalance(e,r),l.lastRetry=void 0,l.balanceLoading=!1,e}}catch(t){l.lastRetry=Date.now(),e?.(t),c.P.showError("Token Balance Unavailable")}finally{l.balanceLoading=!1}return[]},resetAccount(e){a.W.resetAccount(e)}}},3466:(e,t,r)=>{var n=r(5621);e.exports=n("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},3494:(e,t,r)=>{function n(e){return function(t){return"function"==typeof t?function(e,t){return customElements.get(e)||customElements.define(e,t),t}(e,t):function(e,t){const{kind:r,elements:n}=t;return{kind:r,elements:n,finisher(t){customElements.get(e)||customElements.define(e,t)}}}(e,t)}}r.d(t,{E:()=>n})},3495:(e,t,r)=>{r.d(t,{L:()=>n});const n={caipNetworkIdToNumber:e=>e?Number(e.split(":")[1]):void 0,parseEvmChainId(e){return"string"==typeof e?this.caipNetworkIdToNumber(e):e},getNetworksByNamespace:(e,t)=>e?.filter((e=>e.chainNamespace===t))||[],getFirstNetworkByNamespace(e,t){return this.getNetworksByNamespace(e,t)[0]}}},3497:(e,t,r)=>{r.d(t,{U5:()=>C,D5:()=>I,iP:()=>A,oI:()=>S,h6:()=>i()});var n=r(4874),i=r.n(n);function s(e){return"string"==typeof e?e:(t=e,JSON.stringify(t,((e,t)=>"bigint"==typeof t?t.toString()+"n":t))||"");var t}const o={level:"info"},a="custom_context",c=1024e3;class l{constructor(e){this.nodeValue=e,this.sizeInBytes=(new TextEncoder).encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}}class u{constructor(e){this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}append(e){const t=new l(e);if(t.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${e} with size ${t.size}`);for(;this.size+t.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=t),this.tail=t):(this.head=t,this.tail=t),this.lengthInNodes++,this.sizeInBytes+=t.size}shift(){if(!this.head)return;const e=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=e.size}toArray(){const e=[];let t=this.head;for(;null!==t;)e.push(t.value),t=t.next;return e}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let e=this.head;return{next:()=>{if(!e)return{done:!0,value:null};const t=e.value;return e=e.next,{done:!1,value:t}}}}}class h{constructor(e,t=c){this.level=e??"error",this.levelValue=n.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=t,this.logs=new u(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(e,t){t===n.levels.values.error?console.error(e):t===n.levels.values.warn?console.warn(e):t===n.levels.values.debug?console.debug(e):t===n.levels.values.trace?console.trace(e):console.log(e)}appendToLogs(e){this.logs.append(s({timestamp:(new Date).toISOString(),log:e}));const t="string"==typeof e?JSON.parse(e).level:e.level;t>=this.levelValue&&this.forwardToConsole(e,t)}getLogs(){return this.logs}clearLogs(){this.logs=new u(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(e){const t=this.getLogArray();return t.push(s({extraMetadata:e})),new Blob(t,{type:"application/json"})}}class d{constructor(e,t=c){this.baseChunkLogger=new h(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}downloadLogsBlobInBrowser(e){const t=URL.createObjectURL(this.logsToBlob(e)),r=document.createElement("a");r.href=t,r.download=`walletconnect-logs-${(new Date).toISOString()}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}}class p{constructor(e,t=c){this.baseChunkLogger=new h(e,t)}write(e){this.baseChunkLogger.appendToLogs(e)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(e){return this.baseChunkLogger.logsToBlob(e)}}var f=Object.defineProperty,g=Object.defineProperties,m=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,v=(e,t,r)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,E=(e,t)=>{for(var r in t||(t={}))w.call(t,r)&&v(e,r,t[r]);if(y)for(var r of y(t))b.call(t,r)&&v(e,r,t[r]);return e},_=(e,t)=>g(e,m(t));function A(e){return _(E({},e),{level:e?.level||o.level})}function S(e,t=a){let r="";return r=typeof e.bindings>"u"?function(e,t=a){return e[t]||""}(e,t):e.bindings().context||"",r}function C(e,t,r=a){const n=function(e,t,r=a){const n=S(e,r);return n.trim()?`${n}/${t}`:t}(e,t,r);return function(e,t,r=a){return e[r]=t,e}(e.child({context:n}),n,r)}function I(e){return typeof e.loggerOverride<"u"&&"string"!=typeof e.loggerOverride?{logger:e.loggerOverride,chunkLoggerController:null}:typeof window<"u"?function(e){var t,r;const n=new d(null==(t=e.opts)?void 0:t.level,e.maxSizeInBytes);return{logger:i()(_(E({},e.opts),{level:"trace",browser:_(E({},null==(r=e.opts)?void 0:r.browser),{write:e=>n.write(e)})})),chunkLoggerController:n}}(e):function(e){var t;const r=new p(null==(t=e.opts)?void 0:t.level,e.maxSizeInBytes);return{logger:i()(_(E({},e.opts),{level:"trace"}),r),chunkLoggerController:r}}(e)}},3581:function(e){e.exports=function(e,t,r){r.updateLocale=function(e,t){var n=r.Ls[e];if(n)return(t?Object.keys(t):[]).forEach((function(e){n[e]=t[e]})),n}}},3612:(e,t,r)=>{r.d(t,{Z:()=>n});const n={getSpacingStyles:(e,t)=>Array.isArray(e)?e[t]?`var(--wui-spacing-${e[t]})`:void 0:"string"==typeof e?`var(--wui-spacing-${e})`:void 0,getFormattedDate:e=>new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}).format(e),getHostName(e){try{return new URL(e).hostname}catch(e){return""}},getTruncateString:({string:e,charsStart:t,charsEnd:r,truncate:n})=>e.length<=t+r?e:"end"===n?`${e.substring(0,t)}...`:"start"===n?`...${e.substring(e.length-r)}`:`${e.substring(0,Math.floor(t))}...${e.substring(e.length-Math.floor(r))}`,generateAvatarColors(e){const t=e.toLowerCase().replace(/^0x/iu,"").replace(/[^a-f0-9]/gu,"").substring(0,6).padEnd(6,"0"),r=this.hexToRgb(t),n=getComputedStyle(document.documentElement).getPropertyValue("--w3m-border-radius-master"),i=100-3*Number(n?.replace("px","")),s=`${i}% ${i}% at 65% 40%`,o=[];for(let e=0;e<5;e+=1){const t=this.tintColor(r,.15*e);o.push(`rgb(${t[0]}, ${t[1]}, ${t[2]})`)}return`\n    --local-color-1: ${o[0]};\n    --local-color-2: ${o[1]};\n    --local-color-3: ${o[2]};\n    --local-color-4: ${o[3]};\n    --local-color-5: ${o[4]};\n    --local-radial-circle: ${s}\n   `},hexToRgb(e){const t=parseInt(e,16);return[t>>16&255,t>>8&255,255&t]},tintColor(e,t){const[r,n,i]=e;return[Math.round(r+(255-r)*t),Math.round(n+(255-n)*t),Math.round(i+(255-i)*t)]},isNumber:e=>/^[0-9]+$/u.test(e),getColorTheme:e=>e||("undefined"!=typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)")?.matches?"dark":"light":"dark"),splitBalance(e){const t=e.split(".");return 2===t.length?[t[0],t[1]]:["0","00"]},roundNumber:(e,t,r)=>e.toString().length>=t?Number(e).toFixed(r):e,formatNumberToLocalString:(e,t=2)=>void 0===e?"0.00":"number"==typeof e?e.toLocaleString("en-US",{maximumFractionDigits:t,minimumFractionDigits:t}):parseFloat(e).toLocaleString("en-US",{maximumFractionDigits:t,minimumFractionDigits:t})}},3678:e=>{var t=Object.prototype.hasOwnProperty,r="~";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,n,s,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new i(n,s||e,o),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,n,i=[];if(0===this._eventsCount)return i;for(n in e=this._events)t.call(e,n)&&i.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,o=new Array(s);i<s;i++)o[i]=n[i].fn;return o},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,i,s,o){var a=r?r+e:e;if(!this._events[a])return!1;var c,l,u=this._events[a],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,s),!0;case 6:return u.fn.call(u.context,t,n,i,s,o),!0}for(l=1,c=new Array(h-1);l<h;l++)c[l-1]=arguments[l];u.fn.apply(u.context,c)}else{var d,p=u.length;for(l=0;l<p;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),h){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,n);break;case 4:u[l].fn.call(u[l].context,t,n,i);break;default:if(!c)for(d=1,c=new Array(h-1);d<h;d++)c[d-1]=arguments[d];u[l].fn.apply(u[l].context,c)}}return!0},a.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,n,i){var s=r?r+e:e;if(!this._events[s])return this;if(!t)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==t||i&&!a.once||n&&a.context!==n||o(this,s);else{for(var c=0,l=[],u=a.length;c<u;c++)(a[c].fn!==t||i&&!a[c].once||n&&a[c].context!==n)&&l.push(a[c]);l.length?this._events[s]=1===l.length?l[0]:l:o(this,s)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&o(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a},4092:(e,t,r)=>{r.d(t,{R:()=>E});var n=r(9073),i=r(4707),s=r(5627);const o=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"_from",type:"address"},{name:"_to",type:"address"},{name:"_value",type:"uint256"}],outputs:[{name:"",type:"bool"}]}],a=[{type:"function",name:"transfer",stateMutability:"nonpayable",inputs:[{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[]},{type:"function",name:"transferFrom",stateMutability:"nonpayable",inputs:[{name:"sender",type:"address"},{name:"recipient",type:"address"},{name:"amount",type:"uint256"}],outputs:[{name:"",type:"bool"}]}];var c=r(4376);const l=e=>c.o.USDT_CONTRACT_ADDRESSES.includes(e)?a:o;var u=r(152),h=r(2944),d=r(6742),p=r(5001),f=r(3450),g=r(7388),m=r(9177),y=r(184),w=r(8508),b=r(1871);const v=(0,n.BX)({tokenBalances:[],loading:!1}),E={state:v,subscribe:e=>(0,n.B1)(v,(()=>e(v))),subscribeKey:(e,t)=>(0,i.u$)(v,e,t),setToken(e){e&&(v.token=(0,n.KR)(e))},setTokenAmount(e){v.sendTokenAmount=e},setReceiverAddress(e){v.receiverAddress=e},setReceiverProfileImageUrl(e){v.receiverProfileImageUrl=e},setReceiverProfileName(e){v.receiverProfileName=e},setGasPrice(e){v.gasPrice=e},setGasPriceInUsd(e){v.gasPriceInUSD=e},setNetworkBalanceInUsd(e){v.networkBalanceInUSD=e},setLoading(e){v.loading=e},sendToken(){switch(g.W.state.activeCaipNetwork?.chainNamespace){case"eip155":return void this.sendEvmToken();case"solana":return void this.sendSolanaToken();default:throw new Error("Unsupported chain")}},sendEvmToken(){const e=g.W.state.activeChain,t=f.U.state.preferredAccountTypes?.[e];this.state.token?.address&&this.state.sendTokenAmount&&this.state.receiverAddress?(y.E.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:t===u.Vl.ACCOUNT_TYPES.SMART_ACCOUNT,token:this.state.token.address,amount:this.state.sendTokenAmount,network:g.W.state.activeCaipNetwork?.caipNetworkId||""}}),this.sendERC20Token({receiverAddress:this.state.receiverAddress,tokenAddress:this.state.token.address,sendTokenAmount:this.state.sendTokenAmount,decimals:this.state.token.quantity.decimals})):this.state.receiverAddress&&this.state.sendTokenAmount&&this.state.gasPrice&&this.state.token?.quantity.decimals&&(y.E.sendEvent({type:"track",event:"SEND_INITIATED",properties:{isSmartAccount:t===u.Vl.ACCOUNT_TYPES.SMART_ACCOUNT,token:this.state.token?.symbol,amount:this.state.sendTokenAmount,network:g.W.state.activeCaipNetwork?.caipNetworkId||""}}),this.sendNativeToken({receiverAddress:this.state.receiverAddress,sendTokenAmount:this.state.sendTokenAmount,gasPrice:this.state.gasPrice,decimals:this.state.token.quantity.decimals}))},async fetchTokenBalance(e){v.loading=!0;const t=g.W.state.activeCaipNetwork?.caipNetworkId,r=g.W.state.activeCaipNetwork?.chainNamespace,n=g.W.state.activeCaipAddress,i=n?d.w.getPlainAddress(n):void 0;if(v.lastRetry&&!d.w.isAllowedRetry(v.lastRetry,30*h.oU.ONE_SEC_MS))return v.loading=!1,[];try{if(i&&t&&r){const e=await p.t.getMyTokensWithBalance();return v.tokenBalances=e,v.lastRetry=void 0,e}}catch(t){v.lastRetry=Date.now(),e?.(t),b.P.showError("Token Balance Unavailable")}finally{v.loading=!1}return[]},fetchNetworkBalance(){if(0===v.tokenBalances.length)return;const e=p.t.mapBalancesToSwapTokens(v.tokenBalances);if(!e)return;const t=e.find((e=>e.address===g.W.getActiveNetworkTokenAddress()));t&&(v.networkBalanceInUSD=t?s.S.multiply(t.quantity.numeric,t.price).toString():"0")},isInsufficientNetworkTokenForGas(e,t){const r=t||"0";return!!s.S.bigNumber(e).eq(0)||s.S.bigNumber(s.S.bigNumber(r)).gt(e)},hasInsufficientGasFunds(){const e=g.W.state.activeChain;let t=!0;return f.U.state.preferredAccountTypes?.[e]===u.Vl.ACCOUNT_TYPES.SMART_ACCOUNT?t=!1:v.networkBalanceInUSD&&(t=this.isInsufficientNetworkTokenForGas(v.networkBalanceInUSD,v.gasPriceInUSD)),t},async sendNativeToken(e){const t=g.W.state.activeChain;w.I.pushTransactionStack({view:"Account",goBack:!1});const r=e.receiverAddress,n=f.U.state.address,i=m.x.parseUnits(e.sendTokenAmount.toString(),Number(e.decimals));try{await m.x.sendTransaction({chainNamespace:"eip155",to:r,address:n,data:"0x",value:i??BigInt(0),gasPrice:e.gasPrice}),b.P.showSuccess("Transaction started"),y.E.sendEvent({type:"track",event:"SEND_SUCCESS",properties:{isSmartAccount:f.U.state.preferredAccountTypes?.[t]===u.Vl.ACCOUNT_TYPES.SMART_ACCOUNT,token:this.state.token?.symbol||"",amount:e.sendTokenAmount,network:g.W.state.activeCaipNetwork?.caipNetworkId||""}}),this.resetSend()}catch(r){console.error("SendController:sendERC20Token - failed to send native token",r);const n=r instanceof Error?r.message:"Unknown error";y.E.sendEvent({type:"track",event:"SEND_ERROR",properties:{message:n,isSmartAccount:f.U.state.preferredAccountTypes?.[t]===u.Vl.ACCOUNT_TYPES.SMART_ACCOUNT,token:this.state.token?.symbol||"",amount:e.sendTokenAmount,network:g.W.state.activeCaipNetwork?.caipNetworkId||""}}),b.P.showError("Something went wrong")}},async sendERC20Token(e){w.I.pushTransactionStack({view:"Account",goBack:!1});const t=m.x.parseUnits(e.sendTokenAmount.toString(),Number(e.decimals));try{if(f.U.state.address&&e.sendTokenAmount&&e.receiverAddress&&e.tokenAddress){const r=d.w.getPlainAddress(e.tokenAddress);await m.x.writeContract({fromAddress:f.U.state.address,tokenAddress:r,args:[e.receiverAddress,t??BigInt(0)],method:"transfer",abi:l(r),chainNamespace:"eip155"}),b.P.showSuccess("Transaction started"),this.resetSend()}}catch(t){console.error("SendController:sendERC20Token - failed to send erc20 token",t);const r=t instanceof Error?t.message:"Unknown error";y.E.sendEvent({type:"track",event:"SEND_ERROR",properties:{message:r,isSmartAccount:f.U.state.preferredAccountTypes?.eip155===u.Vl.ACCOUNT_TYPES.SMART_ACCOUNT,token:this.state.token?.symbol||"",amount:e.sendTokenAmount,network:g.W.state.activeCaipNetwork?.caipNetworkId||""}}),b.P.showError("Something went wrong")}},sendSolanaToken(){this.state.sendTokenAmount&&this.state.receiverAddress?(w.I.pushTransactionStack({view:"Account",goBack:!1}),m.x.sendTransaction({chainNamespace:"solana",to:this.state.receiverAddress,value:this.state.sendTokenAmount}).then((()=>{this.resetSend(),f.U.fetchTokenBalance()})).catch((e=>{b.P.showError("Failed to send transaction. Please try again."),console.error("SendController:sendToken - failed to send solana transaction",e)}))):b.P.showError("Please enter a valid amount and receiver address")},resetSend(){v.token=void 0,v.sendTokenAmount=void 0,v.receiverAddress=void 0,v.receiverProfileImageUrl=void 0,v.receiverProfileName=void 0,v.loading=!1,v.tokenBalances=[]}}},4281:(e,t)=>{function r(e,t,r){return t<=e&&e<=r}function n(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function i(e){this.tokens=[].slice.call(e)}i.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.shift());else this.tokens.push(e)}};var s=-1;function o(e,t){if(e)throw TypeError("Decoder error");return t||65533}var a="utf-8";function c(e,t){if(!(this instanceof c))return new c(e,t);if((e=void 0!==e?String(e).toLowerCase():a)!==a)throw new Error("Encoding not supported. Only utf-8 is supported");t=n(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(t.fatal),this._ignoreBOM=Boolean(t.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function l(e,t){if(!(this instanceof l))return new l(e,t);if((e=void 0!==e?String(e).toLowerCase():a)!==a)throw new Error("Encoding not supported. Only utf-8 is supported");t=n(t),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(t.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function u(e){var t=e.fatal,n=0,i=0,a=0,c=128,l=191;this.handler=function(e,u){if(-1===u&&0!==a)return a=0,o(t);if(-1===u)return s;if(0===a){if(r(u,0,127))return u;if(r(u,194,223))a=1,n=u-192;else if(r(u,224,239))224===u&&(c=160),237===u&&(l=159),a=2,n=u-224;else{if(!r(u,240,244))return o(t);240===u&&(c=144),244===u&&(l=143),a=3,n=u-240}return n<<=6*a,null}if(!r(u,c,l))return n=a=i=0,c=128,l=191,e.prepend(u),o(t);if(c=128,l=191,n+=u-128<<6*(a-(i+=1)),i!==a)return null;var h=n;return n=a=i=0,h}}function h(e){e.fatal,this.handler=function(e,t){if(-1===t)return s;if(r(t,0,127))return t;var n,i;r(t,128,2047)?(n=1,i=192):r(t,2048,65535)?(n=2,i=224):r(t,65536,1114111)&&(n=3,i=240);for(var o=[(t>>6*n)+i];n>0;){var a=t>>6*(n-1);o.push(128|63&a),n-=1}return o}}c.prototype={decode:function(e,t){var r;r="object"==typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"==typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=n(t),this._streaming||(this._decoder=new u({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(t.stream);for(var o,a=new i(r),c=[];!a.endOfStream()&&(o=this._decoder.handler(a,a.read()))!==s;)null!==o&&(Array.isArray(o)?c.push.apply(c,o):c.push(o));if(!this._streaming){do{if((o=this._decoder.handler(a,a.read()))===s)break;null!==o&&(Array.isArray(o)?c.push.apply(c,o):c.push(o))}while(!a.endOfStream());this._decoder=null}return c.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===c[0]?(this._BOMseen=!0,c.shift()):this._BOMseen=!0)),function(e){for(var t="",r=0;r<e.length;++r){var n=e[r];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode(55296+(n>>10),56320+(1023&n)))}return t}(c)}},l.prototype={encode:function(e,t){e=e?String(e):"",t=n(t),this._streaming||(this._encoder=new h(this._options)),this._streaming=Boolean(t.stream);for(var r,o=[],a=new i(function(e){for(var t=String(e),r=t.length,n=0,i=[];n<r;){var s=t.charCodeAt(n);if(s<55296||s>57343)i.push(s);else if(56320<=s&&s<=57343)i.push(65533);else if(55296<=s&&s<=56319)if(n===r-1)i.push(65533);else{var o=e.charCodeAt(n+1);if(56320<=o&&o<=57343){var a=1023&s,c=1023&o;i.push(65536+(a<<10)+c),n+=1}else i.push(65533)}n+=1}return i}(e));!a.endOfStream()&&(r=this._encoder.handler(a,a.read()))!==s;)Array.isArray(r)?o.push.apply(o,r):o.push(r);if(!this._streaming){for(;(r=this._encoder.handler(a,a.read()))!==s;)Array.isArray(r)?o.push.apply(o,r):o.push(r);this._encoder=null}return new Uint8Array(o)}},t.TextEncoder=l,t.TextDecoder=c},4353:function(e){e.exports=function(){var e=6e4,t=36e5,r="millisecond",n="second",i="minute",s="hour",o="day",a="week",c="month",l="quarter",u="year",h="date",d="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,f=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}},m=function(e,t,r){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(r)+e},y={s:m,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),n=Math.floor(r/60),i=r%60;return(t<=0?"+":"-")+m(n,2,"0")+":"+m(i,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var n=12*(r.year()-t.year())+(r.month()-t.month()),i=t.clone().add(n,c),s=r-i<0,o=t.clone().add(n+(s?-1:1),c);return+(-(n+(r-i)/(s?i-o:o-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:u,w:a,d:o,D:h,h:s,m:i,s:n,ms:r,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},w="en",b={};b[w]=g;var v="$isDayjsObject",E=function(e){return e instanceof C||!(!e||!e[v])},_=function e(t,r,n){var i;if(!t)return w;if("string"==typeof t){var s=t.toLowerCase();b[s]&&(i=s),r&&(b[s]=r,i=s);var o=t.split("-");if(!i&&o.length>1)return e(o[0])}else{var a=t.name;b[a]=t,i=a}return!n&&i&&(w=i),i||!n&&w},A=function(e,t){if(E(e))return e.clone();var r="object"==typeof t?t:{};return r.date=e,r.args=arguments,new C(r)},S=y;S.l=_,S.i=E,S.w=function(e,t){return A(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var C=function(){function g(e){this.$L=_(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[v]=!0}var m=g.prototype;return m.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(S.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(p);if(n){var i=n[2]-1||0,s=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,s)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,s)}}return new Date(t)}(e),this.init()},m.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},m.$utils=function(){return S},m.isValid=function(){return!(this.$d.toString()===d)},m.isSame=function(e,t){var r=A(e);return this.startOf(t)<=r&&r<=this.endOf(t)},m.isAfter=function(e,t){return A(e)<this.startOf(t)},m.isBefore=function(e,t){return this.endOf(t)<A(e)},m.$g=function(e,t,r){return S.u(e)?this[t]:this.set(r,e)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(e,t){var r=this,l=!!S.u(t)||t,d=S.p(e),p=function(e,t){var n=S.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return l?n:n.endOf(o)},f=function(e,t){return S.w(r.toDate()[e].apply(r.toDate("s"),(l?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},g=this.$W,m=this.$M,y=this.$D,w="set"+(this.$u?"UTC":"");switch(d){case u:return l?p(1,0):p(31,11);case c:return l?p(1,m):p(0,m+1);case a:var b=this.$locale().weekStart||0,v=(g<b?g+7:g)-b;return p(l?y-v:y+(6-v),m);case o:case h:return f(w+"Hours",0);case s:return f(w+"Minutes",1);case i:return f(w+"Seconds",2);case n:return f(w+"Milliseconds",3);default:return this.clone()}},m.endOf=function(e){return this.startOf(e,!1)},m.$set=function(e,t){var a,l=S.p(e),d="set"+(this.$u?"UTC":""),p=(a={},a[o]=d+"Date",a[h]=d+"Date",a[c]=d+"Month",a[u]=d+"FullYear",a[s]=d+"Hours",a[i]=d+"Minutes",a[n]=d+"Seconds",a[r]=d+"Milliseconds",a)[l],f=l===o?this.$D+(t-this.$W):t;if(l===c||l===u){var g=this.clone().set(h,1);g.$d[p](f),g.init(),this.$d=g.set(h,Math.min(this.$D,g.daysInMonth())).$d}else p&&this.$d[p](f);return this.init(),this},m.set=function(e,t){return this.clone().$set(e,t)},m.get=function(e){return this[S.p(e)]()},m.add=function(r,l){var h,d=this;r=Number(r);var p=S.p(l),f=function(e){var t=A(d);return S.w(t.date(t.date()+Math.round(e*r)),d)};if(p===c)return this.set(c,this.$M+r);if(p===u)return this.set(u,this.$y+r);if(p===o)return f(1);if(p===a)return f(7);var g=(h={},h[i]=e,h[s]=t,h[n]=1e3,h)[p]||1,m=this.$d.getTime()+r*g;return S.w(m,this)},m.subtract=function(e,t){return this.add(-1*e,t)},m.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||d;var n=e||"YYYY-MM-DDTHH:mm:ssZ",i=S.z(this),s=this.$H,o=this.$m,a=this.$M,c=r.weekdays,l=r.months,u=r.meridiem,h=function(e,r,i,s){return e&&(e[r]||e(t,n))||i[r].slice(0,s)},p=function(e){return S.s(s%12||12,e,"0")},g=u||function(e,t,r){var n=e<12?"AM":"PM";return r?n.toLowerCase():n};return n.replace(f,(function(e,n){return n||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return S.s(t.$y,4,"0");case"M":return a+1;case"MM":return S.s(a+1,2,"0");case"MMM":return h(r.monthsShort,a,l,3);case"MMMM":return h(l,a);case"D":return t.$D;case"DD":return S.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return h(r.weekdaysMin,t.$W,c,2);case"ddd":return h(r.weekdaysShort,t.$W,c,3);case"dddd":return c[t.$W];case"H":return String(s);case"HH":return S.s(s,2,"0");case"h":return p(1);case"hh":return p(2);case"a":return g(s,o,!0);case"A":return g(s,o,!1);case"m":return String(o);case"mm":return S.s(o,2,"0");case"s":return String(t.$s);case"ss":return S.s(t.$s,2,"0");case"SSS":return S.s(t.$ms,3,"0");case"Z":return i}return null}(e)||i.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,h,d){var p,f=this,g=S.p(h),m=A(r),y=(m.utcOffset()-this.utcOffset())*e,w=this-m,b=function(){return S.m(f,m)};switch(g){case u:p=b()/12;break;case c:p=b();break;case l:p=b()/3;break;case a:p=(w-y)/6048e5;break;case o:p=(w-y)/864e5;break;case s:p=w/t;break;case i:p=w/e;break;case n:p=w/1e3;break;default:p=w}return d?p:S.a(p)},m.daysInMonth=function(){return this.endOf(c).$D},m.$locale=function(){return b[this.$L]},m.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),n=_(e,t,!0);return n&&(r.$L=n),r},m.clone=function(){return S.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},g}(),I=C.prototype;return A.prototype=I,[["$ms",r],["$s",n],["$m",i],["$H",s],["$W",o],["$M",c],["$y",u],["$D",h]].forEach((function(e){I[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),A.extend=function(e,t){return e.$i||(e(t,C,A),e.$i=!0),A},A.locale=_,A.isDayjs=E,A.unix=function(e){return A(1e3*e)},A.en=b[w],A.Ls=b,A.p={},A}()},4376:(e,t,r)=>{r.d(t,{o:()=>n});const n={WC_NAME_SUFFIX:".reown.id",WC_NAME_SUFFIX_LEGACY:".wcn.id",BLOCKCHAIN_API_RPC_URL:"https://rpc.walletconnect.org",PULSE_API_URL:"https://pulse.walletconnect.org",W3M_API_URL:"https://api.web3modal.org",CONNECTOR_ID:{WALLET_CONNECT:"walletConnect",INJECTED:"injected",WALLET_STANDARD:"announced",COINBASE:"coinbaseWallet",COINBASE_SDK:"coinbaseWalletSDK",SAFE:"safe",LEDGER:"ledger",OKX:"okx",EIP6963:"eip6963",AUTH:"ID_AUTH"},CONNECTOR_NAMES:{AUTH:"Auth"},AUTH_CONNECTOR_SUPPORTED_CHAINS:["eip155","solana"],LIMITS:{PENDING_TRANSACTIONS:99},CHAIN:{EVM:"eip155",SOLANA:"solana",POLKADOT:"polkadot",BITCOIN:"bip122"},CHAIN_NAME_MAP:{eip155:"EVM Networks",solana:"Solana",polkadot:"Polkadot",bip122:"Bitcoin"},ADAPTER_TYPES:{BITCOIN:"bitcoin",SOLANA:"solana",WAGMI:"wagmi",ETHERS:"ethers",ETHERS5:"ethers5"},USDT_CONTRACT_ADDRESSES:["0xdac17f958d2ee523a2206206994597c13d831ec7","0xc2132d05d31c914a87c6611c10748aeb04b58e8f","0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7","0x919C1c267BC06a7039e03fcc2eF738525769109c","0x48065fbBE25f71C9282ddf5e1cD6D6A887483D5e","0x55d398326f99059fF775485246999027B3197955","0xfd086bc7cd5c481dcc9c85ebe478a1c0b69fcbb9"],HTTP_STATUS_CODES:{SERVICE_UNAVAILABLE:503,FORBIDDEN:403},UNSUPPORTED_NETWORK_NAME:"Unknown Network"}},4549:(e,t,r)=>{r.d(t,{f:()=>g});var n=r(9073),i=r(4707);const s=2147483648,o={convertEVMChainIdToCoinType(e){if(e>=s)throw new Error("Invalid chainId");return(s|e)>>>0}};var a=r(7508),c=r(3450),l=r(5595),u=r(7388),h=r(9177),d=r(9088),p=r(8508);const f=(0,n.BX)({suggestions:[],loading:!1}),g={state:f,subscribe:e=>(0,n.B1)(f,(()=>e(f))),subscribeKey:(e,t)=>(0,i.u$)(f,e,t),async resolveName(e){try{return await l.T.lookupEnsName(e)}catch(e){const t=e;throw new Error(t?.reasons?.[0]?.description||"Error resolving name")}},async isNameRegistered(e){try{return await l.T.lookupEnsName(e),!0}catch{return!1}},async getSuggestions(e){try{f.loading=!0,f.suggestions=[];const t=await l.T.getEnsNameSuggestions(e);return f.suggestions=t.suggestions.map((e=>({...e,name:e.name})))||[],f.suggestions}catch(e){const t=this.parseEnsApiError(e,"Error fetching name suggestions");throw new Error(t)}finally{f.loading=!1}},async getNamesForAddress(e){try{if(!u.W.state.activeCaipNetwork)return[];const t=a.i.getEnsFromCacheForAddress(e);if(t)return t;const r=await l.T.reverseLookupEnsName({address:e});return a.i.updateEnsCache({address:e,ens:r,timestamp:Date.now()}),r}catch(e){const t=this.parseEnsApiError(e,"Error fetching names for address");throw new Error(t)}},async registerName(e){const t=u.W.state.activeCaipNetwork;if(!t)throw new Error("Network not found");const r=c.U.state.address,n=d.a.getAuthConnector();if(!r||!n)throw new Error("Address or auth connector not found");f.loading=!0;try{const n=JSON.stringify({name:e,attributes:{},timestamp:Math.floor(Date.now()/1e3)});p.I.pushTransactionStack({view:"RegisterAccountNameSuccess",goBack:!1,replace:!0,onCancel(){f.loading=!1}});const i=await h.x.signMessage(n),s=t.id;if(!s)throw new Error("Network not found");const a=o.convertEVMChainIdToCoinType(Number(s));await l.T.registerEnsName({coinType:a,address:r,signature:i,message:n}),c.U.setProfileName(e,t.chainNamespace),p.I.replace("RegisterAccountNameSuccess")}catch(t){const r=this.parseEnsApiError(t,`Error registering name ${e}`);throw p.I.replace("RegisterAccountName"),new Error(r)}finally{f.loading=!1}},validateName:e=>/^[a-zA-Z0-9-]{4,}$/u.test(e),parseEnsApiError(e,t){const r=e;return r?.reasons?.[0]?.description||t}}},4707:(e,t,r)=>{r.d(t,{u$:()=>i,zC:()=>s});var n=r(9073);function i(e,t,r,i){let s=e[t];return(0,n.B1)(e,(()=>{const n=e[t];Object.is(s,n)||r(s=n)}),i)}function s(e){const t=(0,n.BX)({data:Array.from(e||[]),has(e){return this.data.some((t=>t[0]===e))},set(e,t){const r=this.data.find((t=>t[0]===e));return r?r[1]=t:this.data.push([e,t]),this},get(e){var t;return null==(t=this.data.find((t=>t[0]===e)))?void 0:t[1]},delete(e){const t=this.data.findIndex((t=>t[0]===e));return-1!==t&&(this.data.splice(t,1),!0)},clear(){this.data.splice(0)},get size(){return this.data.length},toJSON(){return new Map(this.data)},forEach(e){this.data.forEach((t=>{e(t[1],t[0],this)}))},keys(){return this.data.map((e=>e[0])).values()},values(){return this.data.map((e=>e[1])).values()},entries(){return new Map(this.data).entries()},get[Symbol.toStringTag](){return"Map"},[Symbol.iterator](){return this.entries()}});return Object.defineProperties(t,{data:{enumerable:!1},size:{enumerable:!1},toJSON:{enumerable:!1}}),Object.seal(t),t}Symbol()},4874:(e,t,r)=>{const n=r(793);e.exports=o;const i=function(){function e(e){return void 0!==e&&e}try{return"undefined"!=typeof globalThis||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(t){return e(self)||e(window)||e(this)||{}}}().console||{},s={mapHttpRequest:d,mapHttpResponse:d,wrapRequestSerializer:p,wrapResponseSerializer:p,wrapErrorSerializer:p,req:d,res:d,err:function(e){const t={type:e.constructor.name,msg:e.message,stack:e.stack};for(const r in e)void 0===t[r]&&(t[r]=e[r]);return t}};function o(e){(e=e||{}).browser=e.browser||{};const t=e.browser.transmit;if(t&&"function"!=typeof t.send)throw Error("pino: transmit option must have a send function");const r=e.browser.write||i;e.browser.write&&(e.browser.asObject=!0);const n=e.serializers||{},s=function(e,t){return Array.isArray(e)?e.filter((function(e){return"!stdSerializers.err"!==e})):!0===e&&Object.keys(t)}(e.browser.serialize,n);let d=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(d=!1),"function"==typeof r&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),!1===e.enabled&&(e.level="silent");const p=e.level||"info",g=Object.create(r);g.log||(g.log=f),Object.defineProperty(g,"levelVal",{get:function(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(g,"level",{get:function(){return this._level},set:function(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,a(m,g,"error","log"),a(m,g,"fatal","error"),a(m,g,"warn","error"),a(m,g,"info","log"),a(m,g,"debug","log"),a(m,g,"trace","log")}});const m={transmit:t,serialize:s,asObject:e.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:h(e)};return g.levels=o.levels,g.level=p,g.setMaxListeners=g.getMaxListeners=g.emit=g.addListener=g.on=g.prependListener=g.once=g.prependOnceListener=g.removeListener=g.removeAllListeners=g.listeners=g.listenerCount=g.eventNames=g.write=g.flush=f,g.serializers=n,g._serialize=s,g._stdErrSerialize=d,g.child=function(r,i){if(!r)throw new Error("missing bindings for child Pino");i=i||{},s&&r.serializers&&(i.serializers=r.serializers);const o=i.serializers;if(s&&o){var a=Object.assign({},n,o),h=!0===e.browser.serialize?Object.keys(a):s;delete r.serializers,c([r],h,a,this._stdErrSerialize)}function d(e){this._childLevel=1+(0|e._childLevel),this.error=l(e,r,"error"),this.fatal=l(e,r,"fatal"),this.warn=l(e,r,"warn"),this.info=l(e,r,"info"),this.debug=l(e,r,"debug"),this.trace=l(e,r,"trace"),a&&(this.serializers=a,this._serialize=h),t&&(this._logEvent=u([].concat(e._logEvent.bindings,r)))}return d.prototype=this,new d(this)},t&&(g._logEvent=u()),g}function a(e,t,r,s){const a=Object.getPrototypeOf(t);t[r]=t.levelVal>t.levels.values[r]?f:a[r]?a[r]:i[r]||i[s]||f,function(e,t,r){var s;(e.transmit||t[r]!==f)&&(t[r]=(s=t[r],function(){const a=e.timestamp(),l=new Array(arguments.length),h=Object.getPrototypeOf&&Object.getPrototypeOf(this)===i?i:this;for(var d=0;d<l.length;d++)l[d]=arguments[d];if(e.serialize&&!e.asObject&&c(l,this._serialize,this.serializers,this._stdErrSerialize),e.asObject?s.call(h,function(e,t,r,i){e._serialize&&c(r,e._serialize,e.serializers,e._stdErrSerialize);const s=r.slice();let a=s[0];const l={};i&&(l.time=i),l.level=o.levels.values[t];let u=1+(0|e._childLevel);if(u<1&&(u=1),null!==a&&"object"==typeof a){for(;u--&&"object"==typeof s[0];)Object.assign(l,s.shift());a=s.length?n(s.shift(),s):void 0}else"string"==typeof a&&(a=n(s.shift(),s));return void 0!==a&&(l.msg=a),l}(this,r,l,a)):s.apply(h,l),e.transmit){const n=e.transmit.level||t.level,i=o.levels.values[n],s=o.levels.values[r];if(s<i)return;!function(e,t,r){const n=t.send,i=t.ts,s=t.methodLevel,o=t.methodValue,a=t.val,l=e._logEvent.bindings;c(r,e._serialize||Object.keys(e.serializers),e.serializers,void 0===e._stdErrSerialize||e._stdErrSerialize),e._logEvent.ts=i,e._logEvent.messages=r.filter((function(e){return-1===l.indexOf(e)})),e._logEvent.level.label=s,e._logEvent.level.value=o,n(s,e._logEvent,a),e._logEvent=u(l)}(this,{ts:a,methodLevel:r,methodValue:s,transmitLevel:n,transmitValue:o.levels.values[e.transmit.level||t.level],send:e.transmit.send,val:t.levelVal},l)}}))}(e,t,r)}function c(e,t,r,n){for(const i in e)if(n&&e[i]instanceof Error)e[i]=o.stdSerializers.err(e[i]);else if("object"==typeof e[i]&&!Array.isArray(e[i]))for(const n in e[i])t&&t.indexOf(n)>-1&&n in r&&(e[i][n]=r[n](e[i][n]))}function l(e,t,r){return function(){const n=new Array(1+arguments.length);n[0]=t;for(var i=1;i<n.length;i++)n[i]=arguments[i-1];return e[r].apply(this,n)}}function u(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function h(e){return"function"==typeof e.timestamp?e.timestamp:!1===e.timestamp?g:m}function d(){return{}}function p(e){return e}function f(){}function g(){return!1}function m(){return Date.now()}o.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},o.stdSerializers=s,o.stdTimeFunctions=Object.assign({},{nullTime:g,epochTime:m,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}})},4989:(e,t,r)=>{var n=r(1462);e.exports=n("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},5001:(e,t,r)=>{r.d(t,{t:()=>c});var n=r(3450),i=r(5595),s=r(7388),o=r(9177);const a={createBalance(e,t){const r={name:e.metadata.name||"",symbol:e.metadata.symbol||"",decimals:e.metadata.decimals||0,value:e.metadata.value||0,price:e.metadata.price||0,iconUrl:e.metadata.iconUrl||""};return{name:r.name,symbol:r.symbol,chainId:t,address:"native"===e.address?void 0:this.convertAddressToCAIP10Address(e.address,t),value:r.value,price:r.price,quantity:{decimals:r.decimals.toString(),numeric:this.convertHexToBalance({hex:e.balance,decimals:r.decimals})},iconUrl:r.iconUrl}},convertHexToBalance:({hex:e,decimals:t})=>function(e,t){let r=e.toString();const n=r.startsWith("-");n&&(r=r.slice(1)),r=r.padStart(t,"0");let[i,s]=[r.slice(0,r.length-t),r.slice(r.length-t)];return s=s.replace(/(0+)$/,""),`${n?"-":""}${i||"0"}${s?`.${s}`:""}`}(BigInt(e),t),convertAddressToCAIP10Address:(e,t)=>`${t}:${e}`,createCAIP2ChainId:(e,t)=>`${t}:${parseInt(e,16)}`,getChainIdHexFromCAIP2ChainId(e){const t=e.split(":");if(t.length<2||!t[1])return"0x0";const r=t[1],n=parseInt(r,10);return isNaN(n)?"0x0":`0x${n.toString(16)}`},isWalletGetAssetsResponse(e){return"object"==typeof e&&null!==e&&Object.values(e).every((e=>Array.isArray(e)&&e.every((e=>this.isValidAsset(e)))))},isValidAsset:e=>"object"==typeof e&&null!==e&&"string"==typeof e.address&&"string"==typeof e.balance&&("ERC20"===e.type||"NATIVE"===e.type)&&"object"==typeof e.metadata&&null!==e.metadata&&"string"==typeof e.metadata.name&&"string"==typeof e.metadata.symbol&&"number"==typeof e.metadata.decimals&&"number"==typeof e.metadata.price&&"string"==typeof e.metadata.iconUrl},c={async getMyTokensWithBalance(e){const t=n.U.state.address,r=s.W.state.activeCaipNetwork;if(!t||!r)return[];if("eip155"===r.chainNamespace){const e=await this.getEIP155Balances(t,r);if(e)return this.filterLowQualityTokens(e)}const o=await i.T.getBalance(t,r.caipNetworkId,e);return this.filterLowQualityTokens(o.balances)},async getEIP155Balances(e,t){try{const r=a.getChainIdHexFromCAIP2ChainId(t.caipNetworkId),n=await o.x.getCapabilities(e);if(!n?.[r]?.assetDiscovery?.supported)return null;const i=await o.x.walletGetAssets({account:e,chainFilter:[r]});return a.isWalletGetAssetsResponse(i)?(i[r]||[]).map((e=>a.createBalance(e,t.caipNetworkId))):null}catch(e){return null}},filterLowQualityTokens:e=>e.filter((e=>"0"!==e.quantity.decimals)),mapBalancesToSwapTokens:e=>e?.map((e=>({...e,address:e?.address?e.address:s.W.getActiveNetworkTokenAddress(),decimals:parseInt(e.quantity.decimals,10),logoUri:e.iconUrl,eip2612:!1})))||[]}},5042:(e,t,r)=>{r.d(t,{A:()=>h});var n=r(2733),i=r(9088),s=r(7508),o=r(6742),a=r(8249),c=r(5306),l=r(6092),u=r(1482);const h={filterOutDuplicatesByRDNS(e){const t=n.H.state.enableEIP6963?i.a.state.connectors:[],r=s.i.getRecentWallets(),a=t.map((e=>e.info?.rdns)).filter(Boolean),c=r.map((e=>e.rdns)).filter(Boolean),l=a.concat(c);if(l.includes("io.metamask.mobile")&&o.w.isMobile()){const e=l.indexOf("io.metamask.mobile");l[e]="io.metamask"}return e.filter((e=>!l.includes(String(e?.rdns))))},filterOutDuplicatesByIds(e){const t=i.a.state.connectors.filter((e=>"ANNOUNCED"===e.type||"INJECTED"===e.type)),r=s.i.getRecentWallets(),n=t.map((e=>e.explorerId)),o=r.map((e=>e.id)),a=n.concat(o);return e.filter((e=>!a.includes(e?.id)))},filterOutDuplicateWallets(e){const t=this.filterOutDuplicatesByRDNS(e);return this.filterOutDuplicatesByIds(t)},markWalletsAsInstalled(e){const{connectors:t}=i.a.state,r=t.filter((e=>"ANNOUNCED"===e.type)).reduce(((e,t)=>t.info?.rdns?(e[t.info.rdns]=!0,e):e),{});return e.map((e=>({...e,installed:Boolean(e.rdns)&&Boolean(r[e.rdns??""])}))).sort(((e,t)=>Number(t.installed)-Number(e.installed)))},getConnectOrderMethod(e,t){const r=e?.connectMethodsOrder||n.H.state.features?.connectMethodsOrder,s=t||i.a.state.connectors;if(r)return r;const{injected:o,announced:c}=l.g.getConnectorsByType(s,a.N.state.recommended,a.N.state.featured),h=o.filter(l.g.showConnector),d=c.filter(l.g.showConnector);return h.length||d.length?["wallet","email","social"]:u.o.DEFAULT_CONNECT_METHOD_ORDER},isExcluded(e){const t=Boolean(e.rdns)&&a.N.state.excludedWallets.some((t=>t.rdns===e.rdns)),r=Boolean(e.name)&&a.N.state.excludedWallets.some((t=>c.y.isLowerCaseMatch(t.name,e.name)));return t||r}}},5215:(e,t,r)=>{r.r(t),r.d(t,{__assign:()=>s,__asyncDelegator:()=>v,__asyncGenerator:()=>b,__asyncValues:()=>E,__await:()=>w,__awaiter:()=>u,__classPrivateFieldGet:()=>C,__classPrivateFieldSet:()=>I,__createBinding:()=>d,__decorate:()=>a,__exportStar:()=>p,__extends:()=>i,__generator:()=>h,__importDefault:()=>S,__importStar:()=>A,__makeTemplateObject:()=>_,__metadata:()=>l,__param:()=>c,__read:()=>g,__rest:()=>o,__spread:()=>m,__spreadArrays:()=>y,__values:()=>f});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},n(e,t)};function i(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)};function o(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function a(e,t,r,n){var i,s=arguments.length,o=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,r,o):i(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function c(e,t){return function(r,n){t(r,n,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))}function h(e,t){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function d(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}function p(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}function f(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(g(arguments[t]));return e}function y(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var s=arguments[t],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}function w(e){return this instanceof w?(this.v=e,this):new w(e)}function b(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),s=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(e){i[e]&&(n[e]=function(t){return new Promise((function(r,n){s.push([e,t,r,n])>1||a(e,t)}))})}function a(e,t){try{(r=i[e](t)).value instanceof w?Promise.resolve(r.value.v).then(c,l):u(s[0][2],r)}catch(e){u(s[0][3],e)}var r}function c(e){a("next",e)}function l(e){a("throw",e)}function u(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function v(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:w(e[n](t)),done:"return"===n}:i?i(t):t}:i}}function E(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=f(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,i){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,i,(t=e[r](t)).done,t.value)}))}}}function _(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function A(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function S(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function I(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}},5306:(e,t,r)=>{r.d(t,{y:()=>i});var n=r(9510);const i={getCaipTokens(e){if(!e)return;const t={};return Object.entries(e).forEach((([e,r])=>{t[`${n.o.EIP155}:${e}`]=r})),t},isLowerCaseMatch:(e,t)=>e?.toLowerCase()===t?.toLowerCase()}},5595:(e,t,r)=>{r.d(t,{T:()=>g});var n=r(9073),i=r(2944),s=r(6742),o=r(5905),a=r(7508),c=r(3450),l=r(7388),u=r(2733),h=r(1871);const d={purchaseCurrencies:[{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"USD Coin",symbol:"USDC",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]},{id:"2b92315d-eab7-5bef-84fa-089a131333f5",name:"Ether",symbol:"ETH",networks:[{name:"ethereum-mainnet",display_name:"Ethereum",chain_id:"1",contract_address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48"},{name:"polygon-mainnet",display_name:"Polygon",chain_id:"137",contract_address:"0x2791Bca1f2de4661ED88A30C99A7a9449Aa84174"}]}],paymentCurrencies:[{id:"USD",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]},{id:"EUR",payment_method_limits:[{id:"card",min:"10.00",max:"7500.00"},{id:"ach_bank_account",min:"10.00",max:"25000.00"}]}]},p=s.w.getBlockchainApiUrl(),f=(0,n.BX)({clientId:null,api:new o.Z({baseUrl:p,clientId:null}),supportedChains:{http:[],ws:[]}}),g={state:f,async get(e){const{st:t,sv:r}=g.getSdkProperties(),n=u.H.state.projectId,i={...e.params||{},st:t,sv:r,projectId:n};return f.api.get({...e,params:i})},getSdkProperties(){const{sdkType:e,sdkVersion:t}=u.H.state;return{st:e||"unknown",sv:t||"unknown"}},async isNetworkSupported(e){if(!e)return!1;try{f.supportedChains.http.length||await g.getSupportedNetworks()}catch(e){return!1}return f.supportedChains.http.includes(e)},async getSupportedNetworks(){const e=await g.get({path:"v1/supported-chains"});return f.supportedChains=e,e},async fetchIdentity({address:e,caipNetworkId:t}){if(!await g.isNetworkSupported(t))return{avatar:"",name:""};const r=a.i.getIdentityFromCacheForAddress(e);if(r)return r;const n=await g.get({path:`/v1/identity/${e}`,params:{sender:l.W.state.activeCaipAddress?s.w.getPlainAddress(l.W.state.activeCaipAddress):void 0}});return a.i.updateIdentityCache({address:e,identity:n,timestamp:Date.now()}),n},fetchTransactions:async({account:e,cursor:t,onramp:r,signal:n,cache:i,chainId:s})=>await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId)?g.get({path:`/v1/account/${e}/history`,params:{cursor:t,onramp:r,chainId:s},signal:n,cache:i}):{data:[],next:void 0},fetchSwapQuote:async({amount:e,userAddress:t,from:r,to:n,gasPrice:i})=>await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId)?g.get({path:"/v1/convert/quotes",headers:{"Content-Type":"application/json"},params:{amount:e,userAddress:t,from:r,to:n,gasPrice:i}}):{quotes:[]},fetchSwapTokens:async({chainId:e})=>await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId)?g.get({path:"/v1/convert/tokens",params:{chainId:e}}):{tokens:[]},fetchTokenPrice:async({addresses:e})=>await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId)?f.api.post({path:"/v1/fungible/price",body:{currency:"usd",addresses:e,projectId:u.H.state.projectId},headers:{"Content-Type":"application/json"}}):{fungibles:[]},fetchSwapAllowance:async({tokenAddress:e,userAddress:t})=>await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId)?g.get({path:"/v1/convert/allowance",params:{tokenAddress:e,userAddress:t},headers:{"Content-Type":"application/json"}}):{allowance:"0"},async fetchGasPrice({chainId:e}){const{st:t,sv:r}=g.getSdkProperties();if(!await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Gas Price");return g.get({path:"/v1/convert/gas-price",headers:{"Content-Type":"application/json"},params:{chainId:e,st:t,sv:r}})},async generateSwapCalldata({amount:e,from:t,to:r,userAddress:n,disableEstimate:s}){if(!await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return f.api.post({path:"/v1/convert/build-transaction",headers:{"Content-Type":"application/json"},body:{amount:e,eip155:{slippage:i.oU.CONVERT_SLIPPAGE_TOLERANCE},projectId:u.H.state.projectId,from:t,to:r,userAddress:n,disableEstimate:s}})},async generateApproveCalldata({from:e,to:t,userAddress:r}){const{st:n,sv:i}=g.getSdkProperties();if(!await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId))throw new Error("Network not supported for Swaps");return g.get({path:"/v1/convert/build-approve",headers:{"Content-Type":"application/json"},params:{userAddress:r,from:e,to:t,st:n,sv:i}})},async getBalance(e,t,r){const{st:n,sv:i}=g.getSdkProperties();if(!await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId))return h.P.showError("Token Balance Unavailable"),{balances:[]};const s=`${t}:${e}`,o=a.i.getBalanceCacheForCaipAddress(s);if(o)return o;const c=await g.get({path:`/v1/account/${e}/balance`,params:{currency:"usd",chainId:t,forceUpdate:r,st:n,sv:i}});return a.i.updateBalanceCache({caipAddress:s,balance:c,timestamp:Date.now()}),c},lookupEnsName:async e=>await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId)?g.get({path:`/v1/profile/account/${e}`,params:{apiVersion:"2"}}):{addresses:{},attributes:[]},reverseLookupEnsName:async({address:e})=>await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId)?g.get({path:`/v1/profile/reverse/${e}`,params:{sender:c.U.state.address,apiVersion:"2"}}):[],getEnsNameSuggestions:async e=>await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId)?g.get({path:`/v1/profile/suggestions/${e}`,params:{zone:"reown.id"}}):{suggestions:[]},registerEnsName:async({coinType:e,address:t,message:r,signature:n})=>await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId)?f.api.post({path:"/v1/profile/account",body:{coin_type:e,address:t,message:r,signature:n},headers:{"Content-Type":"application/json"}}):{success:!1},generateOnRampURL:async({destinationWallets:e,partnerUserId:t,defaultNetwork:r,purchaseAmount:n,paymentAmount:i})=>await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId)?(await f.api.post({path:"/v1/generators/onrampurl",params:{projectId:u.H.state.projectId},body:{destinationWallets:e,defaultNetwork:r,partnerUserId:t,defaultExperience:"buy",presetCryptoAmount:n,presetFiatAmount:i}})).url:"",async getOnrampOptions(){if(!await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId))return{paymentCurrencies:[],purchaseCurrencies:[]};try{return await g.get({path:"/v1/onramp/options"})}catch(e){return d}},async getOnrampQuote({purchaseCurrency:e,paymentCurrency:t,amount:r,network:n}){try{return await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId)?await f.api.post({path:"/v1/onramp/quote",params:{projectId:u.H.state.projectId},body:{purchaseCurrency:e,paymentCurrency:t,amount:r,network:n}}):null}catch(e){return{coinbaseFee:{amount:r,currency:t.id},networkFee:{amount:r,currency:t.id},paymentSubtotal:{amount:r,currency:t.id},paymentTotal:{amount:r,currency:t.id},purchaseAmount:{amount:r,currency:t.id},quoteId:"mocked-quote-id"}}},getSmartSessions:async e=>await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId)?g.get({path:`/v1/sessions/${e}`}):[],revokeSmartSession:async(e,t,r)=>await g.isNetworkSupported(l.W.state.activeCaipNetwork?.caipNetworkId)?f.api.post({path:`/v1/sessions/${e}/revoke`,params:{projectId:u.H.state.projectId},body:{pci:t,signature:r}}):{success:!1},setClientId(e){f.clientId=e,f.api=new o.Z({baseUrl:p,clientId:e})}}},5621:(e,t,r)=>{var n=r(2861).Buffer;e.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==t[o])throw new TypeError(s+" is ambiguous");t[o]=i}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return n.alloc(0);for(var r=0,i=0,s=0;e[r]===c;)i++,r++;for(var o=(e.length-r)*l+1>>>0,u=new Uint8Array(o);r<e.length;){var h=e.charCodeAt(r);if(h>255)return;var d=t[h];if(255===d)return;for(var p=0,f=o-1;(0!==d||p<s)&&-1!==f;f--,p++)d+=a*u[f]>>>0,u[f]=d%256>>>0,d=d/256>>>0;if(0!==d)throw new Error("Non-zero carry");s=p,r++}for(var g=o-s;g!==o&&0===u[g];)g++;var m=n.allocUnsafe(i+(o-g));m.fill(0,0,i);for(var y=i;g!==o;)m[y++]=u[g++];return m}return{encode:function(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=n.from(t)),!n.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";for(var r=0,i=0,s=0,o=t.length;s!==o&&0===t[s];)s++,r++;for(var l=(o-s)*u+1>>>0,h=new Uint8Array(l);s!==o;){for(var d=t[s],p=0,f=l-1;(0!==d||p<i)&&-1!==f;f--,p++)d+=256*h[f]>>>0,h[f]=d%a>>>0,d=d/a>>>0;if(0!==d)throw new Error("Non-zero carry");i=p,s++}for(var g=l-i;g!==l&&0===h[g];)g++;for(var m=c.repeat(r);g<l;++g)m+=e.charAt(h[g]);return m},decodeUnsafe:h,decode:function(e){var t=h(e);if(t)return t;throw new Error("Non-base"+a+" character")}}}},5627:(e,t,r)=>{r.d(t,{S:()=>g});var n=1e6,i="[big.js] ",s=i+"Invalid ",o=s+"decimal places",a=s+"rounding mode",c=i+"Division by zero",l={},u=void 0,h=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function d(e,t,r,n){var i=e.c;if(r===u&&(r=e.constructor.RM),0!==r&&1!==r&&2!==r&&3!==r)throw Error(a);if(t<1)n=3===r&&(n||!!i[0])||0===t&&(1===r&&i[0]>=5||2===r&&(i[0]>5||5===i[0]&&(n||i[1]!==u))),i.length=1,n?(e.e=e.e-t+1,i[0]=1):i[0]=e.e=0;else if(t<i.length){if(n=1===r&&i[t]>=5||2===r&&(i[t]>5||5===i[t]&&(n||i[t+1]!==u||1&i[t-1]))||3===r&&(n||!!i[0]),i.length=t,n)for(;++i[--t]>9;)if(i[t]=0,0===t){++e.e,i.unshift(1);break}for(t=i.length;!i[--t];)i.pop()}return e}function p(e,t,r){var n=e.e,i=e.c.join(""),s=i.length;if(t)i=i.charAt(0)+(s>1?"."+i.slice(1):"")+(n<0?"e":"e+")+n;else if(n<0){for(;++n;)i="0"+i;i="0."+i}else if(n>0)if(++n>s)for(n-=s;n--;)i+="0";else n<s&&(i=i.slice(0,n)+"."+i.slice(n));else s>1&&(i=i.charAt(0)+"."+i.slice(1));return e.s<0&&r?"-"+i:i}l.abs=function(){var e=new this.constructor(this);return e.s=1,e},l.cmp=function(e){var t,r=this,n=r.c,i=(e=new r.constructor(e)).c,s=r.s,o=e.s,a=r.e,c=e.e;if(!n[0]||!i[0])return n[0]?s:i[0]?-o:0;if(s!=o)return s;if(t=s<0,a!=c)return a>c^t?1:-1;for(o=(a=n.length)<(c=i.length)?a:c,s=-1;++s<o;)if(n[s]!=i[s])return n[s]>i[s]^t?1:-1;return a==c?0:a>c^t?1:-1},l.div=function(e){var t=this,r=t.constructor,i=t.c,s=(e=new r(e)).c,a=t.s==e.s?1:-1,l=r.DP;if(l!==~~l||l<0||l>n)throw Error(o);if(!s[0])throw Error(c);if(!i[0])return e.s=a,e.c=[e.e=0],e;var h,p,f,g,m,y=s.slice(),w=h=s.length,b=i.length,v=i.slice(0,h),E=v.length,_=e,A=_.c=[],S=0,C=l+(_.e=t.e-e.e)+1;for(_.s=a,a=C<0?0:C,y.unshift(0);E++<h;)v.push(0);do{for(f=0;f<10;f++){if(h!=(E=v.length))g=h>E?1:-1;else for(m=-1,g=0;++m<h;)if(s[m]!=v[m]){g=s[m]>v[m]?1:-1;break}if(!(g<0))break;for(p=E==h?s:y;E;){if(v[--E]<p[E]){for(m=E;m&&!v[--m];)v[m]=9;--v[m],v[E]+=10}v[E]-=p[E]}for(;!v[0];)v.shift()}A[S++]=g?f:++f,v[0]&&g?v[E]=i[w]||0:v=[i[w]]}while((w++<b||v[0]!==u)&&a--);return A[0]||1==S||(A.shift(),_.e--,C--),S>C&&d(_,C,r.RM,v[0]!==u),_},l.eq=function(e){return 0===this.cmp(e)},l.gt=function(e){return this.cmp(e)>0},l.gte=function(e){return this.cmp(e)>-1},l.lt=function(e){return this.cmp(e)<0},l.lte=function(e){return this.cmp(e)<1},l.minus=l.sub=function(e){var t,r,n,i,s=this,o=s.constructor,a=s.s,c=(e=new o(e)).s;if(a!=c)return e.s=-c,s.plus(e);var l=s.c.slice(),u=s.e,h=e.c,d=e.e;if(!l[0]||!h[0])return h[0]?e.s=-c:l[0]?e=new o(s):e.s=1,e;if(a=u-d){for((i=a<0)?(a=-a,n=l):(d=u,n=h),n.reverse(),c=a;c--;)n.push(0);n.reverse()}else for(r=((i=l.length<h.length)?l:h).length,a=c=0;c<r;c++)if(l[c]!=h[c]){i=l[c]<h[c];break}if(i&&(n=l,l=h,h=n,e.s=-e.s),(c=(r=h.length)-(t=l.length))>0)for(;c--;)l[t++]=0;for(c=t;r>a;){if(l[--r]<h[r]){for(t=r;t&&!l[--t];)l[t]=9;--l[t],l[r]+=10}l[r]-=h[r]}for(;0===l[--c];)l.pop();for(;0===l[0];)l.shift(),--d;return l[0]||(e.s=1,l=[d=0]),e.c=l,e.e=d,e},l.mod=function(e){var t,r=this,n=r.constructor,i=r.s,s=(e=new n(e)).s;if(!e.c[0])throw Error(c);return r.s=e.s=1,t=1==e.cmp(r),r.s=i,e.s=s,t?new n(r):(i=n.DP,s=n.RM,n.DP=n.RM=0,r=r.div(e),n.DP=i,n.RM=s,this.minus(r.times(e)))},l.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e},l.plus=l.add=function(e){var t,r,n,i=this,s=i.constructor;if(e=new s(e),i.s!=e.s)return e.s=-e.s,i.minus(e);var o=i.e,a=i.c,c=e.e,l=e.c;if(!a[0]||!l[0])return l[0]||(a[0]?e=new s(i):e.s=i.s),e;if(a=a.slice(),t=o-c){for(t>0?(c=o,n=l):(t=-t,n=a),n.reverse();t--;)n.push(0);n.reverse()}for(a.length-l.length<0&&(n=l,l=a,a=n),t=l.length,r=0;t;a[t]%=10)r=(a[--t]=a[t]+l[t]+r)/10|0;for(r&&(a.unshift(r),++c),t=a.length;0===a[--t];)a.pop();return e.c=a,e.e=c,e},l.pow=function(e){var t=this,r=new t.constructor("1"),n=r,i=e<0;if(e!==~~e||e<-1e6||e>1e6)throw Error(s+"exponent");for(i&&(e=-e);1&e&&(n=n.times(t)),e>>=1;)t=t.times(t);return i?r.div(n):n},l.prec=function(e,t){if(e!==~~e||e<1||e>n)throw Error(s+"precision");return d(new this.constructor(this),e,t)},l.round=function(e,t){if(e===u)e=0;else if(e!==~~e||e<-n||e>n)throw Error(o);return d(new this.constructor(this),e+this.e+1,t)},l.sqrt=function(){var e,t,r,n=this,s=n.constructor,o=n.s,a=n.e,c=new s("0.5");if(!n.c[0])return new s(n);if(o<0)throw Error(i+"No square root");0===(o=Math.sqrt(+p(n,!0,!0)))||o===1/0?((t=n.c.join("")).length+a&1||(t+="0"),a=((a+1)/2|0)-(a<0||1&a),e=new s(((o=Math.sqrt(t))==1/0?"5e":(o=o.toExponential()).slice(0,o.indexOf("e")+1))+a)):e=new s(o+""),a=e.e+(s.DP+=4);do{r=e,e=c.times(r.plus(n.div(r)))}while(r.c.slice(0,a).join("")!==e.c.slice(0,a).join(""));return d(e,(s.DP-=4)+e.e+1,s.RM)},l.times=l.mul=function(e){var t,r=this,n=r.constructor,i=r.c,s=(e=new n(e)).c,o=i.length,a=s.length,c=r.e,l=e.e;if(e.s=r.s==e.s?1:-1,!i[0]||!s[0])return e.c=[e.e=0],e;for(e.e=c+l,o<a&&(t=i,i=s,s=t,l=o,o=a,a=l),t=new Array(l=o+a);l--;)t[l]=0;for(c=a;c--;){for(a=0,l=o+c;l>c;)a=t[l]+s[c]*i[l-c-1]+a,t[l--]=a%10,a=a/10|0;t[l]=a}for(a?++e.e:t.shift(),c=t.length;!t[--c];)t.pop();return e.c=t,e},l.toExponential=function(e,t){var r=this,i=r.c[0];if(e!==u){if(e!==~~e||e<0||e>n)throw Error(o);for(r=d(new r.constructor(r),++e,t);r.c.length<e;)r.c.push(0)}return p(r,!0,!!i)},l.toFixed=function(e,t){var r=this,i=r.c[0];if(e!==u){if(e!==~~e||e<0||e>n)throw Error(o);for(e=e+(r=d(new r.constructor(r),e+r.e+1,t)).e+1;r.c.length<e;)r.c.push(0)}return p(r,!1,!!i)},l[Symbol.for("nodejs.util.inspect.custom")]=l.toJSON=l.toString=function(){var e=this,t=e.constructor;return p(e,e.e<=t.NE||e.e>=t.PE,!!e.c[0])},l.toNumber=function(){var e=+p(this,!0,!0);if(!0===this.constructor.strict&&!this.eq(e.toString()))throw Error(i+"Imprecise conversion");return e},l.toPrecision=function(e,t){var r=this,i=r.constructor,o=r.c[0];if(e!==u){if(e!==~~e||e<1||e>n)throw Error(s+"precision");for(r=d(new i(r),e,t);r.c.length<e;)r.c.push(0)}return p(r,e<=r.e||r.e<=i.NE||r.e>=i.PE,!!o)},l.valueOf=function(){var e=this,t=e.constructor;if(!0===t.strict)throw Error(i+"valueOf disallowed");return p(e,e.e<=t.NE||e.e>=t.PE,!0)};const f=function e(){function t(r){var n=this;if(!(n instanceof t))return r===u?e():new t(r);if(r instanceof t)n.s=r.s,n.e=r.e,n.c=r.c.slice();else{if("string"!=typeof r){if(!0===t.strict&&"bigint"!=typeof r)throw TypeError(s+"value");r=0===r&&1/r<0?"-0":String(r)}!function(e,t){var r,n,i;if(!h.test(t))throw Error(s+"number");for(e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),i=t.length,n=0;n<i&&"0"==t.charAt(n);)++n;if(n==i)e.c=[e.e=0];else{for(;i>0&&"0"==t.charAt(--i););for(e.e=r-n-1,e.c=[],r=0;n<=i;)e.c[r++]=+t.charAt(n++)}}(n,r)}n.constructor=t}return t.prototype=l,t.DP=20,t.RM=1,t.NE=-7,t.PE=21,t.strict=!1,t.roundDown=0,t.roundHalfUp=1,t.roundHalfEven=2,t.roundUp=3,t}(),g={bigNumber:e=>new f(e||0),multiply(e,t){if(void 0===e||void 0===t)return new f(0);const r=new f(e),n=new f(t);return r.times(n)},formatNumberToLocalString:(e,t=2)=>void 0===e?"0.00":"number"==typeof e?e.toLocaleString("en-US",{maximumFractionDigits:t,minimumFractionDigits:t}):parseFloat(e).toLocaleString("en-US",{maximumFractionDigits:t,minimumFractionDigits:t}),parseLocalStringToNumber:e=>void 0===e?0:parseFloat(e.replace(/,/gu,""))}},5682:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=r(5215);n.__exportStar(r(7173),t),n.__exportStar(r(1089),t)},5826:function(e){e.exports={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}}},5905:(e,t,r)=>{async function n(...e){const t=await fetch(...e);if(!t.ok)throw new Error(`HTTP status code: ${t.status}`,{cause:t});return t}r.d(t,{Z:()=>i});class i{constructor({baseUrl:e,clientId:t}){this.baseUrl=e,this.clientId=t}async get({headers:e,signal:t,cache:r,...i}){const s=this.createUrl(i);return(await n(s,{method:"GET",headers:e,signal:t,cache:r})).json()}async getBlob({headers:e,signal:t,...r}){const i=this.createUrl(r);return(await n(i,{method:"GET",headers:e,signal:t})).blob()}async post({body:e,headers:t,signal:r,...i}){const s=this.createUrl(i);return(await n(s,{method:"POST",headers:t,body:e?JSON.stringify(e):void 0,signal:r})).json()}async put({body:e,headers:t,signal:r,...i}){const s=this.createUrl(i);return(await n(s,{method:"PUT",headers:t,body:e?JSON.stringify(e):void 0,signal:r})).json()}async delete({body:e,headers:t,signal:r,...i}){const s=this.createUrl(i);return(await n(s,{method:"DELETE",headers:t,body:e?JSON.stringify(e):void 0,signal:r})).json()}createUrl({path:e,params:t}){const r=new URL(e,this.baseUrl);return t&&Object.entries(t).forEach((([e,t])=>{t&&r.searchParams.append(e,t)})),this.clientId&&r.searchParams.append("clientId",this.clientId),r}}},6013:(e,t,r)=>{r.d(t,{TQ:()=>o,ol:()=>a,r9:()=>s});var n=r(9190),i=r(2531);function s(e,t,r){return e&t^~e&r}function o(e,t,r){return e&t^e&r^t&r}class a extends i.Vw{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,i.O8)(this.buffer)}update(e){(0,n.CC)(this);const{view:t,buffer:r,blockLen:s}=this,o=(e=(0,i.ZJ)(e)).length;for(let n=0;n<o;){const a=Math.min(s-this.pos,o-n);if(a!==s)r.set(e.subarray(n,n+a),this.pos),this.pos+=a,n+=a,this.pos===s&&(this.process(t,0),this.pos=0);else{const t=(0,i.O8)(e);for(;s<=o-n;n+=s)this.process(t,n)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,n.CC)(this),(0,n.Ht)(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:s,isLE:o}=this;let{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(r,0),a=0);for(let e=a;e<s;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,l=n?0:4;e.setUint32(t+c,o,n),e.setUint32(t+l,a,n)}(r,s-8,BigInt(8*this.length),o),this.process(r,0);const c=(0,i.O8)(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=l/4,h=this.get();if(u>h.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<u;e++)c.setUint32(4*e,h[e],o)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:o}=this;return e.length=n,e.pos=o,e.finished=i,e.destroyed=s,n%t&&e.buffer.set(r),e}}},6036:(e,t,r)=>{r.d(t,{IP:()=>o,T8:()=>i,Ud:()=>s,Ws:()=>n});const n={WALLET_ID:"@appkit/wallet_id",WALLET_NAME:"@appkit/wallet_name",SOLANA_WALLET:"@appkit/solana_wallet",SOLANA_CAIP_CHAIN:"@appkit/solana_caip_chain",ACTIVE_CAIP_NETWORK_ID:"@appkit/active_caip_network_id",CONNECTED_SOCIAL:"@appkit/connected_social",CONNECTED_SOCIAL_USERNAME:"@appkit-wallet/SOCIAL_USERNAME",RECENT_WALLETS:"@appkit/recent_wallets",DEEPLINK_CHOICE:"WALLETCONNECT_DEEPLINK_CHOICE",ACTIVE_NAMESPACE:"@appkit/active_namespace",CONNECTED_NAMESPACES:"@appkit/connected_namespaces",CONNECTION_STATUS:"@appkit/connection_status",SIWX_AUTH_TOKEN:"@appkit/siwx-auth-token",SIWX_NONCE_TOKEN:"@appkit/siwx-nonce-token",TELEGRAM_SOCIAL_PROVIDER:"@appkit/social_provider",NATIVE_BALANCE_CACHE:"@appkit/native_balance_cache",PORTFOLIO_CACHE:"@appkit/portfolio_cache",ENS_CACHE:"@appkit/ens_cache",IDENTITY_CACHE:"@appkit/identity_cache",PREFERRED_ACCOUNT_TYPES:"@appkit/preferred_account_types"};function i(e){if(!e)throw new Error("Namespace is required for CONNECTED_CONNECTOR_ID");return`@appkit/${e}:connected_connector_id`}const s={setItem(e,t){o()&&void 0!==t&&localStorage.setItem(e,t)},getItem(e){if(o())return localStorage.getItem(e)||void 0},removeItem(e){o()&&localStorage.removeItem(e)},clear(){o()&&localStorage.clear()}};function o(){return"undefined"!=typeof window&&"undefined"!=typeof localStorage}},6092:(e,t,r)=>{r.d(t,{g:()=>p});var n=r(4376),i=r(2733),s=r(7508),o=r(8249),a=r(6742),c=r(9177),l=r(7388),u=r(9088),h=r(5306),d=r(5042);const p={getConnectorsByType(e,t,r){const{customWallets:n}=i.H.state,o=s.i.getRecentWallets(),a=d.A.filterOutDuplicateWallets(t),c=d.A.filterOutDuplicateWallets(r),l=e.filter((e=>"MULTI_CHAIN"===e.type)),u=e.filter((e=>"ANNOUNCED"===e.type)),h=e.filter((e=>"INJECTED"===e.type));return{custom:n,recent:o,external:e.filter((e=>"EXTERNAL"===e.type)),multiChain:l,announced:u,injected:h,recommended:a,featured:c}},showConnector(e){const t=e.info?.rdns,r=Boolean(t)&&o.N.state.excludedWallets.some((e=>Boolean(e.rdns)&&e.rdns===t)),n=Boolean(e.name)&&o.N.state.excludedWallets.some((t=>h.y.isLowerCaseMatch(t.name,e.name)));if("INJECTED"===e.type){if(!a.w.isMobile()&&"Browser Wallet"===e.name)return!1;if(!t&&!c.x.checkInstalled())return!1;if(r||n)return!1}return"ANNOUNCED"!==e.type&&"EXTERNAL"!==e.type||!r&&!n},getIsConnectedWithWC:()=>Array.from(l.W.state.chains.values()).some((e=>u.a.getConnectorId(e.namespace)===n.o.CONNECTOR_ID.WALLET_CONNECT)),getConnectorTypeOrder({recommended:e,featured:t,custom:r,recent:n,announced:s,injected:o,multiChain:a,external:c,overriddenConnectors:l=i.H.state.features?.connectorTypeOrder??[]}){const u=p.getIsConnectedWithWC(),h=[{type:"walletConnect",isEnabled:i.H.state.enableWalletConnect&&!u},{type:"recent",isEnabled:n.length>0},{type:"injected",isEnabled:[...o,...s,...a].length>0},{type:"featured",isEnabled:t.length>0},{type:"custom",isEnabled:r&&r.length>0},{type:"external",isEnabled:c.length>0},{type:"recommended",isEnabled:e.length>0}].filter((e=>e.isEnabled)),d=new Set(h.map((e=>e.type))),f=l.filter((e=>d.has(e))).map((e=>({type:e,isEnabled:!0}))),g=h.filter((({type:e})=>!f.some((({type:t})=>t===e))));return Array.from(new Set([...f,...g].map((({type:e})=>e))))}}},6109:(e,t,r)=>{r.d(t,{JX:()=>l,RF:()=>c,W5:()=>d,ck:()=>f,ds:()=>u,fD:()=>p});var n=r(2618),i=r(3096);let s,o,a;function c(e,t){s=document.createElement("style"),o=document.createElement("style"),a=document.createElement("style"),s.textContent=h(e).core.cssText,o.textContent=h(e).dark.cssText,a.textContent=h(e).light.cssText,document.head.appendChild(s),document.head.appendChild(o),document.head.appendChild(a),l(t)}function l(e){o&&a&&("light"===e?(o.removeAttribute("media"),a.media="enabled"):(a.removeAttribute("media"),o.media="enabled"))}function u(e){s&&o&&a&&(s.textContent=h(e).core.cssText,o.textContent=h(e).dark.cssText,a.textContent=h(e).light.cssText)}function h(e){return{core:n.AH`
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
      @keyframes w3m-shake {
        0% {
          transform: scale(1) rotate(0deg);
        }
        20% {
          transform: scale(1) rotate(-1deg);
        }
        40% {
          transform: scale(1) rotate(1.5deg);
        }
        60% {
          transform: scale(1) rotate(-1.5deg);
        }
        80% {
          transform: scale(1) rotate(1deg);
        }
        100% {
          transform: scale(1) rotate(0deg);
        }
      }
      @keyframes w3m-iframe-fade-out {
        0% {
          opacity: 1;
        }
        100% {
          opacity: 0;
        }
      }
      @keyframes w3m-iframe-zoom-in {
        0% {
          transform: translateY(50px);
          opacity: 0;
        }
        100% {
          transform: translateY(0px);
          opacity: 1;
        }
      }
      @keyframes w3m-iframe-zoom-in-mobile {
        0% {
          transform: scale(0.95);
          opacity: 0;
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }
      :root {
        --w3m-modal-width: 360px;
        --w3m-color-mix-strength: ${(0,n.iz)(e?.["--w3m-color-mix-strength"]?`${e["--w3m-color-mix-strength"]}%`:"0%")};
        --w3m-font-family: ${(0,n.iz)(e?.["--w3m-font-family"]||"Inter, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;")};
        --w3m-font-size-master: ${(0,n.iz)(e?.["--w3m-font-size-master"]||"10px")};
        --w3m-border-radius-master: ${(0,n.iz)(e?.["--w3m-border-radius-master"]||"4px")};
        --w3m-z-index: ${(0,n.iz)(e?.["--w3m-z-index"]||999)};

        --wui-font-family: var(--w3m-font-family);

        --wui-font-size-mini: calc(var(--w3m-font-size-master) * 0.8);
        --wui-font-size-micro: var(--w3m-font-size-master);
        --wui-font-size-tiny: calc(var(--w3m-font-size-master) * 1.2);
        --wui-font-size-small: calc(var(--w3m-font-size-master) * 1.4);
        --wui-font-size-paragraph: calc(var(--w3m-font-size-master) * 1.6);
        --wui-font-size-medium: calc(var(--w3m-font-size-master) * 1.8);
        --wui-font-size-large: calc(var(--w3m-font-size-master) * 2);
        --wui-font-size-title-6: calc(var(--w3m-font-size-master) * 2.2);
        --wui-font-size-medium-title: calc(var(--w3m-font-size-master) * 2.4);
        --wui-font-size-2xl: calc(var(--w3m-font-size-master) * 4);

        --wui-border-radius-5xs: var(--w3m-border-radius-master);
        --wui-border-radius-4xs: calc(var(--w3m-border-radius-master) * 1.5);
        --wui-border-radius-3xs: calc(var(--w3m-border-radius-master) * 2);
        --wui-border-radius-xxs: calc(var(--w3m-border-radius-master) * 3);
        --wui-border-radius-xs: calc(var(--w3m-border-radius-master) * 4);
        --wui-border-radius-s: calc(var(--w3m-border-radius-master) * 5);
        --wui-border-radius-m: calc(var(--w3m-border-radius-master) * 7);
        --wui-border-radius-l: calc(var(--w3m-border-radius-master) * 9);
        --wui-border-radius-3xl: calc(var(--w3m-border-radius-master) * 20);

        --wui-font-weight-light: 400;
        --wui-font-weight-regular: 500;
        --wui-font-weight-medium: 600;
        --wui-font-weight-bold: 700;

        --wui-letter-spacing-2xl: -1.6px;
        --wui-letter-spacing-medium-title: -0.96px;
        --wui-letter-spacing-title-6: -0.88px;
        --wui-letter-spacing-large: -0.8px;
        --wui-letter-spacing-medium: -0.72px;
        --wui-letter-spacing-paragraph: -0.64px;
        --wui-letter-spacing-small: -0.56px;
        --wui-letter-spacing-tiny: -0.48px;
        --wui-letter-spacing-micro: -0.2px;
        --wui-letter-spacing-mini: -0.16px;

        --wui-spacing-0: 0px;
        --wui-spacing-4xs: 2px;
        --wui-spacing-3xs: 4px;
        --wui-spacing-xxs: 6px;
        --wui-spacing-2xs: 7px;
        --wui-spacing-xs: 8px;
        --wui-spacing-1xs: 10px;
        --wui-spacing-s: 12px;
        --wui-spacing-m: 14px;
        --wui-spacing-l: 16px;
        --wui-spacing-2l: 18px;
        --wui-spacing-xl: 20px;
        --wui-spacing-xxl: 24px;
        --wui-spacing-2xl: 32px;
        --wui-spacing-3xl: 40px;
        --wui-spacing-4xl: 90px;
        --wui-spacing-5xl: 95px;

        --wui-icon-box-size-xxs: 14px;
        --wui-icon-box-size-xs: 20px;
        --wui-icon-box-size-sm: 24px;
        --wui-icon-box-size-md: 32px;
        --wui-icon-box-size-mdl: 36px;
        --wui-icon-box-size-lg: 40px;
        --wui-icon-box-size-2lg: 48px;
        --wui-icon-box-size-xl: 64px;

        --wui-icon-size-inherit: inherit;
        --wui-icon-size-xxs: 10px;
        --wui-icon-size-xs: 12px;
        --wui-icon-size-sm: 14px;
        --wui-icon-size-md: 16px;
        --wui-icon-size-mdl: 18px;
        --wui-icon-size-lg: 20px;
        --wui-icon-size-xl: 24px;
        --wui-icon-size-xxl: 28px;

        --wui-wallet-image-size-inherit: inherit;
        --wui-wallet-image-size-sm: 40px;
        --wui-wallet-image-size-md: 56px;
        --wui-wallet-image-size-lg: 80px;

        --wui-visual-size-size-inherit: inherit;
        --wui-visual-size-sm: 40px;
        --wui-visual-size-md: 55px;
        --wui-visual-size-lg: 80px;

        --wui-box-size-md: 100px;
        --wui-box-size-lg: 120px;

        --wui-ease-out-power-2: cubic-bezier(0, 0, 0.22, 1);
        --wui-ease-out-power-1: cubic-bezier(0, 0, 0.55, 1);

        --wui-ease-in-power-3: cubic-bezier(0.66, 0, 1, 1);
        --wui-ease-in-power-2: cubic-bezier(0.45, 0, 1, 1);
        --wui-ease-in-power-1: cubic-bezier(0.3, 0, 1, 1);

        --wui-ease-inout-power-1: cubic-bezier(0.45, 0, 0.55, 1);

        --wui-duration-lg: 200ms;
        --wui-duration-md: 125ms;
        --wui-duration-sm: 75ms;

        --wui-path-network-sm: path(
          'M15.4 2.1a5.21 5.21 0 0 1 5.2 0l11.61 6.7a5.21 5.21 0 0 1 2.61 4.52v13.4c0 1.87-1 3.59-2.6 4.52l-11.61 6.7c-1.62.93-3.6.93-5.22 0l-11.6-6.7a5.21 5.21 0 0 1-2.61-4.51v-13.4c0-1.87 1-3.6 2.6-4.52L15.4 2.1Z'
        );

        --wui-path-network-md: path(
          'M43.4605 10.7248L28.0485 1.61089C25.5438 0.129705 22.4562 0.129705 19.9515 1.61088L4.53951 10.7248C2.03626 12.2051 0.5 14.9365 0.5 17.886V36.1139C0.5 39.0635 2.03626 41.7949 4.53951 43.2752L19.9515 52.3891C22.4562 53.8703 25.5438 53.8703 28.0485 52.3891L43.4605 43.2752C45.9637 41.7949 47.5 39.0635 47.5 36.114V17.8861C47.5 14.9365 45.9637 12.2051 43.4605 10.7248Z'
        );

        --wui-path-network-lg: path(
          'M78.3244 18.926L50.1808 2.45078C45.7376 -0.150261 40.2624 -0.150262 35.8192 2.45078L7.6756 18.926C3.23322 21.5266 0.5 26.3301 0.5 31.5248V64.4752C0.5 69.6699 3.23322 74.4734 7.6756 77.074L35.8192 93.5492C40.2624 96.1503 45.7376 96.1503 50.1808 93.5492L78.3244 77.074C82.7668 74.4734 85.5 69.6699 85.5 64.4752V31.5248C85.5 26.3301 82.7668 21.5266 78.3244 18.926Z'
        );

        --wui-width-network-sm: 36px;
        --wui-width-network-md: 48px;
        --wui-width-network-lg: 86px;

        --wui-height-network-sm: 40px;
        --wui-height-network-md: 54px;
        --wui-height-network-lg: 96px;

        --wui-icon-size-network-xs: 12px;
        --wui-icon-size-network-sm: 16px;
        --wui-icon-size-network-md: 24px;
        --wui-icon-size-network-lg: 42px;

        --wui-color-inherit: inherit;

        --wui-color-inverse-100: #fff;
        --wui-color-inverse-000: #000;

        --wui-cover: rgba(20, 20, 20, 0.8);

        --wui-color-modal-bg: var(--wui-color-modal-bg-base);

        --wui-color-accent-100: var(--wui-color-accent-base-100);
        --wui-color-accent-090: var(--wui-color-accent-base-090);
        --wui-color-accent-080: var(--wui-color-accent-base-080);

        --wui-color-success-100: var(--wui-color-success-base-100);
        --wui-color-success-125: var(--wui-color-success-base-125);

        --wui-color-warning-100: var(--wui-color-warning-base-100);

        --wui-color-error-100: var(--wui-color-error-base-100);
        --wui-color-error-125: var(--wui-color-error-base-125);

        --wui-color-blue-100: var(--wui-color-blue-base-100);
        --wui-color-blue-90: var(--wui-color-blue-base-90);

        --wui-icon-box-bg-error-100: var(--wui-icon-box-bg-error-base-100);
        --wui-icon-box-bg-blue-100: var(--wui-icon-box-bg-blue-base-100);
        --wui-icon-box-bg-success-100: var(--wui-icon-box-bg-success-base-100);
        --wui-icon-box-bg-inverse-100: var(--wui-icon-box-bg-inverse-base-100);

        --wui-all-wallets-bg-100: var(--wui-all-wallets-bg-100);

        --wui-avatar-border: var(--wui-avatar-border-base);

        --wui-thumbnail-border: var(--wui-thumbnail-border-base);

        --wui-wallet-button-bg: var(--wui-wallet-button-bg-base);

        --wui-box-shadow-blue: var(--wui-color-accent-glass-020);
      }

      @supports (background: color-mix(in srgb, white 50%, black)) {
        :root {
          --wui-color-modal-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-modal-bg-base)
          );

          --wui-box-shadow-blue: color-mix(in srgb, var(--wui-color-accent-100) 20%, transparent);

          --wui-color-accent-100: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 100%,
            transparent
          );
          --wui-color-accent-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-090: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 90%,
            transparent
          );
          --wui-color-accent-glass-080: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 80%,
            transparent
          );
          --wui-color-accent-glass-020: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 20%,
            transparent
          );
          --wui-color-accent-glass-015: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 15%,
            transparent
          );
          --wui-color-accent-glass-010: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 10%,
            transparent
          );
          --wui-color-accent-glass-005: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 5%,
            transparent
          );
          --wui-color-accent-002: color-mix(
            in srgb,
            var(--wui-color-accent-base-100) 2%,
            transparent
          );

          --wui-color-fg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-100)
          );
          --wui-color-fg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-125)
          );
          --wui-color-fg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-150)
          );
          --wui-color-fg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-175)
          );
          --wui-color-fg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-200)
          );
          --wui-color-fg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-225)
          );
          --wui-color-fg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-250)
          );
          --wui-color-fg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-275)
          );
          --wui-color-fg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-300)
          );
          --wui-color-fg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-325)
          );
          --wui-color-fg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-fg-350)
          );

          --wui-color-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-100)
          );
          --wui-color-bg-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-125)
          );
          --wui-color-bg-150: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-150)
          );
          --wui-color-bg-175: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-175)
          );
          --wui-color-bg-200: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-200)
          );
          --wui-color-bg-225: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-225)
          );
          --wui-color-bg-250: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-250)
          );
          --wui-color-bg-275: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-275)
          );
          --wui-color-bg-300: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-300)
          );
          --wui-color-bg-325: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-325)
          );
          --wui-color-bg-350: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-bg-350)
          );

          --wui-color-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-100)
          );
          --wui-color-success-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-success-base-125)
          );

          --wui-color-warning-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-warning-base-100)
          );

          --wui-color-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-100)
          );
          --wui-color-blue-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-100)
          );
          --wui-color-blue-90: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-blue-base-90)
          );
          --wui-color-error-125: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-color-error-base-125)
          );

          --wui-icon-box-bg-error-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-error-base-100)
          );
          --wui-icon-box-bg-accent-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-blue-base-100)
          );
          --wui-icon-box-bg-success-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-success-base-100)
          );
          --wui-icon-box-bg-inverse-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-icon-box-bg-inverse-base-100)
          );

          --wui-all-wallets-bg-100: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-all-wallets-bg-100)
          );

          --wui-avatar-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-avatar-border-base)
          );

          --wui-thumbnail-border: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-thumbnail-border-base)
          );

          --wui-wallet-button-bg: color-mix(
            in srgb,
            var(--w3m-color-mix) var(--w3m-color-mix-strength),
            var(--wui-wallet-button-bg-base)
          );
        }
      }
    `,light:n.AH`
      :root {
        --w3m-color-mix: ${(0,n.iz)(e?.["--w3m-color-mix"]||"#fff")};
        --w3m-accent: ${(0,n.iz)((0,i.o)(e,"dark")["--w3m-accent"])};
        --w3m-default: #fff;

        --wui-color-modal-bg-base: ${(0,n.iz)((0,i.o)(e,"dark")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(230, 100%, 67%, 1);
        --wui-color-blueberry-090: hsla(231, 76%, 61%, 1);
        --wui-color-blueberry-080: hsla(230, 59%, 55%, 1);
        --wui-color-blueberry-050: hsla(231, 100%, 70%, 0.1);

        --wui-color-fg-100: #e4e7e7;
        --wui-color-fg-125: #d0d5d5;
        --wui-color-fg-150: #a8b1b1;
        --wui-color-fg-175: #a8b0b0;
        --wui-color-fg-200: #949e9e;
        --wui-color-fg-225: #868f8f;
        --wui-color-fg-250: #788080;
        --wui-color-fg-275: #788181;
        --wui-color-fg-300: #6e7777;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #363636;

        --wui-color-bg-100: #141414;
        --wui-color-bg-125: #191a1a;
        --wui-color-bg-150: #1e1f1f;
        --wui-color-bg-175: #222525;
        --wui-color-bg-200: #272a2a;
        --wui-color-bg-225: #2c3030;
        --wui-color-bg-250: #313535;
        --wui-color-bg-275: #363b3b;
        --wui-color-bg-300: #3b4040;
        --wui-color-bg-325: #252525;
        --wui-color-bg-350: #ffffff;

        --wui-color-success-base-100: #26d962;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f25a67;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 217, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 217, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 217, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 217, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 217, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 217, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 217, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 217, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 217, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 217, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(242, 90, 103, 0.01);
        --wui-color-error-glass-002: rgba(242, 90, 103, 0.02);
        --wui-color-error-glass-005: rgba(242, 90, 103, 0.05);
        --wui-color-error-glass-010: rgba(242, 90, 103, 0.1);
        --wui-color-error-glass-015: rgba(242, 90, 103, 0.15);
        --wui-color-error-glass-020: rgba(242, 90, 103, 0.2);
        --wui-color-error-glass-025: rgba(242, 90, 103, 0.25);
        --wui-color-error-glass-030: rgba(242, 90, 103, 0.3);
        --wui-color-error-glass-060: rgba(242, 90, 103, 0.6);
        --wui-color-error-glass-080: rgba(242, 90, 103, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-color-gray-glass-001: rgba(255, 255, 255, 0.01);
        --wui-color-gray-glass-002: rgba(255, 255, 255, 0.02);
        --wui-color-gray-glass-005: rgba(255, 255, 255, 0.05);
        --wui-color-gray-glass-010: rgba(255, 255, 255, 0.1);
        --wui-color-gray-glass-015: rgba(255, 255, 255, 0.15);
        --wui-color-gray-glass-020: rgba(255, 255, 255, 0.2);
        --wui-color-gray-glass-025: rgba(255, 255, 255, 0.25);
        --wui-color-gray-glass-030: rgba(255, 255, 255, 0.3);
        --wui-color-gray-glass-060: rgba(255, 255, 255, 0.6);
        --wui-color-gray-glass-080: rgba(255, 255, 255, 0.8);
        --wui-color-gray-glass-090: rgba(255, 255, 255, 0.9);

        --wui-color-dark-glass-100: rgba(42, 42, 42, 1);

        --wui-icon-box-bg-error-base-100: #3c2426;
        --wui-icon-box-bg-blue-base-100: #20303f;
        --wui-icon-box-bg-success-base-100: #1f3a28;
        --wui-icon-box-bg-inverse-base-100: #243240;

        --wui-all-wallets-bg-100: #222b35;

        --wui-avatar-border-base: #252525;

        --wui-thumbnail-border-base: #252525;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --w3m-card-embedded-shadow-color: rgb(17 17 18 / 25%);
      }
    `,dark:n.AH`
      :root {
        --w3m-color-mix: ${(0,n.iz)(e?.["--w3m-color-mix"]||"#000")};
        --w3m-accent: ${(0,n.iz)((0,i.o)(e,"light")["--w3m-accent"])};
        --w3m-default: #000;

        --wui-color-modal-bg-base: ${(0,n.iz)((0,i.o)(e,"light")["--w3m-background"])};
        --wui-color-accent-base-100: var(--w3m-accent);

        --wui-color-blueberry-100: hsla(231, 100%, 70%, 1);
        --wui-color-blueberry-090: hsla(231, 97%, 72%, 1);
        --wui-color-blueberry-080: hsla(231, 92%, 74%, 1);

        --wui-color-fg-100: #141414;
        --wui-color-fg-125: #2d3131;
        --wui-color-fg-150: #474d4d;
        --wui-color-fg-175: #636d6d;
        --wui-color-fg-200: #798686;
        --wui-color-fg-225: #828f8f;
        --wui-color-fg-250: #8b9797;
        --wui-color-fg-275: #95a0a0;
        --wui-color-fg-300: #9ea9a9;
        --wui-color-fg-325: #9a9a9a;
        --wui-color-fg-350: #d0d0d0;

        --wui-color-bg-100: #ffffff;
        --wui-color-bg-125: #f5fafa;
        --wui-color-bg-150: #f3f8f8;
        --wui-color-bg-175: #eef4f4;
        --wui-color-bg-200: #eaf1f1;
        --wui-color-bg-225: #e5eded;
        --wui-color-bg-250: #e1e9e9;
        --wui-color-bg-275: #dce7e7;
        --wui-color-bg-300: #d8e3e3;
        --wui-color-bg-325: #f3f3f3;
        --wui-color-bg-350: #202020;

        --wui-color-success-base-100: #26b562;
        --wui-color-success-base-125: #30a46b;

        --wui-color-warning-base-100: #f3a13f;

        --wui-color-error-base-100: #f05142;
        --wui-color-error-base-125: #df4a34;

        --wui-color-blue-base-100: rgba(102, 125, 255, 1);
        --wui-color-blue-base-90: rgba(102, 125, 255, 0.9);

        --wui-color-success-glass-001: rgba(38, 181, 98, 0.01);
        --wui-color-success-glass-002: rgba(38, 181, 98, 0.02);
        --wui-color-success-glass-005: rgba(38, 181, 98, 0.05);
        --wui-color-success-glass-010: rgba(38, 181, 98, 0.1);
        --wui-color-success-glass-015: rgba(38, 181, 98, 0.15);
        --wui-color-success-glass-020: rgba(38, 181, 98, 0.2);
        --wui-color-success-glass-025: rgba(38, 181, 98, 0.25);
        --wui-color-success-glass-030: rgba(38, 181, 98, 0.3);
        --wui-color-success-glass-060: rgba(38, 181, 98, 0.6);
        --wui-color-success-glass-080: rgba(38, 181, 98, 0.8);

        --wui-color-success-glass-reown-020: rgba(48, 164, 107, 0.2);

        --wui-color-warning-glass-reown-020: rgba(243, 161, 63, 0.2);

        --wui-color-error-glass-001: rgba(240, 81, 66, 0.01);
        --wui-color-error-glass-002: rgba(240, 81, 66, 0.02);
        --wui-color-error-glass-005: rgba(240, 81, 66, 0.05);
        --wui-color-error-glass-010: rgba(240, 81, 66, 0.1);
        --wui-color-error-glass-015: rgba(240, 81, 66, 0.15);
        --wui-color-error-glass-020: rgba(240, 81, 66, 0.2);
        --wui-color-error-glass-025: rgba(240, 81, 66, 0.25);
        --wui-color-error-glass-030: rgba(240, 81, 66, 0.3);
        --wui-color-error-glass-060: rgba(240, 81, 66, 0.6);
        --wui-color-error-glass-080: rgba(240, 81, 66, 0.8);

        --wui-color-error-glass-reown-020: rgba(223, 74, 52, 0.2);

        --wui-icon-box-bg-error-base-100: #f4dfdd;
        --wui-icon-box-bg-blue-base-100: #d9ecfb;
        --wui-icon-box-bg-success-base-100: #daf0e4;
        --wui-icon-box-bg-inverse-base-100: #dcecfc;

        --wui-all-wallets-bg-100: #e8f1fa;

        --wui-avatar-border-base: #f3f4f4;

        --wui-thumbnail-border-base: #eaefef;

        --wui-wallet-button-bg-base: var(--wui-color-bg-125);

        --wui-color-gray-glass-001: rgba(0, 0, 0, 0.01);
        --wui-color-gray-glass-002: rgba(0, 0, 0, 0.02);
        --wui-color-gray-glass-005: rgba(0, 0, 0, 0.05);
        --wui-color-gray-glass-010: rgba(0, 0, 0, 0.1);
        --wui-color-gray-glass-015: rgba(0, 0, 0, 0.15);
        --wui-color-gray-glass-020: rgba(0, 0, 0, 0.2);
        --wui-color-gray-glass-025: rgba(0, 0, 0, 0.25);
        --wui-color-gray-glass-030: rgba(0, 0, 0, 0.3);
        --wui-color-gray-glass-060: rgba(0, 0, 0, 0.6);
        --wui-color-gray-glass-080: rgba(0, 0, 0, 0.8);
        --wui-color-gray-glass-090: rgba(0, 0, 0, 0.9);

        --wui-color-dark-glass-100: rgba(233, 233, 233, 1);

        --w3m-card-embedded-shadow-color: rgb(224 225 233 / 25%);
      }
    `}}const d=n.AH`
  *,
  *::after,
  *::before,
  :host {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-style: normal;
    text-rendering: optimizeSpeed;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-tap-highlight-color: transparent;
    font-family: var(--wui-font-family);
    backface-visibility: hidden;
  }
`,p=n.AH`
  button,
  a {
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    transition:
      color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      background-color var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border var(--wui-duration-lg) var(--wui-ease-out-power-1),
      border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1),
      box-shadow var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: background-color, color, border, box-shadow, border-radius;
    outline: none;
    border: none;
    column-gap: var(--wui-spacing-3xs);
    background-color: transparent;
    text-decoration: none;
  }

  wui-flex {
    transition: border-radius var(--wui-duration-lg) var(--wui-ease-out-power-1);
    will-change: border-radius;
  }

  button:disabled > wui-wallet-image,
  button:disabled > wui-all-wallets-image,
  button:disabled > wui-network-image,
  button:disabled > wui-image,
  button:disabled > wui-transaction-visual,
  button:disabled > wui-logo {
    filter: grayscale(1);
  }

  @media (hover: hover) and (pointer: fine) {
    button:hover:enabled {
      background-color: var(--wui-color-gray-glass-005);
    }

    button:active:enabled {
      background-color: var(--wui-color-gray-glass-010);
    }
  }

  button:disabled > wui-icon-box {
    opacity: 0.5;
  }

  input {
    border: none;
    outline: none;
    appearance: none;
  }
`,f=n.AH`
  .wui-color-inherit {
    color: var(--wui-color-inherit);
  }

  .wui-color-accent-100 {
    color: var(--wui-color-accent-100);
  }

  .wui-color-error-100 {
    color: var(--wui-color-error-100);
  }

  .wui-color-blue-100 {
    color: var(--wui-color-blue-100);
  }

  .wui-color-blue-90 {
    color: var(--wui-color-blue-90);
  }

  .wui-color-error-125 {
    color: var(--wui-color-error-125);
  }

  .wui-color-success-100 {
    color: var(--wui-color-success-100);
  }

  .wui-color-success-125 {
    color: var(--wui-color-success-125);
  }

  .wui-color-inverse-100 {
    color: var(--wui-color-inverse-100);
  }

  .wui-color-inverse-000 {
    color: var(--wui-color-inverse-000);
  }

  .wui-color-fg-100 {
    color: var(--wui-color-fg-100);
  }

  .wui-color-fg-200 {
    color: var(--wui-color-fg-200);
  }

  .wui-color-fg-300 {
    color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    color: var(--wui-color-fg-350);
  }

  .wui-bg-color-inherit {
    background-color: var(--wui-color-inherit);
  }

  .wui-bg-color-blue-100 {
    background-color: var(--wui-color-accent-100);
  }

  .wui-bg-color-error-100 {
    background-color: var(--wui-color-error-100);
  }

  .wui-bg-color-error-125 {
    background-color: var(--wui-color-error-125);
  }

  .wui-bg-color-success-100 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-success-125 {
    background-color: var(--wui-color-success-100);
  }

  .wui-bg-color-inverse-100 {
    background-color: var(--wui-color-inverse-100);
  }

  .wui-bg-color-inverse-000 {
    background-color: var(--wui-color-inverse-000);
  }

  .wui-bg-color-fg-100 {
    background-color: var(--wui-color-fg-100);
  }

  .wui-bg-color-fg-200 {
    background-color: var(--wui-color-fg-200);
  }

  .wui-bg-color-fg-300 {
    background-color: var(--wui-color-fg-300);
  }

  .wui-color-fg-325 {
    background-color: var(--wui-color-fg-325);
  }

  .wui-color-fg-350 {
    background-color: var(--wui-color-fg-350);
  }
`},6279:function(e){e.exports=function(e,t,r){e=e||{};var n=t.prototype,i={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function s(e,t,r,i){return n.fromToBase(e,t,r,i)}r.en.relativeTime=i,n.fromToBase=function(t,n,s,o,a){for(var c,l,u,h=s.$locale().relativeTime||i,d=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],p=d.length,f=0;f<p;f+=1){var g=d[f];g.d&&(c=o?r(t).diff(s,g.d,!0):s.diff(t,g.d,!0));var m=(e.rounding||Math.round)(Math.abs(c));if(u=c>0,m<=g.r||!g.r){m<=1&&f>0&&(g=d[f-1]);var y=h[g.l];a&&(m=a(""+m)),l="string"==typeof y?y.replace("%d",m):y(m,n,g.l,u);break}}if(n)return l;var w=u?h.future:h.past;return"function"==typeof w?w(l):w.replace("%s",l)},n.to=function(e,t){return s(e,t,this,!0)},n.from=function(e,t){return s(e,t,this)};var o=function(e){return e.$u?r.utc():r()};n.toNow=function(e){return this.to(o(this),e)},n.fromNow=function(e){return this.from(o(this),e)}}},6360:(e,t,r)=>{r.d(t,{W:()=>d});var n=r(9073),i=r(152),s=r(3450),o=r(5595),a=r(7388),c=r(184),l=r(2733),u=r(1871);const h=(0,n.BX)({transactions:[],coinbaseTransactions:{},transactionsByYear:{},lastNetworkInView:void 0,loading:!1,empty:!1,next:void 0}),d={state:h,subscribe:e=>(0,n.B1)(h,(()=>e(h))),setLastNetworkInView(e){h.lastNetworkInView=e},async fetchTransactions(e,t){if(!e)throw new Error("Transactions can't be fetched without an accountAddress");h.loading=!0;try{const r=await o.T.fetchTransactions({account:e,cursor:h.next,onramp:t,cache:"coinbase"===t?"no-cache":void 0,chainId:a.W.state.activeCaipNetwork?.caipNetworkId}),n=this.filterSpamTransactions(r.data),i=this.filterByConnectedChain(n),s=[...h.transactions,...i];h.loading=!1,"coinbase"===t?h.coinbaseTransactions=this.groupTransactionsByYearAndMonth(h.coinbaseTransactions,r.data):(h.transactions=s,h.transactionsByYear=this.groupTransactionsByYearAndMonth(h.transactionsByYear,i)),h.empty=0===s.length,h.next=r.next?r.next:void 0}catch(t){const r=a.W.state.activeChain;c.E.sendEvent({type:"track",event:"ERROR_FETCH_TRANSACTIONS",properties:{address:e,projectId:l.H.state.projectId,cursor:h.next,isSmartAccount:s.U.state.preferredAccountTypes?.[r]===i.Vl.ACCOUNT_TYPES.SMART_ACCOUNT}}),u.P.showError("Failed to fetch transactions"),h.loading=!1,h.empty=!0,h.next=void 0}},groupTransactionsByYearAndMonth(e={},t=[]){const r=e;return t.forEach((e=>{const t=new Date(e.metadata.minedAt).getFullYear(),n=new Date(e.metadata.minedAt).getMonth(),i=r[t]??{},s=(i[n]??[]).filter((t=>t.id!==e.id));r[t]={...i,[n]:[...s,e].sort(((e,t)=>new Date(t.metadata.minedAt).getTime()-new Date(e.metadata.minedAt).getTime()))}})),r},filterSpamTransactions:e=>e.filter((e=>!e.transfers.every((e=>!0===e.nft_info?.flags.is_spam)))),filterByConnectedChain(e){const t=a.W.state.activeCaipNetwork?.caipNetworkId;return e.filter((e=>e.metadata.chain===t))},clearCursor(){h.next=void 0},resetTransactions(){h.transactions=[],h.transactionsByYear={},h.lastNetworkInView=void 0,h.loading=!1,h.empty=!1,h.next=void 0}}},6396:(e,t,r)=>{r.d(t,{W:()=>m});var n=r(9073),i=r(4707),s=r(6742),o=r(3450),a=r(8249),c=r(7388),l=r(9177),u=r(9088),h=r(184),d=r(2733),p=r(8467),f=r(8508);const g=(0,n.BX)({loading:!1,loadingNamespaceMap:new Map,open:!1,shake:!1,namespace:void 0}),m={state:g,subscribe:e=>(0,n.B1)(g,(()=>e(g))),subscribeKey:(e,t)=>(0,i.u$)(g,e,t),async open(e){const t="connected"===o.U.state.status;l.x.state.wcBasic?a.N.prefetch({fetchNetworkImages:!1,fetchConnectorImages:!1}):await a.N.prefetch({fetchConnectorImages:!t,fetchFeaturedWallets:!t,fetchRecommendedWallets:!t}),e?.namespace?(await c.W.switchActiveNamespace(e.namespace),m.setLoading(!0,e.namespace)):m.setLoading(!0),u.a.setFilterByNamespace(e?.namespace);const r=c.W.getAccountData(e?.namespace)?.caipAddress;c.W.state.noAdapters&&!r?s.w.isMobile()?f.I.reset("AllWallets"):f.I.reset("ConnectingWalletConnectBasic"):e?.view?f.I.reset(e.view,e.data):r?f.I.reset("Account"):f.I.reset("Connect"),g.open=!0,p.z.set({open:!0}),h.E.sendEvent({type:"track",event:"MODAL_OPEN",properties:{connected:Boolean(r)}})},close(){const e=d.H.state.enableEmbedded,t=Boolean(c.W.state.activeCaipAddress);g.open&&h.E.sendEvent({type:"track",event:"MODAL_CLOSE",properties:{connected:t}}),g.open=!1,m.clearLoading(),e?t?f.I.replace("Account"):f.I.push("Connect"):p.z.set({open:!1}),l.x.resetUri()},setLoading(e,t){t&&g.loadingNamespaceMap.set(t,e),g.loading=e,p.z.set({loading:e})},clearLoading(){g.loadingNamespaceMap.clear(),g.loading=!1},shake(){g.shake||(g.shake=!0,setTimeout((()=>{g.shake=!1}),500))}}},6409:(e,t,r)=>{r.d(t,{Q:()=>c});const n=/^0x(?:[A-Fa-f0-9]{64})$/u,i=/^0x(?:[a-fA-F0-9]{62,})$/u;var s=r(152),o=r(6508);const a=3e4,c={checkIfAllowedToTriggerEmail(){const e=o.o.get(s.s1.LAST_EMAIL_LOGIN_TIME);if(e){const t=Date.now()-Number(e);if(t<a){const e=Math.ceil((a-t)/1e3);throw new Error(`Please try again after ${e} seconds`)}}},getTimeToNextEmailLogin(){const e=o.o.get(s.s1.LAST_EMAIL_LOGIN_TIME);if(e){const t=Date.now()-Number(e);if(t<a)return Math.ceil((a-t)/1e3)}return 0},checkIfRequestExists:e=>s.Vl.NOT_SAFE_RPC_METHODS.includes(e.method)||s.Vl.SAFE_RPC_METHODS.includes(e.method),getResponseType:e=>"string"==typeof e&&(e?.match(n)||e?.match(i))?s.s1.RPC_RESPONSE_TYPE_TX:s.s1.RPC_RESPONSE_TYPE_OBJECT,checkIfRequestIsSafe:e=>s.Vl.SAFE_RPC_METHODS.includes(e.method),isClient:"undefined"!=typeof window}},6508:(e,t,r)=>{r.d(t,{o:()=>s});var n=r(152),i=r(6409);const s={set(e,t){i.Q.isClient&&localStorage.setItem(`${n.s1.STORAGE_KEY}${e}`,t)},get:e=>i.Q.isClient?localStorage.getItem(`${n.s1.STORAGE_KEY}${e}`):null,delete(e,t){i.Q.isClient&&(t?localStorage.removeItem(e):localStorage.removeItem(`${n.s1.STORAGE_KEY}${e}`))}}},6742:(e,t,r)=>{r.d(t,{w:()=>o});var n=r(4376),i=r(2944),s=r(7508);const o={isMobile(){return!!this.isClient()&&Boolean(window?.matchMedia("(pointer:coarse)")?.matches||/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini/u.test(navigator.userAgent))},checkCaipNetwork:(e,t="")=>e?.caipNetworkId.toLocaleLowerCase().includes(t.toLowerCase()),isAndroid(){if(!this.isMobile())return!1;const e=window?.navigator.userAgent.toLowerCase();return o.isMobile()&&e.includes("android")},isIos(){if(!this.isMobile())return!1;const e=window?.navigator.userAgent.toLowerCase();return e.includes("iphone")||e.includes("ipad")},isSafari(){if(!this.isClient())return!1;const e=window?.navigator.userAgent.toLowerCase();return e.includes("safari")},isClient:()=>"undefined"!=typeof window,isPairingExpired:e=>!e||e-Date.now()<=i.oU.TEN_SEC_MS,isAllowedRetry:(e,t=i.oU.ONE_SEC_MS)=>Date.now()-e>=t,copyToClopboard(e){navigator.clipboard.writeText(e)},isIframe(){try{return window?.self!==window?.top}catch(e){return!1}},getPairingExpiry:()=>Date.now()+i.oU.FOUR_MINUTES_MS,getNetworkId:e=>e?.split(":")[1],getPlainAddress:e=>e?.split(":")[2],wait:async e=>new Promise((t=>{setTimeout(t,e)})),debounce(e,t=500){let r;return(...n)=>{r&&clearTimeout(r),r=setTimeout((function(){e(...n)}),t)}},isHttpUrl:e=>e.startsWith("http://")||e.startsWith("https://"),formatNativeUrl(e,t){if(o.isHttpUrl(e))return this.formatUniversalUrl(e,t);let r=e;return r.includes("://")||(r=e.replaceAll("/","").replaceAll(":",""),r=`${r}://`),r.endsWith("/")||(r=`${r}/`),this.isTelegram()&&this.isAndroid()&&(t=encodeURIComponent(t)),{redirect:`${r}wc?uri=${encodeURIComponent(t)}`,href:r}},formatUniversalUrl(e,t){if(!o.isHttpUrl(e))return this.formatNativeUrl(e,t);let r=e;return r.endsWith("/")||(r=`${r}/`),{redirect:`${r}wc?uri=${encodeURIComponent(t)}`,href:r}},getOpenTargetForPlatform(e){return"popupWindow"===e?e:this.isTelegram()?s.i.getTelegramSocialProvider()?"_top":"_blank":e},openHref(e,t,r){window?.open(e,this.getOpenTargetForPlatform(t),r||"noreferrer noopener")},returnOpenHref(e,t,r){return window?.open(e,this.getOpenTargetForPlatform(t),r||"noreferrer noopener")},isTelegram:()=>"undefined"!=typeof window&&(Boolean(window.TelegramWebviewProxy)||Boolean(window.Telegram)||Boolean(window.TelegramWebviewProxyProto)),async preloadImage(e){const t=new Promise(((t,r)=>{const n=new Image;n.onload=t,n.onerror=r,n.crossOrigin="anonymous",n.src=e}));return Promise.race([t,o.wait(2e3)])},formatBalance(e,t){let r="0.000";if("string"==typeof e){const t=Number(e);if(t){const e=Math.floor(1e3*t)/1e3;e&&(r=e.toString())}}return`${r}${t?` ${t}`:""}`},formatBalance2(e,t){let r;if("0"===e)r="0";else if("string"==typeof e){const t=Number(e);t&&(r=t.toString().match(/^-?\d+(?:\.\d{0,3})?/u)?.[0])}return{value:r??"0",rest:"0"===r?"000":"",symbol:t}},getApiUrl:()=>n.o.W3M_API_URL,getBlockchainApiUrl:()=>n.o.BLOCKCHAIN_API_RPC_URL,getAnalyticsUrl:()=>n.o.PULSE_API_URL,getUUID:()=>crypto?.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})),parseError:e=>"string"==typeof e?e:"string"==typeof e?.issues?.[0]?.message?e.issues[0].message:e instanceof Error?e.message:"Unknown error",sortRequestedNetworks(e,t=[]){const r={};return t&&e&&(e.forEach(((e,t)=>{r[e]=t})),t.sort(((e,t)=>{const n=r[e.id],i=r[t.id];return void 0!==n&&void 0!==i?n-i:void 0!==n?-1:void 0!==i?1:0}))),t},calculateBalance(e){let t=0;for(const r of e)t+=r.value??0;return t},formatTokenBalance(e){const t=e.toFixed(2),[r,n]=t.split(".");return{dollars:r,pennies:n}},isAddress(e,t="eip155"){switch(t){case"eip155":return!(!/^(?:0x)?[0-9a-f]{40}$/iu.test(e)||!/^(?:0x)?[0-9a-f]{40}$/iu.test(e)&&!/^(?:0x)?[0-9A-F]{40}$/iu.test(e));case"solana":return/[1-9A-HJ-NP-Za-km-z]{32,44}$/iu.test(e);default:return!1}},uniqueBy(e,t){const r=new Set;return e.filter((e=>{const n=e[t];return!r.has(n)&&(r.add(n),!0)}))},generateSdkVersion:(e,t,r)=>`${t}-${0===e.length?i.oU.ADAPTER_TYPES.UNIVERSAL:e.map((e=>e.adapterType)).join(",")}-${r}`,createAccount:(e,t,r,n,i)=>({namespace:e,address:t,type:r,publicKey:n,path:i}),isCaipAddress(e){if("string"!=typeof e)return!1;const t=e.split(":"),r=t[0];return 3===t.filter(Boolean).length&&r in n.o.CHAIN_NAME_MAP},isMac(){const e=window?.navigator.userAgent.toLowerCase();return e.includes("macintosh")&&!e.includes("safari")},formatTelegramSocialLoginUrl(e){const t=`--${encodeURIComponent(window?.location.href)}`,r="state=";if("auth.magic.link"===new URL(e).host){const n="provider_authorization_url=",i=e.substring(e.indexOf(n)+n.length),s=this.injectIntoUrl(decodeURIComponent(i),r,t);return e.replace(i,encodeURIComponent(s))}return this.injectIntoUrl(e,r,t)},injectIntoUrl(e,t,r){const n=e.indexOf(t);if(-1===n)throw new Error(`${t} parameter not found in the URL: ${e}`);const i=e.indexOf("&",n),s=t.length,o=-1!==i?i:e.length;return e.substring(0,n+s)+(e.substring(n+s,o)+r)+e.substring(i)}}},6752:(e,t,r)=>{r.d(t,{JW:()=>C,XX:()=>q,c0:()=>I,ge:()=>W,qy:()=>S,s6:()=>N});const n=globalThis,i=n.trustedTypes,s=i?i.createPolicy("lit-html",{createHTML:e=>e}):void 0,o="$lit$",a=`lit$${Math.random().toFixed(9).slice(2)}$`,c="?"+a,l=`<${c}>`,u=document,h=()=>u.createComment(""),d=e=>null===e||"object"!=typeof e&&"function"!=typeof e,p=Array.isArray,f=e=>p(e)||"function"==typeof e?.[Symbol.iterator],g="[ \t\n\f\r]",m=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,y=/-->/g,w=/>/g,b=RegExp(`>|${g}(?:([^\\s"'>=/]+)(${g}*=${g}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),v=/'/g,E=/"/g,_=/^(?:script|style|textarea|title)$/i,A=e=>(t,...r)=>({_$litType$:e,strings:t,values:r}),S=A(1),C=A(2),I=(A(3),Symbol.for("lit-noChange")),N=Symbol.for("lit-nothing"),k=new WeakMap,T=u.createTreeWalker(u,129);function x(e,t){if(!p(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==s?s.createHTML(t):t}const P=(e,t)=>{const r=e.length-1,n=[];let i,s=2===t?"<svg>":3===t?"<math>":"",c=m;for(let t=0;t<r;t++){const r=e[t];let u,h,d=-1,p=0;for(;p<r.length&&(c.lastIndex=p,h=c.exec(r),null!==h);)p=c.lastIndex,c===m?"!--"===h[1]?c=y:void 0!==h[1]?c=w:void 0!==h[2]?(_.test(h[2])&&(i=RegExp("</"+h[2],"g")),c=b):void 0!==h[3]&&(c=b):c===b?">"===h[0]?(c=i??m,d=-1):void 0===h[1]?d=-2:(d=c.lastIndex-h[2].length,u=h[1],c=void 0===h[3]?b:'"'===h[3]?E:v):c===E||c===v?c=b:c===y||c===w?c=m:(c=b,i=void 0);const f=c===b&&e[t+1].startsWith("/>")?" ":"";s+=c===m?r+l:d>=0?(n.push(u),r.slice(0,d)+o+r.slice(d)+a+f):r+a+(-2===d?t:f)}return[x(e,s+(e[r]||"<?>")+(2===t?"</svg>":3===t?"</math>":"")),n]};class O{constructor({strings:e,_$litType$:t},r){let n;this.parts=[];let s=0,l=0;const u=e.length-1,d=this.parts,[p,f]=P(e,t);if(this.el=O.createElement(p,r),T.currentNode=this.el.content,2===t||3===t){const e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;null!==(n=T.nextNode())&&d.length<u;){if(1===n.nodeType){if(n.hasAttributes())for(const e of n.getAttributeNames())if(e.endsWith(o)){const t=f[l++],r=n.getAttribute(e).split(a),i=/([.?@])?(.*)/.exec(t);d.push({type:1,index:s,name:i[2],strings:r,ctor:"."===i[1]?L:"?"===i[1]?D:"@"===i[1]?j:B}),n.removeAttribute(e)}else e.startsWith(a)&&(d.push({type:6,index:s}),n.removeAttribute(e));if(_.test(n.tagName)){const e=n.textContent.split(a),t=e.length-1;if(t>0){n.textContent=i?i.emptyScript:"";for(let r=0;r<t;r++)n.append(e[r],h()),T.nextNode(),d.push({type:2,index:++s});n.append(e[t],h())}}}else if(8===n.nodeType)if(n.data===c)d.push({type:2,index:s});else{let e=-1;for(;-1!==(e=n.data.indexOf(a,e+1));)d.push({type:7,index:s}),e+=a.length-1}s++}}static createElement(e,t){const r=u.createElement("template");return r.innerHTML=e,r}}function R(e,t,r=e,n){if(t===I)return t;let i=void 0!==n?r._$Co?.[n]:r._$Cl;const s=d(t)?void 0:t._$litDirective$;return i?.constructor!==s&&(i?._$AO?.(!1),void 0===s?i=void 0:(i=new s(e),i._$AT(e,r,n)),void 0!==n?(r._$Co??=[])[n]=i:r._$Cl=i),void 0!==i&&(t=R(e,i._$AS(e,t.values),i,n)),t}class M{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:r}=this._$AD,n=(e?.creationScope??u).importNode(t,!0);T.currentNode=n;let i=T.nextNode(),s=0,o=0,a=r[0];for(;void 0!==a;){if(s===a.index){let t;2===a.type?t=new U(i,i.nextSibling,this,e):1===a.type?t=new a.ctor(i,a.name,a.strings,this,e):6===a.type&&(t=new $(i,this,e)),this._$AV.push(t),a=r[++o]}s!==a?.index&&(i=T.nextNode(),s++)}return T.currentNode=u,n}p(e){let t=0;for(const r of this._$AV)void 0!==r&&(void 0!==r.strings?(r._$AI(e,r,t),t+=r.strings.length-2):r._$AI(e[t])),t++}}class U{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,r,n){this.type=2,this._$AH=N,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=r,this.options=n,this._$Cv=n?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===e?.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=R(this,e,t),d(e)?e===N||null==e||""===e?(this._$AH!==N&&this._$AR(),this._$AH=N):e!==this._$AH&&e!==I&&this._(e):void 0!==e._$litType$?this.$(e):void 0!==e.nodeType?this.T(e):f(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==N&&d(this._$AH)?this._$AA.nextSibling.data=e:this.T(u.createTextNode(e)),this._$AH=e}$(e){const{values:t,_$litType$:r}=e,n="number"==typeof r?this._$AC(e):(void 0===r.el&&(r.el=O.createElement(x(r.h,r.h[0]),this.options)),r);if(this._$AH?._$AD===n)this._$AH.p(t);else{const e=new M(n,this),r=e.u(this.options);e.p(t),this.T(r),this._$AH=e}}_$AC(e){let t=k.get(e.strings);return void 0===t&&k.set(e.strings,t=new O(e)),t}k(e){p(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let r,n=0;for(const i of e)n===t.length?t.push(r=new U(this.O(h()),this.O(h()),this,this.options)):r=t[n],r._$AI(i),n++;n<t.length&&(this._$AR(r&&r._$AB.nextSibling,n),t.length=n)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){void 0===this._$AM&&(this._$Cv=e,this._$AP?.(e))}}class B{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,r,n,i){this.type=1,this._$AH=N,this._$AN=void 0,this.element=e,this.name=t,this._$AM=n,this.options=i,r.length>2||""!==r[0]||""!==r[1]?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=N}_$AI(e,t=this,r,n){const i=this.strings;let s=!1;if(void 0===i)e=R(this,e,t,0),s=!d(e)||e!==this._$AH&&e!==I,s&&(this._$AH=e);else{const n=e;let o,a;for(e=i[0],o=0;o<i.length-1;o++)a=R(this,n[r+o],t,o),a===I&&(a=this._$AH[o]),s||=!d(a)||a!==this._$AH[o],a===N?e=N:e!==N&&(e+=(a??"")+i[o+1]),this._$AH[o]=a}s&&!n&&this.j(e)}j(e){e===N?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class L extends B{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===N?void 0:e}}class D extends B{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==N)}}class j extends B{constructor(e,t,r,n,i){super(e,t,r,n,i),this.type=5}_$AI(e,t=this){if((e=R(this,e,t,0)??N)===I)return;const r=this._$AH,n=e===N&&r!==N||e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive,i=e!==N&&(r===N||n);n&&this.element.removeEventListener(this.name,this,r),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class ${constructor(e,t,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){R(this,e)}}const W={M:o,P:a,A:c,C:1,L:P,R:M,D:f,V:R,I:U,H:B,N:D,U:j,B:L,F:$},z=n.litHtmlPolyfillSupport;z?.(O,U),(n.litHtmlVersions??=[]).push("3.3.0");const q=(e,t,r)=>{const n=r?.renderBefore??t;let i=n._$litPart$;if(void 0===i){const e=r?.renderBefore??null;n._$litPart$=i=new U(t.insertBefore(h(),e),e,void 0,r??{})}return i._$AI(e),i}},7007:e=>{var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,s),n(r)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}g(e,t,s,{once:!0}),"error"!==t&&function(e,t){"function"==typeof e.on&&g(e,"error",t,{once:!0})}(e,i)}))},s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var o=10;function a(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function l(e,t,r,n){var i,s,o,l;if(a(r),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),o=s[t]),void 0===o)o=s[t]=r,++e._eventsCount;else if("function"==typeof o?o=s[t]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),(i=c(e))>0&&o.length>i&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=o.length,l=u,console&&console.warn&&console.warn(l)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=u.bind(n);return i.listener=r,n.wrapFn=i,i}function d(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):f(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function f(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function g(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(s){n.once&&e.removeEventListener(t,i),r(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,s=this._events;if(void 0!==s)i=i&&void 0===s.error;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(void 0===c)return!1;if("function"==typeof c)n(c,this,t);else{var l=c.length,u=f(c,l);for(r=0;r<l;++r)n(u[r],this,t)}return!0},s.prototype.addListener=function(e,t){return l(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return l(this,e,t,!0)},s.prototype.once=function(e,t){return a(t),this.on(e,h(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return a(t),this.prependListener(e,h(this,e,t)),this},s.prototype.removeListener=function(e,t){var r,n,i,s,o;if(a(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){o=r[s].listener,i=s;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var i,s=Object.keys(r);for(n=0;n<s.length;++n)"removeListener"!==(i=s[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},s.prototype.listeners=function(e){return d(this,e,!0)},s.prototype.rawListeners=function(e){return d(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},s.prototype.listenerCount=p,s.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},7173:(e,t,r)=>{function n(){return(null===r.g||void 0===r.g?void 0:r.g.crypto)||(null===r.g||void 0===r.g?void 0:r.g.msCrypto)||{}}function i(){const e=n();return e.subtle||e.webkitSubtle}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowserCryptoAvailable=t.getSubtleCrypto=t.getBrowerCrypto=void 0,t.getBrowerCrypto=n,t.getSubtleCrypto=i,t.isBrowserCryptoAvailable=function(){return!!n()&&!!i()}},7238:(e,t,r)=>{r.d(t,{lY:()=>v});var n=r(9190),i=r(9271),s=r(2531);const o=[],a=[],c=[],l=BigInt(0),u=BigInt(1),h=BigInt(2),d=BigInt(7),p=BigInt(256),f=BigInt(113);for(let e=0,t=u,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],o.push(2*(5*n+r)),a.push((e+1)*(e+2)/2%64);let i=l;for(let e=0;e<7;e++)t=(t<<u^(t>>d)*f)%p,t&h&&(i^=u<<(u<<BigInt(e))-u);c.push(i)}const[g,m]=(0,i.lD)(c,!0),y=(e,t,r)=>r>32?(0,i.WM)(e,t,r):(0,i.P5)(e,t,r),w=(e,t,r)=>r>32?(0,i.im)(e,t,r):(0,i.B4)(e,t,r);class b extends s.Vw{constructor(e,t,r,i=!1,o=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,n.Fe)(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,s.DH)(this.state)}keccak(){s.qv||(0,s.Fc)(this.state32),function(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,i=(t+2)%10,s=r[i],o=r[i+1],a=y(s,o,1)^r[n],c=w(s,o,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],i=e[3];for(let r=0;r<24;r++){const n=a[r],s=y(t,i,n),c=w(t,i,n),l=o[r];t=e[l],i=e[l+1],e[l]=s,e[l+1]=c}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=g[n],e[1]^=m[n]}r.fill(0)}(this.state32,this.rounds),s.qv||(0,s.Fc)(this.state32),this.posOut=0,this.pos=0}update(e){(0,n.CC)(this);const{blockLen:t,state:r}=this,i=(e=(0,s.ZJ)(e)).length;for(let n=0;n<i;){const s=Math.min(t-this.pos,i-n);for(let t=0;t<s;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,128&t&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){(0,n.CC)(this,!1),(0,n.DO)(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+s),n),this.posOut+=s,n+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,n.Fe)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,n.Ht)(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:s}=this;return e||(e=new b(t,r,n,s,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=s,e.destroyed=this.destroyed,e}}const v=((e,t,r)=>(0,s.ld)((()=>new b(t,e,r))))(1,136,32)},7305:(e,t,r)=>{r.d(t,{A:()=>uw});var n={};r.r(n),r.d(n,{identity:()=>Wi});var i={};r.r(i),r.d(i,{base2:()=>zi});var s={};r.r(s),r.d(s,{base8:()=>qi});var o={};r.r(o),r.d(o,{base10:()=>Hi});var a={};r.r(a),r.d(a,{base16:()=>Fi,base16upper:()=>Ki});var c={};r.r(c),r.d(c,{base32:()=>Vi,base32hex:()=>Ji,base32hexpad:()=>Qi,base32hexpadupper:()=>es,base32hexupper:()=>Xi,base32pad:()=>Zi,base32padupper:()=>Yi,base32upper:()=>Gi,base32z:()=>ts});var l={};r.r(l),r.d(l,{base36:()=>rs,base36upper:()=>ns});var u={};r.r(u),r.d(u,{base58btc:()=>is,base58flickr:()=>ss});var h={};r.r(h),r.d(h,{base64:()=>os,base64pad:()=>as,base64url:()=>cs,base64urlpad:()=>ls});var d={};r.r(d),r.d(d,{base256emoji:()=>ps});var p={};r.r(p),r.d(p,{sha256:()=>Us,sha512:()=>Bs});var f={};r.r(f),r.d(f,{identity:()=>Ds});var g={};r.r(g),r.d(g,{code:()=>$s,decode:()=>zs,encode:()=>Ws,name:()=>js});var m={};r.r(m),r.d(m,{code:()=>Ks,decode:()=>Gs,encode:()=>Vs,name:()=>Fs});var y=r(7007),w=r.n(y),b=r(8900);class v{}class E extends v{constructor(e){super()}}const _=b.FIVE_SECONDS,A="heartbeat_pulse";class S extends E{constructor(e){super(e),this.events=new y.EventEmitter,this.interval=_,this.interval=e?.interval||_}static async init(e){const t=new S(e);return await t.init(),t}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async initialize(){this.intervalRef=setInterval((()=>this.pulse()),(0,b.toMiliseconds)(this.interval))}pulse(){this.events.emit(A)}}const C=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,I=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,N=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function k(e,t){if(!("__proto__"===e||"constructor"===e&&t&&"object"==typeof t&&"prototype"in t))return t;!function(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}(e)}function T(e,t={}){if("string"!=typeof e)return e;const r=e.trim();if('"'===e[0]&&e.endsWith('"')&&!e.includes("\\"))return r.slice(1,-1);if(r.length<=9){const e=r.toLowerCase();if("true"===e)return!0;if("false"===e)return!1;if("undefined"===e)return;if("null"===e)return null;if("nan"===e)return Number.NaN;if("infinity"===e)return Number.POSITIVE_INFINITY;if("-infinity"===e)return Number.NEGATIVE_INFINITY}if(!N.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(C.test(e)||I.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,k)}return JSON.parse(e)}catch(r){if(t.strict)throw r;return e}}var x=r(8287).Buffer;function P(e,...t){try{return(r=e(...t))&&"function"==typeof r.then?r:Promise.resolve(r)}catch(e){return Promise.reject(e)}var r}function O(e){if(function(e){const t=typeof e;return null===e||"object"!==t&&"function"!==t}(e))return String(e);if(function(e){const t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}(e)||Array.isArray(e))return JSON.stringify(e);if("function"==typeof e.toJSON)return O(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const R="base64:";function M(e){return e&&e.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function U(...e){return M(e.join(":"))}function B(e){return(e=M(e))?e+":":""}const L=()=>{const e=new Map;return{name:"memory",getInstance:()=>e,hasItem:t=>e.has(t),getItem:t=>e.get(t)??null,getItemRaw:t=>e.get(t)??null,setItem(t,r){e.set(t,r)},setItemRaw(t,r){e.set(t,r)},removeItem(t){e.delete(t)},getKeys:()=>[...e.keys()],clear(){e.clear()},dispose(){e.clear()}}};function D(e={}){const t={mounts:{"":e.driver||L()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=e=>{for(const r of t.mountpoints)if(e.startsWith(r))return{base:r,relativeKey:e.slice(r.length),driver:t.mounts[r]};return{base:"",relativeKey:e,driver:t.mounts[""]}},n=(e,r)=>t.mountpoints.filter((t=>t.startsWith(e)||r&&e.startsWith(t))).map((r=>({relativeBase:e.length>r.length?e.slice(r.length):void 0,mountpoint:r,driver:t.mounts[r]}))),i=(e,r)=>{if(t.watching){r=M(r);for(const n of t.watchListeners)n(e,r)}},s=async()=>{if(t.watching){for(const e in t.unwatch)await t.unwatch[e]();t.unwatch={},t.watching=!1}},o=(e,t,n)=>{const i=new Map,s=e=>{let t=i.get(e.base);return t||(t={driver:e.driver,base:e.base,items:[]},i.set(e.base,t)),t};for(const n of e){const e="string"==typeof n,i=M(e?n:n.key),o=e?void 0:n.value,a=e||!n.options?t:{...t,...n.options},c=r(i);s(c).items.push({key:i,value:o,relativeKey:c.relativeKey,options:a})}return Promise.all([...i.values()].map((e=>n(e)))).then((e=>e.flat()))},a={hasItem(e,t={}){e=M(e);const{relativeKey:n,driver:i}=r(e);return P(i.hasItem,n,t)},getItem(e,t={}){e=M(e);const{relativeKey:n,driver:i}=r(e);return P(i.getItem,n,t).then((e=>T(e)))},getItems:(e,t={})=>o(e,t,(e=>e.driver.getItems?P(e.driver.getItems,e.items.map((e=>({key:e.relativeKey,options:e.options}))),t).then((t=>t.map((t=>({key:U(e.base,t.key),value:T(t.value)}))))):Promise.all(e.items.map((t=>P(e.driver.getItem,t.relativeKey,t.options).then((e=>({key:t.key,value:T(e)})))))))),getItemRaw(e,t={}){e=M(e);const{relativeKey:n,driver:i}=r(e);return i.getItemRaw?P(i.getItemRaw,n,t):P(i.getItem,n,t).then((e=>function(e){return"string"!=typeof e?e:e.startsWith(R)?(t=e.slice(7),globalThis.Buffer?x.from(t,"base64"):Uint8Array.from(globalThis.atob(t),(e=>e.codePointAt(0)))):e;var t}(e)))},async setItem(e,t,n={}){if(void 0===t)return a.removeItem(e);e=M(e);const{relativeKey:s,driver:o}=r(e);o.setItem&&(await P(o.setItem,s,O(t),n),o.watch||i("update",e))},async setItems(e,t){await o(e,t,(async e=>{if(e.driver.setItems)return P(e.driver.setItems,e.items.map((e=>({key:e.relativeKey,value:O(e.value),options:e.options}))),t);e.driver.setItem&&await Promise.all(e.items.map((t=>P(e.driver.setItem,t.relativeKey,O(t.value),t.options))))}))},async setItemRaw(e,t,n={}){if(void 0===t)return a.removeItem(e,n);e=M(e);const{relativeKey:s,driver:o}=r(e);if(o.setItemRaw)await P(o.setItemRaw,s,t,n);else{if(!o.setItem)return;await P(o.setItem,s,function(e){return"string"==typeof e?e:R+(t=e,globalThis.Buffer?x.from(t).toString("base64"):globalThis.btoa(String.fromCodePoint(...t)));var t}(t),n)}o.watch||i("update",e)},async removeItem(e,t={}){"boolean"==typeof t&&(t={removeMeta:t}),e=M(e);const{relativeKey:n,driver:s}=r(e);s.removeItem&&(await P(s.removeItem,n,t),(t.removeMeta||t.removeMata)&&await P(s.removeItem,n+"$",t),s.watch||i("remove",e))},async getMeta(e,t={}){"boolean"==typeof t&&(t={nativeOnly:t}),e=M(e);const{relativeKey:n,driver:i}=r(e),s=Object.create(null);if(i.getMeta&&Object.assign(s,await P(i.getMeta,n,t)),!t.nativeOnly){const e=await P(i.getItem,n+"$",t).then((e=>T(e)));e&&"object"==typeof e&&("string"==typeof e.atime&&(e.atime=new Date(e.atime)),"string"==typeof e.mtime&&(e.mtime=new Date(e.mtime)),Object.assign(s,e))}return s},setMeta(e,t,r={}){return this.setItem(e+"$",t,r)},removeMeta(e,t={}){return this.removeItem(e+"$",t)},async getKeys(e,t={}){e=B(e);const r=n(e,!0);let i=[];const s=[];let o=!0;for(const e of r){e.driver.flags?.maxDepth||(o=!1);const r=await P(e.driver.getKeys,e.relativeBase,t);for(const t of r){const r=e.mountpoint+M(t);i.some((e=>r.startsWith(e)))||s.push(r)}i=[e.mountpoint,...i.filter((t=>!t.startsWith(e.mountpoint)))]}const a=void 0!==t.maxDepth&&!o;return s.filter((r=>(!a||function(e,t){if(void 0===t)return!0;let r=0,n=e.indexOf(":");for(;n>-1;)r++,n=e.indexOf(":",n+1);return r<=t}(r,t.maxDepth))&&function(e,t){return t?e.startsWith(t)&&"$"!==e[e.length-1]:"$"!==e[e.length-1]}(r,e)))},async clear(e,t={}){e=B(e),await Promise.all(n(e,!1).map((async e=>{if(e.driver.clear)return P(e.driver.clear,e.relativeBase,t);if(e.driver.removeItem){const r=await e.driver.getKeys(e.relativeBase||"",t);return Promise.all(r.map((r=>e.driver.removeItem(r,t))))}})))},async dispose(){await Promise.all(Object.values(t.mounts).map((e=>$(e))))},watch:async e=>(await(async()=>{if(!t.watching){t.watching=!0;for(const e in t.mounts)t.unwatch[e]=await j(t.mounts[e],i,e)}})(),t.watchListeners.push(e),async()=>{t.watchListeners=t.watchListeners.filter((t=>t!==e)),0===t.watchListeners.length&&await s()}),async unwatch(){t.watchListeners=[],await s()},mount(e,r){if((e=B(e))&&t.mounts[e])throw new Error(`already mounted at ${e}`);return e&&(t.mountpoints.push(e),t.mountpoints.sort(((e,t)=>t.length-e.length))),t.mounts[e]=r,t.watching&&Promise.resolve(j(r,i,e)).then((r=>{t.unwatch[e]=r})).catch(console.error),a},async unmount(e,r=!0){(e=B(e))&&t.mounts[e]&&(t.watching&&e in t.unwatch&&(t.unwatch[e]?.(),delete t.unwatch[e]),r&&await $(t.mounts[e]),t.mountpoints=t.mountpoints.filter((t=>t!==e)),delete t.mounts[e])},getMount(e=""){e=M(e)+":";const t=r(e);return{driver:t.driver,base:t.base}},getMounts:(e="",t={})=>(e=M(e),n(e,t.parents).map((e=>({driver:e.driver,base:e.mountpoint})))),keys:(e,t={})=>a.getKeys(e,t),get:(e,t={})=>a.getItem(e,t),set:(e,t,r={})=>a.setItem(e,t,r),has:(e,t={})=>a.hasItem(e,t),del:(e,t={})=>a.removeItem(e,t),remove:(e,t={})=>a.removeItem(e,t)};return a}function j(e,t,r){return e.watch?e.watch(((e,n)=>t(e,r+n))):()=>{}}async function $(e){"function"==typeof e.dispose&&await P(e.dispose)}function W(e){return new Promise(((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)}))}function z(e,t){const r=indexedDB.open(e);r.onupgradeneeded=()=>r.result.createObjectStore(t);const n=W(r);return(e,r)=>n.then((n=>r(n.transaction(t,e).objectStore(t))))}let q;function H(){return q||(q=z("keyval-store","keyval")),q}function F(e,t=H()){return t("readonly",(t=>W(t.get(e))))}function K(e){if("string"!=typeof e)throw new Error("Cannot safe json parse value of type "+typeof e);try{return(e=>{const t=e.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3');return JSON.parse(t,((e,t)=>"string"==typeof t&&t.match(/^\d+n$/)?BigInt(t.substring(0,t.length-1)):t))})(e)}catch(t){return e}}function V(e){return"string"==typeof e?e:(t=e,JSON.stringify(t,((e,t)=>"bigint"==typeof t?t.toString()+"n":t))||"");var t}var G=(e={})=>{const t=e.base&&e.base.length>0?`${e.base}:`:"",r=e=>t+e;let n;return e.dbName&&e.storeName&&(n=z(e.dbName,e.storeName)),{name:"idb-keyval",options:e,hasItem:async e=>!(typeof await F(r(e),n)>"u"),getItem:async e=>await F(r(e),n)??null,setItem:(e,t)=>function(e,t,r=H()){return r("readwrite",(r=>(r.put(t,e),W(r.transaction))))}(r(e),t,n),removeItem:e=>function(e,t=H()){return t("readwrite",(t=>(t.delete(e),W(t.transaction))))}(r(e),n),getKeys:()=>function(e=H()){return e("readonly",(e=>{if(e.getAllKeys)return W(e.getAllKeys());const t=[];return function(e,t){return e.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},W(e.transaction)}(e,(e=>t.push(e.key))).then((()=>t))}))}(n),clear:()=>function(e=H()){return e("readwrite",(e=>(e.clear(),W(e.transaction))))}(n)}};class Z{constructor(){this.indexedDb=D({driver:G({dbName:"WALLET_CONNECT_V2_INDEXED_DB",storeName:"keyvaluestorage"})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map((e=>[e.key,e.value]))}async getItem(e){const t=await this.indexedDb.getItem(e);if(null!==t)return t}async setItem(e,t){await this.indexedDb.setItem(e,V(t))}async removeItem(e){await this.indexedDb.removeItem(e)}}var Y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof r.g<"u"?r.g:typeof self<"u"?self:{},J={exports:{}};function X(e){var t;return[e[0],K(null!=(t=e[1])?t:"")]}!function(){let e;function t(){}e=t,e.prototype.getItem=function(e){return this.hasOwnProperty(e)?String(this[e]):null},e.prototype.setItem=function(e,t){this[e]=String(t)},e.prototype.removeItem=function(e){delete this[e]},e.prototype.clear=function(){const e=this;Object.keys(e).forEach((function(t){e[t]=void 0,delete e[t]}))},e.prototype.key=function(e){return e=e||0,Object.keys(this)[e]},e.prototype.__defineGetter__("length",(function(){return Object.keys(this).length})),typeof Y<"u"&&Y.localStorage?J.exports=Y.localStorage:typeof window<"u"&&window.localStorage?J.exports=window.localStorage:J.exports=new t}();class Q{constructor(){this.localStorage=J.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(X)}async getItem(e){const t=this.localStorage.getItem(e);if(null!==t)return K(t)}async setItem(e,t){this.localStorage.setItem(e,V(t))}async removeItem(e){this.localStorage.removeItem(e)}}class ee{constructor(){this.initialized=!1,this.setInitialized=e=>{this.storage=e,this.initialized=!0};const e=new Q;this.storage=e;try{(async(e,t,r)=>{const n="wc_storage_version",i=await t.getItem(n);if(i&&i>=1)return void r(t);const s=await e.getKeys();if(!s.length)return void r(t);const o=[];for(;s.length;){const r=s.shift();if(!r)continue;const n=r.toLowerCase();if(n.includes("wc@")||n.includes("walletconnect")||n.includes("wc_")||n.includes("wallet_connect")){const n=await e.getItem(r);await t.setItem(r,n),o.push(r)}}await t.setItem(n,1),r(t),(async(e,t)=>{t.length&&t.forEach((async t=>{await e.removeItem(t)}))})(e,o)})(e,new Z,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,t){return await this.initialize(),this.storage.setItem(e,t)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise((e=>{const t=setInterval((()=>{this.initialized&&(clearInterval(t),e())}),20)}))}}var te=r(3497),re=Object.defineProperty,ne=(e,t,r)=>((e,t,r)=>t in e?re(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class ie extends v{constructor(e){super(),this.opts=e,ne(this,"protocol","wc"),ne(this,"version",2)}}var se=Object.defineProperty;class oe extends v{constructor(e,t){super(),this.core=e,this.logger=t,((e,t,r)=>{((e,t,r)=>{t in e?se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r)})(this,"records",new Map)}}class ae{constructor(e,t){this.logger=e,this.core=t}}class ce extends v{constructor(e,t){super(),this.relayer=e,this.logger=t}}class le extends v{constructor(e){super()}}class ue{constructor(e,t,r,n){this.core=e,this.logger=t,this.name=r}}Object.defineProperty;class he extends v{constructor(e,t){super(),this.relayer=e,this.logger=t}}class de extends v{constructor(e,t){super(),this.core=e,this.logger=t}}class pe{constructor(e,t,r){this.core=e,this.logger=t,this.store=r}}class fe{constructor(e,t){this.projectId=e,this.logger=t}}class ge{constructor(e,t,r){this.core=e,this.logger=t,this.telemetryEnabled=r}}function me(e){if("string"!=typeof e)throw new Error("Cannot safe json parse value of type "+typeof e);try{return(e=>{const t=e.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3');return JSON.parse(t,((e,t)=>"string"==typeof t&&t.match(/^\d+n$/)?BigInt(t.substring(0,t.length-1)):t))})(e)}catch(t){return e}}function ye(e,...t){if(!function(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function we(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}Object.defineProperty,w(),y.EventEmitter;const be="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,ve=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);function Ee(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),ye(e),e}class _e{clone(){return this._cloneInto()}}function Ae(e=32){if(be&&"function"==typeof be.getRandomValues)return be.getRandomValues(new Uint8Array(e));if(be&&"function"==typeof be.randomBytes)return be.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}class Se extends _e{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=ve(this.buffer)}update(e){we(this);const{view:t,buffer:r,blockLen:n}=this,i=(e=Ee(e)).length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);if(o!==n)r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=ve(e);for(;n<=i-s;s+=n)this.process(t,s)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){we(this),function(e,t){ye(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:n,isLE:i}=this;let{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>n-s&&(this.process(r,0),s=0);for(let e=s;e<n;e++)t[e]=0;(function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,l=n?0:4;e.setUint32(t+c,o,n),e.setUint32(t+l,a,n)})(r,n-8,BigInt(8*this.length),i),this.process(r,0);const o=ve(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)o.setUint32(4*e,l[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:o}=this;return e.length=n,e.pos=o,e.finished=i,e.destroyed=s,n%t&&e.buffer.set(r),e}}const Ce=BigInt(2**32-1),Ie=BigInt(32);function Ne(e,t=!1){return t?{h:Number(e&Ce),l:Number(e>>Ie&Ce)}:{h:0|Number(e>>Ie&Ce),l:0|Number(e&Ce)}}const ke=function(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=Ne(e[i],t);[r[i],n[i]]=[s,o]}return[r,n]},Te=(e,t,r)=>e>>>r,xe=(e,t,r)=>e<<32-r|t>>>r,Pe=(e,t,r)=>e>>>r|t<<32-r,Oe=(e,t,r)=>e<<32-r|t>>>r,Re=(e,t,r)=>e<<64-r|t>>>r-32,Me=(e,t,r)=>e>>>r-32|t<<64-r,Ue=function(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:0|i}},Be=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),Le=(e,t,r,n)=>t+r+n+(e/2**32|0)|0,De=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),je=(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,$e=(e,t,r,n,i,s)=>t+r+n+i+s+(e/2**32|0)|0,We=(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0),[ze,qe]=ke(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))),He=new Uint32Array(80),Fe=new Uint32Array(80);class Ke extends Se{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:s,Dh:o,Dl:a,Eh:c,El:l,Fh:u,Fl:h,Gh:d,Gl:p,Hh:f,Hl:g}=this;return[e,t,r,n,i,s,o,a,c,l,u,h,d,p,f,g]}set(e,t,r,n,i,s,o,a,c,l,u,h,d,p,f,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|c,this.El=0|l,this.Fh=0|u,this.Fl=0|h,this.Gh=0|d,this.Gl=0|p,this.Hh=0|f,this.Hl=0|g}process(e,t){for(let r=0;r<16;r++,t+=4)He[r]=e.getUint32(t),Fe[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|He[e-15],r=0|Fe[e-15],n=Pe(t,r,1)^Pe(t,r,8)^Te(t,r,7),i=Oe(t,r,1)^Oe(t,r,8)^xe(t,r,7),s=0|He[e-2],o=0|Fe[e-2],a=Pe(s,o,19)^Re(s,o,61)^Te(s,o,6),c=Oe(s,o,19)^Me(s,o,61)^xe(s,o,6),l=De(i,c,Fe[e-7],Fe[e-16]),u=je(l,n,a,He[e-7],He[e-16]);He[e]=0|u,Fe[e]=0|l}let{Ah:r,Al:n,Bh:i,Bl:s,Ch:o,Cl:a,Dh:c,Dl:l,Eh:u,El:h,Fh:d,Fl:p,Gh:f,Gl:g,Hh:m,Hl:y}=this;for(let e=0;e<80;e++){const t=Pe(u,h,14)^Pe(u,h,18)^Re(u,h,41),w=Oe(u,h,14)^Oe(u,h,18)^Me(u,h,41),b=u&d^~u&f,v=We(y,w,h&p^~h&g,qe[e],Fe[e]),E=$e(v,m,t,b,ze[e],He[e]),_=0|v,A=Pe(r,n,28)^Re(r,n,34)^Re(r,n,39),S=Oe(r,n,28)^Me(r,n,34)^Me(r,n,39),C=r&i^r&o^i&o,I=n&s^n&a^s&a;m=0|f,y=0|g,f=0|d,g=0|p,d=0|u,p=0|h,({h:u,l:h}=Ue(0|c,0|l,0|E,0|_)),c=0|o,l=0|a,o=0|i,a=0|s,i=0|r,s=0|n;const N=Be(_,S,I);r=Le(N,E,A,C),n=0|N}({h:r,l:n}=Ue(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:s}=Ue(0|this.Bh,0|this.Bl,0|i,0|s)),({h:o,l:a}=Ue(0|this.Ch,0|this.Cl,0|o,0|a)),({h:c,l}=Ue(0|this.Dh,0|this.Dl,0|c,0|l)),({h:u,l:h}=Ue(0|this.Eh,0|this.El,0|u,0|h)),({h:d,l:p}=Ue(0|this.Fh,0|this.Fl,0|d,0|p)),({h:f,l:g}=Ue(0|this.Gh,0|this.Gl,0|f,0|g)),({h:m,l:y}=Ue(0|this.Hh,0|this.Hl,0|m,0|y)),this.set(r,n,i,s,o,a,c,l,u,h,d,p,f,g,m,y)}roundClean(){He.fill(0),Fe.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Ve=function(e){const t=t=>e().update(Ee(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}((()=>new Ke)),Ge=BigInt(0),Ze=BigInt(1),Ye=BigInt(2);function Je(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function Xe(e){if(!Je(e))throw new Error("Uint8Array expected")}function Qe(e,t){if("boolean"!=typeof t)throw new Error(e+" boolean expected, got "+t)}const et=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function tt(e){Xe(e);let t="";for(let r=0;r<e.length;r++)t+=et[e[r]];return t}function rt(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?Ge:BigInt("0x"+e)}function nt(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function it(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){const r=nt(e.charCodeAt(i)),s=nt(e.charCodeAt(i+1));if(void 0===r||void 0===s){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[t]=16*r+s}return n}function st(e){return Xe(e),rt(tt(Uint8Array.from(e).reverse()))}function ot(e,t){return it(e.toString(16).padStart(2*t,"0"))}function at(e,t){return ot(e,t).reverse()}function ct(e,t,r){let n;if("string"==typeof t)try{n=it(t)}catch(t){throw new Error(e+" must be hex string or Uint8Array, cause: "+t)}else{if(!Je(t))throw new Error(e+" must be hex string or Uint8Array");n=Uint8Array.from(t)}const i=n.length;if("number"==typeof r&&i!==r)throw new Error(e+" of length "+r+" expected, got "+i);return n}function lt(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];Xe(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}const ut=e=>"bigint"==typeof e&&Ge<=e;function ht(e,t,r,n){if(!function(e,t,r){return ut(e)&&ut(t)&&ut(r)&&t<=e&&e<r}(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}const dt=e=>(Ye<<BigInt(e-1))-Ze,pt={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||Je(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function ft(e,t,r={}){const n=(t,r,n)=>{const i=pt[r];if("function"!=typeof i)throw new Error("invalid validator function");const s=e[t];if(!(n&&void 0===s||i(s,e)))throw new Error("param "+String(t)+" is invalid. Expected "+r+", got "+s)};for(const[e,r]of Object.entries(t))n(e,r,!1);for(const[e,t]of Object.entries(r))n(e,t,!0);return e}function gt(e){const t=new WeakMap;return(r,...n)=>{const i=t.get(r);if(void 0!==i)return i;const s=e(r,...n);return t.set(r,s),s}}const mt=BigInt(0),yt=BigInt(1),wt=BigInt(2),bt=BigInt(3),vt=BigInt(4),Et=BigInt(5),_t=BigInt(8);function At(e,t){const r=e%t;return r>=mt?r:t+r}function St(e,t,r){if(t<mt)throw new Error("invalid exponent, negatives unsupported");if(r<=mt)throw new Error("invalid modulus");if(r===yt)return mt;let n=yt;for(;t>mt;)t&yt&&(n=n*e%r),e=e*e%r,t>>=yt;return n}function Ct(e,t,r){let n=e;for(;t-- >mt;)n*=n,n%=r;return n}function It(e,t){if(e===mt)throw new Error("invert: expected non-zero number");if(t<=mt)throw new Error("invert: expected positive modulus, got "+t);let r=At(e,t),n=t,i=mt,s=yt;for(;r!==mt;){const e=n%r,t=i-s*(n/r);n=r,r=e,i=s,s=t}if(n!==yt)throw new Error("invert: does not exist");return At(i,t)}const Nt=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function kt(e,t){const r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function Tt(e,t,r=!1,n={}){if(e<=mt)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:s}=kt(e,t);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:e,isLE:r,BITS:i,BYTES:s,MASK:dt(i),ZERO:mt,ONE:yt,create:t=>At(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return mt<=t&&t<e},is0:e=>e===mt,isOdd:e=>(e&yt)===yt,neg:t=>At(-t,e),eql:(e,t)=>e===t,sqr:t=>At(t*t,e),add:(t,r)=>At(t+r,e),sub:(t,r)=>At(t-r,e),mul:(t,r)=>At(t*r,e),pow:(e,t)=>function(e,t,r){if(r<mt)throw new Error("invalid exponent, negatives unsupported");if(r===mt)return e.ONE;if(r===yt)return t;let n=e.ONE,i=t;for(;r>mt;)r&yt&&(n=e.mul(n,i)),i=e.sqr(i),r>>=yt;return n}(a,e,t),div:(t,r)=>At(t*It(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>It(t,e),sqrt:n.sqrt||(t=>(o||(o=function(e){if(e%vt===bt){const t=(e+yt)/vt;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}if(e%_t===Et){const t=(e-Et)/_t;return function(e,r){const n=e.mul(r,wt),i=e.pow(n,t),s=e.mul(r,i),o=e.mul(e.mul(s,wt),i),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),r))throw new Error("Cannot find square root");return a}}return function(e){const t=(e-yt)/wt;let r,n,i;for(r=e-yt,n=0;r%wt===mt;r/=wt,n++);for(i=wt;i<e&&St(i,t,e)!==e-yt;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===n){const t=(e+yt)/vt;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}const s=(r+yt)/wt;return function(e,o){if(e.pow(o,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=n,c=e.pow(e.mul(e.ONE,i),r),l=e.pow(o,s),u=e.pow(o,r);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(u);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const r=e.pow(c,yt<<BigInt(a-t-1));c=e.sqr(r),l=e.mul(l,r),u=e.mul(u,c),a=t}return l}}(e)}(e)),o(a,t))),invertBatch:e=>function(e,t){const r=new Array(t.length),n=t.reduce(((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n))),e.ONE),i=e.inv(n);return t.reduceRight(((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n))),i),r}(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?at(e,s):ot(e,s),fromBytes:e=>{if(e.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+e.length);return r?st(e):function(e){return rt(tt(e))}(e)}});return Object.freeze(a)}const xt=BigInt(0),Pt=BigInt(1);function Ot(e,t){const r=t.negate();return e?r:t}function Rt(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Mt(e,t){return Rt(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}const Ut=new WeakMap,Bt=new WeakMap;function Lt(e){return Bt.get(e)||1}const Dt=BigInt(0),jt=BigInt(1),$t=BigInt(2),Wt=BigInt(8),zt={zip215:!0};BigInt(0),BigInt(1);const qt=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Ht=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Ft=BigInt(1),Kt=BigInt(2);BigInt(3);const Vt=BigInt(5),Gt=BigInt(8);const Zt=Tt(qt,void 0,!0),Yt=function(e){const t=function(e){const t=function(e){return function(e){ft(e,Nt.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"}))}(e.Fp),ft(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...kt(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}(e);return ft(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}(e),{Fp:r,n,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:c}=t,l=$t<<BigInt(8*a)-jt,u=r.create,h=Tt(t.n,t.nBitLength),d=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:r.sqrt(e*r.inv(t))}}catch{return{isValid:!1,value:Dt}}}),p=t.adjustScalarBytes||(e=>e),f=t.domain||((e,t,r)=>{if(Qe("phflag",r),t.length||r)throw new Error("Contexts/pre-hash are not supported");return e});function g(e,t){ht("coordinate "+e,t,Dt,l)}function m(e){if(!(e instanceof b))throw new Error("ExtendedPoint expected")}const y=gt(((e,t)=>{const{ex:n,ey:i,ez:s}=e,o=e.is0();null==t&&(t=o?Wt:r.inv(s));const a=u(n*t),c=u(i*t),l=u(s*t);if(o)return{x:Dt,y:jt};if(l!==jt)throw new Error("invZ was invalid");return{x:a,y:c}})),w=gt((e=>{const{a:r,d:n}=t;if(e.is0())throw new Error("bad point: ZERO");const{ex:i,ey:s,ez:o,et:a}=e,c=u(i*i),l=u(s*s),h=u(o*o),d=u(h*h),p=u(c*r);if(u(h*u(p+l))!==u(d+u(n*u(c*l))))throw new Error("bad point: equation left != right (1)");if(u(i*s)!==u(o*a))throw new Error("bad point: equation left != right (2)");return!0}));class b{constructor(e,t,r,n){this.ex=e,this.ey=t,this.ez=r,this.et=n,g("x",e),g("y",t),g("z",r),g("t",n),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof b)throw new Error("extended point not allowed");const{x:t,y:r}=e||{};return g("x",t),g("y",r),new b(t,r,jt,u(t*r))}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.ez)));return e.map(((e,r)=>e.toAffine(t[r]))).map(b.fromAffine)}static msm(e,t){return function(e,t,r,n){if(function(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach(((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)}))}(r,e),function(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach(((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)}))}(n,t),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,s=function(e){let t;for(t=0;e>Ge;e>>=Ze,t+=1);return t}(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i);let l=i;for(let e=Math.floor((t.BITS-1)/o)*o;e>=0;e-=o){c.fill(i);for(let t=0;t<n.length;t++){const i=n[t],s=Number(i>>BigInt(e)&BigInt(a));c[s]=c[s].add(r[t])}let t=i;for(let e=c.length-1,r=i;e>0;e--)r=r.add(c[e]),t=t.add(r);if(l=l.add(t),0!==e)for(let e=0;e<o;e++)l=l.double()}return l}(b,h,e,t)}_setWindowSize(e){_.setWindowSize(this,e)}assertValidity(){w(this)}equals(e){m(e);const{ex:t,ey:r,ez:n}=this,{ex:i,ey:s,ez:o}=e,a=u(t*o),c=u(i*n),l=u(r*o),h=u(s*n);return a===c&&l===h}is0(){return this.equals(b.ZERO)}negate(){return new b(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:e}=t,{ex:r,ey:n,ez:i}=this,s=u(r*r),o=u(n*n),a=u($t*u(i*i)),c=u(e*s),l=r+n,h=u(u(l*l)-s-o),d=c+o,p=d-a,f=c-o,g=u(h*p),m=u(d*f),y=u(h*f),w=u(p*d);return new b(g,m,w,y)}add(e){m(e);const{a:r,d:n}=t,{ex:i,ey:s,ez:o,et:a}=this,{ex:c,ey:l,ez:h,et:d}=e;if(r===BigInt(-1)){const e=u((s-i)*(l+c)),t=u((s+i)*(l-c)),r=u(t-e);if(r===Dt)return this.double();const n=u(o*$t*d),p=u(a*$t*h),f=p+n,g=t+e,m=p-n,y=u(f*r),w=u(g*m),v=u(f*m),E=u(r*g);return new b(y,w,E,v)}const p=u(i*c),f=u(s*l),g=u(a*n*d),y=u(o*h),w=u((i+s)*(c+l)-p-f),v=y-g,E=y+g,_=u(f-r*p),A=u(w*v),S=u(E*_),C=u(w*_),I=u(v*E);return new b(A,S,I,C)}subtract(e){return this.add(e.negate())}wNAF(e){return _.wNAFCached(this,e,b.normalizeZ)}multiply(e){const t=e;ht("scalar",t,jt,n);const{p:r,f:i}=this.wNAF(t);return b.normalizeZ([r,i])[0]}multiplyUnsafe(e,t=b.ZERO){const r=e;return ht("scalar",r,Dt,n),r===Dt?E:this.is0()||r===jt?this:_.wNAFCachedUnsafe(this,r,b.normalizeZ,t)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return _.unsafeLadder(this,n).is0()}toAffine(e){return y(this,e)}clearCofactor(){const{h:e}=t;return e===jt?this:this.multiplyUnsafe(e)}static fromHex(e,n=!1){const{d:i,a:s}=t,o=r.BYTES;e=ct("pointHex",e,o),Qe("zip215",n);const a=e.slice(),c=e[o-1];a[o-1]=-129&c;const h=st(a),p=n?l:r.ORDER;ht("pointHex.y",h,Dt,p);const f=u(h*h),g=u(f-jt),m=u(i*f-s);let{isValid:y,value:w}=d(g,m);if(!y)throw new Error("Point.fromHex: invalid y coordinate");const v=(w&jt)===jt,E=!!(128&c);if(!n&&w===Dt&&E)throw new Error("Point.fromHex: x=0 and x_0=1");return E!==v&&(w=u(-w)),b.fromAffine({x:w,y:h})}static fromPrivateKey(e){return C(e).point}toRawBytes(){const{x:e,y:t}=this.toAffine(),n=at(t,r.BYTES);return n[n.length-1]|=e&jt?128:0,n}toHex(){return tt(this.toRawBytes())}}b.BASE=new b(t.Gx,t.Gy,jt,u(t.Gx*t.Gy)),b.ZERO=new b(Dt,jt,jt,Dt);const{BASE:v,ZERO:E}=b,_=function(e,t){return{constTimeNegate:Ot,hasPrecomputes:e=>1!==Lt(e),unsafeLadder(t,r,n=e.ZERO){let i=t;for(;r>xt;)r&Pt&&(n=n.add(i)),i=i.double(),r>>=Pt;return n},precomputeWindow(e,r){const{windows:n,windowSize:i}=Mt(r,t),s=[];let o=e,a=o;for(let e=0;e<n;e++){a=o,s.push(a);for(let e=1;e<i;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(r,n,i){const{windows:s,windowSize:o}=Mt(r,t);let a=e.ZERO,c=e.BASE;const l=BigInt(2**r-1),u=2**r,h=BigInt(r);for(let e=0;e<s;e++){const t=e*o;let r=Number(i&l);i>>=h,r>o&&(r-=u,i+=Pt);const s=t,d=t+Math.abs(r)-1,p=e%2!=0,f=r<0;0===r?c=c.add(Ot(p,n[s])):a=a.add(Ot(f,n[d]))}return{p:a,f:c}},wNAFUnsafe(r,n,i,s=e.ZERO){const{windows:o,windowSize:a}=Mt(r,t),c=BigInt(2**r-1),l=2**r,u=BigInt(r);for(let e=0;e<o;e++){const t=e*a;if(i===xt)break;let r=Number(i&c);if(i>>=u,r>a&&(r-=l,i+=Pt),0===r)continue;let o=n[t+Math.abs(r)-1];r<0&&(o=o.negate()),s=s.add(o)}return s},getPrecomputes(e,t,r){let n=Ut.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&Ut.set(t,r(n))),n},wNAFCached(e,t,r){const n=Lt(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)},wNAFCachedUnsafe(e,t,r,n){const i=Lt(e);return 1===i?this.unsafeLadder(e,t,n):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),t,n)},setWindowSize(e,r){Rt(r,t),Bt.set(e,r),Ut.delete(e)}}}(b,8*a);function A(e){return At(e,n)}function S(e){return A(st(e))}function C(e){const t=r.BYTES;e=ct("private key",e,t);const n=ct("hashed private key",s(e),2*t),i=p(n.slice(0,t)),o=n.slice(t,2*t),a=S(i),c=v.multiply(a),l=c.toRawBytes();return{head:i,prefix:o,scalar:a,point:c,pointBytes:l}}function I(e=new Uint8Array,...t){const r=lt(...t);return S(s(f(r,ct("context",e),!!i)))}const N=zt;return v._setWindowSize(8),{CURVE:t,getPublicKey:function(e){return C(e).pointBytes},sign:function(e,t,s={}){e=ct("message",e),i&&(e=i(e));const{prefix:o,scalar:a,pointBytes:c}=C(t),l=I(s.context,o,e),u=v.multiply(l).toRawBytes(),h=A(l+I(s.context,u,c,e)*a);return ht("signature.s",h,Dt,n),ct("result",lt(u,at(h,r.BYTES)),2*r.BYTES)},verify:function(e,t,n,s=N){const{context:o,zip215:a}=s,c=r.BYTES;e=ct("signature",e,2*c),t=ct("message",t),n=ct("publicKey",n,c),void 0!==a&&Qe("zip215",a),i&&(t=i(t));const l=st(e.slice(c,2*c));let u,h,d;try{u=b.fromHex(n,a),h=b.fromHex(e.slice(0,c),a),d=v.multiplyUnsafe(l)}catch{return!1}if(!a&&u.isSmallOrder())return!1;const p=I(o,h.toRawBytes(),u.toRawBytes(),t);return h.add(u.multiplyUnsafe(p)).subtract(d).clearCofactor().equals(b.ZERO)},ExtendedPoint:b,utils:{getExtendedPublicKey:C,randomPrivateKey:()=>o(r.BYTES),precompute:(e=8,t=b.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}}({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Zt,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Gt,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Ve,randomBytes:Ae,adjustScalarBytes:function(e){return e[0]&=248,e[31]&=127,e[31]|=64,e},uvRatio:function(e,t){const r=qt,n=At(t*t*t,r),i=function(e){const t=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=qt,o=e*e%s*e%s,a=Ct(o,Kt,s)*o%s,c=Ct(a,Ft,s)*e%s,l=Ct(c,Vt,s)*c%s,u=Ct(l,t,s)*l%s,h=Ct(u,r,s)*u%s,d=Ct(h,n,s)*h%s,p=Ct(d,i,s)*d%s,f=Ct(p,i,s)*d%s,g=Ct(f,t,s)*l%s;return{pow_p_5_8:Ct(g,Kt,s)*e%s,b2:o}}(e*At(n*n*t,r)).pow_p_5_8;let s=At(e*n*i,r);const o=At(t*s*s,r),a=s,c=At(s*Ht,r),l=o===e,u=o===At(-e,r),h=o===At(-e*Ht,r);return l&&(s=a),(u||h)&&(s=c),((e,t)=>(At(e,t)&yt)===yt)(s,r)&&(s=At(-s,r)),{isValid:l||u,value:s}}}),Jt=".",Xt="base64url",Qt="utf8",er="utf8",tr="did",rr="key",nr="base58btc";function ir(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function sr(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?ir(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function or(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const r=sr(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return ir(r)}var ar=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var s=(e.length-t)*l+1>>>0,o=new Uint8Array(s);e[t];){var u=r[e.charCodeAt(t)];if(255===u)return;for(var h=0,d=s-1;(0!==u||h<i)&&-1!==d;d--,h++)u+=a*o[d]>>>0,o[d]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");i=h,t++}if(" "!==e[t]){for(var p=s-i;p!==s&&0===o[p];)p++;for(var f=new Uint8Array(n+(s-p)),g=n;p!==s;)f[g++]=o[p++];return f}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var o=(s-i)*u+1>>>0,l=new Uint8Array(o);i!==s;){for(var h=t[i],d=0,p=o-1;(0!==h||d<n)&&-1!==p;p--,d++)h+=256*l[p]>>>0,l[p]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=d,i++}for(var f=o-n;f!==o&&0===l[f];)f++;for(var g=c.repeat(r);f<o;++f)g+=e.charAt(l[f]);return g},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw new Error(`Non-${t} character`)}}};const cr=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};class lr{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class ur{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return dr(this,e)}}class hr{constructor(e){this.decoders=e}or(e){return dr(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const dr=(e,t)=>new hr({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class pr{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new lr(e,t,r),this.decoder=new ur(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const fr=({name:e,prefix:t,encode:r,decode:n})=>new pr(e,t,r,n),gr=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=ar(r,t);return fr({prefix:e,name:t,encode:n,decode:e=>cr(i(e))})},mr=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>fr({prefix:t,name:e,encode:e=>((e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let n=0;n<e.length;++n)for(a=a<<8|e[n],o+=8;o>r;)o-=r,s+=t[i&a>>o];if(o&&(s+=t[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s})(e,n,r),decode:t=>((e,t,r,n)=>{const i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let t=0;t<s;++t){const s=i[e[t]];if(void 0===s)throw new SyntaxError(`Non-${n} character`);c=c<<r|s,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(t,n,r,e)}),yr=fr({prefix:"\0",name:"identity",encode:e=>(e=>(new TextDecoder).decode(e))(e),decode:e=>(e=>(new TextEncoder).encode(e))(e)});var wr=Object.freeze({__proto__:null,identity:yr});const br=mr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var vr=Object.freeze({__proto__:null,base2:br});const Er=mr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var _r=Object.freeze({__proto__:null,base8:Er});const Ar=gr({prefix:"9",name:"base10",alphabet:"0123456789"});var Sr=Object.freeze({__proto__:null,base10:Ar});const Cr=mr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Ir=mr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Nr=Object.freeze({__proto__:null,base16:Cr,base16upper:Ir});const kr=mr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Tr=mr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),xr=mr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Pr=mr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Or=mr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Rr=mr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Mr=mr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Ur=mr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Br=mr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Lr=Object.freeze({__proto__:null,base32:kr,base32upper:Tr,base32pad:xr,base32padupper:Pr,base32hex:Or,base32hexupper:Rr,base32hexpad:Mr,base32hexpadupper:Ur,base32z:Br});const Dr=gr({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),jr=gr({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var $r=Object.freeze({__proto__:null,base36:Dr,base36upper:jr});const Wr=gr({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),zr=gr({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var qr=Object.freeze({__proto__:null,base58btc:Wr,base58flickr:zr});const Hr=mr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Fr=mr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Kr=mr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Vr=mr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Gr=Object.freeze({__proto__:null,base64:Hr,base64pad:Fr,base64url:Kr,base64urlpad:Vr});const Zr=Array.from(""),Yr=Zr.reduce(((e,t,r)=>(e[r]=t,e)),[]),Jr=Zr.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]),Xr=fr({prefix:"",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+Yr[t]),"")},decode:function(e){const t=[];for(const r of e){const e=Jr[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});var Qr=Object.freeze({__proto__:null,base256emoji:Xr}),en=128,tn=-128,rn=Math.pow(2,31),nn=128,sn=127,on=Math.pow(2,7),an=Math.pow(2,14),cn=Math.pow(2,21),ln=Math.pow(2,28),un=Math.pow(2,35),hn=Math.pow(2,42),dn=Math.pow(2,49),pn=Math.pow(2,56),fn=Math.pow(2,63),gn={encode:function e(t,r,n){r=r||[];for(var i=n=n||0;t>=rn;)r[n++]=255&t|en,t/=128;for(;t&tn;)r[n++]=255&t|en,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},decode:function e(t,r){var n,i=0,s=(r=r||0,0),o=r,a=t.length;do{if(o>=a)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],i+=s<28?(n&sn)<<s:(n&sn)*Math.pow(2,s),s+=7}while(n>=nn);return e.bytes=o-r,i},encodingLength:function(e){return e<on?1:e<an?2:e<cn?3:e<ln?4:e<un?5:e<hn?6:e<dn?7:e<pn?8:e<fn?9:10}},mn=gn;const yn=(e,t,r=0)=>(mn.encode(e,t,r),t),wn=e=>mn.encodingLength(e),bn=(e,t)=>{const r=t.byteLength,n=wn(e),i=n+wn(r),s=new Uint8Array(i+r);return yn(e,s,0),yn(r,s,n),s.set(t,i),new vn(e,r,t,s)};class vn{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const En=({name:e,code:t,encode:r})=>new _n(e,t,r);class _n{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?bn(this.code,t):t.then((e=>bn(this.code,e)))}throw Error("Unknown type, must be binary type")}}const An=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Sn=En({name:"sha2-256",code:18,encode:An("SHA-256")}),Cn=En({name:"sha2-512",code:19,encode:An("SHA-512")});Object.freeze({__proto__:null,sha256:Sn,sha512:Cn});const In=cr,Nn={code:0,name:"identity",encode:In,digest:e=>bn(0,In(e))};Object.freeze({__proto__:null,identity:Nn}),new TextEncoder,new TextDecoder;const kn={...wr,...vr,..._r,...Sr,...Nr,...Lr,...$r,...qr,...Gr,...Qr};function Tn(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const xn=Tn("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),Pn=Tn("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{const t=sr((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),On={utf8:xn,"utf-8":xn,hex:kn.base16,latin1:Pn,ascii:Pn,binary:Pn,...kn};function Rn(e,t="utf8"){const r=On[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}function Mn(e,t="utf8"){const r=On[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${e}`):ir(globalThis.Buffer.from(e,"utf-8"))}function Un(e){return function(e){if("string"!=typeof e)throw new Error("Cannot safe json parse value of type "+typeof e);try{return(e=>{const t=e.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3');return JSON.parse(t,((e,t)=>"string"==typeof t&&t.match(/^\d+n$/)?BigInt(t.substring(0,t.length-1)):t))})(e)}catch(t){return e}}(Rn(Mn(e,Xt),Qt))}function Bn(e){return Rn(Mn("string"==typeof(t=e)?t:(r=t,JSON.stringify(r,((e,t)=>"bigint"==typeof t?t.toString()+"n":t))||""),Qt),Xt);var t,r}function Ln(e){const t="z"+Rn(or([Mn("K36",nr),e]),nr);return[tr,rr,t].join(":")}function Dn(e){return Rn(e,Xt)}function jn(e){const t=e.split(Jt),r=Un(t[0]),n=Un(t[1]),i=function(e){return Mn(e,Xt)}(t[2]);return{header:r,payload:n,signature:i,data:Mn(t.slice(0,2).join(Jt),er)}}function $n(e=Ae(32)){const t=Yt.getPublicKey(e);return{secretKey:or([e,t]),publicKey:t}}var Wn=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},zn=function(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"},qn=function(e){this.version=e,this.type="node",this.name="node",this.os=process.platform},Hn=function(e,t,r,n){this.name=e,this.version=t,this.os=r,this.bot=n,this.type="bot-device"},Fn=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},Kn=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},Vn=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Gn=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],Zn=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Yn(e){var t=function(e){return""!==e&&Gn.reduce((function(t,r){var n=r[0],i=r[1];if(t)return t;var s=i.exec(e);return!!s&&[n,s]}),!1)}(e);if(!t)return null;var r=t[0],n=t[1];if("searchbot"===r)return new Fn;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<3&&(i=Wn(Wn([],i,!0),function(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}(3-i.length),!0)):i=[];var s=i.join("."),o=function(e){for(var t=0,r=Zn.length;t<r;t++){var n=Zn[t],i=n[0];if(n[1].exec(e))return i}return null}(e),a=Vn.exec(e);return a&&a[1]?new Hn(r,s,o,a[1]):new zn(r,s,o)}var Jn=r(2939),Xn=r(9454);const Qn="2.23.2";let ei=({docsBaseUrl:e,docsPath:t="",docsSlug:r})=>t?`${e??"https://viem.sh"}${t}${r?`#${r}`:""}`:void 0,ti=`viem@${Qn}`;class ri extends Error{constructor(e,t={}){const r=t.cause instanceof ri?t.cause.details:t.cause?.message?t.cause.message:t.details,n=t.cause instanceof ri&&t.cause.docsPath||t.docsPath,i=ei?.({...t,docsPath:n});super([e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...ti?[`Version: ${ti}`]:[]].join("\n"),t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=n,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=Qn}walk(e){return ni(this,e)}}function ni(e,t){return t?.(e)?e:e&&"object"==typeof e&&"cause"in e&&void 0!==e.cause?ni(e.cause,t):t?null:e}function ii(e,{strict:t=!0}={}){return!!e&&"string"==typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x"))}class si extends ri{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}}function oi(e,{dir:t,size:r=32}={}){return"string"==typeof e?function(e,{dir:t,size:r=32}={}){if(null===r)return e;const n=e.replace("0x","");if(n.length>2*r)throw new si({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n["right"===t?"padEnd":"padStart"](2*r,"0")}`}(e,{dir:t,size:r}):function(e,{dir:t,size:r=32}={}){if(null===r)return e;if(e.length>r)throw new si({size:e.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let i=0;i<r;i++){const s="right"===t;n[s?i:r-i-1]=e[s?i:e.length-i-1]}return n}(e,{dir:t,size:r})}class ai extends ri{constructor({max:e,min:t,signed:r,size:n,value:i}){super(`Number "${i}" is not in safe ${n?`${8*n}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}}class ci extends ri{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function li(e){return ii(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}function ui(e,{size:t}){if(li(e)>t)throw new ci({givenSize:li(e),maxSize:t})}function hi(e,t={}){const{signed:r}=t;t.size&&ui(e,{size:t.size});const n=BigInt(e);if(!r)return n;const i=(e.length-2)/2;return n<=(1n<<8n*BigInt(i)-1n)-1n?n:n-BigInt(`0x${"f".padStart(2*i,"f")}`)-1n}const di=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function pi(e,t={}){return"number"==typeof e||"bigint"==typeof e?gi(e,t):"string"==typeof e?function(e,t={}){return fi(mi.encode(e),t)}(e,t):"boolean"==typeof e?function(e,t={}){const r=`0x${Number(e)}`;return"number"==typeof t.size?(ui(r,{size:t.size}),oi(r,{size:t.size})):r}(e,t):fi(e,t)}function fi(e,t={}){let r="";for(let t=0;t<e.length;t++)r+=di[e[t]];const n=`0x${r}`;return"number"==typeof t.size?(ui(n,{size:t.size}),oi(n,{dir:"right",size:t.size})):n}function gi(e,t={}){const{signed:r,size:n}=t,i=BigInt(e);let s;n?s=r?(1n<<8n*BigInt(n)-1n)-1n:2n**(8n*BigInt(n))-1n:"number"==typeof e&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o="bigint"==typeof s&&r?-s-1n:0;if(s&&i>s||i<o){const t="bigint"==typeof e?"n":"";throw new ai({max:s?`${s}${t}`:void 0,min:`${o}${t}`,signed:r,size:n,value:`${e}${t}`})}const a=`0x${(r&&i<0?(1n<<BigInt(8*n))+BigInt(i):i).toString(16)}`;return n?oi(a,{size:n}):a}const mi=new TextEncoder,yi=new TextEncoder;const wi={zero:48,nine:57,A:65,F:70,a:97,f:102};function bi(e){return e>=wi.zero&&e<=wi.nine?e-wi.zero:e>=wi.A&&e<=wi.F?e-(wi.A-10):e>=wi.a&&e<=wi.f?e-(wi.a-10):void 0}function vi(e,t={}){let r=e;t.size&&(ui(r,{size:t.size}),r=oi(r,{dir:"right",size:t.size}));let n=r.slice(2);n.length%2&&(n=`0${n}`);const i=n.length/2,s=new Uint8Array(i);for(let e=0,t=0;e<i;e++){const r=bi(n.charCodeAt(t++)),i=bi(n.charCodeAt(t++));if(void 0===r||void 0===i)throw new ri(`Invalid byte sequence ("${n[t-2]}${n[t-1]}" in "${n}").`);s[e]=16*r+i}return s}function Ei(e,t={}){const r=yi.encode(e);return"number"==typeof t.size?(ui(r,{size:t.size}),oi(r,{dir:"right",size:t.size})):r}var _i=r(7238);function Ai(e,t){const r=t||"hex",n=(0,_i.lY)(ii(e,{strict:!1})?function(e,t={}){return"number"==typeof e||"bigint"==typeof e?function(e,t){return vi(gi(e,t))}(e,t):"boolean"==typeof e?function(e,t={}){const r=new Uint8Array(1);return r[0]=Number(e),"number"==typeof t.size?(ui(r,{size:t.size}),oi(r,{size:t.size})):r}(e,t):ii(e)?vi(e,t):Ei(e,t)}(e):e);return"bytes"===r?n:pi(n)}class Si extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const e=this.keys().next().value;e&&this.delete(e)}return this}}const Ci=new Si(8192);function Ii(e){if(0===e||1===e)return e;if(27===e)return 0;if(28===e)return 1;throw new Error("Invalid yParityOrV value")}async function Ni({hash:e,signature:t}){return n=await async function({hash:e,signature:t}){const n=ii(e)?e:pi(e),{secp256k1:i}=await Promise.resolve().then(r.bind(r,2959)),s=(()=>{if("object"==typeof t&&"r"in t&&"s"in t){const{r:e,s:r,v:n,yParity:s}=t,o=Ii(Number(s??n));return new i.Signature(hi(e),hi(r)).addRecoveryBit(o)}const e=ii(t)?t:pi(t),r=Ii(function(e,t={}){return Number(hi(e,t))}(`0x${e.slice(130)}`));return i.Signature.fromCompact(e.substring(2,130)).addRecoveryBit(r)})();return`0x${s.recoverPublicKey(n.substring(2)).toHex(!1)}`}({hash:e,signature:t}),function(e,t){if(Ci.has(`${e}.${t}`))return Ci.get(`${e}.${t}`);const r=t?`${t}${e.toLowerCase()}`:e.substring(2).toLowerCase(),n=Ai(Ei(r),"bytes"),i=(t?r.substring(`${t}0x`.length):r).split("");for(let e=0;e<40;e+=2)n[e>>1]>>4>=8&&i[e]&&(i[e]=i[e].toUpperCase()),(15&n[e>>1])>=8&&i[e+1]&&(i[e+1]=i[e+1].toUpperCase());const s=`0x${i.join("")}`;return Ci.set(`${e}.${t}`,s),s}(`0x${Ai(`0x${n.substring(4)}`).substring(26)}`);var n}var ki=r(1307);function Ti(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}function xi(e,t){t||(t=e.reduce(((e,t)=>e+t.length),0));const r=Ti(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}const Pi=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var s=(e.length-t)*l+1>>>0,o=new Uint8Array(s);e[t];){var u=r[e.charCodeAt(t)];if(255===u)return;for(var h=0,d=s-1;(0!==u||h<i)&&-1!==d;d--,h++)u+=a*o[d]>>>0,o[d]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");i=h,t++}if(" "!==e[t]){for(var p=s-i;p!==s&&0===o[p];)p++;for(var f=new Uint8Array(n+(s-p)),g=n;p!==s;)f[g++]=o[p++];return f}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var o=(s-i)*u+1>>>0,l=new Uint8Array(o);i!==s;){for(var h=t[i],d=0,p=o-1;(0!==h||d<n)&&-1!==p;p--,d++)h+=256*l[p]>>>0,l[p]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=d,i++}for(var f=o-n;f!==o&&0===l[f];)f++;for(var g=c.repeat(r);f<o;++f)g+=e.charAt(l[f]);return g},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw new Error(`Non-${t} character`)}}},Oi=(new Uint8Array(0),e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")});class Ri{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Mi{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return Bi(this,e)}}class Ui{constructor(e){this.decoders=e}or(e){return Bi(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Bi=(e,t)=>new Ui({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class Li{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new Ri(e,t,r),this.decoder=new Mi(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Di=({name:e,prefix:t,encode:r,decode:n})=>new Li(e,t,r,n),ji=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=Pi(r,t);return Di({prefix:e,name:t,encode:n,decode:e=>Oi(i(e))})},$i=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>Di({prefix:t,name:e,encode:e=>((e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let n=0;n<e.length;++n)for(a=a<<8|e[n],o+=8;o>r;)o-=r,s+=t[i&a>>o];if(o&&(s+=t[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s})(e,n,r),decode:t=>((e,t,r,n)=>{const i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let t=0;t<s;++t){const s=i[e[t]];if(void 0===s)throw new SyntaxError(`Non-${n} character`);c=c<<r|s,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(t,n,r,e)}),Wi=Di({prefix:"\0",name:"identity",encode:e=>{return t=e,(new TextDecoder).decode(t);var t},decode:e=>(e=>(new TextEncoder).encode(e))(e)}),zi=$i({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),qi=$i({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Hi=ji({prefix:"9",name:"base10",alphabet:"0123456789"}),Fi=$i({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Ki=$i({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Vi=$i({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Gi=$i({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Zi=$i({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Yi=$i({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ji=$i({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Xi=$i({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Qi=$i({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),es=$i({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),ts=$i({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),rs=ji({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),ns=ji({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),is=ji({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ss=ji({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),os=$i({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),as=$i({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),cs=$i({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ls=$i({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),us=Array.from(""),hs=us.reduce(((e,t,r)=>(e[r]=t,e)),[]),ds=us.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]),ps=Di({prefix:"",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+hs[t]),"")},decode:function(e){const t=[];for(const r of e){const e=ds[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});var fs=128,gs=-128,ms=Math.pow(2,31),ys=Math.pow(2,7),ws=Math.pow(2,14),bs=Math.pow(2,21),vs=Math.pow(2,28),Es=Math.pow(2,35),_s=Math.pow(2,42),As=Math.pow(2,49),Ss=Math.pow(2,56),Cs=Math.pow(2,63);const Is=function e(t,r,n){r=r||[];for(var i=n=n||0;t>=ms;)r[n++]=255&t|fs,t/=128;for(;t&gs;)r[n++]=255&t|fs,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},Ns=function(e){return e<ys?1:e<ws?2:e<bs?3:e<vs?4:e<Es?5:e<_s?6:e<As?7:e<Ss?8:e<Cs?9:10},ks=(e,t,r=0)=>(Is(e,t,r),t),Ts=e=>Ns(e),xs=(e,t)=>{const r=t.byteLength,n=Ts(e),i=n+Ts(r),s=new Uint8Array(i+r);return ks(e,s,0),ks(r,s,n),s.set(t,i),new Ps(e,r,t,s)};class Ps{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const Os=({name:e,code:t,encode:r})=>new Rs(e,t,r);class Rs{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?xs(this.code,t):t.then((e=>xs(this.code,e)))}throw Error("Unknown type, must be binary type")}}const Ms=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Us=Os({name:"sha2-256",code:18,encode:Ms("SHA-256")}),Bs=Os({name:"sha2-512",code:19,encode:Ms("SHA-512")}),Ls=Oi,Ds={code:0,name:"identity",encode:Ls,digest:e=>xs(0,Ls(e))},js="raw",$s=85,Ws=e=>Oi(e),zs=e=>Oi(e),qs=new TextEncoder,Hs=new TextDecoder,Fs="json",Ks=512,Vs=e=>qs.encode(JSON.stringify(e)),Gs=e=>JSON.parse(Hs.decode(e));Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"),Symbol.for("@ipld/js-cid/CID");const Zs={...n,...i,...s,...o,...a,...c,...l,...u,...h,...d};function Ys(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const Js=Ys("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),Xs=Ys("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{const t=Ti((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),Qs={utf8:Js,"utf-8":Js,hex:Zs.base16,latin1:Xs,ascii:Xs,binary:Xs,...Zs};function eo(e,t="utf8"){const r=Qs[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${e}`):globalThis.Buffer.from(e,"utf8")}function to(e,t="utf8"){const r=Qs[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.encoder.encode(e).substring(1):globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8")}const ro={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}};var no=r(8287).Buffer;function io(e){const[t,r]=e.split(":");return{namespace:t,reference:r}}function so(e,t){return e.includes(":")?[e]:t.chains||[]}var oo=Object.defineProperty,ao=Object.defineProperties,co=Object.getOwnPropertyDescriptors,lo=Object.getOwnPropertySymbols,uo=Object.prototype.hasOwnProperty,ho=Object.prototype.propertyIsEnumerable,po=(e,t,r)=>t in e?oo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,fo=(e,t)=>{for(var r in t||(t={}))uo.call(t,r)&&po(e,r,t[r]);if(lo)for(var r of lo(t))ho.call(t,r)&&po(e,r,t[r]);return e};const go="react-native",mo="browser",yo="js";function wo(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function bo(){return!(0,Jn.getDocument)()&&!!(0,Jn.getNavigator)()&&"ReactNative"===navigator.product}function vo(){return!wo()&&!!(0,Jn.getNavigator)()&&!!(0,Jn.getDocument)()}function Eo(){return bo()?go:wo()?"node":vo()?mo:"unknown"}function _o(){var e;try{return bo()&&typeof r.g<"u"&&typeof(null==r.g?void 0:r.g.Application)<"u"?null==(e=r.g.Application)?void 0:e.applicationId:void 0}catch{return}}function Ao(){return(0,Xn.g)()||{name:"",description:"",url:"",icons:[""]}}function So(e,t,n){const i=function(){if(Eo()===go&&typeof r.g<"u"&&typeof(null==r.g?void 0:r.g.Platform)<"u"){const{OS:e,Version:t}=r.g.Platform;return[e,t].join("-")}const e=t?Yn(t):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new Kn:"undefined"!=typeof navigator?Yn(navigator.userAgent):"undefined"!=typeof process&&process.version?new qn(process.version.slice(1)):null;var t;if(null===e)return"unknown";const n=e.os?e.os.replace(" ","").toLowerCase():"unknown";return"browser"===e.type?[n,e.name,e.version].join("-"):[n,e.version].join("-")}(),s=function(){var e;const t=Eo();return t===mo?[t,(null==(e=(0,Jn.getLocation)())?void 0:e.host)||"unknown"].join(":"):t}();return[[e,t].join("-"),[yo,n].join("-"),i,s].join("/")}function Co(e,t){return e.filter((e=>t.includes(e))).length===e.length}function Io(e){return Object.fromEntries(e.entries())}function No(e){return new Map(Object.entries(e))}function ko(e=b.FIVE_MINUTES,t){const r=(0,b.toMiliseconds)(e||b.FIVE_MINUTES);let n,i,s,o;return{resolve:e=>{s&&n&&(clearTimeout(s),n(e),o=Promise.resolve(e))},reject:e=>{s&&i&&(clearTimeout(s),i(e))},done:()=>new Promise(((e,a)=>{if(o)return e(o);s=setTimeout((()=>{const e=new Error(t);o=Promise.reject(e),a(e)}),r),n=e,i=a}))}}function To(e,t,r){return new Promise((async(n,i)=>{const s=setTimeout((()=>i(new Error(r))),t);try{n(await e)}catch(e){i(e)}clearTimeout(s)}))}function xo(e,t){if("string"==typeof t&&t.startsWith(`${e}:`))return t;if("topic"===e.toLowerCase()){if("string"!=typeof t)throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}if("id"===e.toLowerCase()){if("number"!=typeof t)throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function Po(e){const[t,r]=e.split(":"),n={id:void 0,topic:void 0};if("topic"===t&&"string"==typeof r)n.topic=r;else{if("id"!==t||!Number.isInteger(Number(r)))throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);n.id=Number(r)}return n}function Oo(e,t){return(0,b.fromMiliseconds)((t||Date.now())+(0,b.toMiliseconds)(e))}function Ro(e){return Date.now()>=(0,b.toMiliseconds)(e)}function Mo(e,t){return`${e}${t?`:${t}`:""}`}function Uo(e=[],t=[]){return[...new Set([...e,...t])]}function Bo(e,t){if(!e.includes(t))return null;const r=e.split(/([&,?,=])/),n=r.indexOf(t);return r[n+2]}function Lo(){return typeof crypto<"u"&&null!=crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function Do(){return typeof process<"u"&&"true"===process.env.IS_VITEST}function jo(e){return no.from(e,"base64").toString("utf-8")}function $o(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Wo(e,...t){if(!function(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function zo(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");$o(e.outputLen),$o(e.blockLen)}function qo(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Ho(e,t){Wo(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}const Fo=BigInt(2**32-1),Ko=BigInt(32);function Vo(e,t=!1){return t?{h:Number(e&Fo),l:Number(e>>Ko&Fo)}:{h:0|Number(e>>Ko&Fo),l:0|Number(e&Fo)}}const Go="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;function Zo(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Yo(e,t){return e<<32-t|e>>>t}const Jo=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];function Xo(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function Qo(e){for(let t=0;t<e.length;t++)e[t]=Xo(e[t])}function ea(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}(e)),Wo(e),e}class ta{clone(){return this._cloneInto()}}function ra(e){const t=t=>e().update(ea(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function na(e=32){if(Go&&"function"==typeof Go.getRandomValues)return Go.getRandomValues(new Uint8Array(e));if(Go&&"function"==typeof Go.randomBytes)return Go.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}const ia=[],sa=[],oa=[],aa=BigInt(0),ca=BigInt(1),la=BigInt(2),ua=BigInt(7),ha=BigInt(256),da=BigInt(113);for(let e=0,t=ca,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],ia.push(2*(5*n+r)),sa.push((e+1)*(e+2)/2%64);let i=aa;for(let e=0;e<7;e++)t=(t<<ca^(t>>ua)*da)%ha,t&la&&(i^=ca<<(ca<<BigInt(e))-ca);oa.push(i)}const[pa,fa]=function(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:o}=Vo(e[i],t);[r[i],n[i]]=[s,o]}return[r,n]}(oa,!0),ga=(e,t,r)=>r>32?((e,t,r)=>t<<r-32|e>>>64-r)(e,t,r):((e,t,r)=>e<<r|t>>>32-r)(e,t,r),ma=(e,t,r)=>r>32?((e,t,r)=>e<<r-32|t>>>64-r)(e,t,r):((e,t,r)=>t<<r|e>>>32-r)(e,t,r);class ya extends ta{constructor(e,t,r,n=!1,i=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=i,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,$o(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var s;this.state=new Uint8Array(200),this.state32=(s=this.state,new Uint32Array(s.buffer,s.byteOffset,Math.floor(s.byteLength/4)))}keccak(){Jo||Qo(this.state32),function(e,t=24){const r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const n=(t+8)%10,i=(t+2)%10,s=r[i],o=r[i+1],a=ga(s,o,1)^r[n],c=ma(s,o,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=a,e[t+r+1]^=c}let t=e[2],i=e[3];for(let r=0;r<24;r++){const n=sa[r],s=ga(t,i,n),o=ma(t,i,n),a=ia[r];t=e[a],i=e[a+1],e[a]=s,e[a+1]=o}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=pa[n],e[1]^=fa[n]}r.fill(0)}(this.state32,this.rounds),Jo||Qo(this.state32),this.posOut=0,this.pos=0}update(e){qo(this);const{blockLen:t,state:r}=this,n=(e=ea(e)).length;for(let i=0;i<n;){const s=Math.min(t-this.pos,n-i);for(let t=0;t<s;t++)r[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,!!(128&t)&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){qo(this,!1),Wo(e),this.finish();const t=this.state,{blockLen:r}=this;for(let n=0,i=e.length;n<i;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,i-n);e.set(t.subarray(this.posOut,this.posOut+s),n),this.posOut+=s,n+=s}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return $o(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Ho(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:r,outputLen:n,rounds:i,enableXOF:s}=this;return e||(e=new ya(t,r,n,s,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=r,e.outputLen=n,e.enableXOF=s,e.destroyed=this.destroyed,e}}const wa=ra((()=>new ya(136,1,32)));function ba(e){const t=`Ethereum Signed Message:\n${e.length}`,r=(new TextEncoder).encode(t+e);return"0x"+no.from(wa(r)).toString("hex")}var va=Object.defineProperty,Ea=Object.defineProperties,_a=Object.getOwnPropertyDescriptors,Aa=Object.getOwnPropertySymbols,Sa=Object.prototype.hasOwnProperty,Ca=Object.prototype.propertyIsEnumerable,Ia=(e,t,r)=>t in e?va(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;const Na=e=>e?.split(":"),ka=e=>{const t=e&&Na(e);if(t)return t[2]+":"+t[3]},Ta=e=>{const t=e&&Na(e);if(t)return t.pop()};async function xa(e){const{cacao:t,projectId:r}=e,{s:n,p:i}=t,s=Pa(i,i.iss),o=Ta(i.iss);return await async function(e,t,r,n,i,s){switch(r.t){case"eip191":return await async function(e,t,r){return(await Ni({hash:ba(t),signature:r})).toLowerCase()===e.toLowerCase()}(e,t,r.s);case"eip1271":return await async function(e,t,r,n,i,s){const o=io(n);if(!o.namespace||!o.reference)throw new Error(`isValidEip1271Signature failed: chainId must be in CAIP-2 format, received: ${n}`);try{const o="0x1626ba7e",a="0000000000000000000000000000000000000000000000000000000000000040",c="0000000000000000000000000000000000000000000000000000000000000041",l=r.substring(2),u=o+ba(t).substring(2)+a+c+l,h=await fetch(`${s||"https://rpc.walletconnect.org/v1"}/?chainId=${n}&projectId=${i}`,{method:"POST",body:JSON.stringify({id:Date.now()+Math.floor(1e3*Math.random()),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:u},"latest"]})}),{result:d}=await h.json();return!!d&&d.slice(0,o.length).toLowerCase()===o.toLowerCase()}catch(e){return console.error("isValidEip1271Signature: ",e),!1}}(e,t,r.s,n,i,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${r.t}`)}}(o,s,n,ka(i.iss),r)}const Pa=(e,t)=>{const r=`${e.domain} wants you to sign in with your Ethereum account:`,n=Ta(t);if(!e.aud&&!e.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let i=e.statement||void 0;const s=`URI: ${e.aud||e.uri}`,o=`Version: ${e.version}`,a=`Chain ID: ${(e=>{const t=e&&Na(e);if(t)return e.includes("did:pkh:")?t[3]:t[1]})(t)}`,c=`Nonce: ${e.nonce}`,l=`Issued At: ${e.iat}`,u=e.exp?`Expiration Time: ${e.exp}`:void 0,h=e.nbf?`Not Before: ${e.nbf}`:void 0,d=e.requestId?`Request ID: ${e.requestId}`:void 0,p=e.resources?`Resources:${e.resources.map((e=>`\n- ${e}`)).join("")}`:void 0,f=ja(e.resources);return f&&(i=function(e="",t){Oa(t);const r="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(r))return e;const n=[];let i=0;return Object.keys(t.att).forEach((e=>{const r=Object.keys(t.att[e]).map((e=>({ability:e.split("/")[0],action:e.split("/")[1]})));r.sort(((e,t)=>e.action.localeCompare(t.action)));const s={};r.forEach((e=>{s[e.ability]||(s[e.ability]=[]),s[e.ability].push(e.action)}));const o=Object.keys(s).map((t=>(i++,`(${i}) '${t}': '${s[t].join("', '")}' for '${e}'.`)));n.push(o.join(", ").replace(".,","."))})),`${e?e+" ":""}${r}${n.join(" ")}`}(i,Ua(f))),[r,n,"",i,"",s,o,a,c,l,u,h,d,p].filter((e=>null!=e)).join("\n")};function Oa(e){if(!e)throw new Error("No recap provided, value is undefined");if(!e.att)throw new Error("No `att` property found");const t=Object.keys(e.att);if(null==t||!t.length)throw new Error("No resources found in `att` property");t.forEach((t=>{const r=e.att[t];if(Array.isArray(r))throw new Error(`Resource must be an object: ${t}`);if("object"!=typeof r)throw new Error(`Resource must be an object: ${t}`);if(!Object.keys(r).length)throw new Error(`Resource object is empty: ${t}`);Object.keys(r).forEach((e=>{const t=r[e];if(!Array.isArray(t))throw new Error(`Ability limits ${e} must be an array of objects, found: ${t}`);if(!t.length)throw new Error(`Value of ${e} is empty array, must be an array with objects`);t.forEach((t=>{if("object"!=typeof t)throw new Error(`Ability limits (${e}) must be an array of objects, found: ${t}`)}))}))}))}function Ra(e,t,r={}){t=t?.sort(((e,t)=>e.localeCompare(t)));const n=t.map((t=>({[`${e}/${t}`]:[r]})));return Object.assign({},...n)}function Ma(e){return Oa(e),`urn:recap:${function(e){return no.from(JSON.stringify(e)).toString("base64")}(e).replace(/=/g,"")}`}function Ua(e){const t=function(e){return JSON.parse(no.from(e,"base64").toString("utf-8"))}(e.replace("urn:recap:",""));return Oa(t),t}function Ba(e,t){const r=function(e,t){Oa(e),Oa(t);const r=Object.keys(e.att).concat(Object.keys(t.att)).sort(((e,t)=>e.localeCompare(t))),n={att:{}};return r.forEach((r=>{var i,s;Object.keys((null==(i=e.att)?void 0:i[r])||{}).concat(Object.keys((null==(s=t.att)?void 0:s[r])||{})).sort(((e,t)=>e.localeCompare(t))).forEach((i=>{var s,o;n.att[r]=((e,t)=>Ea(e,_a(t)))(((e,t)=>{for(var r in t||(t={}))Sa.call(t,r)&&Ia(e,r,t[r]);if(Aa)for(var r of Aa(t))Ca.call(t,r)&&Ia(e,r,t[r]);return e})({},n.att[r]),{[i]:(null==(s=e.att[r])?void 0:s[i])||(null==(o=t.att[r])?void 0:o[i])})}))})),n}(Ua(e),Ua(t));return Ma(r)}function La(e){var t;const r=Ua(e);Oa(r);const n=null==(t=r.att)?void 0:t.eip155;return n?Object.keys(n).map((e=>e.split("/")[1])):[]}function Da(e){const t=Ua(e);Oa(t);const r=[];return Object.values(t.att).forEach((e=>{Object.values(e).forEach((e=>{var t;null!=(t=e?.[0])&&t.chains&&r.push(e[0].chains)}))})),[...new Set(r.flat())]}function ja(e){if(!e)return;const t=e?.[e.length-1];return function(e){return e&&e.includes("urn:recap:")}(t)?t:void 0}function $a(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Wa(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function za(e,...t){if(!Wa(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function qa(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Ha(e){if("boolean"!=typeof e)throw new Error(`boolean expected, not ${e}`)}const Fa=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw new Error("Non little-endian hardware is not supported");function Ka(e){if("string"==typeof e)e=function(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))}(e);else{if(!Wa(e))throw new Error("Uint8Array expected, got "+typeof e);e=Za(e)}return e}function Va(e,t,r=!0){if(void 0===t)return new Uint8Array(e);if(t.length!==e)throw new Error("invalid output length, expected "+e+", got: "+t.length);if(r&&!function(e){return e.byteOffset%4==0}(t))throw new Error("invalid output, must be aligned");return t}function Ga(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,l=n?0:4;e.setUint32(t+c,o,n),e.setUint32(t+l,a,n)}function Za(e){return Uint8Array.from(e)}function Ya(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}const Ja=e=>Uint8Array.from(e.split("").map((e=>e.charCodeAt(0)))),Xa=Ja("expand 16-byte k"),Qa=Ja("expand 32-byte k"),ec=Fa(Xa),tc=Fa(Qa);function rc(e,t){return e<<t|e>>>32-t}function nc(e){return e.byteOffset%4==0}const ic=2**32-1,sc=new Uint32Array,oc=(e,t)=>255&e[t++]|(255&e[t++])<<8;class ac{constructor(e){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,za(e=Ka(e),32);const t=oc(e,0),r=oc(e,2),n=oc(e,4),i=oc(e,6),s=oc(e,8),o=oc(e,10),a=oc(e,12),c=oc(e,14);this.r[0]=8191&t,this.r[1]=8191&(t>>>13|r<<3),this.r[2]=7939&(r>>>10|n<<6),this.r[3]=8191&(n>>>7|i<<9),this.r[4]=255&(i>>>4|s<<12),this.r[5]=s>>>1&8190,this.r[6]=8191&(s>>>14|o<<2),this.r[7]=8065&(o>>>11|a<<5),this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127;for(let t=0;t<8;t++)this.pad[t]=oc(e,16+2*t)}process(e,t,r=!1){const n=r?0:2048,{h:i,r:s}=this,o=s[0],a=s[1],c=s[2],l=s[3],u=s[4],h=s[5],d=s[6],p=s[7],f=s[8],g=s[9],m=oc(e,t+0),y=oc(e,t+2),w=oc(e,t+4),b=oc(e,t+6),v=oc(e,t+8),E=oc(e,t+10),_=oc(e,t+12),A=oc(e,t+14);let S=i[0]+(8191&m),C=i[1]+(8191&(m>>>13|y<<3)),I=i[2]+(8191&(y>>>10|w<<6)),N=i[3]+(8191&(w>>>7|b<<9)),k=i[4]+(8191&(b>>>4|v<<12)),T=i[5]+(v>>>1&8191),x=i[6]+(8191&(v>>>14|E<<2)),P=i[7]+(8191&(E>>>11|_<<5)),O=i[8]+(8191&(_>>>8|A<<8)),R=i[9]+(A>>>5|n),M=0,U=M+S*o+C*(5*g)+I*(5*f)+N*(5*p)+k*(5*d);M=U>>>13,U&=8191,U+=T*(5*h)+x*(5*u)+P*(5*l)+O*(5*c)+R*(5*a),M+=U>>>13,U&=8191;let B=M+S*a+C*o+I*(5*g)+N*(5*f)+k*(5*p);M=B>>>13,B&=8191,B+=T*(5*d)+x*(5*h)+P*(5*u)+O*(5*l)+R*(5*c),M+=B>>>13,B&=8191;let L=M+S*c+C*a+I*o+N*(5*g)+k*(5*f);M=L>>>13,L&=8191,L+=T*(5*p)+x*(5*d)+P*(5*h)+O*(5*u)+R*(5*l),M+=L>>>13,L&=8191;let D=M+S*l+C*c+I*a+N*o+k*(5*g);M=D>>>13,D&=8191,D+=T*(5*f)+x*(5*p)+P*(5*d)+O*(5*h)+R*(5*u),M+=D>>>13,D&=8191;let j=M+S*u+C*l+I*c+N*a+k*o;M=j>>>13,j&=8191,j+=T*(5*g)+x*(5*f)+P*(5*p)+O*(5*d)+R*(5*h),M+=j>>>13,j&=8191;let $=M+S*h+C*u+I*l+N*c+k*a;M=$>>>13,$&=8191,$+=T*o+x*(5*g)+P*(5*f)+O*(5*p)+R*(5*d),M+=$>>>13,$&=8191;let W=M+S*d+C*h+I*u+N*l+k*c;M=W>>>13,W&=8191,W+=T*a+x*o+P*(5*g)+O*(5*f)+R*(5*p),M+=W>>>13,W&=8191;let z=M+S*p+C*d+I*h+N*u+k*l;M=z>>>13,z&=8191,z+=T*c+x*a+P*o+O*(5*g)+R*(5*f),M+=z>>>13,z&=8191;let q=M+S*f+C*p+I*d+N*h+k*u;M=q>>>13,q&=8191,q+=T*l+x*c+P*a+O*o+R*(5*g),M+=q>>>13,q&=8191;let H=M+S*g+C*f+I*p+N*d+k*h;M=H>>>13,H&=8191,H+=T*u+x*l+P*c+O*a+R*o,M+=H>>>13,H&=8191,M=(M<<2)+M|0,M=M+U|0,U=8191&M,M>>>=13,B+=M,i[0]=U,i[1]=B,i[2]=L,i[3]=D,i[4]=j,i[5]=$,i[6]=W,i[7]=z,i[8]=q,i[9]=H}finalize(){const{h:e,pad:t}=this,r=new Uint16Array(10);let n=e[1]>>>13;e[1]&=8191;for(let t=2;t<10;t++)e[t]+=n,n=e[t]>>>13,e[t]&=8191;e[0]+=5*n,n=e[0]>>>13,e[0]&=8191,e[1]+=n,n=e[1]>>>13,e[1]&=8191,e[2]+=n,r[0]=e[0]+5,n=r[0]>>>13,r[0]&=8191;for(let t=1;t<10;t++)r[t]=e[t]+n,n=r[t]>>>13,r[t]&=8191;r[9]-=8192;let i=(1^n)-1;for(let e=0;e<10;e++)r[e]&=i;i=~i;for(let t=0;t<10;t++)e[t]=e[t]&i|r[t];e[0]=65535&(e[0]|e[1]<<13),e[1]=65535&(e[1]>>>3|e[2]<<10),e[2]=65535&(e[2]>>>6|e[3]<<7),e[3]=65535&(e[3]>>>9|e[4]<<4),e[4]=65535&(e[4]>>>12|e[5]<<1|e[6]<<14),e[5]=65535&(e[6]>>>2|e[7]<<11),e[6]=65535&(e[7]>>>5|e[8]<<8),e[7]=65535&(e[8]>>>8|e[9]<<5);let s=e[0]+t[0];e[0]=65535&s;for(let r=1;r<8;r++)s=(e[r]+t[r]|0)+(s>>>16)|0,e[r]=65535&s;Ya(r)}update(e){qa(this);const{buffer:t,blockLen:r}=this,n=(e=Ka(e)).length;for(let i=0;i<n;){const s=Math.min(r-this.pos,n-i);if(s!==r)t.set(e.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===r&&(this.process(t,0,!1),this.pos=0);else for(;r<=n-i;i+=r)this.process(e,i)}return this}destroy(){Ya(this.h,this.r,this.buffer,this.pad)}digestInto(e){qa(this),function(e,t){za(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}(e,this),this.finished=!0;const{buffer:t,h:r}=this;let{pos:n}=this;if(n){for(t[n++]=1;n<16;n++)t[n]=0;this.process(t,0,!0)}this.finalize();let i=0;for(let t=0;t<8;t++)e[i++]=r[t]>>>0,e[i++]=r[t]>>>8;return e}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}}const cc=function(e){const t=(t,r)=>e(r).update(Ka(t)).digest(),r=e(new Uint8Array(32));return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t}((e=>new ac(e))),lc=function(e){const{allowShortKeys:t,extendNonceFn:r,counterLength:n,counterRight:i,rounds:s}=function(e,t){if(null==t||"object"!=typeof t)throw new Error("options must be defined");return Object.assign({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},t)}(0,{counterRight:!1,counterLength:4,allowShortKeys:!1});return $a(n),$a(s),Ha(i),Ha(t),(o,a,c,l,u=0)=>{za(o),za(a),za(c);const h=c.length;if(void 0===l&&(l=new Uint8Array(h)),za(l),$a(u),u<0||u>=ic)throw new Error("arx: counter overflow");if(l.length<h)throw new Error(`arx: output (${l.length}) is shorter than data (${h})`);const d=[];let p,f,g=o.length;if(32===g)d.push(p=Za(o)),f=tc;else{if(16!==g||!t)throw new Error(`arx: invalid 32-byte key, got length=${g}`);p=new Uint8Array(32),p.set(o),p.set(o,16),f=ec,d.push(p)}nc(a)||d.push(a=Za(a));const m=Fa(p);if(r){if(24!==a.length)throw new Error("arx: extended nonce must be 24 bytes");r(f,m,Fa(a.subarray(0,16)),m),a=a.subarray(16)}const y=16-n;if(y!==a.length)throw new Error(`arx: nonce must be ${y} or 16 bytes`);if(12!==y){const e=new Uint8Array(12);e.set(a,i?0:12-a.length),a=e,d.push(a)}const w=Fa(a);return function(e,t,r,n,i,s,o,a){const c=i.length,l=new Uint8Array(64),u=Fa(l),h=nc(i)&&nc(s),d=h?Fa(i):sc,p=h?Fa(s):sc;for(let f=0;f<c;o++){if(e(t,r,n,u,o,a),o>=ic)throw new Error("arx: counter overflow");const g=Math.min(64,c-f);if(h&&64===g){const e=f/4;if(f%4!=0)throw new Error("arx: invalid block position");for(let t,r=0;r<16;r++)t=e+r,p[t]=d[t]^u[r];f+=64}else{for(let e,t=0;t<g;t++)e=f+t,s[e]=i[e]^l[t];f+=g}}}(e,f,m,w,c,l,u,s),Ya(...d),l}}((function(e,t,r,n,i,s=20){let o=e[0],a=e[1],c=e[2],l=e[3],u=t[0],h=t[1],d=t[2],p=t[3],f=t[4],g=t[5],m=t[6],y=t[7],w=i,b=r[0],v=r[1],E=r[2],_=o,A=a,S=c,C=l,I=u,N=h,k=d,T=p,x=f,P=g,O=m,R=y,M=w,U=b,B=v,L=E;for(let e=0;e<s;e+=2)_=_+I|0,M=rc(M^_,16),x=x+M|0,I=rc(I^x,12),_=_+I|0,M=rc(M^_,8),x=x+M|0,I=rc(I^x,7),A=A+N|0,U=rc(U^A,16),P=P+U|0,N=rc(N^P,12),A=A+N|0,U=rc(U^A,8),P=P+U|0,N=rc(N^P,7),S=S+k|0,B=rc(B^S,16),O=O+B|0,k=rc(k^O,12),S=S+k|0,B=rc(B^S,8),O=O+B|0,k=rc(k^O,7),C=C+T|0,L=rc(L^C,16),R=R+L|0,T=rc(T^R,12),C=C+T|0,L=rc(L^C,8),R=R+L|0,T=rc(T^R,7),_=_+N|0,L=rc(L^_,16),O=O+L|0,N=rc(N^O,12),_=_+N|0,L=rc(L^_,8),O=O+L|0,N=rc(N^O,7),A=A+k|0,M=rc(M^A,16),R=R+M|0,k=rc(k^R,12),A=A+k|0,M=rc(M^A,8),R=R+M|0,k=rc(k^R,7),S=S+T|0,U=rc(U^S,16),x=x+U|0,T=rc(T^x,12),S=S+T|0,U=rc(U^S,8),x=x+U|0,T=rc(T^x,7),C=C+I|0,B=rc(B^C,16),P=P+B|0,I=rc(I^P,12),C=C+I|0,B=rc(B^C,8),P=P+B|0,I=rc(I^P,7);let D=0;n[D++]=o+_|0,n[D++]=a+A|0,n[D++]=c+S|0,n[D++]=l+C|0,n[D++]=u+I|0,n[D++]=h+N|0,n[D++]=d+k|0,n[D++]=p+T|0,n[D++]=f+x|0,n[D++]=g+P|0,n[D++]=m+O|0,n[D++]=y+R|0,n[D++]=w+M|0,n[D++]=b+U|0,n[D++]=v+B|0,n[D++]=E+L|0})),uc=new Uint8Array(16),hc=(e,t)=>{e.update(t);const r=t.length%16;r&&e.update(uc.subarray(r))},dc=new Uint8Array(32);function pc(e,t,r,n,i){const s=e(t,r,dc),o=cc.create(s);i&&hc(o,i),hc(o,n);const a=new Uint8Array(16),c=(e=>new DataView(e.buffer,e.byteOffset,e.byteLength))(a);Ga(c,0,BigInt(i?i.length:0),!0),Ga(c,8,BigInt(n.length),!0),o.update(a);const l=o.digest();return Ya(s,a),l}const fc=((e,t)=>{function r(r,...n){if(za(r),void 0!==e.nonceLength){const t=n[0];if(!t)throw new Error("nonce / iv required");e.varSizeNonce?za(t):za(t,e.nonceLength)}const i=e.tagLength;i&&void 0!==n[1]&&za(n[1]);const s=t(r,...n),o=(e,t)=>{if(void 0!==t){if(2!==e)throw new Error("cipher output not supported");za(t)}};let a=!1;return{encrypt(e,t){if(a)throw new Error("cannot encrypt() twice with same key + nonce");return a=!0,za(e),o(s.encrypt.length,t),s.encrypt(e,t)},decrypt(e,t){if(za(e),i&&e.length<i)throw new Error("invalid ciphertext length: smaller than tagLength="+i);return o(s.decrypt.length,t),s.decrypt(e,t)}}}return Object.assign(r,e),r})({blockSize:64,nonceLength:12,tagLength:16},(gc=lc,(e,t,r)=>({encrypt(n,i){const s=n.length;(i=Va(s+16,i,!1)).set(n);const o=i.subarray(0,-16);gc(e,t,o,o,1);const a=pc(gc,e,t,o,r);return i.set(a,s),Ya(a),i},decrypt(n,i){i=Va(n.length-16,i,!1);const s=n.subarray(0,-16),o=n.subarray(-16),a=pc(gc,e,t,s,r);if(!function(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r}(o,a))throw new Error("invalid tag");return i.set(n.subarray(0,-16)),gc(e,t,i,i,1),Ya(a),i}})));var gc;class mc extends ta{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,zo(e);const r=ea(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,i=new Uint8Array(n);i.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<i.length;e++)i[e]^=54;this.iHash.update(i),this.oHash=e.create();for(let e=0;e<i.length;e++)i[e]^=106;this.oHash.update(i),i.fill(0)}update(e){return qo(this),this.iHash.update(e),this}digestInto(e){qo(this),Wo(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:i,blockLen:s,outputLen:o}=this;return e.finished=n,e.destroyed=i,e.blockLen=s,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const yc=(e,t,r)=>new mc(e,t).update(r).digest();yc.create=(e,t)=>new mc(e,t);const wc=new Uint8Array([0]),bc=new Uint8Array;function vc(e,t,r){return e&t^~e&r}function Ec(e,t,r){return e&t^e&r^t&r}class _c extends ta{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Zo(this.buffer)}update(e){qo(this);const{view:t,buffer:r,blockLen:n}=this,i=(e=ea(e)).length;for(let s=0;s<i;){const o=Math.min(n-this.pos,i-s);if(o!==n)r.set(e.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===n&&(this.process(t,0),this.pos=0);else{const t=Zo(e);for(;n<=i-s;s+=n)this.process(t,s)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){qo(this),Ho(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:n,isLE:i}=this;let{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>n-s&&(this.process(r,0),s=0);for(let e=s;e<n;e++)t[e]=0;(function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),c=n?4:0,l=n?0:4;e.setUint32(t+c,o,n),e.setUint32(t+l,a,n)})(r,n-8,BigInt(8*this.length),i),this.process(r,0);const o=Zo(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<c;e++)o.setUint32(4*e,l[e],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:i,destroyed:s,pos:o}=this;return e.length=n,e.pos=o,e.finished=i,e.destroyed=s,n%t&&e.buffer.set(r),e}}const Ac=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Sc=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Cc=new Uint32Array(64);class Ic extends _c{constructor(){super(64,32,8,!1),this.A=0|Sc[0],this.B=0|Sc[1],this.C=0|Sc[2],this.D=0|Sc[3],this.E=0|Sc[4],this.F=0|Sc[5],this.G=0|Sc[6],this.H=0|Sc[7]}get(){const{A:e,B:t,C:r,D:n,E:i,F:s,G:o,H:a}=this;return[e,t,r,n,i,s,o,a]}set(e,t,r,n,i,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)Cc[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=Cc[e-15],r=Cc[e-2],n=Yo(t,7)^Yo(t,18)^t>>>3,i=Yo(r,17)^Yo(r,19)^r>>>10;Cc[e]=i+Cc[e-7]+n+Cc[e-16]|0}let{A:r,B:n,C:i,D:s,E:o,F:a,G:c,H:l}=this;for(let e=0;e<64;e++){const t=l+(Yo(o,6)^Yo(o,11)^Yo(o,25))+vc(o,a,c)+Ac[e]+Cc[e]|0,u=(Yo(r,2)^Yo(r,13)^Yo(r,22))+Ec(r,n,i)|0;l=c,c=a,a=o,o=s+t|0,s=i,i=n,n=r,r=t+u|0}r=r+this.A|0,n=n+this.B|0,i=i+this.C|0,s=s+this.D|0,o=o+this.E|0,a=a+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(r,n,i,s,o,a,c,l)}roundClean(){Cc.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Nc=ra((()=>new Ic)),kc=BigInt(0),Tc=BigInt(1),xc=BigInt(2);function Pc(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function Oc(e){if(!Pc(e))throw new Error("Uint8Array expected")}function Rc(e,t){if("boolean"!=typeof t)throw new Error(e+" boolean expected, got "+t)}const Mc=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Uc(e){Oc(e);let t="";for(let r=0;r<e.length;r++)t+=Mc[e[r]];return t}function Bc(e){const t=e.toString(16);return 1&t.length?"0"+t:t}function Lc(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?kc:BigInt("0x"+e)}function Dc(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function jc(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){const r=Dc(e.charCodeAt(i)),s=Dc(e.charCodeAt(i+1));if(void 0===r||void 0===s){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[t]=16*r+s}return n}function $c(e){return Lc(Uc(e))}function Wc(e){return Oc(e),Lc(Uc(Uint8Array.from(e).reverse()))}function zc(e,t){return jc(e.toString(16).padStart(2*t,"0"))}function qc(e,t){return zc(e,t).reverse()}function Hc(e,t,r){let n;if("string"==typeof t)try{n=jc(t)}catch(t){throw new Error(e+" must be hex string or Uint8Array, cause: "+t)}else{if(!Pc(t))throw new Error(e+" must be hex string or Uint8Array");n=Uint8Array.from(t)}const i=n.length;if("number"==typeof r&&i!==r)throw new Error(e+" of length "+r+" expected, got "+i);return n}function Fc(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];Oc(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}const Kc=e=>"bigint"==typeof e&&kc<=e;function Vc(e,t,r){return Kc(e)&&Kc(t)&&Kc(r)&&t<=e&&e<r}function Gc(e,t,r,n){if(!Vc(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function Zc(e){let t;for(t=0;e>kc;e>>=Tc,t+=1);return t}const Yc=e=>(xc<<BigInt(e-1))-Tc,Jc=e=>new Uint8Array(e),Xc=e=>Uint8Array.from(e);function Qc(e,t,r){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let n=Jc(e),i=Jc(e),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...e)=>r(i,n,...e),c=(e=Jc())=>{i=a(Xc([0]),e),n=a(),0!==e.length&&(i=a(Xc([1]),e),n=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const r=[];for(;e<t;){n=a();const t=n.slice();r.push(t),e+=n.length}return Fc(...r)};return(e,t)=>{let r;for(o(),c(e);!(r=t(l()));)c();return o(),r}}const el={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||Pc(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function tl(e,t,r={}){const n=(t,r,n)=>{const i=el[r];if("function"!=typeof i)throw new Error("invalid validator function");const s=e[t];if(!(n&&void 0===s||i(s,e)))throw new Error("param "+String(t)+" is invalid. Expected "+r+", got "+s)};for(const[e,r]of Object.entries(t))n(e,r,!1);for(const[e,t]of Object.entries(r))n(e,t,!0);return e}function rl(e){const t=new WeakMap;return(r,...n)=>{const i=t.get(r);if(void 0!==i)return i;const s=e(r,...n);return t.set(r,s),s}}var nl=Object.freeze({__proto__:null,isBytes:Pc,abytes:Oc,abool:Rc,bytesToHex:Uc,numberToHexUnpadded:Bc,hexToNumber:Lc,hexToBytes:jc,bytesToNumberBE:$c,bytesToNumberLE:Wc,numberToBytesBE:zc,numberToBytesLE:qc,numberToVarBytesBE:function(e){return jc(Bc(e))},ensureBytes:Hc,concatBytes:Fc,equalBytes:function(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r},utf8ToBytes:function(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))},inRange:Vc,aInRange:Gc,bitLen:Zc,bitGet:function(e,t){return e>>BigInt(t)&Tc},bitSet:function(e,t,r){return e|(r?Tc:kc)<<BigInt(t)},bitMask:Yc,createHmacDrbg:Qc,validateObject:tl,notImplemented:()=>{throw new Error("not implemented")},memoized:rl});const il=BigInt(0),sl=BigInt(1),ol=BigInt(2),al=BigInt(3),cl=BigInt(4),ll=BigInt(5),ul=BigInt(8);function hl(e,t){const r=e%t;return r>=il?r:t+r}function dl(e,t,r){if(t<il)throw new Error("invalid exponent, negatives unsupported");if(r<=il)throw new Error("invalid modulus");if(r===sl)return il;let n=sl;for(;t>il;)t&sl&&(n=n*e%r),e=e*e%r,t>>=sl;return n}function pl(e,t,r){let n=e;for(;t-- >il;)n*=n,n%=r;return n}function fl(e,t){if(e===il)throw new Error("invert: expected non-zero number");if(t<=il)throw new Error("invert: expected positive modulus, got "+t);let r=hl(e,t),n=t,i=il,s=sl;for(;r!==il;){const e=n%r,t=i-s*(n/r);n=r,r=e,i=s,s=t}if(n!==sl)throw new Error("invert: does not exist");return hl(i,t)}const gl=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ml(e,t){const r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function yl(e,t,r=!1,n={}){if(e<=il)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:i,nByteLength:s}=ml(e,t);if(s>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:e,isLE:r,BITS:i,BYTES:s,MASK:Yc(i),ZERO:il,ONE:sl,create:t=>hl(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return il<=t&&t<e},is0:e=>e===il,isOdd:e=>(e&sl)===sl,neg:t=>hl(-t,e),eql:(e,t)=>e===t,sqr:t=>hl(t*t,e),add:(t,r)=>hl(t+r,e),sub:(t,r)=>hl(t-r,e),mul:(t,r)=>hl(t*r,e),pow:(e,t)=>function(e,t,r){if(r<il)throw new Error("invalid exponent, negatives unsupported");if(r===il)return e.ONE;if(r===sl)return t;let n=e.ONE,i=t;for(;r>il;)r&sl&&(n=e.mul(n,i)),i=e.sqr(i),r>>=sl;return n}(a,e,t),div:(t,r)=>hl(t*fl(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>fl(t,e),sqrt:n.sqrt||(t=>(o||(o=function(e){if(e%cl===al){const t=(e+sl)/cl;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}if(e%ul===ll){const t=(e-ll)/ul;return function(e,r){const n=e.mul(r,ol),i=e.pow(n,t),s=e.mul(r,i),o=e.mul(e.mul(s,ol),i),a=e.mul(s,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),r))throw new Error("Cannot find square root");return a}}return function(e){const t=(e-sl)/ol;let r,n,i;for(r=e-sl,n=0;r%ol===il;r/=ol,n++);for(i=ol;i<e&&dl(i,t,e)!==e-sl;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===n){const t=(e+sl)/cl;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}const s=(r+sl)/ol;return function(e,o){if(e.pow(o,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=n,c=e.pow(e.mul(e.ONE,i),r),l=e.pow(o,s),u=e.pow(o,r);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(u);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const r=e.pow(c,sl<<BigInt(a-t-1));c=e.sqr(r),l=e.mul(l,r),u=e.mul(u,c),a=t}return l}}(e)}(e)),o(a,t))),invertBatch:e=>function(e,t){const r=new Array(t.length),n=t.reduce(((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n))),e.ONE),i=e.inv(n);return t.reduceRight(((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n))),i),r}(a,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?qc(e,s):zc(e,s),fromBytes:e=>{if(e.length!==s)throw new Error("Field.fromBytes: expected "+s+" bytes, got "+e.length);return r?Wc(e):$c(e)}});return Object.freeze(a)}function wl(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function bl(e){const t=wl(e);return t+Math.ceil(t/2)}const vl=BigInt(0),El=BigInt(1);function _l(e,t){const r=t.negate();return e?r:t}function Al(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Sl(e,t){return Al(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}const Cl=new WeakMap,Il=new WeakMap;function Nl(e){return Il.get(e)||1}function kl(e){return function(e){tl(e,gl.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"}))}(e.Fp),tl(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ml(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}BigInt(0),BigInt(1),BigInt(2),BigInt(8);const Tl=BigInt(0),xl=BigInt(1),Pl=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949");BigInt(0);const Ol=BigInt(1),Rl=BigInt(2),Ml=BigInt(3),Ul=BigInt(5);BigInt(8);const Bl=function(e){const t=function(e){return tl(e,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...e})}(e),{P:r}=t,n=e=>hl(e,r),i=t.montgomeryBits,s=Math.ceil(i/8),o=t.nByteLength,a=t.adjustScalarBytes||(e=>e),c=t.powPminus2||(e=>dl(e,r-BigInt(2),r));function l(e,t,r){const i=n(e*(t-r));return[t=n(t-i),r=n(r+i)]}const u=(t.a-BigInt(2))/BigInt(4);function h(e){return qc(n(e),s)}function d(e,t){const d=function(e){const t=Hc("u coordinate",e,s);return 32===o&&(t[31]&=127),Wc(t)}(t),p=function(e){const t=Hc("scalar",e),r=t.length;if(r!==s&&r!==o)throw new Error("invalid scalar, expected "+s+" or "+o+" bytes, got "+r);return Wc(a(t))}(e),f=function(e,t){Gc("u",e,Tl,r),Gc("scalar",t,Tl,r);const s=t,o=e;let a,h=xl,d=Tl,p=e,f=xl,g=Tl;for(let e=BigInt(i-1);e>=Tl;e--){const t=s>>e&xl;g^=t,a=l(g,h,p),h=a[0],p=a[1],a=l(g,d,f),d=a[0],f=a[1],g=t;const r=h+d,i=n(r*r),c=h-d,m=n(c*c),y=i-m,w=p+f,b=n((p-f)*r),v=n(w*c),E=b+v,_=b-v;p=n(E*E),f=n(o*n(_*_)),h=n(i*m),d=n(y*(i+n(u*y)))}a=l(g,h,p),h=a[0],p=a[1],a=l(g,d,f),d=a[0],f=a[1];const m=c(d);return n(h*m)}(d,p);if(f===Tl)throw new Error("invalid private or public key received");return h(f)}const p=h(t.Gu);function f(e){return d(e,p)}return{scalarMult:d,scalarMultBase:f,getSharedSecret:(e,t)=>d(e,t),getPublicKey:e=>f(e),utils:{randomPrivateKey:()=>t.randomBytes(t.nByteLength)},GuBytes:p}}({P:Pl,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:e=>{const t=Pl,{pow_p_5_8:r,b2:n}=function(e){const t=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=Pl,o=e*e%s*e%s,a=pl(o,Rl,s)*o%s,c=pl(a,Ol,s)*e%s,l=pl(c,Ul,s)*c%s,u=pl(l,t,s)*l%s,h=pl(u,r,s)*u%s,d=pl(h,n,s)*h%s,p=pl(d,i,s)*d%s,f=pl(p,i,s)*d%s,g=pl(f,t,s)*l%s;return{pow_p_5_8:pl(g,Rl,s)*e%s,b2:o}}(e);return hl(pl(r,Ml,t)*n,t)},adjustScalarBytes:function(e){return e[0]&=248,e[31]&=127,e[31]|=64,e},randomBytes:na});function Ll(e){void 0!==e.lowS&&Rc("lowS",e.lowS),void 0!==e.prehash&&Rc("prehash",e.prehash)}const{bytesToNumberBE:Dl,hexToBytes:jl}=nl;class $l extends Error{constructor(e=""){super(e)}}const Wl={Err:$l,_tlv:{encode:(e,t)=>{const{Err:r}=Wl;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");const n=t.length/2,i=Bc(n);if(i.length/2&128)throw new r("tlv.encode: long form length too big");const s=n>127?Bc(i.length/2|128):"";return Bc(e)+s+i+t},decode(e,t){const{Err:r}=Wl;let n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");const i=t[n++];let s=0;if(128&i){const e=127&i;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");const o=t.subarray(n,n+e);if(o.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===o[0])throw new r("tlv.decode(long): zero leftmost byte");for(const e of o)s=s<<8|e;if(n+=e,s<128)throw new r("tlv.decode(long): not minimal encoding")}else s=i;const o=t.subarray(n,n+s);if(o.length!==s)throw new r("tlv.decode: wrong value length");return{v:o,l:t.subarray(n+s)}}},_int:{encode(e){const{Err:t}=Wl;if(e<zl)throw new t("integer: negative integers are not allowed");let r=Bc(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){const{Err:t}=Wl;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return Dl(e)}},toSig(e){const{Err:t,_int:r,_tlv:n}=Wl,i="string"==typeof e?jl(e):e;Oc(i);const{v:s,l:o}=n.decode(48,i);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,s),{v:l,l:u}=n.decode(2,c);if(u.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(l)}},hexFromSig(e){const{_tlv:t,_int:r}=Wl,n=t.encode(2,r.encode(e.r))+t.encode(2,r.encode(e.s));return t.encode(48,n)}},zl=BigInt(0),ql=BigInt(1);BigInt(2);const Hl=BigInt(3);function Fl(e){const t=function(e){const t=kl(e);tl(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:r,Fp:n,a:i}=t;if(r){if(!n.eql(i,n.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,n=yl(t.n,t.nBitLength),i=t.toBytes||((e,t,n)=>{const i=t.toAffine();return Fc(Uint8Array.from([4]),r.toBytes(i.x),r.toBytes(i.y))}),s=t.fromBytes||(e=>{const t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function o(e){const{a:n,b:i}=t,s=r.sqr(e),o=r.mul(s,e);return r.add(r.add(o,r.mul(e,n)),i)}if(!r.eql(r.sqr(t.Gy),o(t.Gx)))throw new Error("bad generator point: equation left != right");function a(e){const{allowedPrivateKeyLengths:r,nByteLength:n,wrapPrivateKey:i,n:s}=t;if(r&&"bigint"!=typeof e){if(Pc(e)&&(e=Uc(e)),"string"!=typeof e||!r.includes(e.length))throw new Error("invalid private key");e=e.padStart(2*n,"0")}let o;try{o="bigint"==typeof e?e:$c(Hc("private key",e,n))}catch{throw new Error("invalid private key, expected hex or "+n+" bytes, got "+typeof e)}return i&&(o=hl(o,s)),Gc("private key",o,ql,s),o}function c(e){if(!(e instanceof h))throw new Error("ProjectivePoint expected")}const l=rl(((e,t)=>{const{px:n,py:i,pz:s}=e;if(r.eql(s,r.ONE))return{x:n,y:i};const o=e.is0();null==t&&(t=o?r.ONE:r.inv(s));const a=r.mul(n,t),c=r.mul(i,t),l=r.mul(s,t);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(l,r.ONE))throw new Error("invZ was invalid");return{x:a,y:c}})),u=rl((e=>{if(e.is0()){if(t.allowInfinityPoint&&!r.is0(e.py))return;throw new Error("bad point: ZERO")}const{x:n,y:i}=e.toAffine();if(!r.isValid(n)||!r.isValid(i))throw new Error("bad point: x or y not FE");const s=r.sqr(i),a=o(n);if(!r.eql(s,a))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class h{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw new Error("x required");if(null==t||!r.isValid(t))throw new Error("y required");if(null==n||!r.isValid(n))throw new Error("z required");Object.freeze(this)}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw new Error("invalid affine point");if(e instanceof h)throw new Error("projective point not allowed");const i=e=>r.eql(e,r.ZERO);return i(t)&&i(n)?h.ZERO:new h(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.pz)));return e.map(((e,r)=>e.toAffine(t[r]))).map(h.fromAffine)}static fromHex(e){const t=h.fromAffine(s(Hc("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return h.BASE.multiply(a(e))}static msm(e,t){return function(e,t,r,n){if(function(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach(((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)}))}(r,e),function(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach(((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)}))}(n,t),r.length!==n.length)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,s=Zc(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,a=(1<<o)-1,c=new Array(a+1).fill(i);let l=i;for(let e=Math.floor((t.BITS-1)/o)*o;e>=0;e-=o){c.fill(i);for(let t=0;t<n.length;t++){const i=n[t],s=Number(i>>BigInt(e)&BigInt(a));c[s]=c[s].add(r[t])}let t=i;for(let e=c.length-1,r=i;e>0;e--)r=r.add(c[e]),t=t.add(r);if(l=l.add(t),0!==e)for(let e=0;e<o;e++)l=l.double()}return l}(h,n,e,t)}_setWindowSize(e){p.setWindowSize(this,e)}assertValidity(){u(this)}hasEvenY(){const{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){c(e);const{px:t,py:n,pz:i}=this,{px:s,py:o,pz:a}=e,l=r.eql(r.mul(t,a),r.mul(s,i)),u=r.eql(r.mul(n,a),r.mul(o,i));return l&&u}negate(){return new h(this.px,r.neg(this.py),this.pz)}double(){const{a:e,b:n}=t,i=r.mul(n,Hl),{px:s,py:o,pz:a}=this;let c=r.ZERO,l=r.ZERO,u=r.ZERO,d=r.mul(s,s),p=r.mul(o,o),f=r.mul(a,a),g=r.mul(s,o);return g=r.add(g,g),u=r.mul(s,a),u=r.add(u,u),c=r.mul(e,u),l=r.mul(i,f),l=r.add(c,l),c=r.sub(p,l),l=r.add(p,l),l=r.mul(c,l),c=r.mul(g,c),u=r.mul(i,u),f=r.mul(e,f),g=r.sub(d,f),g=r.mul(e,g),g=r.add(g,u),u=r.add(d,d),d=r.add(u,d),d=r.add(d,f),d=r.mul(d,g),l=r.add(l,d),f=r.mul(o,a),f=r.add(f,f),d=r.mul(f,g),c=r.sub(c,d),u=r.mul(f,p),u=r.add(u,u),u=r.add(u,u),new h(c,l,u)}add(e){c(e);const{px:n,py:i,pz:s}=this,{px:o,py:a,pz:l}=e;let u=r.ZERO,d=r.ZERO,p=r.ZERO;const f=t.a,g=r.mul(t.b,Hl);let m=r.mul(n,o),y=r.mul(i,a),w=r.mul(s,l),b=r.add(n,i),v=r.add(o,a);b=r.mul(b,v),v=r.add(m,y),b=r.sub(b,v),v=r.add(n,s);let E=r.add(o,l);return v=r.mul(v,E),E=r.add(m,w),v=r.sub(v,E),E=r.add(i,s),u=r.add(a,l),E=r.mul(E,u),u=r.add(y,w),E=r.sub(E,u),p=r.mul(f,v),u=r.mul(g,w),p=r.add(u,p),u=r.sub(y,p),p=r.add(y,p),d=r.mul(u,p),y=r.add(m,m),y=r.add(y,m),w=r.mul(f,w),v=r.mul(g,v),y=r.add(y,w),w=r.sub(m,w),w=r.mul(f,w),v=r.add(v,w),m=r.mul(y,v),d=r.add(d,m),m=r.mul(E,v),u=r.mul(b,u),u=r.sub(u,m),m=r.mul(b,y),p=r.mul(E,p),p=r.add(p,m),new h(u,d,p)}subtract(e){return this.add(e.negate())}is0(){return this.equals(h.ZERO)}wNAF(e){return p.wNAFCached(this,e,h.normalizeZ)}multiplyUnsafe(e){const{endo:n,n:i}=t;Gc("scalar",e,zl,i);const s=h.ZERO;if(e===zl)return s;if(this.is0()||e===ql)return this;if(!n||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,e,h.normalizeZ);let{k1neg:o,k1:a,k2neg:c,k2:l}=n.splitScalar(e),u=s,d=s,f=this;for(;a>zl||l>zl;)a&ql&&(u=u.add(f)),l&ql&&(d=d.add(f)),f=f.double(),a>>=ql,l>>=ql;return o&&(u=u.negate()),c&&(d=d.negate()),d=new h(r.mul(d.px,n.beta),d.py,d.pz),u.add(d)}multiply(e){const{endo:n,n:i}=t;let s,o;if(Gc("scalar",e,ql,i),n){const{k1neg:t,k1:i,k2neg:a,k2:c}=n.splitScalar(e);let{p:l,f:u}=this.wNAF(i),{p:d,f}=this.wNAF(c);l=p.constTimeNegate(t,l),d=p.constTimeNegate(a,d),d=new h(r.mul(d.px,n.beta),d.py,d.pz),s=l.add(d),o=u.add(f)}else{const{p:t,f:r}=this.wNAF(e);s=t,o=r}return h.normalizeZ([s,o])[0]}multiplyAndAddUnsafe(e,t,r){const n=h.BASE,i=(e,t)=>t!==zl&&t!==ql&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),s=i(this,t).add(i(e,r));return s.is0()?void 0:s}toAffine(e){return l(this,e)}isTorsionFree(){const{h:e,isTorsionFree:r}=t;if(e===ql)return!0;if(r)return r(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:r}=t;return e===ql?this:r?r(h,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return Rc("isCompressed",e),this.assertValidity(),i(h,this,e)}toHex(e=!0){return Rc("isCompressed",e),Uc(this.toRawBytes(e))}}h.BASE=new h(t.Gx,t.Gy,r.ONE),h.ZERO=new h(r.ZERO,r.ONE,r.ZERO);const d=t.nBitLength,p=function(e,t){return{constTimeNegate:_l,hasPrecomputes:e=>1!==Nl(e),unsafeLadder(t,r,n=e.ZERO){let i=t;for(;r>vl;)r&El&&(n=n.add(i)),i=i.double(),r>>=El;return n},precomputeWindow(e,r){const{windows:n,windowSize:i}=Sl(r,t),s=[];let o=e,a=o;for(let e=0;e<n;e++){a=o,s.push(a);for(let e=1;e<i;e++)a=a.add(o),s.push(a);o=a.double()}return s},wNAF(r,n,i){const{windows:s,windowSize:o}=Sl(r,t);let a=e.ZERO,c=e.BASE;const l=BigInt(2**r-1),u=2**r,h=BigInt(r);for(let e=0;e<s;e++){const t=e*o;let r=Number(i&l);i>>=h,r>o&&(r-=u,i+=El);const s=t,d=t+Math.abs(r)-1,p=e%2!=0,f=r<0;0===r?c=c.add(_l(p,n[s])):a=a.add(_l(f,n[d]))}return{p:a,f:c}},wNAFUnsafe(r,n,i,s=e.ZERO){const{windows:o,windowSize:a}=Sl(r,t),c=BigInt(2**r-1),l=2**r,u=BigInt(r);for(let e=0;e<o;e++){const t=e*a;if(i===vl)break;let r=Number(i&c);if(i>>=u,r>a&&(r-=l,i+=El),0===r)continue;let o=n[t+Math.abs(r)-1];r<0&&(o=o.negate()),s=s.add(o)}return s},getPrecomputes(e,t,r){let n=Cl.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&Cl.set(t,r(n))),n},wNAFCached(e,t,r){const n=Nl(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)},wNAFCachedUnsafe(e,t,r,n){const i=Nl(e);return 1===i?this.unsafeLadder(e,t,n):this.wNAFUnsafe(i,this.getPrecomputes(i,e,r),t,n)},setWindowSize(e,r){Al(r,t),Il.set(e,r),Cl.delete(e)}}}(h,t.endo?Math.ceil(d/2):d);return{CURVE:t,ProjectivePoint:h,normPrivateKeyToScalar:a,weierstrassEquation:o,isWithinCurveOrder:function(e){return Vc(e,ql,t.n)}}}function Kl(e){const t=function(e){const t=kl(e);return tl(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n}=t,i=r.BYTES+1,s=2*r.BYTES+1;function o(e){return hl(e,n)}function a(e){return fl(e,n)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:h}=Fl({...t,toBytes(e,t,n){const i=t.toAffine(),s=r.toBytes(i.x),o=Fc;return Rc("isCompressed",n),n?o(Uint8Array.from([t.hasEvenY()?2:3]),s):o(Uint8Array.from([4]),s,r.toBytes(i.y))},fromBytes(e){const t=e.length,n=e[0],o=e.subarray(1);if(t!==i||2!==n&&3!==n){if(t===s&&4===n)return{x:r.fromBytes(o.subarray(0,r.BYTES)),y:r.fromBytes(o.subarray(r.BYTES,2*r.BYTES))};throw new Error("invalid Point, expected length of "+i+", or uncompressed "+s+", got "+t)}{const e=$c(o);if(!Vc(e,ql,r.ORDER))throw new Error("Point is not on curve");const t=u(e);let i;try{i=r.sqrt(t)}catch(e){const t=e instanceof Error?": "+e.message:"";throw new Error("Point is not on curve"+t)}return!(1&~n)!=((i&ql)===ql)&&(i=r.neg(i)),{x:e,y:i}}}}),d=e=>Uc(zc(e,t.nByteLength));function p(e){return e>n>>ql}const f=(e,t,r)=>$c(e.slice(t,r));class g{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){const r=t.nByteLength;return e=Hc("compactSignature",e,2*r),new g(f(e,0,r),f(e,r,2*r))}static fromDER(e){const{r:t,s:r}=Wl.toSig(Hc("DER",e));return new g(t,r)}assertValidity(){Gc("r",this.r,ql,n),Gc("s",this.s,ql,n)}addRecoveryBit(e){return new g(this.r,this.s,e)}recoverPublicKey(e){const{r:n,s:i,recovery:s}=this,l=b(Hc("msgHash",e));if(null==s||![0,1,2,3].includes(s))throw new Error("recovery id invalid");const u=2===s||3===s?n+t.n:n;if(u>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=1&s?"03":"02",p=c.fromHex(h+d(u)),f=a(u),g=o(-l*f),m=o(i*f),y=c.BASE.multiplyAndAddUnsafe(p,g,m);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return p(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return jc(this.toDERHex())}toDERHex(){return Wl.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return jc(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const m={isValidPrivateKey(e){try{return l(e),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const e=bl(t.n);return function(e,t,r=!1){const n=e.length,i=wl(t),s=bl(t);if(n<16||n<s||n>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+n);const o=hl(r?Wc(e):$c(e),t-sl)+sl;return r?qc(o,i):zc(o,i)}(t.randomBytes(e),t.n)},precompute:(e=8,t=c.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function y(e){const t=Pc(e),r="string"==typeof e,n=(t||r)&&e.length;return t?n===i||n===s:r?n===2*i||n===2*s:e instanceof c}const w=t.bits2int||function(e){if(e.length>8192)throw new Error("input is too large");const r=$c(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},b=t.bits2int_modN||function(e){return o(w(e))},v=Yc(t.nBitLength);function E(e){return Gc("num < 2^"+t.nBitLength,e,zl,v),zc(e,t.nByteLength)}const _={lowS:t.lowS,prehash:!1},A={lowS:t.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return c.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(y(e))throw new Error("first arg must be private key");if(!y(t))throw new Error("second arg must be public key");return c.fromHex(t).multiply(l(e)).toRawBytes(r)},sign:function(e,n,i=_){const{seed:s,k2sig:u}=function(e,n,i=_){if(["recovered","canonical"].some((e=>e in i)))throw new Error("sign() legacy options not supported");const{hash:s,randomBytes:u}=t;let{lowS:d,prehash:f,extraEntropy:m}=i;null==d&&(d=!0),e=Hc("msgHash",e),Ll(i),f&&(e=Hc("prehashed msgHash",s(e)));const y=b(e),v=l(n),A=[E(v),E(y)];if(null!=m&&!1!==m){const e=!0===m?u(r.BYTES):m;A.push(Hc("extraEntropy",e))}const S=Fc(...A),C=y;return{seed:S,k2sig:function(e){const t=w(e);if(!h(t))return;const r=a(t),n=c.BASE.multiply(t).toAffine(),i=o(n.x);if(i===zl)return;const s=o(r*o(C+i*v));if(s===zl)return;let l=(n.x===i?0:2)|Number(n.y&ql),u=s;return d&&p(s)&&(u=function(e){return p(e)?o(-e):e}(s),l^=1),new g(i,u,l)}}}(e,n,i),d=t;return Qc(d.hash.outputLen,d.nByteLength,d.hmac)(s,u)},verify:function(e,r,n,i=A){const s=e;r=Hc("msgHash",r),n=Hc("publicKey",n);const{lowS:l,prehash:u,format:h}=i;if(Ll(i),"strict"in i)throw new Error("options.strict was renamed to lowS");if(void 0!==h&&"compact"!==h&&"der"!==h)throw new Error("format must be compact or der");const d="string"==typeof s||Pc(s),p=!d&&!h&&"object"==typeof s&&null!==s&&"bigint"==typeof s.r&&"bigint"==typeof s.s;if(!d&&!p)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let f,m;try{if(p&&(f=new g(s.r,s.s)),d){try{"compact"!==h&&(f=g.fromDER(s))}catch(e){if(!(e instanceof Wl.Err))throw e}!f&&"der"!==h&&(f=g.fromCompact(s))}m=c.fromHex(n)}catch{return!1}if(!f||l&&f.hasHighS())return!1;u&&(r=t.hash(r));const{r:y,s:w}=f,v=b(r),E=a(w),_=o(v*E),S=o(y*E),C=c.BASE.multiplyAndAddUnsafe(m,_,S)?.toAffine();return!!C&&o(C.x)===y},ProjectivePoint:c,Signature:g,utils:m}}function Vl(e){return{hash:e,hmac:(t,...r)=>yc(e,t,function(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];Wo(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}(...r)),randomBytes:na}}BigInt(4);const Gl=yl(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),Zl=function(e,t){const r=t=>Kl({...e,...Vl(t)});return{...r(t),create:r}}({a:Gl.create(BigInt("-3")),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Fp:Gl,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},Nc),Yl="base10",Jl="base16",Xl="base64pad",Ql="base64url",eu="utf8";function tu(){return to(na(32),Jl)}function ru(e){return to(Nc(eo(e,Jl)),Jl)}function nu(e){return to(Nc(eo(e,eu)),Jl)}function iu(e){return eo(`${e}`,Yl)}function su(e){return Number(to(e,Yl))}function ou(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function au(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),r=(4-t.length%4)%4;return t+"=".repeat(r)}function cu(e){if(2===su(e.type))return to(xi([e.type,e.sealed]),Xl);if(1===su(e.type)){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return to(xi([e.type,e.senderPublicKey,e.iv,e.sealed]),Xl)}return to(xi([e.type,e.iv,e.sealed]),Xl)}function lu(e){const t=eo((e.encoding||Xl)===Ql?au(e.encoded):e.encoded,Xl),r=t.slice(0,1);if(1===su(r)){const e=33,n=e+12,i=t.slice(1,e),s=t.slice(e,n);return{type:r,sealed:t.slice(n),iv:s,senderPublicKey:i}}if(2===su(r))return{type:r,sealed:t.slice(1),iv:na(12)};const n=t.slice(1,13);return{type:r,sealed:t.slice(13),iv:n}}function uu(e){const t=e?.type||0;if(1===t){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function hu(e){return 1===e.type&&"string"==typeof e.senderPublicKey&&"string"==typeof e.receiverPublicKey}function du(e){return 2===e.type}function pu(e){return e?.relay||{protocol:"irn"}}function fu(e){const t=ro[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}function gu(e,t="-"){const r={},n="relay"+t;return Object.keys(e).forEach((t=>{if(t.startsWith(n)){const i=t.replace(n,""),s=e[t];r[i]=s}})),r}function mu(e){if(!e.includes("wc:")){const t=jo(e);null!=t&&t.includes("wc:")&&(e=t)}const t=(e=(e=e.includes("wc://")?e.replace("wc://",""):e).includes("wc:")?e.replace("wc:",""):e).indexOf(":"),r=-1!==e.indexOf("?")?e.indexOf("?"):void 0,n=e.substring(0,t),i=e.substring(t+1,r).split("@"),s=typeof r<"u"?e.substring(r):"",o=new URLSearchParams(s),a={};o.forEach(((e,t)=>{a[t]=e}));const c="string"==typeof a.methods?a.methods.split(","):void 0;return{protocol:n,topic:yu(i[0]),version:parseInt(i[1],10),symKey:a.symKey,relay:gu(a),methods:c,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function yu(e){return e.startsWith("//")?e.substring(2):e}function wu(e){const t=new URLSearchParams,r=function(e,t="-"){const r={};return Object.keys(e).forEach((n=>{const i=n,s="relay"+t+i;e[i]&&(r[s]=e[i])})),r}(e.relay);Object.keys(r).sort().forEach((e=>{t.set(e,r[e])})),t.set("symKey",e.symKey),e.expiryTimestamp&&t.set("expiryTimestamp",e.expiryTimestamp.toString()),e.methods&&t.set("methods",e.methods.join(","));const n=t.toString();return`${e.protocol}:${e.topic}@${e.version}?${n}`}function bu(e,t,r){return`${e}?wc_ev=${r}&topic=${t}`}function vu(e){const t=[];return e.forEach((e=>{const[r,n]=e.split(":");t.push(`${r}:${n}`)})),t}function Eu(e){return e.includes(":")}function _u(e){return Eu(e)?e.split(":")[0]:e}function Au(e,t){const r=function(e){const t={};return e?.forEach((e=>{var r;const[n,i]=e.split(":");t[n]||(t[n]={accounts:[],chains:[],events:[],methods:[]}),t[n].accounts.push(e),null==(r=t[n].chains)||r.push(`${n}:${i}`)})),t}(t=t.map((e=>e.replace("did:pkh:",""))));for(const[t,n]of Object.entries(r))n.methods?n.methods=Uo(n.methods,e):n.methods=e,n.events=["chainChanged","accountsChanged"];return r}Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;const Su={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Cu={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Iu(e,t){const{message:r,code:n}=Cu[e];return{message:t?`${r} ${t}`:r,code:n}}function Nu(e,t){const{message:r,code:n}=Su[e];return{message:t?`${r} ${t}`:r,code:n}}function ku(e,t){return!!Array.isArray(e)&&(!(typeof t<"u"&&e.length)||e.every(t))}function Tu(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function xu(e){return typeof e>"u"}function Pu(e,t){return!(!t||!xu(e))||"string"==typeof e&&!!e.trim().length}function Ou(e,t){return!(!t||!xu(e))||"number"==typeof e&&!isNaN(e)}function Ru(e){return!(!Pu(e,!1)||!e.includes(":"))&&2===e.split(":").length}function Mu(e){let t=!0;return ku(e)?e.length&&(t=e.every((e=>Pu(e,!1)))):t=!1,t}function Uu(e,t){let r=null;return Object.values(e).forEach((e=>{if(r)return;const n=function(e,t){let r=null;return Mu(e?.methods)?Mu(e?.events)||(r=Nu("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):r=Nu("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),r}(e,`${t}, namespace`);n&&(r=n)})),r}function Bu(e,t){let r=null;if(e&&Tu(e)){const n=Uu(e,t);n&&(r=n);const i=function(e,t){let r=null;return Object.values(e).forEach((e=>{if(r)return;const n=function(e,t){let r=null;return ku(e)?e.forEach((e=>{r||function(e){if(Pu(e,!1)&&e.includes(":")){const t=e.split(":");if(3===t.length){const e=t[0]+":"+t[1];return!!t[2]&&Ru(e)}}return!1}(e)||(r=Nu("UNSUPPORTED_ACCOUNTS",`${t}, account ${e} should be a string and conform to "namespace:chainId:address" format`))})):r=Nu("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}(e?.accounts,`${t} namespace`);n&&(r=n)})),r}(e,t);i&&(r=i)}else r=Iu("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function Lu(e){return Pu(e.protocol,!0)}function Du(e){return typeof e<"u"&&null!==typeof e}function ju(e,t){return!(!Ru(t)||!function(e){const t=[];return Object.values(e).forEach((e=>{t.push(...vu(e.accounts))})),t}(e).includes(t))}function $u(e,t,r){let n=null;const i=function(e){const t={};return Object.keys(e).forEach((r=>{var n;r.includes(":")?t[r]=e[r]:null==(n=e[r].chains)||n.forEach((n=>{t[n]={methods:e[r].methods,events:e[r].events}}))})),t}(e),s=function(e){const t={};return Object.keys(e).forEach((r=>{if(r.includes(":"))t[r]=e[r];else{const n=vu(e[r].accounts);n?.forEach((n=>{t[n]={accounts:e[r].accounts.filter((e=>e.includes(`${n}:`))),methods:e[r].methods,events:e[r].events}}))}})),t}(t),o=Object.keys(i),a=Object.keys(s),c=Wu(Object.keys(e)),l=Wu(Object.keys(t)),u=c.filter((e=>!l.includes(e)));return u.length&&(n=Iu("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.\n      Required: ${u.toString()}\n      Received: ${Object.keys(t).toString()}`)),Co(o,a)||(n=Iu("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.\n      Required: ${o.toString()}\n      Approved: ${a.toString()}`)),Object.keys(t).forEach((e=>{if(!e.includes(":")||n)return;const i=vu(t[e].accounts);i.includes(e)||(n=Iu("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${e}\n        Required: ${e}\n        Approved: ${i.toString()}`))})),o.forEach((e=>{n||(Co(i[e].methods,s[e].methods)?Co(i[e].events,s[e].events)||(n=Iu("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${e}`)):n=Iu("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${e}`))})),n}function Wu(e){return[...new Set(e.map((e=>e.includes(":")?e.split(":")[0]:e)))]}function zu(){const e=Eo();return new Promise((t=>{switch(e){case mo:t(vo()&&navigator?.onLine);break;case go:t(async function(){if(bo()&&typeof r.g<"u"&&null!=r.g&&r.g.NetInfo){const e=await(null==r.g?void 0:r.g.NetInfo.fetch());return e?.isConnected}return!0}());break;default:t(!0)}}))}const qu={};class Hu{static get(e){return qu[e]}static set(e,t){qu[e]=t}static delete(e){delete qu[e]}}const Fu="PARSE_ERROR",Ku="INVALID_REQUEST",Vu="METHOD_NOT_FOUND",Gu="INVALID_PARAMS",Zu="INTERNAL_ERROR",Yu="SERVER_ERROR",Ju=[-32700,-32600,-32601,-32602,-32603],Xu={[Fu]:{code:-32700,message:"Parse error"},[Ku]:{code:-32600,message:"Invalid Request"},[Vu]:{code:-32601,message:"Method not found"},[Gu]:{code:-32602,message:"Invalid params"},[Zu]:{code:-32603,message:"Internal error"},[Yu]:{code:-32e3,message:"Server error"}},Qu=Yu;function eh(e){return Object.keys(Xu).includes(e)?Xu[e]:Xu[Qu]}function th(e,t,r){return e.message.includes("getaddrinfo ENOTFOUND")||e.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${t}`):e}var rh=r(5682);function nh(e=3){return Date.now()*Math.pow(10,e)+Math.floor(Math.random()*Math.pow(10,e))}function ih(e=6){return BigInt(nh(e))}function sh(e,t,r){return{id:r||nh(),jsonrpc:"2.0",method:e,params:t}}function oh(e,t){return{id:e,jsonrpc:"2.0",result:t}}function ah(e,t,r){return{id:e,jsonrpc:"2.0",error:ch(t,r)}}function ch(e,t){return void 0===e?eh(Zu):("string"==typeof e&&(e=Object.assign(Object.assign({},eh(Yu)),{message:e})),void 0!==t&&(e.data=t),r=e.code,Ju.includes(r)&&(e=function(e){return Object.values(Xu).find((t=>t.code===e))||Xu[Qu]}(e.code)),e);var r}class lh{}class uh extends lh{constructor(){super()}}class hh extends uh{constructor(e){super()}}function dh(e,t){const r=function(e){const t=e.match(new RegExp(/^\w+:/,"gi"));if(t&&t.length)return t[0]}(e);return void 0!==r&&new RegExp(t).test(r)}function ph(e){return dh(e,"^https?:")}function fh(e){return dh(e,"^wss?:")}function gh(e){return"object"==typeof e&&"id"in e&&"jsonrpc"in e&&"2.0"===e.jsonrpc}function mh(e){return gh(e)&&"method"in e}function yh(e){return gh(e)&&(wh(e)||bh(e))}function wh(e){return"result"in e}function bh(e){return"error"in e}class vh extends hh{constructor(e){super(e),this.events=new y.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async request(e,t){return this.requestStrict(sh(e.method,e.params||[],e.id||ih().toString()),t)}async requestStrict(e,t){return new Promise((async(r,n)=>{if(!this.connection.connected)try{await this.open()}catch(e){n(e)}this.events.on(`${e.id}`,(e=>{bh(e)?n(e.error):r(e.result)}));try{await this.connection.send(e,t)}catch(e){n(e)}}))}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),yh(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&3e3===e.code&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),"string"==typeof e&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",(e=>this.onPayload(e))),this.connection.on("close",(e=>this.onClose(e))),this.connection.on("error",(e=>this.events.emit("error",e))),this.connection.on("register_error",(e=>this.onClose())),this.hasRegisteredEventListeners=!0)}}const Eh=e=>e.split("?")[0],_h=typeof WebSocket<"u"?WebSocket:typeof r.g<"u"&&typeof r.g.WebSocket<"u"?r.g.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:r(1591);class Ah{constructor(e){if(this.url=e,this.events=new y.EventEmitter,this.registering=!1,!fh(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){return new Promise(((e,t)=>{typeof this.socket>"u"?t(new Error("Connection already closed")):(this.socket.onclose=t=>{this.onClose(t),e()},this.socket.close())}))}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send("string"==typeof(t=e)?t:(r=t,JSON.stringify(r,((e,t)=>"bigint"==typeof t?t.toString()+"n":t))||""))}catch(t){this.onError(e.id,t)}var t,r}register(e=this.url){if(!fh(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise(((e,t)=>{this.events.once("register_error",(e=>{this.resetMaxListeners(),t(e)})),this.events.once("open",(()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return t(new Error("WebSocket connection is missing or invalid"));e(this.socket)}))}))}return this.url=e,this.registering=!0,new Promise(((t,n)=>{const i=(0,rh.isReactNative)()?void 0:{rejectUnauthorized:(o=e,!new RegExp("wss?://localhost(:d{2,5})?").test(o))},s=new _h(e,[],i);var o;typeof WebSocket<"u"||typeof r.g<"u"&&typeof r.g.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u"?s.onerror=e=>{const t=e;n(this.emitError(t.error))}:s.on("error",(e=>{n(this.emitError(e))})),s.onopen=()=>{this.onOpen(s),t(s)}}))}onOpen(e){e.onmessage=e=>this.onPayload(e),e.onclose=e=>this.onClose(e),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const t="string"==typeof e.data?function(e){if("string"!=typeof e)throw new Error("Cannot safe json parse value of type "+typeof e);try{return(e=>{const t=e.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3');return JSON.parse(t,((e,t)=>"string"==typeof t&&t.match(/^\d+n$/)?BigInt(t.substring(0,t.length-1)):t))})(e)}catch(t){return e}}(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),n=ah(e,r.message||r.toString());this.events.emit("payload",n)}parseError(e,t=this.url){return th(e,Eh(t),"WS")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}emitError(e){const t=this.parseError(new Error(e?.message||`WebSocket connection failed for host: ${Eh(this.url)}`));return this.events.emit("register_error",t),t}}var Sh=r(7499),Ch=r(8287).Buffer;const Ih="core",Nh=`wc@2:${Ih}:`,kh={database:":memory:"},Th="client_ed25519_seed",xh=b.ONE_DAY,Ph=b.SIX_HOURS,Oh="wss://relay.walletconnect.org",Rh="relayer_message",Mh="relayer_message_ack",Uh="relayer_connection_stalled",Bh="relayer_publish",Lh="payload",Dh="connect",jh="disconnect",$h="error",Wh="2.19.2",zh={link_mode:"link_mode",relay:"relay"},qh="inbound",Hh="WALLETCONNECT_LINK_MODE_APPS",Fh="subscription_created",Kh="subscription_deleted",Vh=(b.FIVE_SECONDS,{wc_pairingDelete:{req:{ttl:b.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:b.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:b.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:b.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:b.ONE_DAY,prompt:!1,tag:0},res:{ttl:b.ONE_DAY,prompt:!1,tag:0}}}),Gh="pairing_create",Zh="pairing_delete",Yh="history_created",Jh="history_updated",Xh="history_deleted",Qh="expirer_created",ed="expirer_deleted",td="expirer_expired",rd="https://verify.walletconnect.org",nd=rd,id=`${nd}/v3`,sd=["https://verify.walletconnect.com",rd],od="malformed_pairing_uri",ad="session_approve_started";var cd=function(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(255!==r[o])throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,c=e.charAt(0),l=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[t]){for(var n=0,i=0;e[t]===c;)n++,t++;for(var s=(e.length-t)*l+1>>>0,o=new Uint8Array(s);e[t];){var u=r[e.charCodeAt(t)];if(255===u)return;for(var h=0,d=s-1;(0!==u||h<i)&&-1!==d;d--,h++)u+=a*o[d]>>>0,o[d]=u%256>>>0,u=u/256>>>0;if(0!==u)throw new Error("Non-zero carry");i=h,t++}if(" "!==e[t]){for(var p=s-i;p!==s&&0===o[p];)p++;for(var f=new Uint8Array(n+(s-p)),g=n;p!==s;)f[g++]=o[p++];return f}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var o=(s-i)*u+1>>>0,l=new Uint8Array(o);i!==s;){for(var h=t[i],d=0,p=o-1;(0!==h||d<n)&&-1!==p;p--,d++)h+=256*l[p]>>>0,l[p]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");n=d,i++}for(var f=o-n;f!==o&&0===l[f];)f++;for(var g=c.repeat(r);f<o;++f)g+=e.charAt(l[f]);return g},decodeUnsafe:h,decode:function(e){var r=h(e);if(r)return r;throw new Error(`Non-${t} character`)}}};const ld=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};class ud{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class hd{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return pd(this,e)}}class dd{constructor(e){this.decoders=e}or(e){return pd(this,e)}decode(e){const t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const pd=(e,t)=>new dd({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class fd{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new ud(e,t,r),this.decoder=new hd(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const gd=({name:e,prefix:t,encode:r,decode:n})=>new fd(e,t,r,n),md=({prefix:e,name:t,alphabet:r})=>{const{encode:n,decode:i}=cd(r,t);return gd({prefix:e,name:t,encode:n,decode:e=>ld(i(e))})},yd=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>gd({prefix:t,name:e,encode:e=>((e,t,r)=>{const n="="===t[t.length-1],i=(1<<r)-1;let s="",o=0,a=0;for(let n=0;n<e.length;++n)for(a=a<<8|e[n],o+=8;o>r;)o-=r,s+=t[i&a>>o];if(o&&(s+=t[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s})(e,n,r),decode:t=>((e,t,r,n)=>{const i={};for(let e=0;e<t.length;++e)i[t[e]]=e;let s=e.length;for(;"="===e[s-1];)--s;const o=new Uint8Array(s*r/8|0);let a=0,c=0,l=0;for(let t=0;t<s;++t){const s=i[e[t]];if(void 0===s)throw new SyntaxError(`Non-${n} character`);c=c<<r|s,a+=r,a>=8&&(a-=8,o[l++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return o})(t,n,r,e)}),wd=gd({prefix:"\0",name:"identity",encode:e=>(e=>(new TextDecoder).decode(e))(e),decode:e=>(e=>(new TextEncoder).encode(e))(e)});var bd=Object.freeze({__proto__:null,identity:wd});const vd=yd({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Ed=Object.freeze({__proto__:null,base2:vd});const _d=yd({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Ad=Object.freeze({__proto__:null,base8:_d});const Sd=md({prefix:"9",name:"base10",alphabet:"0123456789"});var Cd=Object.freeze({__proto__:null,base10:Sd});const Id=yd({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Nd=yd({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var kd=Object.freeze({__proto__:null,base16:Id,base16upper:Nd});const Td=yd({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),xd=yd({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Pd=yd({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Od=yd({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Rd=yd({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Md=yd({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Ud=yd({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Bd=yd({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Ld=yd({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Dd=Object.freeze({__proto__:null,base32:Td,base32upper:xd,base32pad:Pd,base32padupper:Od,base32hex:Rd,base32hexupper:Md,base32hexpad:Ud,base32hexpadupper:Bd,base32z:Ld});const jd=md({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),$d=md({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Wd=Object.freeze({__proto__:null,base36:jd,base36upper:$d});const zd=md({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),qd=md({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Hd=Object.freeze({__proto__:null,base58btc:zd,base58flickr:qd});const Fd=yd({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Kd=yd({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Vd=yd({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Gd=yd({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Zd=Object.freeze({__proto__:null,base64:Fd,base64pad:Kd,base64url:Vd,base64urlpad:Gd});const Yd=Array.from(""),Jd=Yd.reduce(((e,t,r)=>(e[r]=t,e)),[]),Xd=Yd.reduce(((e,t,r)=>(e[t.codePointAt(0)]=r,e)),[]),Qd=gd({prefix:"",name:"base256emoji",encode:function(e){return e.reduce(((e,t)=>e+Jd[t]),"")},decode:function(e){const t=[];for(const r of e){const e=Xd[r.codePointAt(0)];if(void 0===e)throw new Error(`Non-base256emoji character: ${r}`);t.push(e)}return new Uint8Array(t)}});var ep=Object.freeze({__proto__:null,base256emoji:Qd}),tp=128,rp=-128,np=Math.pow(2,31),ip=128,sp=127,op=Math.pow(2,7),ap=Math.pow(2,14),cp=Math.pow(2,21),lp=Math.pow(2,28),up=Math.pow(2,35),hp=Math.pow(2,42),dp=Math.pow(2,49),pp=Math.pow(2,56),fp=Math.pow(2,63),gp={encode:function e(t,r,n){r=r||[];for(var i=n=n||0;t>=np;)r[n++]=255&t|tp,t/=128;for(;t&rp;)r[n++]=255&t|tp,t>>>=7;return r[n]=0|t,e.bytes=n-i+1,r},decode:function e(t,r){var n,i=0,s=(r=r||0,0),o=r,a=t.length;do{if(o>=a)throw e.bytes=0,new RangeError("Could not decode varint");n=t[o++],i+=s<28?(n&sp)<<s:(n&sp)*Math.pow(2,s),s+=7}while(n>=ip);return e.bytes=o-r,i},encodingLength:function(e){return e<op?1:e<ap?2:e<cp?3:e<lp?4:e<up?5:e<hp?6:e<dp?7:e<pp?8:e<fp?9:10}},mp=gp;const yp=(e,t,r=0)=>(mp.encode(e,t,r),t),wp=e=>mp.encodingLength(e),bp=(e,t)=>{const r=t.byteLength,n=wp(e),i=n+wp(r),s=new Uint8Array(i+r);return yp(e,s,0),yp(r,s,n),s.set(t,i),new vp(e,r,t,s)};class vp{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}const Ep=({name:e,code:t,encode:r})=>new _p(e,t,r);class _p{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){const t=this.encode(e);return t instanceof Uint8Array?bp(this.code,t):t.then((e=>bp(this.code,e)))}throw Error("Unknown type, must be binary type")}}const Ap=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Sp=Ep({name:"sha2-256",code:18,encode:Ap("SHA-256")}),Cp=Ep({name:"sha2-512",code:19,encode:Ap("SHA-512")});Object.freeze({__proto__:null,sha256:Sp,sha512:Cp});const Ip=ld,Np={code:0,name:"identity",encode:Ip,digest:e=>bp(0,Ip(e))};Object.freeze({__proto__:null,identity:Np}),new TextEncoder,new TextDecoder;const kp={...bd,...Ed,...Ad,...Cd,...kd,...Dd,...Wd,...Hd,...Zd,...ep};function Tp(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}const xp=Tp("utf8","u",(e=>"u"+new TextDecoder("utf8").decode(e)),(e=>(new TextEncoder).encode(e.substring(1)))),Pp=Tp("ascii","a",(e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}),(e=>{const t=function(e=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}((e=e.substring(1)).length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t})),Op={utf8:xp,"utf-8":xp,hex:kp.base16,latin1:Pp,ascii:Pp,binary:Pp,...kp};var Rp=Object.defineProperty,Mp=(e,t,r)=>((e,t,r)=>t in e?Rp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Up{constructor(e,t){this.core=e,this.logger=t,Mp(this,"keychain",new Map),Mp(this,"name","keychain"),Mp(this,"version","0.3"),Mp(this,"initialized",!1),Mp(this,"storagePrefix",Nh),Mp(this,"init",(async()=>{if(!this.initialized){const e=await this.getKeyChain();typeof e<"u"&&(this.keychain=e),this.initialized=!0}})),Mp(this,"has",(e=>(this.isInitialized(),this.keychain.has(e)))),Mp(this,"set",(async(e,t)=>{this.isInitialized(),this.keychain.set(e,t),await this.persist()})),Mp(this,"get",(e=>{this.isInitialized();const t=this.keychain.get(e);if(typeof t>"u"){const{message:t}=Iu("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t})),Mp(this,"del",(async e=>{this.isInitialized(),this.keychain.delete(e),await this.persist()})),this.core=e,this.logger=(0,te.U5)(t,this.name)}get context(){return(0,te.oI)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Io(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?No(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Iu("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Bp=Object.defineProperty,Lp=(e,t,r)=>((e,t,r)=>t in e?Bp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Dp{constructor(e,t,r){this.core=e,this.logger=t,Lp(this,"name","crypto"),Lp(this,"keychain"),Lp(this,"randomSessionIdentifier",tu()),Lp(this,"initialized",!1),Lp(this,"init",(async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)})),Lp(this,"hasKeys",(e=>(this.isInitialized(),this.keychain.has(e)))),Lp(this,"getClientId",(async()=>(this.isInitialized(),Ln($n(await this.getClientSeed()).publicKey)))),Lp(this,"generateKeyPair",(()=>{this.isInitialized();const e=function(){const e=Bl.utils.randomPrivateKey(),t=Bl.getPublicKey(e);return{privateKey:to(e,Jl),publicKey:to(t,Jl)}}();return this.setPrivateKey(e.publicKey,e.privateKey)})),Lp(this,"signJWT",(async e=>{this.isInitialized();const t=$n(await this.getClientSeed()),r=this.randomSessionIdentifier,n=xh;return await async function(e,t,r,n,i=(0,b.fromMiliseconds)(Date.now())){const s={alg:"EdDSA",typ:"JWT"},o={iss:Ln(n.publicKey),sub:e,aud:t,iat:i,exp:i+r},a=function(e){return Mn([Bn(e.header),Bn(e.payload)].join(Jt),er)}({header:s,payload:o});return function(e){return[Bn(e.header),Bn(e.payload),Dn(e.signature)].join(Jt)}({header:s,payload:o,signature:Yt.sign(a,n.secretKey.slice(0,32))})}(r,e,n,t)})),Lp(this,"generateSharedKey",((e,t,r)=>{this.isInitialized();const n=function(e,t){const r=Bl.getSharedSecret(eo(e,Jl),eo(t,Jl));return to(((e,t,r,n,i)=>function(e,t,r,n=32){if(zo(e),$o(n),n>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");const i=Math.ceil(n/e.outputLen);void 0===r&&(r=bc);const s=new Uint8Array(i*e.outputLen),o=yc.create(e,t),a=o._cloneInto(),c=new Uint8Array(o.outputLen);for(let t=0;t<i;t++)wc[0]=t+1,a.update(0===t?bc:c).update(r).update(wc).digestInto(c),s.set(c,e.outputLen*t),o._cloneInto(a);return o.destroy(),a.destroy(),c.fill(0),wc.fill(0),s.slice(0,n)}(e,function(e,t,r){return zo(e),void 0===r&&(r=new Uint8Array(e.outputLen)),yc(e,ea(r),ea(t))}(e,t,r),n,i))(Nc,r,void 0,void 0,32),Jl)}(this.getPrivateKey(e),t);return this.setSymKey(n,r)})),Lp(this,"setSymKey",(async(e,t)=>{this.isInitialized();const r=t||ru(e);return await this.keychain.set(r,e),r})),Lp(this,"deleteKeyPair",(async e=>{this.isInitialized(),await this.keychain.del(e)})),Lp(this,"deleteSymKey",(async e=>{this.isInitialized(),await this.keychain.del(e)})),Lp(this,"encode",(async(e,t,r)=>{this.isInitialized();const n=uu(r),i="string"==typeof(s=t)?s:(o=s,JSON.stringify(o,((e,t)=>"bigint"==typeof t?t.toString()+"n":t))||"");var s,o;if(du(n))return function(e,t){const r=iu(2),n=na(12),i=cu({type:r,sealed:eo(e,eu),iv:n});return t===Ql?ou(i):i}(i,r?.encoding);if(hu(n)){const t=n.senderPublicKey,r=n.receiverPublicKey;e=await this.generateSharedKey(t,r)}const a=this.getSymKey(e),{type:c,senderPublicKey:l}=n;return function(e){const t=iu(typeof e.type<"u"?e.type:0);if(1===su(t)&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof e.senderPublicKey<"u"?eo(e.senderPublicKey,Jl):void 0,n=typeof e.iv<"u"?eo(e.iv,Jl):na(12),i=eo(e.symKey,Jl),s=cu({type:t,sealed:fc(i,n).encrypt(eo(e.message,eu)),iv:n,senderPublicKey:r});return e.encoding===Ql?ou(s):s}({type:c,symKey:a,message:i,senderPublicKey:l,encoding:r?.encoding})})),Lp(this,"decode",(async(e,t,r)=>{this.isInitialized();const n=function(e,t){const r=lu({encoded:e,encoding:t?.encoding});return uu({type:su(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?to(r.senderPublicKey,Jl):void 0,receiverPublicKey:t?.receiverPublicKey})}(t,r);if(du(n)){const e=function(e,t){const{sealed:r}=lu({encoded:e,encoding:t});return to(r,eu)}(t,r?.encoding);return me(e)}if(hu(n)){const t=n.receiverPublicKey,r=n.senderPublicKey;e=await this.generateSharedKey(t,r)}try{const n=function(e){const t=eo(e.symKey,Jl),{sealed:r,iv:n}=lu({encoded:e.encoded,encoding:e.encoding}),i=fc(t,n).decrypt(r);if(null===i)throw new Error("Failed to decrypt");return to(i,eu)}({symKey:this.getSymKey(e),encoded:t,encoding:r?.encoding});return me(n)}catch(t){this.logger.error(`Failed to decode message from topic: '${e}', clientId: '${await this.getClientId()}'`),this.logger.error(t)}})),Lp(this,"getPayloadType",((e,t=Xl)=>su(lu({encoded:e,encoding:t}).type))),Lp(this,"getPayloadSenderPublicKey",((e,t=Xl)=>{const r=lu({encoded:e,encoding:t});return r.senderPublicKey?to(r.senderPublicKey,Jl):void 0})),this.core=e,this.logger=(0,te.U5)(t,this.name),this.keychain=r||new Up(this.core,this.logger)}get context(){return(0,te.oI)(this.logger)}async setPrivateKey(e,t){return await this.keychain.set(e,t),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Th)}catch{e=tu(),await this.keychain.set(Th,e)}return function(e,t="utf8"){const r=Op[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return"utf8"!==t&&"utf-8"!==t||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode(`${r.prefix}${e}`):globalThis.Buffer.from(e,"utf8")}(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Iu("NOT_INITIALIZED",this.name);throw new Error(e)}}}var jp=Object.defineProperty,$p=Object.defineProperties,Wp=Object.getOwnPropertyDescriptors,zp=Object.getOwnPropertySymbols,qp=Object.prototype.hasOwnProperty,Hp=Object.prototype.propertyIsEnumerable,Fp=(e,t,r)=>t in e?jp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Kp=(e,t,r)=>Fp(e,"symbol"!=typeof t?t+"":t,r);class Vp extends ae{constructor(e,t){super(e,t),this.logger=e,this.core=t,Kp(this,"messages",new Map),Kp(this,"messagesWithoutClientAck",new Map),Kp(this,"name","messages"),Kp(this,"version","0.3"),Kp(this,"initialized",!1),Kp(this,"storagePrefix",Nh),Kp(this,"init",(async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const e=await this.getRelayerMessages();typeof e<"u"&&(this.messages=e);const t=await this.getRelayerMessagesWithoutClientAck();typeof t<"u"&&(this.messagesWithoutClientAck=t),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}finally{this.initialized=!0}}})),Kp(this,"set",(async(e,t,r)=>{this.isInitialized();const n=nu(t);let i=this.messages.get(e);if(typeof i>"u"&&(i={}),typeof i[n]<"u")return n;if(i[n]=t,this.messages.set(e,i),r===qh){const r=this.messagesWithoutClientAck.get(e)||{};this.messagesWithoutClientAck.set(e,((e,t)=>$p(e,Wp(t)))(((e,t)=>{for(var r in t||(t={}))qp.call(t,r)&&Fp(e,r,t[r]);if(zp)for(var r of zp(t))Hp.call(t,r)&&Fp(e,r,t[r]);return e})({},r),{[n]:t}))}return await this.persist(),n})),Kp(this,"get",(e=>{this.isInitialized();let t=this.messages.get(e);return typeof t>"u"&&(t={}),t})),Kp(this,"getWithoutAck",(e=>{this.isInitialized();const t={};for(const r of e){const e=this.messagesWithoutClientAck.get(r)||{};t[r]=Object.values(e)}return t})),Kp(this,"has",((e,t)=>(this.isInitialized(),typeof this.get(e)[nu(t)]<"u"))),Kp(this,"ack",(async(e,t)=>{this.isInitialized();const r=this.messagesWithoutClientAck.get(e);typeof r>"u"||(delete r[nu(t)],0===Object.keys(r).length?this.messagesWithoutClientAck.delete(e):this.messagesWithoutClientAck.set(e,r),await this.persist())})),Kp(this,"del",(async e=>{this.isInitialized(),this.messages.delete(e),this.messagesWithoutClientAck.delete(e),await this.persist()})),this.logger=(0,te.U5)(e,this.name),this.core=t}get context(){return(0,te.oI)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get storageKeyWithoutClientAck(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name+"_withoutClientAck"}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Io(e))}async setRelayerMessagesWithoutClientAck(e){await this.core.storage.setItem(this.storageKeyWithoutClientAck,Io(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?No(e):void 0}async getRelayerMessagesWithoutClientAck(){const e=await this.core.storage.getItem(this.storageKeyWithoutClientAck);return typeof e<"u"?No(e):void 0}async persist(){await this.setRelayerMessages(this.messages),await this.setRelayerMessagesWithoutClientAck(this.messagesWithoutClientAck)}isInitialized(){if(!this.initialized){const{message:e}=Iu("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Gp=Object.defineProperty,Zp=Object.defineProperties,Yp=Object.getOwnPropertyDescriptors,Jp=Object.getOwnPropertySymbols,Xp=Object.prototype.hasOwnProperty,Qp=Object.prototype.propertyIsEnumerable,ef=(e,t,r)=>t in e?Gp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,tf=(e,t)=>{for(var r in t||(t={}))Xp.call(t,r)&&ef(e,r,t[r]);if(Jp)for(var r of Jp(t))Qp.call(t,r)&&ef(e,r,t[r]);return e},rf=(e,t)=>Zp(e,Yp(t)),nf=(e,t,r)=>ef(e,"symbol"!=typeof t?t+"":t,r);class sf extends ce{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,nf(this,"events",new y.EventEmitter),nf(this,"name","publisher"),nf(this,"queue",new Map),nf(this,"publishTimeout",(0,b.toMiliseconds)(b.ONE_MINUTE)),nf(this,"initialPublishTimeout",(0,b.toMiliseconds)(15*b.ONE_SECOND)),nf(this,"needsTransportRestart",!1),nf(this,"publish",(async(e,t,r)=>{var n;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:e,message:t,opts:r}});const i=r?.ttl||Ph,s=pu(r),o=r?.prompt||!1,a=r?.tag||0,c=r?.id||ih().toString(),l={topic:e,message:t,opts:{ttl:i,relay:s,prompt:o,tag:a,id:c,attestation:r?.attestation,tvf:r?.tvf}},u=`Failed to publish payload, please try again. id:${c} tag:${a}`;try{const n=new Promise((async n=>{const s=({id:e})=>{l.opts.id===e&&(this.removeRequestFromQueue(e),this.relayer.events.removeListener(Bh,s),n(l))};this.relayer.events.on(Bh,s);const u=To(new Promise(((n,s)=>{this.rpcPublish({topic:e,message:t,ttl:i,prompt:o,tag:a,id:c,attestation:r?.attestation,tvf:r?.tvf}).then(n).catch((e=>{this.logger.warn(e,e?.message),s(e)}))})),this.initialPublishTimeout,`Failed initial publish, retrying.... id:${c} tag:${a}`);try{await u,this.events.removeListener(Bh,s)}catch(e){this.queue.set(c,rf(tf({},l),{attempt:1})),this.logger.warn(e,e?.message)}}));this.logger.trace({type:"method",method:"publish",params:{id:c,topic:e,message:t,opts:r}}),await To(n,this.publishTimeout,u)}catch(e){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(e),null!=(n=r?.internal)&&n.throwOnFailedPublish)throw e}finally{this.queue.delete(c)}})),nf(this,"on",((e,t)=>{this.events.on(e,t)})),nf(this,"once",((e,t)=>{this.events.once(e,t)})),nf(this,"off",((e,t)=>{this.events.off(e,t)})),nf(this,"removeListener",((e,t)=>{this.events.removeListener(e,t)})),this.relayer=e,this.logger=(0,te.U5)(t,this.name),this.registerEventListeners()}get context(){return(0,te.oI)(this.logger)}async rpcPublish(e){var t,r,n,i;const{topic:s,message:o,ttl:a=Ph,prompt:c,tag:l,id:u,attestation:h,tvf:d}=e,p={method:fu(pu().protocol).publish,params:tf({topic:s,message:o,ttl:a,prompt:c,tag:l,attestation:h},d),id:u};xu(null==(t=p.params)?void 0:t.prompt)&&(null==(r=p.params)||delete r.prompt),xu(null==(n=p.params)?void 0:n.tag)&&(null==(i=p.params)||delete i.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:p});const f=await this.relayer.request(p);return this.relayer.events.emit(Bh,e),this.logger.debug("Successfully Published Payload"),f}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach((async(e,t)=>{const r=e.attempt+1;this.queue.set(t,rf(tf({},e),{attempt:r}));const{topic:n,message:i,opts:s,attestation:o}=e;this.logger.warn({},`Publisher: queue->publishing: ${e.opts.id}, tag: ${e.opts.tag}, attempt: ${r}`),await this.rpcPublish(rf(tf({},e),{topic:n,message:i,ttl:s.ttl,prompt:s.prompt,tag:s.tag,id:s.id,attestation:o,tvf:s.tvf})),this.logger.warn({},`Publisher: queue->published: ${e.opts.id}`)}))}registerEventListeners(){this.relayer.core.heartbeat.on(A,(()=>{if(this.needsTransportRestart)return this.needsTransportRestart=!1,void this.relayer.events.emit(Uh);this.checkQueue()})),this.relayer.on(Mh,(e=>{this.removeRequestFromQueue(e.id.toString())}))}}var of=Object.defineProperty,af=(e,t,r)=>((e,t,r)=>t in e?of(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class cf{constructor(){af(this,"map",new Map),af(this,"set",((e,t)=>{const r=this.get(e);this.exists(e,t)||this.map.set(e,[...r,t])})),af(this,"get",(e=>this.map.get(e)||[])),af(this,"exists",((e,t)=>this.get(e).includes(t))),af(this,"delete",((e,t)=>{if(typeof t>"u")return void this.map.delete(e);if(!this.map.has(e))return;const r=this.get(e);if(!this.exists(e,t))return;const n=r.filter((e=>e!==t));n.length?this.map.set(e,n):this.map.delete(e)})),af(this,"clear",(()=>{this.map.clear()}))}get topics(){return Array.from(this.map.keys())}}var lf=Object.defineProperty,uf=Object.defineProperties,hf=Object.getOwnPropertyDescriptors,df=Object.getOwnPropertySymbols,pf=Object.prototype.hasOwnProperty,ff=Object.prototype.propertyIsEnumerable,gf=(e,t,r)=>t in e?lf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,mf=(e,t)=>{for(var r in t||(t={}))pf.call(t,r)&&gf(e,r,t[r]);if(df)for(var r of df(t))ff.call(t,r)&&gf(e,r,t[r]);return e},yf=(e,t)=>uf(e,hf(t)),wf=(e,t,r)=>gf(e,"symbol"!=typeof t?t+"":t,r);class bf extends he{constructor(e,t){super(e,t),this.relayer=e,this.logger=t,wf(this,"subscriptions",new Map),wf(this,"topicMap",new cf),wf(this,"events",new y.EventEmitter),wf(this,"name","subscription"),wf(this,"version","0.3"),wf(this,"pending",new Map),wf(this,"cached",[]),wf(this,"initialized",!1),wf(this,"storagePrefix",Nh),wf(this,"subscribeTimeout",(0,b.toMiliseconds)(b.ONE_MINUTE)),wf(this,"initialSubscribeTimeout",(0,b.toMiliseconds)(15*b.ONE_SECOND)),wf(this,"clientId"),wf(this,"batchSubscribeTopicsLimit",500),wf(this,"init",(async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),await this.restore()),this.initialized=!0})),wf(this,"subscribe",(async(e,t)=>{this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}});try{const r=pu(t),n={topic:e,relay:r,transportType:t?.transportType};this.pending.set(e,n);const i=await this.rpcSubscribe(e,r,t);return"string"==typeof i&&(this.onSubscribe(i,n),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:e,opts:t}})),i}catch(e){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(e),e}})),wf(this,"unsubscribe",(async(e,t)=>{this.isInitialized(),typeof t?.id<"u"?await this.unsubscribeById(e,t.id,t):await this.unsubscribeByTopic(e,t)})),wf(this,"isSubscribed",(e=>new Promise((t=>{t(this.topicMap.topics.includes(e))})))),wf(this,"isKnownTopic",(e=>new Promise((t=>{t(this.topicMap.topics.includes(e)||this.pending.has(e)||this.cached.some((t=>t.topic===e)))})))),wf(this,"on",((e,t)=>{this.events.on(e,t)})),wf(this,"once",((e,t)=>{this.events.once(e,t)})),wf(this,"off",((e,t)=>{this.events.off(e,t)})),wf(this,"removeListener",((e,t)=>{this.events.removeListener(e,t)})),wf(this,"start",(async()=>{await this.onConnect()})),wf(this,"stop",(async()=>{await this.onDisconnect()})),wf(this,"restart",(async()=>{await this.restore(),await this.onRestart()})),wf(this,"checkPending",(async()=>{if(!(0!==this.pending.size||this.initialized&&this.relayer.connected))return;const e=[];this.pending.forEach((t=>{e.push(t)})),await this.batchSubscribe(e)})),wf(this,"registerEventListeners",(()=>{this.relayer.core.heartbeat.on(A,(async()=>{await this.checkPending()})),this.events.on(Fh,(async e=>{const t=Fh;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()})),this.events.on(Kh,(async e=>{const t=Kh;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),await this.persist()}))})),this.relayer=e,this.logger=(0,te.U5)(t,this.name),this.clientId=""}get context(){return(0,te.oI)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}get hasAnyTopics(){return this.topicMap.topics.length>0||this.pending.size>0||this.cached.length>0||this.subscriptions.size>0}hasSubscription(e,t){let r=!1;try{r=this.getSubscription(e).topic===t}catch{}return r}reset(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,t){const r=this.topicMap.get(e);await Promise.all(r.map((async r=>await this.unsubscribeById(e,r,t))))}async unsubscribeById(e,t,r){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}});try{const n=pu(r);await this.restartToComplete({topic:e,id:t,relay:n}),await this.rpcUnsubscribe(e,t,n);const i=Nu("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,t,i),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:t,opts:r}})}catch(e){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(e),e}}async rpcSubscribe(e,t,r){var n;(!r||r?.transportType===zh.relay)&&await this.restartToComplete({topic:e,id:e,relay:t});const i={method:fu(t.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});const s=null==(n=r?.internal)?void 0:n.throwOnFailedPublish;try{const t=await this.getSubscriptionId(e);if(r?.transportType===zh.link_mode)return setTimeout((()=>{(this.relayer.connected||this.relayer.connecting)&&this.relayer.request(i).catch((e=>this.logger.warn(e)))}),(0,b.toMiliseconds)(b.ONE_SECOND)),t;const n=new Promise((async t=>{const r=n=>{n.topic===e&&(this.events.removeListener(Fh,r),t(n.id))};this.events.on(Fh,r);try{const n=await To(new Promise(((e,t)=>{this.relayer.request(i).catch((e=>{this.logger.warn(e,e?.message),t(e)})).then(e)})),this.initialSubscribeTimeout,`Subscribing to ${e} failed, please try again`);this.events.removeListener(Fh,r),t(n)}catch{}})),o=await To(n,this.subscribeTimeout,`Subscribing to ${e} failed, please try again`);if(!o&&s)throw new Error(`Subscribing to ${e} failed, please try again`);return o?t:null}catch(e){if(this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Uh),s)throw e}return null}async rpcBatchSubscribe(e){if(!e.length)return;const t={method:fu(e[0].relay.protocol).batchSubscribe,params:{topics:e.map((e=>e.topic))}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:t});try{await await To(new Promise((e=>{this.relayer.request(t).catch((e=>this.logger.warn(e))).then(e)})),this.subscribeTimeout,"rpcBatchSubscribe failed, please try again")}catch{this.relayer.events.emit(Uh)}}async rpcBatchFetchMessages(e){if(!e.length)return;const t={method:fu(e[0].relay.protocol).batchFetchMessages,params:{topics:e.map((e=>e.topic))}};let r;this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:t});try{r=await await To(new Promise(((e,r)=>{this.relayer.request(t).catch((e=>{this.logger.warn(e),r(e)})).then(e)})),this.subscribeTimeout,"rpcBatchFetchMessages failed, please try again")}catch{this.relayer.events.emit(Uh)}return r}rpcUnsubscribe(e,t,r){const n={method:fu(r.protocol).unsubscribe,params:{topic:e,id:t}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n}),this.relayer.request(n)}onSubscribe(e,t){this.setSubscription(e,yf(mf({},t),{id:e})),this.pending.delete(t.topic)}onBatchSubscribe(e){e.length&&e.forEach((e=>{this.setSubscription(e.id,mf({},e)),this.pending.delete(e.topic)}))}async onUnsubscribe(e,t,r){this.events.removeAllListeners(t),this.hasSubscription(t,e)&&this.deleteSubscription(t,r),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,t){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:t}),this.addSubscription(e,t)}addSubscription(e,t){this.subscriptions.set(e,mf({},t)),this.topicMap.set(t.topic,e),this.events.emit(Fh,t)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const t=this.subscriptions.get(e);if(!t){const{message:t}=Iu("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t}deleteSubscription(e,t){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:t});const r=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(r.topic,e),this.events.emit(Kh,yf(mf({},r),{reason:t}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit("subscription_sync")}async onRestart(){if(this.cached.length){const e=[...this.cached],t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<t;r++){const t=e.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(t)}}this.events.emit("subscription_resubscribed")}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:e}=Iu("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){e.length&&(await this.rpcBatchSubscribe(e),this.onBatchSubscribe(await Promise.all(e.map((async e=>yf(mf({},e),{id:await this.getSubscriptionId(e.topic)}))))))}async batchFetchMessages(e){if(!e.length)return;this.logger.trace(`Fetching batch messages for ${e.length} subscriptions`);const t=await this.rpcBatchFetchMessages(e);t&&t.messages&&(await function(e){return new Promise((t=>setTimeout(t,e)))}((0,b.toMiliseconds)(b.ONE_SECOND)),await this.relayer.handleBatchMessageEvents(t.messages))}async onConnect(){await this.restart(),this.reset()}onDisconnect(){this.onDisable()}isInitialized(){if(!this.initialized){const{message:e}=Iu("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(e){!this.relayer.connected&&!this.relayer.connecting&&(this.cached.push(e),await this.relayer.transportOpen())}async getClientId(){return this.clientId||(this.clientId=await this.relayer.core.crypto.getClientId()),this.clientId}async getSubscriptionId(e){return nu(e+await this.getClientId())}}var vf=Object.defineProperty,Ef=Object.getOwnPropertySymbols,_f=Object.prototype.hasOwnProperty,Af=Object.prototype.propertyIsEnumerable,Sf=(e,t,r)=>t in e?vf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Cf=(e,t)=>{for(var r in t||(t={}))_f.call(t,r)&&Sf(e,r,t[r]);if(Ef)for(var r of Ef(t))Af.call(t,r)&&Sf(e,r,t[r]);return e},If=(e,t,r)=>Sf(e,"symbol"!=typeof t?t+"":t,r);class Nf extends le{constructor(e){super(e),If(this,"protocol","wc"),If(this,"version",2),If(this,"core"),If(this,"logger"),If(this,"events",new y.EventEmitter),If(this,"provider"),If(this,"messages"),If(this,"subscriber"),If(this,"publisher"),If(this,"name","relayer"),If(this,"transportExplicitlyClosed",!1),If(this,"initialized",!1),If(this,"connectionAttemptInProgress",!1),If(this,"relayUrl"),If(this,"projectId"),If(this,"packageName"),If(this,"bundleId"),If(this,"hasExperiencedNetworkDisruption",!1),If(this,"pingTimeout"),If(this,"heartBeatTimeout",(0,b.toMiliseconds)(b.THIRTY_SECONDS+b.FIVE_SECONDS)),If(this,"reconnectTimeout"),If(this,"connectPromise"),If(this,"reconnectInProgress",!1),If(this,"requestsInFlight",[]),If(this,"connectTimeout",(0,b.toMiliseconds)(15*b.ONE_SECOND)),If(this,"request",(async e=>{var t,r;this.logger.debug("Publishing Request Payload");const n=e.id||ih().toString();await this.toEstablishConnection();try{this.logger.trace({id:n,method:e.method,topic:null==(t=e.params)?void 0:t.topic},"relayer.request - publishing...");const i=`${n}:${(null==(r=e.params)?void 0:r.tag)||""}`;this.requestsInFlight.push(i);const s=await this.provider.request(e);return this.requestsInFlight=this.requestsInFlight.filter((e=>e!==i)),s}catch(e){throw this.logger.debug(`Failed to Publish Request: ${n}`),e}})),If(this,"resetPingTimeout",(()=>{wo()&&(clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout((()=>{var e,t,r,n;try{this.logger.debug({},"pingTimeout: Connection stalled, terminating..."),null==(n=null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.terminate)||n.call(r)}catch(e){this.logger.warn(e,e?.message)}}),this.heartBeatTimeout))})),If(this,"onPayloadHandler",(e=>{this.onProviderPayload(e),this.resetPingTimeout()})),If(this,"onConnectHandler",(()=>{this.logger.warn({},"Relayer connected "),this.startPingTimeout(),this.events.emit("relayer_connect")})),If(this,"onDisconnectHandler",(()=>{this.logger.warn({},"Relayer disconnected "),this.requestsInFlight=[],this.onProviderDisconnect()})),If(this,"onProviderErrorHandler",(e=>{this.logger.fatal(`Fatal socket error: ${e.message}`),this.events.emit("relayer_error",e),this.logger.fatal("Fatal socket error received, closing transport"),this.transportClose()})),If(this,"registerProviderListeners",(()=>{this.provider.on(Lh,this.onPayloadHandler),this.provider.on(Dh,this.onConnectHandler),this.provider.on(jh,this.onDisconnectHandler),this.provider.on($h,this.onProviderErrorHandler)})),this.core=e.core,this.logger=typeof e.logger<"u"&&"string"!=typeof e.logger?(0,te.U5)(e.logger,this.name):(0,te.h6)((0,te.iP)({level:e.logger||"error"})),this.messages=new Vp(this.logger,e.core),this.subscriber=new bf(this,this.logger),this.publisher=new sf(this,this.logger),this.relayUrl=e?.relayUrl||Oh,this.projectId=e.projectId,bo()&&typeof r.g<"u"&&typeof(null==r.g?void 0:r.g.Platform)<"u"&&"android"===(null==r.g?void 0:r.g.Platform.OS)?this.packageName=_o():bo()&&typeof r.g<"u"&&typeof(null==r.g?void 0:r.g.Platform)<"u"&&"ios"===(null==r.g?void 0:r.g.Platform.OS)&&(this.bundleId=_o()),this.provider={}}async init(){if(this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),this.initialized=!0,this.subscriber.hasAnyTopics)try{await this.transportOpen()}catch(e){this.logger.warn(e,e?.message)}}get context(){return(0,te.oI)(this.logger)}get connected(){var e,t,r;return 1===(null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.readyState)||!1}get connecting(){var e,t,r;return 0===(null==(r=null==(t=null==(e=this.provider)?void 0:e.connection)?void 0:t.socket)?void 0:r.readyState)||void 0!==this.connectPromise||!1}async publish(e,t,r){this.isInitialized(),await this.publisher.publish(e,t,r),await this.recordMessageEvent({topic:e,message:t,publishedAt:Date.now(),transportType:zh.relay},"outbound")}async subscribe(e,t){var r,n,i;this.isInitialized(),(null==t||!t.transportType||"relay"===t?.transportType)&&await this.toEstablishConnection();const s=typeof(null==(r=t?.internal)?void 0:r.throwOnFailedPublish)>"u"||(null==(n=t?.internal)?void 0:n.throwOnFailedPublish);let o,a=(null==(i=this.subscriber.topicMap.get(e))?void 0:i[0])||"";const c=t=>{t.topic===e&&(this.subscriber.off(Fh,c),o())};return await Promise.all([new Promise((e=>{o=e,this.subscriber.on(Fh,c)})),new Promise((async(r,n)=>{a=await this.subscriber.subscribe(e,Cf({internal:{throwOnFailedPublish:s}},t)).catch((e=>{s&&n(e)}))||a,r()}))]),a}async unsubscribe(e,t){this.isInitialized(),await this.subscriber.unsubscribe(e,t)}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async transportDisconnect(){this.provider.disconnect&&(this.hasExperiencedNetworkDisruption||this.connected)?await To(this.provider.disconnect(),2e3,"provider.disconnect()").catch((()=>this.onProviderDisconnect())):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(e){if(this.subscriber.hasAnyTopics){if(this.connectPromise?(this.logger.debug({},"Waiting for existing connection attempt to resolve..."),await this.connectPromise,this.logger.debug({},"Existing connection attempt resolved")):(this.connectPromise=new Promise((async(t,r)=>{await this.connect(e).then(t).catch(r).finally((()=>{this.connectPromise=void 0}))})),await this.connectPromise),!this.connected)throw new Error(`Couldn't establish socket connection to the relay server: ${this.relayUrl}`)}else this.logger.warn("Starting WS connection skipped because the client has no topics to work with.")}async restartTransport(e){this.logger.debug({},"Restarting transport..."),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await zu())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(e){if(0===e?.length)return void this.logger.trace("Batch message events is empty. Ignoring...");const t=e.sort(((e,t)=>e.publishedAt-t.publishedAt));this.logger.debug(`Batch of ${t.length} message events sorted`);for(const e of t)try{await this.onMessageEvent(e)}catch(e){this.logger.warn(e,"Error while processing batch message event: "+e?.message)}this.logger.trace(`Batch of ${t.length} message events processed`)}async onLinkMessageEvent(e,t){const{topic:r}=e;if(!t.sessionExists){const e={topic:r,expiry:Oo(b.FIVE_MINUTES),relay:{protocol:"irn"},active:!1};await this.core.pairing.pairings.set(r,e)}this.events.emit(Rh,e),await this.recordMessageEvent(e,qh)}async connect(e){await this.confirmOnlineStateOrThrow(),e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportDisconnect()),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;let t=1;for(;t<6;){try{if(this.transportExplicitlyClosed)break;this.logger.debug({},`Connecting to ${this.relayUrl}, attempt: ${t}...`),await this.createProvider(),await new Promise((async(e,t)=>{const r=()=>{t(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(jh,r),await To(new Promise(((e,t)=>{this.provider.connect().then(e).catch(t)})),this.connectTimeout,`Socket stalled when trying to connect to ${this.relayUrl}`).catch((e=>{t(e)})).finally((()=>{this.provider.off(jh,r),clearTimeout(this.reconnectTimeout)})),await new Promise((async(e,t)=>{const r=()=>{t(new Error("Connection interrupted while trying to subscribe"))};this.provider.once(jh,r),await this.subscriber.start().then(e).catch(t).finally((()=>{this.provider.off(jh,r)}))})),this.hasExperiencedNetworkDisruption=!1,e()}))}catch(e){await this.subscriber.stop();const t=e;this.logger.warn({},t.message),this.hasExperiencedNetworkDisruption=!0}finally{this.connectionAttemptInProgress=!1}if(this.connected){this.logger.debug({},`Connected to ${this.relayUrl} successfully on attempt: ${t}`);break}await new Promise((e=>setTimeout(e,(0,b.toMiliseconds)(1*t)))),t++}}startPingTimeout(){var e,t,r,n,i;if(wo())try{null!=(t=null==(e=this.provider)?void 0:e.connection)&&t.socket&&(null==(i=null==(n=null==(r=this.provider)?void 0:r.connection)?void 0:n.socket)||i.on("ping",(()=>{this.resetPingTimeout()}))),this.resetPingTimeout()}catch(e){this.logger.warn(e,e?.message)}}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new vh(new Ah(function({protocol:e,version:t,relayUrl:r,sdkVersion:n,auth:i,projectId:s,useOnCloseEvent:o,bundleId:a,packageName:c}){const l=r.split("?"),u={auth:i,ua:So(e,t,n),projectId:s,useOnCloseEvent:o||void 0,packageName:c||void 0,bundleId:a||void 0},h=function(e,t){const r=new URLSearchParams(e);for(const e of Object.keys(t).sort())if(t.hasOwnProperty(e)){const n=t[e];void 0!==n&&r.set(e,n)}return r.toString()}(l[1]||"",u);return l[0]+"?"+h}({sdkVersion:Wh,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId,packageName:this.packageName}))),this.registerProviderListeners()}async recordMessageEvent(e,t){const{topic:r,message:n}=e;await this.messages.set(r,n,t)}async shouldIgnoreMessageEvent(e){const{topic:t,message:r}=e;if(!r||0===r.length)return this.logger.warn(`Ignoring invalid/empty message: ${r}`),!0;if(!await this.subscriber.isKnownTopic(t))return this.logger.warn(`Ignoring message for unknown topic ${t}`),!0;const n=this.messages.has(t,r);return n&&this.logger.warn(`Ignoring duplicate message: ${r}`),n}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),mh(e)){if(!e.method.endsWith("_subscription"))return;const t=e.params,{topic:r,message:n,publishedAt:i,attestation:s}=t.data,o={topic:r,message:n,publishedAt:i,transportType:zh.relay,attestation:s};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Cf({type:"event",event:t.id},o)),this.events.emit(t.id,o),await this.acknowledgePayload(e),await this.onMessageEvent(o)}else yh(e)&&this.events.emit(Mh,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(await this.recordMessageEvent(e,qh),this.events.emit(Rh,e))}async acknowledgePayload(e){const t=oh(e.id,!0);await this.provider.connection.send(t)}unregisterProviderListeners(){this.provider.off(Lh,this.onPayloadHandler),this.provider.off(Dh,this.onConnectHandler),this.provider.off(jh,this.onDisconnectHandler),this.provider.off($h,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let e=await zu();!function(e){switch(Eo()){case mo:!function(e){!bo()&&vo()&&(window.addEventListener("online",(()=>e(!0))),window.addEventListener("offline",(()=>e(!1))))}(e);break;case go:!function(e){bo()&&typeof r.g<"u"&&null!=r.g&&r.g.NetInfo&&r.g?.NetInfo.addEventListener((t=>e(t?.isConnected)))}(e)}}((async t=>{e!==t&&(e=t,t?await this.transportOpen().catch((e=>this.logger.error(e,e?.message))):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))}))}async onProviderDisconnect(){clearTimeout(this.pingTimeout),this.events.emit("relayer_disconnect"),this.connectionAttemptInProgress=!1,!this.reconnectInProgress&&(this.reconnectInProgress=!0,await this.subscriber.stop(),this.subscriber.hasAnyTopics&&(this.transportExplicitlyClosed||(this.reconnectTimeout=setTimeout((async()=>{await this.transportOpen().catch((e=>this.logger.error(e,e?.message))),this.reconnectTimeout=void 0,this.reconnectInProgress=!1}),(0,b.toMiliseconds)(.1)))))}isInitialized(){if(!this.initialized){const{message:e}=Iu("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&await this.connect()}}function kf(){}function Tf(e){if(!e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&"[object Object]"===Object.prototype.toString.call(e)}function xf(e){return Object.getOwnPropertySymbols(e).filter((t=>Object.prototype.propertyIsEnumerable.call(e,t)))}function Pf(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Of="[object Arguments]",Rf="[object Object]";function Mf(e,t,r,n,i,s,o){const a=o(e,t,r,n,i,s);if(void 0!==a)return a;if(typeof e==typeof t)switch(typeof e){case"bigint":case"string":case"boolean":case"symbol":case"undefined":case"function":return e===t;case"number":return e===t||Object.is(e,t);case"object":return Uf(e,t,s,o)}return Uf(e,t,s,o)}function Uf(e,t,r,n){if(Object.is(e,t))return!0;let i=Pf(e),s=Pf(t);if(i===Of&&(i=Rf),s===Of&&(s=Rf),i!==s)return!1;switch(i){case"[object String]":return e.toString()===t.toString();case"[object Number]":return function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}(e.valueOf(),t.valueOf());case"[object Boolean]":case"[object Date]":case"[object Symbol]":return Object.is(e.valueOf(),t.valueOf());case"[object RegExp]":return e.source===t.source&&e.flags===t.flags;case"[object Function]":return e===t}const o=(r=r??new Map).get(e),a=r.get(t);if(null!=o&&null!=a)return o===t;r.set(e,t),r.set(t,e);try{switch(i){case"[object Map]":if(e.size!==t.size)return!1;for(const[i,s]of e.entries())if(!t.has(i)||!Mf(s,t.get(i),i,e,t,r,n))return!1;return!0;case"[object Set]":{if(e.size!==t.size)return!1;const i=Array.from(e.values()),s=Array.from(t.values());for(let o=0;o<i.length;o++){const a=i[o],c=s.findIndex((i=>Mf(a,i,void 0,e,t,r,n)));if(-1===c)return!1;s.splice(c,1)}return!0}case"[object Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":case"[object BigUint64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object BigInt64Array]":case"[object Float32Array]":case"[object Float64Array]":if(typeof Ch<"u"&&Ch.isBuffer(e)!==Ch.isBuffer(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!Mf(e[i],t[i],i,e,t,r,n))return!1;return!0;case"[object ArrayBuffer]":return e.byteLength===t.byteLength&&Uf(new Uint8Array(e),new Uint8Array(t),r,n);case"[object DataView]":return e.byteLength===t.byteLength&&e.byteOffset===t.byteOffset&&Uf(new Uint8Array(e),new Uint8Array(t),r,n);case"[object Error]":return e.name===t.name&&e.message===t.message;case Rf:{if(!(Uf(e.constructor,t.constructor,r,n)||Tf(e)&&Tf(t)))return!1;const i=[...Object.keys(e),...xf(e)],s=[...Object.keys(t),...xf(t)];if(i.length!==s.length)return!1;for(let s=0;s<i.length;s++){const o=i[s],a=e[o];if(!Object.hasOwn(t,o))return!1;if(!Mf(a,t[o],o,e,t,r,n))return!1}return!0}default:return!1}}finally{r.delete(e),r.delete(t)}}var Bf=Object.defineProperty,Lf=Object.getOwnPropertySymbols,Df=Object.prototype.hasOwnProperty,jf=Object.prototype.propertyIsEnumerable,$f=(e,t,r)=>t in e?Bf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Wf=(e,t)=>{for(var r in t||(t={}))Df.call(t,r)&&$f(e,r,t[r]);if(Lf)for(var r of Lf(t))jf.call(t,r)&&$f(e,r,t[r]);return e},zf=(e,t,r)=>$f(e,"symbol"!=typeof t?t+"":t,r);class qf extends ue{constructor(e,t,r,n=Nh,i=void 0){super(e,t,r,n),this.core=e,this.logger=t,this.name=r,zf(this,"map",new Map),zf(this,"version","0.3"),zf(this,"cached",[]),zf(this,"initialized",!1),zf(this,"getKey"),zf(this,"storagePrefix",Nh),zf(this,"recentlyDeleted",[]),zf(this,"recentlyDeletedLimit",200),zf(this,"init",(async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>{this.getKey&&null!==e&&!xu(e)?this.map.set(this.getKey(e),e):function(e){var t;return null==(t=e?.proposer)?void 0:t.publicKey}(e)?this.map.set(e.id,e):function(e){return e?.topic}(e)&&this.map.set(e.topic,e)})),this.cached=[],this.initialized=!0)})),zf(this,"set",(async(e,t)=>{this.isInitialized(),this.map.has(e)?await this.update(e,t):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:e,value:t}),this.map.set(e,t),await this.persist())})),zf(this,"get",(e=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:e}),this.getData(e)))),zf(this,"getAll",(e=>(this.isInitialized(),e?this.values.filter((t=>Object.keys(e).every((r=>function(e,t){return function(e,t,r){return Mf(e,t,void 0,void 0,void 0,void 0,r)}(e,t,kf)}(t[r],e[r]))))):this.values))),zf(this,"update",(async(e,t)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:e,update:t});const r=Wf(Wf({},this.getData(e)),t);this.map.set(e,r),await this.persist()})),zf(this,"delete",(async(e,t)=>{this.isInitialized(),this.map.has(e)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:e,reason:t}),this.map.delete(e),this.addToRecentlyDeleted(e),await this.persist())})),this.logger=(0,te.U5)(t,this.name),this.storagePrefix=n,this.getKey=i}get context(){return(0,te.oI)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(e){this.recentlyDeleted.push(e),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const t=this.map.get(e);if(!t){if(this.recentlyDeleted.includes(e)){const{message:t}=Iu("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${e}`);throw this.logger.error(t),new Error(t)}const{message:t}=Iu("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(t),new Error(t)}return t}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:e}=Iu("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Iu("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Hf=Object.defineProperty,Ff=(e,t,r)=>((e,t,r)=>t in e?Hf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Kf{constructor(e,t){this.core=e,this.logger=t,Ff(this,"name","pairing"),Ff(this,"version","0.3"),Ff(this,"events",new(w())),Ff(this,"pairings"),Ff(this,"initialized",!1),Ff(this,"storagePrefix",Nh),Ff(this,"ignoredPayloadTypes",[1]),Ff(this,"registeredMethods",[]),Ff(this,"init",(async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))})),Ff(this,"register",(({methods:e})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...e])]})),Ff(this,"create",(async e=>{this.isInitialized();const t=tu(),r=await this.core.crypto.setSymKey(t),n=Oo(b.FIVE_MINUTES),i={protocol:"irn"},s={topic:r,expiry:n,relay:i,active:!1,methods:e?.methods},o=wu({protocol:this.core.protocol,version:this.core.version,topic:r,symKey:t,relay:i,expiryTimestamp:n,methods:e?.methods});return this.events.emit(Gh,s),this.core.expirer.set(r,n),await this.pairings.set(r,s),await this.core.relayer.subscribe(r,{transportType:e?.transportType}),{topic:r,uri:o}})),Ff(this,"pair",(async e=>{this.isInitialized();const t=this.core.eventClient.createEvent({properties:{topic:e?.uri,trace:["pairing_started"]}});this.isValidPair(e,t);const{topic:r,symKey:n,relay:i,expiryTimestamp:s,methods:o}=mu(e.uri);let a;if(t.props.properties.topic=r,t.addTrace("pairing_uri_validation_success"),t.addTrace("pairing_uri_not_expired"),this.pairings.keys.includes(r)){if(a=this.pairings.get(r),t.addTrace("existing_pairing"),a.active)throw t.setError("active_pairing_already_exists"),new Error(`Pairing already exists: ${r}. Please try again with a new connection URI.`);t.addTrace("pairing_not_expired")}const c=s||Oo(b.FIVE_MINUTES),l={topic:r,relay:i,expiry:c,active:!1,methods:o};this.core.expirer.set(r,c),await this.pairings.set(r,l),t.addTrace("store_new_pairing"),e.activatePairing&&await this.activate({topic:r}),this.events.emit(Gh,l),t.addTrace("emit_inactive_pairing"),this.core.crypto.keychain.has(r)||await this.core.crypto.setSymKey(n,r),t.addTrace("subscribing_pairing_topic");try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{t.setError("no_internet_connection")}try{await this.core.relayer.subscribe(r,{relay:i})}catch(e){throw t.setError("subscribe_pairing_topic_failure"),e}return t.addTrace("subscribe_pairing_topic_success"),l})),Ff(this,"activate",(async({topic:e})=>{this.isInitialized();const t=Oo(b.FIVE_MINUTES);this.core.expirer.set(e,t),await this.pairings.update(e,{active:!0,expiry:t})})),Ff(this,"ping",(async e=>{this.isInitialized(),await this.isValidPing(e),this.logger.warn("ping() is deprecated and will be removed in the next major release.");const{topic:t}=e;if(this.pairings.keys.includes(t)){const e=await this.sendRequest(t,"wc_pairingPing",{}),{done:r,resolve:n,reject:i}=ko();this.events.once(Mo("pairing_ping",e),(({error:e})=>{e?i(e):n()})),await r()}})),Ff(this,"updateExpiry",(async({topic:e,expiry:t})=>{this.isInitialized(),await this.pairings.update(e,{expiry:t})})),Ff(this,"updateMetadata",(async({topic:e,metadata:t})=>{this.isInitialized(),await this.pairings.update(e,{peerMetadata:t})})),Ff(this,"getPairings",(()=>(this.isInitialized(),this.pairings.values))),Ff(this,"disconnect",(async e=>{this.isInitialized(),await this.isValidDisconnect(e);const{topic:t}=e;this.pairings.keys.includes(t)&&(await this.sendRequest(t,"wc_pairingDelete",Nu("USER_DISCONNECTED")),await this.deletePairing(t))})),Ff(this,"formatUriFromPairing",(e=>{this.isInitialized();const{topic:t,relay:r,expiry:n,methods:i}=e,s=this.core.crypto.keychain.get(t);return wu({protocol:this.core.protocol,version:this.core.version,topic:t,symKey:s,relay:r,expiryTimestamp:n,methods:i})})),Ff(this,"sendRequest",(async(e,t,r)=>{const n=sh(t,r),i=await this.core.crypto.encode(e,n),s=Vh[t].req;return this.core.history.set(e,n),this.core.relayer.publish(e,i,s),n.id})),Ff(this,"sendResult",(async(e,t,r)=>{const n=oh(e,r),i=await this.core.crypto.encode(t,n),s=(await this.core.history.get(t,e)).request.method,o=Vh[s].res;await this.core.relayer.publish(t,i,o),await this.core.history.resolve(n)})),Ff(this,"sendError",(async(e,t,r)=>{const n=ah(e,r),i=await this.core.crypto.encode(t,n),s=(await this.core.history.get(t,e)).request.method,o=Vh[s]?Vh[s].res:Vh.unregistered_method.res;await this.core.relayer.publish(t,i,o),await this.core.history.resolve(n)})),Ff(this,"deletePairing",(async(e,t)=>{await this.core.relayer.unsubscribe(e),await Promise.all([this.pairings.delete(e,Nu("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(e),t?Promise.resolve():this.core.expirer.del(e)])})),Ff(this,"cleanup",(async()=>{const e=this.pairings.getAll().filter((e=>Ro(e.expiry)));await Promise.all(e.map((e=>this.deletePairing(e.topic))))})),Ff(this,"onRelayEventRequest",(async e=>{const{topic:t,payload:r}=e;switch(r.method){case"wc_pairingPing":return await this.onPairingPingRequest(t,r);case"wc_pairingDelete":return await this.onPairingDeleteRequest(t,r);default:return await this.onUnknownRpcMethodRequest(t,r)}})),Ff(this,"onRelayEventResponse",(async e=>{const{topic:t,payload:r}=e,n=(await this.core.history.get(t,r.id)).request.method;return"wc_pairingPing"===n?this.onPairingPingResponse(t,r):this.onUnknownRpcMethodResponse(n)})),Ff(this,"onPairingPingRequest",(async(e,t)=>{const{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult(r,e,!0),this.events.emit("pairing_ping",{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}})),Ff(this,"onPairingPingResponse",((e,t)=>{const{id:r}=t;setTimeout((()=>{wh(t)?this.events.emit(Mo("pairing_ping",r),{}):bh(t)&&this.events.emit(Mo("pairing_ping",r),{error:t.error})}),500)})),Ff(this,"onPairingDeleteRequest",(async(e,t)=>{const{id:r}=t;try{this.isValidDisconnect({topic:e}),await this.deletePairing(e),this.events.emit(Zh,{id:r,topic:e})}catch(t){await this.sendError(r,e,t),this.logger.error(t)}})),Ff(this,"onUnknownRpcMethodRequest",(async(e,t)=>{const{id:r,method:n}=t;try{if(this.registeredMethods.includes(n))return;const t=Nu("WC_METHOD_UNSUPPORTED",n);await this.sendError(r,e,t),this.logger.error(t)}catch(t){await this.sendError(r,e,t),this.logger.error(t)}})),Ff(this,"onUnknownRpcMethodResponse",(e=>{this.registeredMethods.includes(e)||this.logger.error(Nu("WC_METHOD_UNSUPPORTED",e))})),Ff(this,"isValidPair",((e,t)=>{var r;if(!Du(e)){const{message:r}=Iu("MISSING_OR_INVALID",`pair() params: ${e}`);throw t.setError(od),new Error(r)}if(!function(e){function t(e){try{return typeof new URL(e)<"u"}catch{return!1}}try{if(Pu(e,!1))return!!t(e)||t(jo(e))}catch{}return!1}(e.uri)){const{message:r}=Iu("MISSING_OR_INVALID",`pair() uri: ${e.uri}`);throw t.setError(od),new Error(r)}const n=mu(e?.uri);if(null==(r=n?.relay)||!r.protocol){const{message:e}=Iu("MISSING_OR_INVALID","pair() uri#relay-protocol");throw t.setError(od),new Error(e)}if(null==n||!n.symKey){const{message:e}=Iu("MISSING_OR_INVALID","pair() uri#symKey");throw t.setError(od),new Error(e)}if(null!=n&&n.expiryTimestamp&&(0,b.toMiliseconds)(n?.expiryTimestamp)<Date.now()){t.setError("pairing_expired");const{message:e}=Iu("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(e)}})),Ff(this,"isValidPing",(async e=>{if(!Du(e)){const{message:t}=Iu("MISSING_OR_INVALID",`ping() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidPairingTopic(t)})),Ff(this,"isValidDisconnect",(async e=>{if(!Du(e)){const{message:t}=Iu("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidPairingTopic(t)})),Ff(this,"isValidPairingTopic",(async e=>{if(!Pu(e,!1)){const{message:t}=Iu("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.pairings.keys.includes(e)){const{message:t}=Iu("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Ro(this.pairings.get(e).expiry)){await this.deletePairing(e);const{message:t}=Iu("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}})),this.core=e,this.logger=(0,te.U5)(t,this.name),this.pairings=new qf(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,te.oI)(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Iu("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Rh,(async e=>{const{topic:t,message:r,transportType:n}=e;if(this.pairings.keys.includes(t)&&n!==zh.link_mode&&!this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(r)))try{const e=await this.core.crypto.decode(t,r);mh(e)?(this.core.history.set(t,e),await this.onRelayEventRequest({topic:t,payload:e})):yh(e)&&(await this.core.history.resolve(e),await this.onRelayEventResponse({topic:t,payload:e}),this.core.history.delete(t,e.id)),await this.core.relayer.messages.ack(t,r)}catch(e){this.logger.error(e)}}))}registerExpirerEvents(){this.core.expirer.on(td,(async e=>{const{topic:t}=Po(e.target);t&&this.pairings.keys.includes(t)&&(await this.deletePairing(t,!0),this.events.emit("pairing_expire",{topic:t}))}))}}var Vf=Object.defineProperty,Gf=(e,t,r)=>((e,t,r)=>t in e?Vf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Zf extends oe{constructor(e,t){super(e,t),this.core=e,this.logger=t,Gf(this,"records",new Map),Gf(this,"events",new y.EventEmitter),Gf(this,"name","history"),Gf(this,"version","0.3"),Gf(this,"cached",[]),Gf(this,"initialized",!1),Gf(this,"storagePrefix",Nh),Gf(this,"init",(async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>this.records.set(e.id,e))),this.cached=[],this.registerEventListeners(),this.initialized=!0)})),Gf(this,"set",((e,t,r)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:e,request:t,chainId:r}),this.records.has(t.id))return;const n={id:t.id,topic:e,request:{method:t.method,params:t.params||null},chainId:r,expiry:Oo(b.THIRTY_DAYS)};this.records.set(n.id,n),this.persist(),this.events.emit(Yh,n)})),Gf(this,"resolve",(async e=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:e}),!this.records.has(e.id))return;const t=await this.getRecord(e.id);typeof t.response>"u"&&(t.response=bh(e)?{error:e.error}:{result:e.result},this.records.set(t.id,t),this.persist(),this.events.emit(Jh,t))})),Gf(this,"get",(async(e,t)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:e,id:t}),await this.getRecord(t)))),Gf(this,"delete",((e,t)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:t}),this.values.forEach((r=>{if(r.topic===e){if(typeof t<"u"&&r.id!==t)return;this.records.delete(r.id),this.events.emit(Xh,r)}})),this.persist()})),Gf(this,"exists",(async(e,t)=>(this.isInitialized(),!!this.records.has(t)&&(await this.getRecord(t)).topic===e))),Gf(this,"on",((e,t)=>{this.events.on(e,t)})),Gf(this,"once",((e,t)=>{this.events.once(e,t)})),Gf(this,"off",((e,t)=>{this.events.off(e,t)})),Gf(this,"removeListener",((e,t)=>{this.events.removeListener(e,t)})),this.logger=(0,te.U5)(t,this.name)}get context(){return(0,te.oI)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach((t=>{if(typeof t.response<"u")return;const r={topic:t.topic,request:sh(t.request.method,t.request.params,t.id),chainId:t.chainId};return e.push(r)})),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const t=this.records.get(e);if(!t){const{message:t}=Iu("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(t)}return t}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit("history_sync")}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:e}=Iu("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Yh,(e=>{const t=Yh;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})})),this.events.on(Jh,(e=>{const t=Jh;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})})),this.events.on(Xh,(e=>{const t=Xh;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,record:e})})),this.core.heartbeat.on(A,(()=>{this.cleanup()}))}cleanup(){try{this.isInitialized();let e=!1;this.records.forEach((t=>{(0,b.toMiliseconds)(t.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${t.id}`),this.records.delete(t.id),this.events.emit(Xh,t,!1),e=!0)})),e&&this.persist()}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Iu("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Yf=Object.defineProperty,Jf=(e,t,r)=>((e,t,r)=>t in e?Yf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Xf extends de{constructor(e,t){super(e,t),this.core=e,this.logger=t,Jf(this,"expirations",new Map),Jf(this,"events",new y.EventEmitter),Jf(this,"name","expirer"),Jf(this,"version","0.3"),Jf(this,"cached",[]),Jf(this,"initialized",!1),Jf(this,"storagePrefix",Nh),Jf(this,"init",(async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach((e=>this.expirations.set(e.target,e))),this.cached=[],this.registerEventListeners(),this.initialized=!0)})),Jf(this,"has",(e=>{try{const t=this.formatTarget(e);return typeof this.getExpiration(t)<"u"}catch{return!1}})),Jf(this,"set",((e,t)=>{this.isInitialized();const r=this.formatTarget(e),n={target:r,expiry:t};this.expirations.set(r,n),this.checkExpiry(r,n),this.events.emit(Qh,{target:r,expiration:n})})),Jf(this,"get",(e=>{this.isInitialized();const t=this.formatTarget(e);return this.getExpiration(t)})),Jf(this,"del",(e=>{if(this.isInitialized(),this.has(e)){const t=this.formatTarget(e),r=this.getExpiration(t);this.expirations.delete(t),this.events.emit(ed,{target:t,expiration:r})}})),Jf(this,"on",((e,t)=>{this.events.on(e,t)})),Jf(this,"once",((e,t)=>{this.events.once(e,t)})),Jf(this,"off",((e,t)=>{this.events.off(e,t)})),Jf(this,"removeListener",((e,t)=>{this.events.removeListener(e,t)})),this.logger=(0,te.U5)(t,this.name)}get context(){return(0,te.oI)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if("string"==typeof e)return function(e){return xo("topic",e)}(e);if("number"==typeof e)return function(e){return xo("id",e)}(e);const{message:t}=Iu("UNKNOWN_TYPE","Target type: "+typeof e);throw new Error(t)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit("expirer_sync")}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:e}=Iu("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const t=this.expirations.get(e);if(!t){const{message:t}=Iu("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.warn(t),new Error(t)}return t}checkExpiry(e,t){const{expiry:r}=t;(0,b.toMiliseconds)(r)-Date.now()<=0&&this.expire(e,t)}expire(e,t){this.expirations.delete(e),this.events.emit(td,{target:e,expiration:t})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach(((e,t)=>this.checkExpiry(t,e)))}registerEventListeners(){this.core.heartbeat.on(A,(()=>this.checkExpirations())),this.events.on(Qh,(e=>{const t=Qh;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})),this.events.on(td,(e=>{const t=td;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()})),this.events.on(ed,(e=>{const t=ed;this.logger.info(`Emitting ${t}`),this.logger.debug({type:"event",event:t,data:e}),this.persist()}))}isInitialized(){if(!this.initialized){const{message:e}=Iu("NOT_INITIALIZED",this.name);throw new Error(e)}}}var Qf=Object.defineProperty,eg=(e,t,r)=>((e,t,r)=>t in e?Qf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class tg extends pe{constructor(e,t,r){super(e,t,r),this.core=e,this.logger=t,this.store=r,eg(this,"name","verify-api"),eg(this,"abortController"),eg(this,"isDevEnv"),eg(this,"verifyUrlV3",id),eg(this,"storagePrefix",Nh),eg(this,"version",2),eg(this,"publicKey"),eg(this,"fetchPromise"),eg(this,"init",(async()=>{var e;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&(0,b.toMiliseconds)(null==(e=this.publicKey)?void 0:e.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()))})),eg(this,"register",(async e=>{if(!vo()||this.isDevEnv)return;const t=window.location.origin,{id:r,decryptedId:n}=e,i=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${t}&id=${r}&decryptedId=${n}`;try{const e=(0,Sh.YE)(),t=this.startAbortTimer(5*b.ONE_SECOND),n=await new Promise(((n,s)=>{const o=()=>{window.removeEventListener("message",c),e.body.removeChild(a),s("attestation aborted")};this.abortController.signal.addEventListener("abort",o);const a=e.createElement("iframe");a.src=i,a.style.display="none",a.addEventListener("error",o,{signal:this.abortController.signal});const c=i=>{if(i.data&&"string"==typeof i.data)try{const s=JSON.parse(i.data);if("verify_attestation"===s.type){if(jn(s.attestation).payload.id!==r)return;clearInterval(t),e.body.removeChild(a),this.abortController.signal.removeEventListener("abort",o),window.removeEventListener("message",c),n(null===s.attestation?"":s.attestation)}}catch(e){this.logger.warn(e)}};e.body.appendChild(a),window.addEventListener("message",c,{signal:this.abortController.signal})}));return this.logger.debug("jwt attestation",n),n}catch(e){this.logger.warn(e)}return""})),eg(this,"resolve",(async e=>{if(this.isDevEnv)return"";const{attestationId:t,hash:r,encryptedId:n}=e;if(""===t)return void this.logger.debug("resolve: attestationId is empty, skipping");if(t){if(jn(t).payload.id!==n)return;const e=await this.isValidJwtAttestation(t);if(e)return e.isVerified?e:void this.logger.warn("resolve: jwt attestation: origin url not verified")}if(!r)return;const i=this.getVerifyUrl(e?.verifyUrl);return this.fetchAttestation(r,i)})),eg(this,"fetchAttestation",(async(e,t)=>{this.logger.debug(`resolving attestation: ${e} from url: ${t}`);const r=this.startAbortTimer(5*b.ONE_SECOND),n=await fetch(`${t}/attestation/${e}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(r),200===n.status?await n.json():void 0})),eg(this,"getVerifyUrl",(e=>{let t=e||nd;return sd.includes(t)||(this.logger.info(`verify url: ${t}, not included in trusted list, assigning default: ${nd}`),t=nd),t})),eg(this,"fetchPublicKey",(async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const e=this.startAbortTimer(b.FIVE_SECONDS),t=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(e),await t.json()}catch(e){this.logger.warn(e)}})),eg(this,"persistPublicKey",(async e=>{this.logger.debug("persisting public key to local storage",e),await this.store.setItem(this.storeKey,e),this.publicKey=e})),eg(this,"removePublicKey",(async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0})),eg(this,"isValidJwtAttestation",(async e=>{const t=await this.getPublicKey();try{if(t)return this.validateAttestation(e,t)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}const r=await this.fetchAndPersistPublicKey();try{if(r)return this.validateAttestation(e,r)}catch(e){this.logger.error(e),this.logger.warn("error validating attestation")}})),eg(this,"getPublicKey",(async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey())),eg(this,"fetchAndPersistPublicKey",(async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise((async e=>{const t=await this.fetchPublicKey();t&&(await this.persistPublicKey(t),e(t))}));const e=await this.fetchPromise;return this.fetchPromise=void 0,e})),eg(this,"validateAttestation",((e,t)=>{const r=function(e,t){const[r,n,i]=e.split("."),s=no.from(au(i),"base64");if(64!==s.length)throw new Error("Invalid signature length");const o=s.slice(0,32),a=s.slice(32,64),c=Nc(`${r}.${n}`),l=function(e){const t=no.from(e.x,"base64"),r=no.from(e.y,"base64");return xi([new Uint8Array([4]),t,r])}(t);if(!Zl.verify(xi([o,a]),c,l))throw new Error("Invalid signature");return jn(e).payload}(e,t.publicKey),n={hasExpired:(0,b.toMiliseconds)(r.exp)<Date.now(),payload:r};if(n.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:n.payload.origin,isScam:n.payload.isScam,isVerified:n.payload.isVerified}})),this.logger=(0,te.U5)(t,this.name),this.abortController=new AbortController,this.isDevEnv=Do(),this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return(0,te.oI)(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout((()=>this.abortController.abort()),(0,b.toMiliseconds)(e))}}var rg=Object.defineProperty,ng=(e,t,r)=>((e,t,r)=>t in e?rg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class ig extends fe{constructor(e,t){super(e,t),this.projectId=e,this.logger=t,ng(this,"context","echo"),ng(this,"registerDeviceToken",(async e=>{const{clientId:t,token:r,notificationType:n,enableEncrypted:i=!1}=e,s=`https://echo.walletconnect.com/${this.projectId}/clients`;await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:t,type:n,token:r,always_raw:i})})})),this.logger=(0,te.U5)(t,this.context)}}var sg=Object.defineProperty,og=Object.getOwnPropertySymbols,ag=Object.prototype.hasOwnProperty,cg=Object.prototype.propertyIsEnumerable,lg=(e,t,r)=>t in e?sg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ug=(e,t)=>{for(var r in t||(t={}))ag.call(t,r)&&lg(e,r,t[r]);if(og)for(var r of og(t))cg.call(t,r)&&lg(e,r,t[r]);return e},hg=(e,t,r)=>lg(e,"symbol"!=typeof t?t+"":t,r);class dg extends ge{constructor(e,t,r=!0){super(e,t,r),this.core=e,this.logger=t,hg(this,"context","event-client"),hg(this,"storagePrefix",Nh),hg(this,"storageVersion",.1),hg(this,"events",new Map),hg(this,"shouldPersist",!1),hg(this,"init",(async()=>{if(!Do())try{const e={eventId:Lo(),timestamp:Date.now(),domain:this.getAppDomain(),props:{event:"INIT",type:"",properties:{client_id:await this.core.crypto.getClientId(),user_agent:So(this.core.relayer.protocol,this.core.relayer.version,Wh)}}};await this.sendEvent([e])}catch(e){this.logger.warn(e)}})),hg(this,"createEvent",(e=>{const{event:t="ERROR",type:r="",properties:{topic:n,trace:i}}=e,s=Lo(),o=this.core.projectId||"",a=Date.now(),c=ug({eventId:s,timestamp:a,props:{event:t,type:r,properties:{topic:n,trace:i}},bundleId:o,domain:this.getAppDomain()},this.setMethods(s));return this.telemetryEnabled&&(this.events.set(s,c),this.shouldPersist=!0),c})),hg(this,"getEvent",(e=>{const{eventId:t,topic:r}=e;if(t)return this.events.get(t);const n=Array.from(this.events.values()).find((e=>e.props.properties.topic===r));return n?ug(ug({},n),this.setMethods(n.eventId)):void 0})),hg(this,"deleteEvent",(e=>{const{eventId:t}=e;this.events.delete(t),this.shouldPersist=!0})),hg(this,"setEventListeners",(()=>{this.core.heartbeat.on(A,(async()=>{this.shouldPersist&&await this.persist(),this.events.forEach((e=>{(0,b.fromMiliseconds)(Date.now())-(0,b.fromMiliseconds)(e.timestamp)>86400&&(this.events.delete(e.eventId),this.shouldPersist=!0)}))}))})),hg(this,"setMethods",(e=>({addTrace:t=>this.addTrace(e,t),setError:t=>this.setError(e,t)}))),hg(this,"addTrace",((e,t)=>{const r=this.events.get(e);r&&(r.props.properties.trace.push(t),this.events.set(e,r),this.shouldPersist=!0)})),hg(this,"setError",((e,t)=>{const r=this.events.get(e);r&&(r.props.type=t,r.timestamp=Date.now(),this.events.set(e,r),this.shouldPersist=!0)})),hg(this,"persist",(async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1})),hg(this,"restore",(async()=>{try{const e=await this.core.storage.getItem(this.storageKey)||[];if(!e.length)return;e.forEach((e=>{this.events.set(e.eventId,ug(ug({},e),this.setMethods(e.eventId)))}))}catch(e){this.logger.warn(e)}})),hg(this,"submit",(async()=>{if(!this.telemetryEnabled||0===this.events.size)return;const e=[];for(const[t,r]of this.events)r.props.type&&e.push(r);if(0!==e.length)try{if((await this.sendEvent(e)).ok)for(const t of e)this.events.delete(t.eventId),this.shouldPersist=!0}catch(e){this.logger.warn(e)}})),hg(this,"sendEvent",(async e=>{const t=this.getAppDomain()?"":"&sp=desktop";return await fetch(`https://pulse.walletconnect.org/batch?projectId=${this.core.projectId}&st=events_sdk&sv=js-${Wh}${t}`,{method:"POST",body:JSON.stringify(e)})})),hg(this,"getAppDomain",(()=>Ao().url)),this.logger=(0,te.U5)(t,this.context),this.telemetryEnabled=r,r?this.restore().then((async()=>{await this.submit(),this.setEventListeners()})):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var pg=Object.defineProperty,fg=Object.getOwnPropertySymbols,gg=Object.prototype.hasOwnProperty,mg=Object.prototype.propertyIsEnumerable,yg=(e,t,r)=>t in e?pg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,wg=(e,t)=>{for(var r in t||(t={}))gg.call(t,r)&&yg(e,r,t[r]);if(fg)for(var r of fg(t))mg.call(t,r)&&yg(e,r,t[r]);return e},bg=(e,t,r)=>yg(e,"symbol"!=typeof t?t+"":t,r);class vg extends ie{constructor(e){var t;super(e),bg(this,"protocol","wc"),bg(this,"version",2),bg(this,"name",Ih),bg(this,"relayUrl"),bg(this,"projectId"),bg(this,"customStoragePrefix"),bg(this,"events",new y.EventEmitter),bg(this,"logger"),bg(this,"heartbeat"),bg(this,"relayer"),bg(this,"crypto"),bg(this,"storage"),bg(this,"history"),bg(this,"expirer"),bg(this,"pairing"),bg(this,"verify"),bg(this,"echoClient"),bg(this,"linkModeSupportedApps"),bg(this,"eventClient"),bg(this,"initialized",!1),bg(this,"logChunkController"),bg(this,"on",((e,t)=>this.events.on(e,t))),bg(this,"once",((e,t)=>this.events.once(e,t))),bg(this,"off",((e,t)=>this.events.off(e,t))),bg(this,"removeListener",((e,t)=>this.events.removeListener(e,t))),bg(this,"dispatchEnvelope",(({topic:e,message:t,sessionExists:r})=>{if(!e||!t)return;const n={topic:e,message:t,publishedAt:Date.now(),transportType:zh.link_mode};this.relayer.onLinkMessageEvent(n,{sessionExists:r})}));const r=this.getGlobalCore(e?.customStoragePrefix);if(r)try{return this.customStoragePrefix=r.customStoragePrefix,this.logger=r.logger,this.heartbeat=r.heartbeat,this.crypto=r.crypto,this.history=r.history,this.expirer=r.expirer,this.storage=r.storage,this.relayer=r.relayer,this.pairing=r.pairing,this.verify=r.verify,this.echoClient=r.echoClient,this.linkModeSupportedApps=r.linkModeSupportedApps,this.eventClient=r.eventClient,this.initialized=r.initialized,this.logChunkController=r.logChunkController,r}catch(e){console.warn("Failed to copy global core",e)}this.projectId=e?.projectId,this.relayUrl=e?.relayUrl||Oh,this.customStoragePrefix=null!=e&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const n=(0,te.iP)({level:"string"==typeof e?.logger&&e.logger?e.logger:"error",name:Ih}),{logger:i,chunkLoggerController:s}=(0,te.D5)({opts:n,maxSizeInBytes:e?.maxLogBlobSizeInBytes,loggerOverride:e?.logger});this.logChunkController=s,null!=(t=this.logChunkController)&&t.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var e,t;null!=(e=this.logChunkController)&&e.downloadLogsBlobInBrowser&&(null==(t=this.logChunkController)||t.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=(0,te.U5)(i,this.name),this.heartbeat=new S,this.crypto=new Dp(this,this.logger,e?.keychain),this.history=new Zf(this,this.logger),this.expirer=new Xf(this,this.logger),this.storage=null!=e&&e.storage?e.storage:new ee(wg(wg({},kh),e?.storageOptions)),this.relayer=new Nf({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new Kf(this,this.logger),this.verify=new tg(this,this.logger,this.storage),this.echoClient=new ig(this.projectId||"",this.logger),this.linkModeSupportedApps=[],this.eventClient=new dg(this,this.logger,e?.telemetryEnabled),this.setGlobalCore(this)}static async init(e){const t=new vg(e);await t.initialize();const r=await t.crypto.getClientId();return await t.storage.setItem("WALLETCONNECT_CLIENT_ID",r),t}get context(){return(0,te.oI)(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var e;return null==(e=this.logChunkController)?void 0:e.logsToBlob({clientId:await this.crypto.getClientId()})}async addLinkModeSupportedApp(e){this.linkModeSupportedApps.includes(e)||(this.linkModeSupportedApps.push(e),await this.storage.setItem(Hh,this.linkModeSupportedApps))}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.linkModeSupportedApps=await this.storage.getItem(Hh)||[],this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}getGlobalCore(e=""){try{if(this.isGlobalCoreDisabled())return;const t=`_walletConnectCore_${e}`,r=`${t}_count`;return globalThis[r]=(globalThis[r]||0)+1,globalThis[r]>1&&console.warn(`WalletConnect Core is already initialized. This is probably a mistake and can lead to unexpected behavior. Init() was called ${globalThis[r]} times.`),globalThis[t]}catch(e){return void console.warn("Failed to get global WalletConnect core",e)}}setGlobalCore(e){var t;try{if(this.isGlobalCoreDisabled())return;const r=`_walletConnectCore_${(null==(t=e.opts)?void 0:t.customStoragePrefix)||""}`;globalThis[r]=e}catch(e){console.warn("Failed to set global WalletConnect core",e)}}isGlobalCoreDisabled(){try{return typeof process<"u"&&"true"===process.env.DISABLE_GLOBAL_CORE}catch{return!0}}}const Eg=vg;Object.defineProperty,Object.defineProperty,Object.defineProperty;var _g=Object.defineProperty,Ag=(e,t,r)=>((e,t,r)=>t in e?_g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);w();class Sg{constructor(e){this.opts=e,Ag(this,"protocol","wc"),Ag(this,"version",2)}}y.EventEmitter;class Cg{constructor(e){this.client=e}}const Ig="client",Ng=`wc@2:${Ig}:`,kg=Ig,Tg="WALLETCONNECT_DEEPLINK_CHOICE",xg="Proposal expired",Pg=b.SEVEN_DAYS,Og={wc_sessionPropose:{req:{ttl:b.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:b.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:b.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:b.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:b.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:b.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:b.ONE_DAY,prompt:!1,tag:1104},res:{ttl:b.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:b.ONE_DAY,prompt:!1,tag:1106},res:{ttl:b.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:b.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:b.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:b.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:b.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:b.ONE_DAY,prompt:!1,tag:1112},res:{ttl:b.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:b.ONE_DAY,prompt:!1,tag:1114},res:{ttl:b.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:b.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:b.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:b.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:b.FIVE_MINUTES,prompt:!1,tag:1119}}},Rg={min:b.FIVE_MINUTES,max:b.SEVEN_DAYS},Mg="IDLE",Ug="ACTIVE",Bg={eth_sendTransaction:{key:""},eth_sendRawTransaction:{key:""},wallet_sendCalls:{key:""},solana_signTransaction:{key:"signature"},solana_signAllTransactions:{key:"transactions"},solana_signAndSendTransaction:{key:"signature"}},Lg=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],Dg="wc@1.5:auth:",jg=`${Dg}:PUB_KEY`;var $g=Object.defineProperty,Wg=Object.defineProperties,zg=Object.getOwnPropertyDescriptors,qg=Object.getOwnPropertySymbols,Hg=Object.prototype.hasOwnProperty,Fg=Object.prototype.propertyIsEnumerable,Kg=(e,t,r)=>t in e?$g(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Vg=(e,t)=>{for(var r in t||(t={}))Hg.call(t,r)&&Kg(e,r,t[r]);if(qg)for(var r of qg(t))Fg.call(t,r)&&Kg(e,r,t[r]);return e},Gg=(e,t)=>Wg(e,zg(t)),Zg=(e,t,r)=>Kg(e,"symbol"!=typeof t?t+"":t,r);class Yg extends Cg{constructor(e){super(e),Zg(this,"name","engine"),Zg(this,"events",new(w())),Zg(this,"initialized",!1),Zg(this,"requestQueue",{state:Mg,queue:[]}),Zg(this,"sessionRequestQueue",{state:Mg,queue:[]}),Zg(this,"requestQueueDelay",b.ONE_SECOND),Zg(this,"expectedPairingMethodMap",new Map),Zg(this,"recentlyDeletedMap",new Map),Zg(this,"recentlyDeletedLimit",200),Zg(this,"relayMessageCache",[]),Zg(this,"pendingSessions",new Map),Zg(this,"init",(async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),await this.registerLinkModeListeners(),this.client.core.pairing.register({methods:Object.keys(Og)}),this.initialized=!0,setTimeout((async()=>{await this.processPendingMessageEvents(),this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()}),(0,b.toMiliseconds)(this.requestQueueDelay)))})),Zg(this,"connect",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();const t=Gg(Vg({},e),{requiredNamespaces:e.requiredNamespaces||{},optionalNamespaces:e.optionalNamespaces||{}});await this.isValidConnect(t);const{pairingTopic:r,requiredNamespaces:n,optionalNamespaces:i,sessionProperties:s,scopedProperties:o,relays:a}=t;let c,l=r,u=!1;try{if(l){const e=this.client.core.pairing.pairings.get(l);this.client.logger.warn("connect() with existing pairing topic is deprecated and will be removed in the next major release."),u=e.active}}catch(e){throw this.client.logger.error(`connect() -> pairing.get(${l}) failed`),e}if(!l||!u){const{topic:e,uri:t}=await this.client.core.pairing.create();l=e,c=t}if(!l){const{message:e}=Iu("NO_MATCHING_KEY",`connect() pairing topic: ${l}`);throw new Error(e)}const h=await this.client.core.crypto.generateKeyPair(),d=Og.wc_sessionPropose.req.ttl||b.FIVE_MINUTES,p=Oo(d),f=Gg(Vg(Vg({requiredNamespaces:n,optionalNamespaces:i,relays:a??[{protocol:"irn"}],proposer:{publicKey:h,metadata:this.client.metadata},expiryTimestamp:p,pairingTopic:l},s&&{sessionProperties:s}),o&&{scopedProperties:o}),{id:nh()}),g=Mo("session_connect",f.id),{reject:m,resolve:y,done:w}=ko(d,xg),v=({id:e})=>{e===f.id&&(this.client.events.off("proposal_expire",v),this.pendingSessions.delete(f.id),this.events.emit(g,{error:{message:xg,code:0}}))};return this.client.events.on("proposal_expire",v),this.events.once(g,(({error:e,session:t})=>{this.client.events.off("proposal_expire",v),e?m(e):t&&y(t)})),await this.sendRequest({topic:l,method:"wc_sessionPropose",params:f,throwOnFailedPublish:!0,clientRpcId:f.id}),await this.setProposal(f.id,f),{uri:c,approval:w}})),Zg(this,"pair",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{return await this.client.core.pairing.pair(e)}catch(e){throw this.client.logger.error("pair() failed"),e}})),Zg(this,"approve",(async e=>{var t,r,n;const i=this.client.core.eventClient.createEvent({properties:{topic:null==(t=e?.id)?void 0:t.toString(),trace:[ad]}});try{this.isInitialized(),await this.confirmOnlineStateOrThrow()}catch(e){throw i.setError("no_internet_connection"),e}try{await this.isValidProposalId(e?.id)}catch(t){throw this.client.logger.error(`approve() -> proposal.get(${e?.id}) failed`),i.setError("proposal_not_found"),t}try{await this.isValidApprove(e)}catch(e){throw this.client.logger.error("approve() -> isValidApprove() failed"),i.setError("session_approve_namespace_validation_failure"),e}const{id:s,relayProtocol:o,namespaces:a,sessionProperties:c,scopedProperties:l,sessionConfig:u}=e,h=this.client.proposal.get(s);this.client.core.eventClient.deleteEvent({eventId:i.eventId});const{pairingTopic:d,proposer:p,requiredNamespaces:f,optionalNamespaces:g}=h;let m=null==(r=this.client.core.eventClient)?void 0:r.getEvent({topic:d});m||(m=null==(n=this.client.core.eventClient)?void 0:n.createEvent({type:ad,properties:{topic:d,trace:[ad,"session_namespaces_validation_success"]}}));const y=await this.client.core.crypto.generateKeyPair(),w=p.publicKey,b=await this.client.core.crypto.generateSharedKey(y,w),v=Vg(Vg(Vg({relay:{protocol:o??"irn"},namespaces:a,controller:{publicKey:y,metadata:this.client.metadata},expiry:Oo(Pg)},c&&{sessionProperties:c}),l&&{scopedProperties:l}),u&&{sessionConfig:u}),E=zh.relay;m.addTrace("subscribing_session_topic");try{await this.client.core.relayer.subscribe(b,{transportType:E})}catch(e){throw m.setError("subscribe_session_topic_failure"),e}m.addTrace("subscribe_session_topic_success");const _=Gg(Vg({},v),{topic:b,requiredNamespaces:f,optionalNamespaces:g,pairingTopic:d,acknowledged:!1,self:v.controller,peer:{publicKey:p.publicKey,metadata:p.metadata},controller:y,transportType:zh.relay});await this.client.session.set(b,_),m.addTrace("store_session");try{m.addTrace("publishing_session_settle"),await this.sendRequest({topic:b,method:"wc_sessionSettle",params:v,throwOnFailedPublish:!0}).catch((e=>{throw m?.setError("session_settle_publish_failure"),e})),m.addTrace("session_settle_publish_success"),m.addTrace("publishing_session_approve"),await this.sendResult({id:s,topic:d,result:{relay:{protocol:o??"irn"},responderPublicKey:y},throwOnFailedPublish:!0}).catch((e=>{throw m?.setError("session_approve_publish_failure"),e})),m.addTrace("session_approve_publish_success")}catch(e){throw this.client.logger.error(e),this.client.session.delete(b,Nu("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(b),e}return this.client.core.eventClient.deleteEvent({eventId:m.eventId}),await this.client.core.pairing.updateMetadata({topic:d,metadata:p.metadata}),await this.client.proposal.delete(s,Nu("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:d}),await this.setExpiry(b,Oo(Pg)),{topic:b,acknowledged:()=>Promise.resolve(this.client.session.get(b))}})),Zg(this,"reject",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidReject(e)}catch(e){throw this.client.logger.error("reject() -> isValidReject() failed"),e}const{id:t,reason:r}=e;let n;try{n=this.client.proposal.get(t).pairingTopic}catch(e){throw this.client.logger.error(`reject() -> proposal.get(${t}) failed`),e}n&&(await this.sendError({id:t,topic:n,error:r,rpcOpts:Og.wc_sessionPropose.reject}),await this.client.proposal.delete(t,Nu("USER_DISCONNECTED")))})),Zg(this,"update",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidUpdate(e)}catch(e){throw this.client.logger.error("update() -> isValidUpdate() failed"),e}const{topic:t,namespaces:r}=e,{done:n,resolve:i,reject:s}=ko(),o=nh(),a=ih().toString(),c=this.client.session.get(t).namespaces;return this.events.once(Mo("session_update",o),(({error:e})=>{e?s(e):i()})),await this.client.session.update(t,{namespaces:r}),await this.sendRequest({topic:t,method:"wc_sessionUpdate",params:{namespaces:r},throwOnFailedPublish:!0,clientRpcId:o,relayRpcId:a}).catch((e=>{this.client.logger.error(e),this.client.session.update(t,{namespaces:c}),s(e)})),{acknowledged:n}})),Zg(this,"extend",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidExtend(e)}catch(e){throw this.client.logger.error("extend() -> isValidExtend() failed"),e}const{topic:t}=e,r=nh(),{done:n,resolve:i,reject:s}=ko();return this.events.once(Mo("session_extend",r),(({error:e})=>{e?s(e):i()})),await this.setExpiry(t,Oo(Pg)),this.sendRequest({topic:t,method:"wc_sessionExtend",params:{},clientRpcId:r,throwOnFailedPublish:!0}).catch((e=>{s(e)})),{acknowledged:n}})),Zg(this,"request",(async e=>{this.isInitialized();try{await this.isValidRequest(e)}catch(e){throw this.client.logger.error("request() -> isValidRequest() failed"),e}const{chainId:t,request:n,topic:i,expiry:s=Og.wc_sessionRequest.req.ttl}=e,o=this.client.session.get(i);o?.transportType===zh.relay&&await this.confirmOnlineStateOrThrow();const a=nh(),c=ih().toString(),{done:l,resolve:u,reject:h}=ko(s,"Request expired. Please try again.");this.events.once(Mo("session_request",a),(({error:e,result:t})=>{e?h(e):u(t)}));const d="wc_sessionRequest",p=this.getAppLinkIfEnabled(o.peer.metadata,o.transportType);if(p)return await this.sendRequest({clientRpcId:a,relayRpcId:c,topic:i,method:d,params:{request:Gg(Vg({},n),{expiryTimestamp:Oo(s)}),chainId:t},expiry:s,throwOnFailedPublish:!0,appLink:p}).catch((e=>h(e))),this.client.events.emit("session_request_sent",{topic:i,request:n,chainId:t,id:a}),await l();const f={request:Gg(Vg({},n),{expiryTimestamp:Oo(s)}),chainId:t},g=this.shouldSetTVF(d,f);return await Promise.all([new Promise((async e=>{await this.sendRequest(Vg({clientRpcId:a,relayRpcId:c,topic:i,method:d,params:f,expiry:s,throwOnFailedPublish:!0},g&&{tvf:this.getTVFParams(a,f)})).catch((e=>h(e))),this.client.events.emit("session_request_sent",{topic:i,request:n,chainId:t,id:a}),e()})),new Promise((async e=>{var t;if(null==(t=o.sessionConfig)||!t.disableDeepLink){const e=await async function(e,t){let r="";try{if(vo()&&(r=localStorage.getItem(t),r))return r;r=await e.getItem(t)}catch(e){console.error(e)}return r}(this.client.core.storage,Tg);await async function({id:e,topic:t,wcDeepLink:n}){var i;try{if(!n)return;const s="string"==typeof n?JSON.parse(n):n,o=s?.href;if("string"!=typeof o)return;const a=function(e,t,r){const n=`requestId=${t}&sessionTopic=${r}`;e.endsWith("/")&&(e=e.slice(0,-1));let i=`${e}`;return i=e.startsWith("https://t.me")?`${i}${e.includes("?")?"&startapp=":"?startapp="}${function(e,t=!1){const r=no.from(e).toString("base64");return t?r.replace(/[=]/g,""):r}(n,!0)}`:`${i}/wc?${n}`,i}(o,e,t),c=Eo();if(c===mo){if(null==(i=(0,Jn.getDocument)())||!i.hasFocus())return void console.warn("Document does not have focus, skipping deeplink.");!function(e){let t="_self";!function(){try{return window.self!==window.top}catch{return!1}}()?(typeof window<"u"&&(!!window.TelegramWebviewProxy||!!window.Telegram||!!window.TelegramWebviewProxyProto)||e.startsWith("https://")||e.startsWith("http://"))&&(t="_blank"):t="_top",window.open(e,t,"noreferrer noopener")}(a)}else c===go&&typeof(null==r.g?void 0:r.g.Linking)<"u"&&await r.g.Linking.openURL(a)}catch(e){console.error(e)}}({id:a,topic:i,wcDeepLink:e})}e()})),l()]).then((e=>e[2]))})),Zg(this,"respond",(async e=>{this.isInitialized(),await this.isValidRespond(e);const{topic:t,response:r}=e,{id:n}=r,i=this.client.session.get(t);i.transportType===zh.relay&&await this.confirmOnlineStateOrThrow();const s=this.getAppLinkIfEnabled(i.peer.metadata,i.transportType);wh(r)?await this.sendResult({id:n,topic:t,result:r.result,throwOnFailedPublish:!0,appLink:s}):bh(r)&&await this.sendError({id:n,topic:t,error:r.error,appLink:s}),this.cleanupAfterResponse(e)})),Zg(this,"ping",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow();try{await this.isValidPing(e)}catch(e){throw this.client.logger.error("ping() -> isValidPing() failed"),e}const{topic:t}=e;if(this.client.session.keys.includes(t)){const e=nh(),r=ih().toString(),{done:n,resolve:i,reject:s}=ko();this.events.once(Mo("session_ping",e),(({error:e})=>{e?s(e):i()})),await Promise.all([this.sendRequest({topic:t,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:e,relayRpcId:r}),n()])}else this.client.core.pairing.pairings.keys.includes(t)&&(this.client.logger.warn("ping() on pairing topic is deprecated and will be removed in the next major release."),await this.client.core.pairing.ping({topic:t}))})),Zg(this,"emit",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidEmit(e);const{topic:t,event:r,chainId:n}=e,i=ih().toString(),s=nh();await this.sendRequest({topic:t,method:"wc_sessionEvent",params:{event:r,chainId:n},throwOnFailedPublish:!0,relayRpcId:i,clientRpcId:s})})),Zg(this,"disconnect",(async e=>{this.isInitialized(),await this.confirmOnlineStateOrThrow(),await this.isValidDisconnect(e);const{topic:t}=e;if(this.client.session.keys.includes(t))await this.sendRequest({topic:t,method:"wc_sessionDelete",params:Nu("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:t,emitEvent:!1});else{if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:e}=Iu("MISMATCHED_TOPIC",`Session or pairing topic not found: ${t}`);throw new Error(e)}await this.client.core.pairing.disconnect({topic:t})}})),Zg(this,"find",(e=>(this.isInitialized(),this.client.session.getAll().filter((t=>function(e,t){const{requiredNamespaces:r}=t,n=Object.keys(e.namespaces),i=Object.keys(r);let s=!0;return!!Co(i,n)&&(n.forEach((t=>{const{accounts:n,methods:i,events:o}=e.namespaces[t],a=vu(n),c=r[t];Co(so(t,c),a)&&Co(c.methods,i)&&Co(c.events,o)||(s=!1)})),s)}(t,e)))))),Zg(this,"getPendingSessionRequests",(()=>this.client.pendingRequest.getAll())),Zg(this,"authenticate",(async(e,t)=>{var r;this.isInitialized(),this.isValidAuthenticate(e);const n=t&&this.client.core.linkModeSupportedApps.includes(t)&&(null==(r=this.client.metadata.redirect)?void 0:r.linkMode),i=n?zh.link_mode:zh.relay;i===zh.relay&&await this.confirmOnlineStateOrThrow();const{chains:s,statement:o="",uri:a,domain:c,nonce:l,type:u,exp:h,nbf:d,methods:p=[],expiry:f}=e,g=[...e.resources||[]],{topic:m,uri:y}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"],transportType:i});this.client.logger.info({message:"Generated new pairing",pairing:{topic:m,uri:y}});const w=await this.client.core.crypto.generateKeyPair(),b=ru(w);if(await Promise.all([this.client.auth.authKeys.set(jg,{responseTopic:b,publicKey:w}),this.client.auth.pairingTopics.set(b,{topic:b,pairingTopic:m})]),await this.client.core.relayer.subscribe(b,{transportType:i}),this.client.logger.info(`sending request to new pairing topic: ${m}`),p.length>0){const{namespace:e}=io(s[0]);let t=function(e,t,r){const n=function(e,t,r,n={}){return r?.sort(((e,t)=>e.localeCompare(t))),{att:{[e]:Ra(t,r,n)}}}(e,t,r);return Ma(n)}(e,"request",p);ja(g)&&(t=Ba(t,g.pop())),g.push(t)}const v=f&&f>Og.wc_sessionAuthenticate.req.ttl?f:Og.wc_sessionAuthenticate.req.ttl,E={authPayload:{type:u??"caip122",chains:s,statement:o,aud:a,domain:c,version:"1",nonce:l,iat:(new Date).toISOString(),exp:h,nbf:d,resources:g},requester:{publicKey:w,metadata:this.client.metadata},expiryTimestamp:Oo(v)},_={requiredNamespaces:{},optionalNamespaces:{eip155:{chains:s,methods:[...new Set(["personal_sign",...p])],events:["chainChanged","accountsChanged"]}},relays:[{protocol:"irn"}],pairingTopic:m,proposer:{publicKey:w,metadata:this.client.metadata},expiryTimestamp:Oo(Og.wc_sessionPropose.req.ttl),id:nh()},{done:A,resolve:S,reject:C}=ko(v,"Request expired"),I=nh(),N=Mo("session_connect",_.id),k=Mo("session_request",I),T=async({error:e,session:t})=>{this.events.off(k,x),e?C(e):t&&S({session:t})},x=async e=>{var r,n,s;if(await this.deletePendingAuthRequest(I,{message:"fulfilled",code:0}),e.error){const t=Nu("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return e.error.code===t.code?void 0:(this.events.off(N,T),C(e.error.message))}await this.deleteProposal(_.id),this.events.off(N,T);const{cacaos:o,responder:a}=e.result,c=[],l=[];for(const e of o){await xa({cacao:e,projectId:this.client.core.projectId})||(this.client.logger.error(e,"Signature verification failed"),C(Nu("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:t}=e,r=ja(t.resources),n=[ka(t.iss)],i=Ta(t.iss);if(r){const e=La(r),t=Da(r);c.push(...e),n.push(...t)}for(const e of n)l.push(`${e}:${i}`)}const u=await this.client.core.crypto.generateSharedKey(w,a.publicKey);let h;c.length>0&&(h={topic:u,acknowledged:!0,self:{publicKey:w,metadata:this.client.metadata},peer:a,controller:a.publicKey,expiry:Oo(Pg),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:m,namespaces:Au([...new Set(c)],[...new Set(l)]),transportType:i},await this.client.core.relayer.subscribe(u,{transportType:i}),await this.client.session.set(u,h),m&&await this.client.core.pairing.updateMetadata({topic:m,metadata:a.metadata}),h=this.client.session.get(u)),null!=(r=this.client.metadata.redirect)&&r.linkMode&&null!=(n=a.metadata.redirect)&&n.linkMode&&null!=(s=a.metadata.redirect)&&s.universal&&t&&(this.client.core.addLinkModeSupportedApp(a.metadata.redirect.universal),this.client.session.update(u,{transportType:zh.link_mode})),S({auths:o,session:h})};let P;this.events.once(N,T),this.events.once(k,x);try{if(n){const e=sh("wc_sessionAuthenticate",E,I);this.client.core.history.set(m,e);const r=await this.client.core.crypto.encode("",e,{type:2,encoding:Ql});P=bu(t,m,r)}else await Promise.all([this.sendRequest({topic:m,method:"wc_sessionAuthenticate",params:E,expiry:e.expiry,throwOnFailedPublish:!0,clientRpcId:I}),this.sendRequest({topic:m,method:"wc_sessionPropose",params:_,expiry:Og.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:_.id})])}catch(e){throw this.events.off(N,T),this.events.off(k,x),e}return await this.setProposal(_.id,_),await this.setAuthRequest(I,{request:Gg(Vg({},E),{verifyContext:{}}),pairingTopic:m,transportType:i}),{uri:P??y,response:A}})),Zg(this,"approveSessionAuthenticate",(async e=>{const{id:t,auths:r}=e,n=this.client.core.eventClient.createEvent({properties:{topic:t.toString(),trace:["authenticated_session_approve_started"]}});try{this.isInitialized()}catch(e){throw n.setError("no_internet_connection"),e}const i=this.getPendingAuthRequest(t);if(!i)throw n.setError("authenticated_session_pending_request_not_found"),new Error(`Could not find pending auth request with id ${t}`);const s=i.transportType||zh.relay;s===zh.relay&&await this.confirmOnlineStateOrThrow();const o=i.requester.publicKey,a=await this.client.core.crypto.generateKeyPair(),c=ru(o),l={type:1,receiverPublicKey:o,senderPublicKey:a},u=[],h=[];for(const e of r){if(!await xa({cacao:e,projectId:this.client.core.projectId})){n.setError("invalid_cacao");const e=Nu("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:t,topic:c,error:e,encodeOpts:l}),new Error(e.message)}n.addTrace("cacaos_verified");const{p:r}=e,i=ja(r.resources),s=[ka(r.iss)],o=Ta(r.iss);if(i){const e=La(i),t=Da(i);u.push(...e),s.push(...t)}for(const e of s)h.push(`${e}:${o}`)}const d=await this.client.core.crypto.generateSharedKey(a,o);let p;if(n.addTrace("create_authenticated_session_topic"),u?.length>0){p={topic:d,acknowledged:!0,self:{publicKey:a,metadata:this.client.metadata},peer:{publicKey:o,metadata:i.requester.metadata},controller:o,expiry:Oo(Pg),authentication:r,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:i.pairingTopic,namespaces:Au([...new Set(u)],[...new Set(h)]),transportType:s},n.addTrace("subscribing_authenticated_session_topic");try{await this.client.core.relayer.subscribe(d,{transportType:s})}catch(e){throw n.setError("subscribe_authenticated_session_topic_failure"),e}n.addTrace("subscribe_authenticated_session_topic_success"),await this.client.session.set(d,p),n.addTrace("store_authenticated_session"),await this.client.core.pairing.updateMetadata({topic:i.pairingTopic,metadata:i.requester.metadata})}n.addTrace("publishing_authenticated_session_approve");try{await this.sendResult({topic:c,id:t,result:{cacaos:r,responder:{publicKey:a,metadata:this.client.metadata}},encodeOpts:l,throwOnFailedPublish:!0,appLink:this.getAppLinkIfEnabled(i.requester.metadata,s)})}catch(e){throw n.setError("authenticated_session_approve_publish_failure"),e}return await this.client.auth.requests.delete(t,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:i.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:n.eventId}),{session:p}})),Zg(this,"rejectSessionAuthenticate",(async e=>{this.isInitialized();const{id:t,reason:r}=e,n=this.getPendingAuthRequest(t);if(!n)throw new Error(`Could not find pending auth request with id ${t}`);n.transportType===zh.relay&&await this.confirmOnlineStateOrThrow();const i=n.requester.publicKey,s=await this.client.core.crypto.generateKeyPair(),o=ru(i),a={type:1,receiverPublicKey:i,senderPublicKey:s};await this.sendError({id:t,topic:o,error:r,encodeOpts:a,rpcOpts:Og.wc_sessionAuthenticate.reject,appLink:this.getAppLinkIfEnabled(n.requester.metadata,n.transportType)}),await this.client.auth.requests.delete(t,{message:"rejected",code:0}),await this.client.proposal.delete(t,Nu("USER_DISCONNECTED"))})),Zg(this,"formatAuthMessage",(e=>{this.isInitialized();const{request:t,iss:r}=e;return Pa(t,r)})),Zg(this,"processRelayMessageCache",(()=>{setTimeout((async()=>{if(0!==this.relayMessageCache.length)for(;this.relayMessageCache.length>0;)try{const e=this.relayMessageCache.shift();e&&await this.onRelayMessage(e)}catch(e){this.client.logger.error(e)}}),50)})),Zg(this,"cleanupDuplicatePairings",(async e=>{if(e.pairingTopic)try{const t=this.client.core.pairing.pairings.get(e.pairingTopic),r=this.client.core.pairing.pairings.getAll().filter((r=>{var n,i;return(null==(n=r.peerMetadata)?void 0:n.url)&&(null==(i=r.peerMetadata)?void 0:i.url)===e.peer.metadata.url&&r.topic&&r.topic!==t.topic}));if(0===r.length)return;this.client.logger.info(`Cleaning up ${r.length} duplicate pairing(s)`),await Promise.all(r.map((e=>this.client.core.pairing.disconnect({topic:e.topic})))),this.client.logger.info("Duplicate pairings clean up finished")}catch(e){this.client.logger.error(e)}})),Zg(this,"deleteSession",(async e=>{var t;const{topic:r,expirerHasDeleted:n=!1,emitEvent:i=!0,id:s=0}=e,{self:o}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),await this.client.session.delete(r,Nu("USER_DISCONNECTED")),this.addToRecentlyDeleted(r,"session"),this.client.core.crypto.keychain.has(o.publicKey)&&await this.client.core.crypto.deleteKeyPair(o.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),n||this.client.core.expirer.del(r),this.client.core.storage.removeItem(Tg).catch((e=>this.client.logger.warn(e))),this.getPendingSessionRequests().forEach((e=>{e.topic===r&&this.deletePendingSessionRequest(e.id,Nu("USER_DISCONNECTED"))})),r===(null==(t=this.sessionRequestQueue.queue[0])?void 0:t.topic)&&(this.sessionRequestQueue.state=Mg),i&&this.client.events.emit("session_delete",{id:s,topic:r})})),Zg(this,"deleteProposal",(async(e,t)=>{if(t)try{const t=this.client.proposal.get(e),r=this.client.core.eventClient.getEvent({topic:t.pairingTopic});r?.setError("proposal_expired")}catch{}await Promise.all([this.client.proposal.delete(e,Nu("USER_DISCONNECTED")),t?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"proposal")})),Zg(this,"deletePendingSessionRequest",(async(e,t,r=!1)=>{await Promise.all([this.client.pendingRequest.delete(e,t),r?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter((t=>t.id!==e)),r&&(this.sessionRequestQueue.state=Mg,this.client.events.emit("session_request_expire",{id:e}))})),Zg(this,"deletePendingAuthRequest",(async(e,t,r=!1)=>{await Promise.all([this.client.auth.requests.delete(e,t),r?Promise.resolve():this.client.core.expirer.del(e)])})),Zg(this,"setExpiry",(async(e,t)=>{this.client.session.keys.includes(e)&&(this.client.core.expirer.set(e,t),await this.client.session.update(e,{expiry:t}))})),Zg(this,"setProposal",(async(e,t)=>{this.client.core.expirer.set(e,Oo(Og.wc_sessionPropose.req.ttl)),await this.client.proposal.set(e,t)})),Zg(this,"setAuthRequest",(async(e,t)=>{const{request:r,pairingTopic:n,transportType:i=zh.relay}=t;this.client.core.expirer.set(e,r.expiryTimestamp),await this.client.auth.requests.set(e,{authPayload:r.authPayload,requester:r.requester,expiryTimestamp:r.expiryTimestamp,id:e,pairingTopic:n,verifyContext:r.verifyContext,transportType:i})})),Zg(this,"setPendingSessionRequest",(async e=>{const{id:t,topic:r,params:n,verifyContext:i}=e,s=n.request.expiryTimestamp||Oo(Og.wc_sessionRequest.req.ttl);this.client.core.expirer.set(t,s),await this.client.pendingRequest.set(t,{id:t,topic:r,params:n,verifyContext:i})})),Zg(this,"sendRequest",(async e=>{const{topic:t,method:n,params:i,expiry:s,relayRpcId:o,clientRpcId:a,throwOnFailedPublish:c,appLink:l,tvf:u}=e,h=sh(n,i,a);let d;const p=!!l;try{const e=p?Ql:Xl;d=await this.client.core.crypto.encode(t,h,{encoding:e})}catch(e){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${t} failed`),e}let f;if(Lg.includes(n)){const e=nu(JSON.stringify(h)),t=nu(d);f=await this.client.core.verify.register({id:t,decryptedId:e})}const g=Og[n].req;if(g.attestation=f,s&&(g.ttl=s),o&&(g.id=o),this.client.core.history.set(t,h),p){const e=bu(l,t,d);await r.g.Linking.openURL(e,this.client.name)}else{const e=Og[n].req;s&&(e.ttl=s),o&&(e.id=o),e.tvf=Gg(Vg({},u),{correlationId:h.id}),c?(e.internal=Gg(Vg({},e.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(t,d,e)):this.client.core.relayer.publish(t,d,e).catch((e=>this.client.logger.error(e)))}return h.id})),Zg(this,"sendResult",(async e=>{const{id:t,topic:n,result:i,throwOnFailedPublish:s,encodeOpts:o,appLink:a}=e,c=oh(t,i);let l;const u=a&&typeof(null==r.g?void 0:r.g.Linking)<"u";try{const e=u?Ql:Xl;l=await this.client.core.crypto.encode(n,c,Gg(Vg({},o||{}),{encoding:e}))}catch(e){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${n} failed`),e}let h,d;try{h=await this.client.core.history.get(n,t);const e=h.request;try{this.shouldSetTVF(e.method,e.params)&&(d=this.getTVFParams(t,e.params,i))}catch(e){this.client.logger.warn("sendResult() -> getTVFParams() failed",e)}}catch(e){throw this.client.logger.error(`sendResult() -> history.get(${n}, ${t}) failed`),e}if(u){const e=bu(a,n,l);await r.g.Linking.openURL(e,this.client.name)}else{const e=h.request.method,r=Og[e].res;r.tvf=Gg(Vg({},d),{correlationId:t}),s?(r.internal=Gg(Vg({},r.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,l,r)):this.client.core.relayer.publish(n,l,r).catch((e=>this.client.logger.error(e)))}await this.client.core.history.resolve(c)})),Zg(this,"sendError",(async e=>{const{id:t,topic:n,error:i,encodeOpts:s,rpcOpts:o,appLink:a}=e,c=ah(t,i);let l;const u=a&&typeof(null==r.g?void 0:r.g.Linking)<"u";try{const e=u?Ql:Xl;l=await this.client.core.crypto.encode(n,c,Gg(Vg({},s||{}),{encoding:e}))}catch(e){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${n} failed`),e}let h;try{h=await this.client.core.history.get(n,t)}catch(e){throw this.client.logger.error(`sendError() -> history.get(${n}, ${t}) failed`),e}if(u){const e=bu(a,n,l);await r.g.Linking.openURL(e,this.client.name)}else{const e=h.request.method,t=o||Og[e].res;this.client.core.relayer.publish(n,l,t)}await this.client.core.history.resolve(c)})),Zg(this,"cleanup",(async()=>{const e=[],t=[];this.client.session.getAll().forEach((t=>{let r=!1;Ro(t.expiry)&&(r=!0),this.client.core.crypto.keychain.has(t.topic)||(r=!0),r&&e.push(t.topic)})),this.client.proposal.getAll().forEach((e=>{Ro(e.expiryTimestamp)&&t.push(e.id)})),await Promise.all([...e.map((e=>this.deleteSession({topic:e}))),...t.map((e=>this.deleteProposal(e)))])})),Zg(this,"onProviderMessageEvent",(async e=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(e):await this.onRelayMessage(e)})),Zg(this,"onRelayEventRequest",(async e=>{this.requestQueue.queue.push(e),await this.processRequestsQueue()})),Zg(this,"processRequestsQueue",(async()=>{if(this.requestQueue.state!==Ug){for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Ug;const e=this.requestQueue.queue.shift();if(e)try{await this.processRequest(e)}catch(e){this.client.logger.warn(e)}}this.requestQueue.state=Mg}else this.client.logger.info("Request queue already active, skipping...")})),Zg(this,"processRequest",(async e=>{const{topic:t,payload:r,attestation:n,transportType:i,encryptedId:s}=e,o=r.method;if(!this.shouldIgnorePairingRequest({topic:t,requestMethod:o}))switch(o){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:t,payload:r,attestation:n,encryptedId:s});case"wc_sessionSettle":return await this.onSessionSettleRequest(t,r);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(t,r);case"wc_sessionExtend":return await this.onSessionExtendRequest(t,r);case"wc_sessionPing":return await this.onSessionPingRequest(t,r);case"wc_sessionDelete":return await this.onSessionDeleteRequest(t,r);case"wc_sessionRequest":return await this.onSessionRequest({topic:t,payload:r,attestation:n,encryptedId:s,transportType:i});case"wc_sessionEvent":return await this.onSessionEventRequest(t,r);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:t,payload:r,attestation:n,encryptedId:s,transportType:i});default:return this.client.logger.info(`Unsupported request method ${o}`)}})),Zg(this,"onRelayEventResponse",(async e=>{const{topic:t,payload:r,transportType:n}=e,i=(await this.client.core.history.get(t,r.id)).request.method;switch(i){case"wc_sessionPropose":return this.onSessionProposeResponse(t,r,n);case"wc_sessionSettle":return this.onSessionSettleResponse(t,r);case"wc_sessionUpdate":return this.onSessionUpdateResponse(t,r);case"wc_sessionExtend":return this.onSessionExtendResponse(t,r);case"wc_sessionPing":return this.onSessionPingResponse(t,r);case"wc_sessionRequest":return this.onSessionRequestResponse(t,r);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(t,r);default:return this.client.logger.info(`Unsupported response method ${i}`)}})),Zg(this,"onRelayEventUnknownPayload",(e=>{const{topic:t}=e,{message:r}=Iu("MISSING_OR_INVALID",`Decoded payload on topic ${t} is not identifiable as a JSON-RPC request or a response.`);throw new Error(r)})),Zg(this,"shouldIgnorePairingRequest",(e=>{const{topic:t,requestMethod:r}=e,n=this.expectedPairingMethodMap.get(t);return!(!n||n.includes(r)||!(n.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0))})),Zg(this,"onSessionProposeRequest",(async e=>{const{topic:t,payload:r,attestation:n,encryptedId:i}=e,{params:s,id:o}=r;try{const e=this.client.core.eventClient.getEvent({topic:t});0===this.client.events.listenerCount("session_proposal")&&(console.warn("No listener for session_proposal event"),e?.setError("proposal_listener_not_found")),this.isValidConnect(Vg({},r.params));const a=s.expiryTimestamp||Oo(Og.wc_sessionPropose.req.ttl),c=Vg({id:o,pairingTopic:t,expiryTimestamp:a},s);await this.setProposal(o,c);const l=await this.getVerifyContext({attestationId:n,hash:nu(JSON.stringify(r)),encryptedId:i,metadata:c.proposer.metadata});e?.addTrace("emit_session_proposal"),this.client.events.emit("session_proposal",{id:o,params:c,verifyContext:l})}catch(e){await this.sendError({id:o,topic:t,error:e,rpcOpts:Og.wc_sessionPropose.autoReject}),this.client.logger.error(e)}})),Zg(this,"onSessionProposeResponse",(async(e,t,r)=>{const{id:n}=t;if(wh(t)){const{result:i}=t;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:i});const s=this.client.proposal.get(n);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:s});const o=s.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:o});const a=i.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:a});const c=await this.client.core.crypto.generateSharedKey(o,a);this.pendingSessions.set(n,{sessionTopic:c,pairingTopic:e,proposalId:n,publicKey:o});const l=await this.client.core.relayer.subscribe(c,{transportType:r});this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:l}),await this.client.core.pairing.activate({topic:e})}else if(bh(t)){await this.client.proposal.delete(n,Nu("USER_DISCONNECTED"));const e=Mo("session_connect",n);if(0===this.events.listenerCount(e))throw new Error(`emitting ${e} without any listeners, 954`);this.events.emit(e,{error:t.error})}})),Zg(this,"onSessionSettleRequest",(async(e,t)=>{const{id:r,params:n}=t;try{this.isValidSessionSettleRequest(n);const{relay:r,controller:i,expiry:s,namespaces:o,sessionProperties:a,scopedProperties:c,sessionConfig:l}=t.params,u=[...this.pendingSessions.values()].find((t=>t.sessionTopic===e));if(!u)return this.client.logger.error(`Pending session not found for topic ${e}`);const h=this.client.proposal.get(u.proposalId),d=Gg(Vg(Vg(Vg({topic:e,relay:r,expiry:s,namespaces:o,acknowledged:!0,pairingTopic:u.pairingTopic,requiredNamespaces:h.requiredNamespaces,optionalNamespaces:h.optionalNamespaces,controller:i.publicKey,self:{publicKey:u.publicKey,metadata:this.client.metadata},peer:{publicKey:i.publicKey,metadata:i.metadata}},a&&{sessionProperties:a}),c&&{scopedProperties:c}),l&&{sessionConfig:l}),{transportType:zh.relay});await this.client.session.set(d.topic,d),await this.setExpiry(d.topic,d.expiry),await this.client.core.pairing.updateMetadata({topic:u.pairingTopic,metadata:d.peer.metadata}),this.client.events.emit("session_connect",{session:d}),this.events.emit(Mo("session_connect",u.proposalId),{session:d}),this.pendingSessions.delete(u.proposalId),this.deleteProposal(u.proposalId,!1),this.cleanupDuplicatePairings(d),await this.sendResult({id:t.id,topic:e,result:!0,throwOnFailedPublish:!0})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}})),Zg(this,"onSessionSettleResponse",(async(e,t)=>{const{id:r}=t;wh(t)?(await this.client.session.update(e,{acknowledged:!0}),this.events.emit(Mo("session_approve",r),{})):bh(t)&&(await this.client.session.delete(e,Nu("USER_DISCONNECTED")),this.events.emit(Mo("session_approve",r),{error:t.error}))})),Zg(this,"onSessionUpdateRequest",(async(e,t)=>{const{params:r,id:n}=t;try{const t=`${e}_session_update`,i=Hu.get(t);if(i&&this.isRequestOutOfSync(i,n))return this.client.logger.warn(`Discarding out of sync request - ${n}`),void this.sendError({id:n,topic:e,error:Nu("INVALID_UPDATE_REQUEST")});this.isValidUpdate(Vg({topic:e},r));try{Hu.set(t,n),await this.client.session.update(e,{namespaces:r.namespaces}),await this.sendResult({id:n,topic:e,result:!0,throwOnFailedPublish:!0})}catch(e){throw Hu.delete(t),e}this.client.events.emit("session_update",{id:n,topic:e,params:r})}catch(t){await this.sendError({id:n,topic:e,error:t}),this.client.logger.error(t)}})),Zg(this,"isRequestOutOfSync",((e,t)=>t.toString().slice(0,-3)<e.toString().slice(0,-3))),Zg(this,"onSessionUpdateResponse",((e,t)=>{const{id:r}=t,n=Mo("session_update",r);if(0===this.events.listenerCount(n))throw new Error(`emitting ${n} without any listeners`);wh(t)?this.events.emit(Mo("session_update",r),{}):bh(t)&&this.events.emit(Mo("session_update",r),{error:t.error})})),Zg(this,"onSessionExtendRequest",(async(e,t)=>{const{id:r}=t;try{this.isValidExtend({topic:e}),await this.setExpiry(e,Oo(Pg)),await this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:r,topic:e})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}})),Zg(this,"onSessionExtendResponse",((e,t)=>{const{id:r}=t,n=Mo("session_extend",r);if(0===this.events.listenerCount(n))throw new Error(`emitting ${n} without any listeners`);wh(t)?this.events.emit(Mo("session_extend",r),{}):bh(t)&&this.events.emit(Mo("session_extend",r),{error:t.error})})),Zg(this,"onSessionPingRequest",(async(e,t)=>{const{id:r}=t;try{this.isValidPing({topic:e}),await this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:r,topic:e})}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}})),Zg(this,"onSessionPingResponse",((e,t)=>{const{id:r}=t,n=Mo("session_ping",r);setTimeout((()=>{if(0===this.events.listenerCount(n))throw new Error(`emitting ${n} without any listeners 2176`);wh(t)?this.events.emit(Mo("session_ping",r),{}):bh(t)&&this.events.emit(Mo("session_ping",r),{error:t.error})}),500)})),Zg(this,"onSessionDeleteRequest",(async(e,t)=>{const{id:r}=t;try{this.isValidDisconnect({topic:e,reason:t.params}),Promise.all([new Promise((t=>{this.client.core.relayer.once(Bh,(async()=>{t(await this.deleteSession({topic:e,id:r}))}))})),this.sendResult({id:r,topic:e,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:e,error:Nu("USER_DISCONNECTED")})]).catch((e=>this.client.logger.error(e)))}catch(e){this.client.logger.error(e)}})),Zg(this,"onSessionRequest",(async e=>{var t,r,n;const{topic:i,payload:s,attestation:o,encryptedId:a,transportType:c}=e,{id:l,params:u}=s;try{await this.isValidRequest(Vg({topic:i},u));const e=this.client.session.get(i),s={id:l,topic:i,params:u,verifyContext:await this.getVerifyContext({attestationId:o,hash:nu(JSON.stringify(sh("wc_sessionRequest",u,l))),encryptedId:a,metadata:e.peer.metadata,transportType:c})};await this.setPendingSessionRequest(s),c===zh.link_mode&&null!=(t=e.peer.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(null==(r=e.peer.metadata.redirect)?void 0:r.universal),null!=(n=this.client.signConfig)&&n.disableRequestQueue?this.emitSessionRequest(s):(this.addSessionRequestToSessionRequestQueue(s),this.processSessionRequestQueue())}catch(e){await this.sendError({id:l,topic:i,error:e}),this.client.logger.error(e)}})),Zg(this,"onSessionRequestResponse",((e,t)=>{const{id:r}=t,n=Mo("session_request",r);if(0===this.events.listenerCount(n))throw new Error(`emitting ${n} without any listeners`);wh(t)?this.events.emit(Mo("session_request",r),{result:t.result}):bh(t)&&this.events.emit(Mo("session_request",r),{error:t.error})})),Zg(this,"onSessionEventRequest",(async(e,t)=>{const{id:r,params:n}=t;try{const t=`${e}_session_event_${n.event.name}`,i=Hu.get(t);if(i&&this.isRequestOutOfSync(i,r))return void this.client.logger.info(`Discarding out of sync request - ${r}`);this.isValidEmit(Vg({topic:e},n)),this.client.events.emit("session_event",{id:r,topic:e,params:n}),Hu.set(t,r)}catch(t){await this.sendError({id:r,topic:e,error:t}),this.client.logger.error(t)}})),Zg(this,"onSessionAuthenticateResponse",((e,t)=>{const{id:r}=t;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:e,payload:t}),wh(t)?this.events.emit(Mo("session_request",r),{result:t.result}):bh(t)&&this.events.emit(Mo("session_request",r),{error:t.error})})),Zg(this,"onSessionAuthenticateRequest",(async e=>{var t;const{topic:r,payload:n,attestation:i,encryptedId:s,transportType:o}=e;try{const{requester:e,authPayload:a,expiryTimestamp:c}=n.params,l=await this.getVerifyContext({attestationId:i,hash:nu(JSON.stringify(n)),encryptedId:s,metadata:e.metadata,transportType:o}),u={requester:e,pairingTopic:r,id:n.id,authPayload:a,verifyContext:l,expiryTimestamp:c};await this.setAuthRequest(n.id,{request:u,pairingTopic:r,transportType:o}),o===zh.link_mode&&null!=(t=e.metadata.redirect)&&t.universal&&this.client.core.addLinkModeSupportedApp(e.metadata.redirect.universal),this.client.events.emit("session_authenticate",{topic:r,params:n.params,id:n.id,verifyContext:l})}catch(e){this.client.logger.error(e);const t=n.params.requester.publicKey,i=await this.client.core.crypto.generateKeyPair(),s=this.getAppLinkIfEnabled(n.params.requester.metadata,o),a={type:1,receiverPublicKey:t,senderPublicKey:i};await this.sendError({id:n.id,topic:r,error:e,encodeOpts:a,rpcOpts:Og.wc_sessionAuthenticate.autoReject,appLink:s})}})),Zg(this,"addSessionRequestToSessionRequestQueue",(e=>{this.sessionRequestQueue.queue.push(e)})),Zg(this,"cleanupAfterResponse",(e=>{this.deletePendingSessionRequest(e.response.id,{message:"fulfilled",code:0}),setTimeout((()=>{this.sessionRequestQueue.state=Mg,this.processSessionRequestQueue()}),(0,b.toMiliseconds)(this.requestQueueDelay))})),Zg(this,"cleanupPendingSentRequestsForTopic",(({topic:e,error:t})=>{const r=this.client.core.history.pending;r.length>0&&r.filter((t=>t.topic===e&&"wc_sessionRequest"===t.request.method)).forEach((e=>{const r=Mo("session_request",e.request.id);if(0===this.events.listenerCount(r))throw new Error(`emitting ${r} without any listeners`);this.events.emit(Mo("session_request",e.request.id),{error:t})}))})),Zg(this,"processSessionRequestQueue",(()=>{if(this.sessionRequestQueue.state===Ug)return void this.client.logger.info("session request queue is already active.");const e=this.sessionRequestQueue.queue[0];if(e)try{this.sessionRequestQueue.state=Ug,this.emitSessionRequest(e)}catch(e){this.client.logger.error(e)}else this.client.logger.info("session request queue is empty.")})),Zg(this,"emitSessionRequest",(e=>{this.client.events.emit("session_request",e)})),Zg(this,"onPairingCreated",(e=>{if(e.methods&&this.expectedPairingMethodMap.set(e.topic,e.methods),e.active)return;const t=this.client.proposal.getAll().find((t=>t.pairingTopic===e.topic));t&&this.onSessionProposeRequest({topic:e.topic,payload:sh("wc_sessionPropose",Gg(Vg({},t),{requiredNamespaces:t.requiredNamespaces,optionalNamespaces:t.optionalNamespaces,relays:t.relays,proposer:t.proposer,sessionProperties:t.sessionProperties,scopedProperties:t.scopedProperties}),t.id)})})),Zg(this,"isValidConnect",(async e=>{if(!Du(e)){const{message:t}=Iu("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(e)}`);throw new Error(t)}const{pairingTopic:t,requiredNamespaces:r,optionalNamespaces:n,sessionProperties:i,scopedProperties:s,relays:o}=e;if(xu(t)||await this.isValidPairingTopic(t),!function(e){let t=!1;return e?e&&ku(e)&&e.length&&e.forEach((e=>{t=Lu(e)})):t=!0,t}(o)){const{message:e}=Iu("MISSING_OR_INVALID",`connect() relays: ${o}`);throw new Error(e)}if(!xu(r)&&0!==Tu(r)&&this.validateNamespaces(r,"requiredNamespaces"),!xu(n)&&0!==Tu(n)&&this.validateNamespaces(n,"optionalNamespaces"),xu(i)||this.validateSessionProps(i,"sessionProperties"),!xu(s)){this.validateSessionProps(s,"scopedProperties");const e=Object.keys(r||{}).concat(Object.keys(n||{}));if(!Object.keys(s).every((t=>e.includes(t))))throw new Error(`Scoped properties must be a subset of required/optional namespaces, received: ${JSON.stringify(s)}, required/optional namespaces: ${JSON.stringify(e)}`)}})),Zg(this,"validateNamespaces",((e,t)=>{const r=function(e,t,r){let n=null;if(e&&Tu(e)){const i=Uu(e,t);i&&(n=i);const s=function(e,t,r){let n=null;return Object.entries(e).forEach((([e,i])=>{if(n)return;const s=function(e,t,r){let n=null;return ku(t)&&t.length?t.forEach((e=>{n||Ru(e)||(n=Nu("UNSUPPORTED_CHAINS",`${r}, chain ${e} should be a string and conform to "namespace:chainId" format`))})):Ru(e)||(n=Nu("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}(e,so(e,i),`${t} ${r}`);s&&(n=s)})),n}(e,t,r);s&&(n=s)}else n=Iu("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return n}(e,"connect()",t);if(r)throw new Error(r.message)})),Zg(this,"isValidApprove",(async e=>{if(!Du(e))throw new Error(Iu("MISSING_OR_INVALID",`approve() params: ${e}`).message);const{id:t,namespaces:r,relayProtocol:n,sessionProperties:i,scopedProperties:s}=e;this.checkRecentlyDeleted(t),await this.isValidProposalId(t);const o=this.client.proposal.get(t),a=Bu(r,"approve()");if(a)throw new Error(a.message);const c=$u(o.requiredNamespaces,r,"approve()");if(c)throw new Error(c.message);if(!Pu(n,!0)){const{message:e}=Iu("MISSING_OR_INVALID",`approve() relayProtocol: ${n}`);throw new Error(e)}if(xu(i)||this.validateSessionProps(i,"sessionProperties"),!xu(s)){this.validateSessionProps(s,"scopedProperties");const e=new Set(Object.keys(r));if(!Object.keys(s).every((t=>e.has(t))))throw new Error(`Scoped properties must be a subset of approved namespaces, received: ${JSON.stringify(s)}, approved namespaces: ${Array.from(e).join(", ")}`)}})),Zg(this,"isValidReject",(async e=>{if(!Du(e)){const{message:t}=Iu("MISSING_OR_INVALID",`reject() params: ${e}`);throw new Error(t)}const{id:t,reason:r}=e;if(this.checkRecentlyDeleted(t),await this.isValidProposalId(t),!function(e){return!!(e&&"object"==typeof e&&e.code&&Ou(e.code,!1)&&e.message&&Pu(e.message,!1))}(r)){const{message:e}=Iu("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(r)}`);throw new Error(e)}})),Zg(this,"isValidSessionSettleRequest",(e=>{if(!Du(e)){const{message:t}=Iu("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${e}`);throw new Error(t)}const{relay:t,controller:r,namespaces:n,expiry:i}=e;if(!Lu(t)){const{message:e}=Iu("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(e)}const s=function(e){let t=null;return Pu(e?.publicKey,!1)||(t=Iu("MISSING_OR_INVALID","onSessionSettleRequest() controller public key should be a string")),t}(r);if(s)throw new Error(s.message);const o=Bu(n,"onSessionSettleRequest()");if(o)throw new Error(o.message);if(Ro(i)){const{message:e}=Iu("EXPIRED","onSessionSettleRequest()");throw new Error(e)}})),Zg(this,"isValidUpdate",(async e=>{if(!Du(e)){const{message:t}=Iu("MISSING_OR_INVALID",`update() params: ${e}`);throw new Error(t)}const{topic:t,namespaces:r}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);const n=this.client.session.get(t),i=Bu(r,"update()");if(i)throw new Error(i.message);const s=$u(n.requiredNamespaces,r,"update()");if(s)throw new Error(s.message)})),Zg(this,"isValidExtend",(async e=>{if(!Du(e)){const{message:t}=Iu("MISSING_OR_INVALID",`extend() params: ${e}`);throw new Error(t)}const{topic:t}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t)})),Zg(this,"isValidRequest",(async e=>{if(!Du(e)){const{message:t}=Iu("MISSING_OR_INVALID",`request() params: ${e}`);throw new Error(t)}const{topic:t,request:r,chainId:n,expiry:i}=e;this.checkRecentlyDeleted(t),await this.isValidSessionTopic(t);const{namespaces:s}=this.client.session.get(t);if(!ju(s,n)){const{message:e}=Iu("MISSING_OR_INVALID",`request() chainId: ${n}`);throw new Error(e)}if(!function(e){return!(xu(e)||!Pu(e.method,!1))}(r)){const{message:e}=Iu("MISSING_OR_INVALID",`request() ${JSON.stringify(r)}`);throw new Error(e)}if(!function(e,t,r){return!!Pu(r,!1)&&function(e,t){const r=[];return Object.values(e).forEach((e=>{vu(e.accounts).includes(t)&&r.push(...e.methods)})),r}(e,t).includes(r)}(s,n,r.method)){const{message:e}=Iu("MISSING_OR_INVALID",`request() method: ${r.method}`);throw new Error(e)}if(i&&!function(e,t){return Ou(e,!1)&&e<=t.max&&e>=t.min}(i,Rg)){const{message:e}=Iu("MISSING_OR_INVALID",`request() expiry: ${i}. Expiry must be a number (in seconds) between ${Rg.min} and ${Rg.max}`);throw new Error(e)}})),Zg(this,"isValidRespond",(async e=>{var t;if(!Du(e)){const{message:t}=Iu("MISSING_OR_INVALID",`respond() params: ${e}`);throw new Error(t)}const{topic:r,response:n}=e;try{await this.isValidSessionTopic(r)}catch(r){throw null!=(t=e?.response)&&t.id&&this.cleanupAfterResponse(e),r}if(!function(e){return!(xu(e)||xu(e.result)&&xu(e.error)||!Ou(e.id,!1)||!Pu(e.jsonrpc,!1))}(n)){const{message:e}=Iu("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(n)}`);throw new Error(e)}})),Zg(this,"isValidPing",(async e=>{if(!Du(e)){const{message:t}=Iu("MISSING_OR_INVALID",`ping() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidSessionOrPairingTopic(t)})),Zg(this,"isValidEmit",(async e=>{if(!Du(e)){const{message:t}=Iu("MISSING_OR_INVALID",`emit() params: ${e}`);throw new Error(t)}const{topic:t,event:r,chainId:n}=e;await this.isValidSessionTopic(t);const{namespaces:i}=this.client.session.get(t);if(!ju(i,n)){const{message:e}=Iu("MISSING_OR_INVALID",`emit() chainId: ${n}`);throw new Error(e)}if(!function(e){return!(xu(e)||!Pu(e.name,!1))}(r)){const{message:e}=Iu("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(r)}`);throw new Error(e)}if(!function(e,t,r){return!!Pu(r,!1)&&function(e,t){const r=[];return Object.values(e).forEach((e=>{vu(e.accounts).includes(t)&&r.push(...e.events)})),r}(e,t).includes(r)}(i,n,r.name)){const{message:e}=Iu("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(r)}`);throw new Error(e)}})),Zg(this,"isValidDisconnect",(async e=>{if(!Du(e)){const{message:t}=Iu("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw new Error(t)}const{topic:t}=e;await this.isValidSessionOrPairingTopic(t)})),Zg(this,"isValidAuthenticate",(e=>{const{chains:t,uri:r,domain:n,nonce:i}=e;if(!Array.isArray(t)||0===t.length)throw new Error("chains is required and must be a non-empty array");if(!Pu(r,!1))throw new Error("uri is required parameter");if(!Pu(n,!1))throw new Error("domain is required parameter");if(!Pu(i,!1))throw new Error("nonce is required parameter");if([...new Set(t.map((e=>io(e).namespace)))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:s}=io(t[0]);if("eip155"!==s)throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")})),Zg(this,"getVerifyContext",(async e=>{const{attestationId:t,hash:r,encryptedId:n,metadata:i,transportType:s}=e,o={verified:{verifyUrl:i.verifyUrl||nd,validation:"UNKNOWN",origin:i.url||""}};try{if(s===zh.link_mode){const e=this.getAppLinkIfEnabled(i,s);return o.verified.validation=e&&new URL(e).origin===new URL(i.url).origin?"VALID":"INVALID",o}const e=await this.client.core.verify.resolve({attestationId:t,hash:r,encryptedId:n,verifyUrl:i.verifyUrl});e&&(o.verified.origin=e.origin,o.verified.isScam=e.isScam,o.verified.validation=e.origin===new URL(i.url).origin?"VALID":"INVALID")}catch(e){this.client.logger.warn(e)}return this.client.logger.debug(`Verify context: ${JSON.stringify(o)}`),o})),Zg(this,"validateSessionProps",((e,t)=>{Object.values(e).forEach(((r,n)=>{if(null==r){const{message:i}=Iu("MISSING_OR_INVALID",`${t} must contain an existing value for each key. Received: ${r} for key ${Object.keys(e)[n]}`);throw new Error(i)}}))})),Zg(this,"getPendingAuthRequest",(e=>{const t=this.client.auth.requests.get(e);return"object"==typeof t?t:void 0})),Zg(this,"addToRecentlyDeleted",((e,t)=>{if(this.recentlyDeletedMap.set(e,t),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let e=0;const t=this.recentlyDeletedLimit/2;for(const r of this.recentlyDeletedMap.keys()){if(e++>=t)break;this.recentlyDeletedMap.delete(r)}}})),Zg(this,"checkRecentlyDeleted",(e=>{const t=this.recentlyDeletedMap.get(e);if(t){const{message:r}=Iu("MISSING_OR_INVALID",`Record was recently deleted - ${t}: ${e}`);throw new Error(r)}})),Zg(this,"isLinkModeEnabled",((e,t)=>{var n,i,s,o,a,c,l,u,h;return!(!e||t!==zh.link_mode)&&!0===(null==(i=null==(n=this.client.metadata)?void 0:n.redirect)?void 0:i.linkMode)&&void 0!==(null==(o=null==(s=this.client.metadata)?void 0:s.redirect)?void 0:o.universal)&&""!==(null==(c=null==(a=this.client.metadata)?void 0:a.redirect)?void 0:c.universal)&&void 0!==(null==(l=e?.redirect)?void 0:l.universal)&&""!==(null==(u=e?.redirect)?void 0:u.universal)&&!0===(null==(h=e?.redirect)?void 0:h.linkMode)&&this.client.core.linkModeSupportedApps.includes(e.redirect.universal)&&typeof(null==r.g?void 0:r.g.Linking)<"u"})),Zg(this,"getAppLinkIfEnabled",((e,t)=>{var r;return this.isLinkModeEnabled(e,t)?null==(r=e?.redirect)?void 0:r.universal:void 0})),Zg(this,"handleLinkModeMessage",(({url:e})=>{if(!e||!e.includes("wc_ev")||!e.includes("topic"))return;const t=Bo(e,"topic")||"",r=decodeURIComponent(Bo(e,"wc_ev")||""),n=this.client.session.keys.includes(t);n&&this.client.session.update(t,{transportType:zh.link_mode}),this.client.core.dispatchEnvelope({topic:t,message:r,sessionExists:n})})),Zg(this,"registerLinkModeListeners",(async()=>{var e;if(Do()||bo()&&null!=(e=this.client.metadata.redirect)&&e.linkMode){const e=null==r.g?void 0:r.g.Linking;if(typeof e<"u"){e.addEventListener("url",this.handleLinkModeMessage,this.client.name);const t=await e.getInitialURL();t&&setTimeout((()=>{this.handleLinkModeMessage({url:t})}),50)}}})),Zg(this,"shouldSetTVF",((e,t)=>{if(!t||"wc_sessionRequest"!==e)return!1;const{request:r}=t;return Object.keys(Bg).includes(r.method)})),Zg(this,"getTVFParams",((e,t,r)=>{var n,i;try{const s=t.request.method,o=this.extractTxHashesFromResult(s,r);return Gg(Vg({correlationId:e,rpcMethods:[s],chainId:t.chainId},this.isValidContractData(t.request.params)&&{contractAddresses:[null==(i=null==(n=t.request.params)?void 0:n[0])?void 0:i.to]}),{txHashes:o})}catch(e){this.client.logger.warn("Error getting TVF params",e)}return{}})),Zg(this,"isValidContractData",(e=>{var t;if(!e)return!1;try{const r=e?.data||(null==(t=e?.[0])?void 0:t.data);if(!r.startsWith("0x"))return!1;const n=r.slice(2);return!!/^[0-9a-fA-F]*$/.test(n)&&n.length%2==0}catch{}return!1})),Zg(this,"extractTxHashesFromResult",((e,t)=>{try{if("string"==typeof t)return[t];const r=t[Bg[e].key];if(ku(r))return"solana_signAllTransactions"===e?r.map((e=>function(e){const t=atob(e),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);const n=r[0];if(0===n)throw new Error("No signatures found");const i=1+64*n;if(r.length<i)throw new Error("Transaction data too short for claimed signature count");if(r.length<100)throw new Error("Transaction too short");const s=no.from(e,"base64").slice(1,65);return ki.A.encode(s)}(e))):r;if("string"==typeof r)return[r]}catch(e){this.client.logger.warn("Error extracting tx hashes from result",e)}return[]}))}async processPendingMessageEvents(){try{const e=this.client.session.keys,t=this.client.core.relayer.messages.getWithoutAck(e);for(const[e,r]of Object.entries(t))for(const t of r)try{await this.onProviderMessageEvent({topic:e,message:t,publishedAt:Date.now()})}catch{this.client.logger.warn(`Error processing pending message event for topic: ${e}, message: ${t}`)}}catch(e){this.client.logger.warn("processPendingMessageEvents failed",e)}}isInitialized(){if(!this.initialized){const{message:e}=Iu("NOT_INITIALIZED",this.name);throw new Error(e)}}async confirmOnlineStateOrThrow(){await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Rh,(e=>{this.onProviderMessageEvent(e)}))}async onRelayMessage(e){const{topic:t,message:r,attestation:n,transportType:i}=e,{publicKey:s}=this.client.auth.authKeys.keys.includes(jg)?this.client.auth.authKeys.get(jg):{responseTopic:void 0,publicKey:void 0};try{const e=await this.client.core.crypto.decode(t,r,{receiverPublicKey:s,encoding:i===zh.link_mode?Ql:Xl});mh(e)?(this.client.core.history.set(t,e),await this.onRelayEventRequest({topic:t,payload:e,attestation:n,transportType:i,encryptedId:nu(r)})):yh(e)?(await this.client.core.history.resolve(e),await this.onRelayEventResponse({topic:t,payload:e,transportType:i}),this.client.core.history.delete(t,e.id)):await this.onRelayEventUnknownPayload({topic:t,payload:e,transportType:i}),await this.client.core.relayer.messages.ack(t,r)}catch(e){this.client.logger.error(e)}}registerExpirerEvents(){this.client.core.expirer.on(td,(async e=>{const{topic:t,id:r}=Po(e.target);return r&&this.client.pendingRequest.keys.includes(r)?await this.deletePendingSessionRequest(r,Iu("EXPIRED"),!0):r&&this.client.auth.requests.keys.includes(r)?await this.deletePendingAuthRequest(r,Iu("EXPIRED"),!0):void(t?this.client.session.keys.includes(t)&&(await this.deleteSession({topic:t,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:t})):r&&(await this.deleteProposal(r,!0),this.client.events.emit("proposal_expire",{id:r})))}))}registerPairingEvents(){this.client.core.pairing.events.on(Gh,(e=>this.onPairingCreated(e))),this.client.core.pairing.events.on(Zh,(e=>{this.addToRecentlyDeleted(e.topic,"pairing")}))}isValidPairingTopic(e){if(!Pu(e,!1)){const{message:t}=Iu("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(t)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:t}=Iu("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(t)}if(Ro(this.client.core.pairing.pairings.get(e).expiry)){const{message:t}=Iu("EXPIRED",`pairing topic: ${e}`);throw new Error(t)}}async isValidSessionTopic(e){if(!Pu(e,!1)){const{message:t}=Iu("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(t)}if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){const{message:t}=Iu("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(t)}if(Ro(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:t}=Iu("EXPIRED",`session topic: ${e}`);throw new Error(t)}if(!this.client.core.crypto.keychain.has(e)){const{message:t}=Iu("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(t)}}async isValidSessionOrPairingTopic(e){if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else{if(!this.client.core.pairing.pairings.keys.includes(e)){if(Pu(e,!1)){const{message:t}=Iu("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(t)}{const{message:t}=Iu("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(t)}}this.isValidPairingTopic(e)}}async isValidProposalId(e){if(!function(e){return"number"==typeof e}(e)){const{message:t}=Iu("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(t)}if(!this.client.proposal.keys.includes(e)){const{message:t}=Iu("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(t)}if(Ro(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:t}=Iu("EXPIRED",`proposal id: ${e}`);throw new Error(t)}}}class Jg extends qf{constructor(e,t){super(e,t,"proposal",Ng),this.core=e,this.logger=t}}class Xg extends qf{constructor(e,t){super(e,t,"session",Ng),this.core=e,this.logger=t}}class Qg extends qf{constructor(e,t){super(e,t,"request",Ng,(e=>e.id)),this.core=e,this.logger=t}}class em extends qf{constructor(e,t){super(e,t,"authKeys",Dg,(()=>jg)),this.core=e,this.logger=t}}class tm extends qf{constructor(e,t){super(e,t,"pairingTopics",Dg),this.core=e,this.logger=t}}class rm extends qf{constructor(e,t){super(e,t,"requests",Dg,(e=>e.id)),this.core=e,this.logger=t}}var nm=Object.defineProperty,im=(e,t,r)=>((e,t,r)=>t in e?nm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class sm{constructor(e,t){this.core=e,this.logger=t,im(this,"authKeys"),im(this,"pairingTopics"),im(this,"requests"),this.authKeys=new em(this.core,this.logger),this.pairingTopics=new tm(this.core,this.logger),this.requests=new rm(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}var om=Object.defineProperty,am=(e,t,r)=>((e,t,r)=>t in e?om(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class cm extends Sg{constructor(e){super(e),am(this,"protocol","wc"),am(this,"version",2),am(this,"name",kg),am(this,"metadata"),am(this,"core"),am(this,"logger"),am(this,"events",new y.EventEmitter),am(this,"engine"),am(this,"session"),am(this,"proposal"),am(this,"pendingRequest"),am(this,"auth"),am(this,"signConfig"),am(this,"on",((e,t)=>this.events.on(e,t))),am(this,"once",((e,t)=>this.events.once(e,t))),am(this,"off",((e,t)=>this.events.off(e,t))),am(this,"removeListener",((e,t)=>this.events.removeListener(e,t))),am(this,"removeAllListeners",(e=>this.events.removeAllListeners(e))),am(this,"connect",(async e=>{try{return await this.engine.connect(e)}catch(e){throw this.logger.error(e.message),e}})),am(this,"pair",(async e=>{try{return await this.engine.pair(e)}catch(e){throw this.logger.error(e.message),e}})),am(this,"approve",(async e=>{try{return await this.engine.approve(e)}catch(e){throw this.logger.error(e.message),e}})),am(this,"reject",(async e=>{try{return await this.engine.reject(e)}catch(e){throw this.logger.error(e.message),e}})),am(this,"update",(async e=>{try{return await this.engine.update(e)}catch(e){throw this.logger.error(e.message),e}})),am(this,"extend",(async e=>{try{return await this.engine.extend(e)}catch(e){throw this.logger.error(e.message),e}})),am(this,"request",(async e=>{try{return await this.engine.request(e)}catch(e){throw this.logger.error(e.message),e}})),am(this,"respond",(async e=>{try{return await this.engine.respond(e)}catch(e){throw this.logger.error(e.message),e}})),am(this,"ping",(async e=>{try{return await this.engine.ping(e)}catch(e){throw this.logger.error(e.message),e}})),am(this,"emit",(async e=>{try{return await this.engine.emit(e)}catch(e){throw this.logger.error(e.message),e}})),am(this,"disconnect",(async e=>{try{return await this.engine.disconnect(e)}catch(e){throw this.logger.error(e.message),e}})),am(this,"find",(e=>{try{return this.engine.find(e)}catch(e){throw this.logger.error(e.message),e}})),am(this,"getPendingSessionRequests",(()=>{try{return this.engine.getPendingSessionRequests()}catch(e){throw this.logger.error(e.message),e}})),am(this,"authenticate",(async(e,t)=>{try{return await this.engine.authenticate(e,t)}catch(e){throw this.logger.error(e.message),e}})),am(this,"formatAuthMessage",(e=>{try{return this.engine.formatAuthMessage(e)}catch(e){throw this.logger.error(e.message),e}})),am(this,"approveSessionAuthenticate",(async e=>{try{return await this.engine.approveSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}})),am(this,"rejectSessionAuthenticate",(async e=>{try{return await this.engine.rejectSessionAuthenticate(e)}catch(e){throw this.logger.error(e.message),e}})),this.name=e?.name||kg,this.metadata=function(e){var t,r;const n=Ao();try{return null!=e&&e.url&&n.url&&e.url!==n.url&&(console.warn(`The configured WalletConnect 'metadata.url':${e.url} differs from the actual page url:${n.url}. This is probably unintended and can lead to issues.`),e.url=n.url),null!=(t=e?.icons)&&t.length&&e.icons.length>0&&(e.icons=e.icons.filter((e=>""!==e))),((e,t)=>ao(e,co(t)))(fo(fo({},n),e),{url:e?.url||n.url,name:e?.name||n.name,description:e?.description||n.description,icons:null!=(r=e?.icons)&&r.length&&e.icons.length>0?e.icons:n.icons})}catch(t){return console.warn("Error populating app metadata",t),e||n}}(e?.metadata),this.signConfig=e?.signConfig;const t=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:(0,te.h6)((0,te.iP)({level:e?.logger||"error"}));this.core=e?.core||new Eg(e),this.logger=(0,te.U5)(t,this.name),this.session=new Xg(this.core,this.logger),this.proposal=new Jg(this.core,this.logger),this.pendingRequest=new Qg(this.core,this.logger),this.engine=new Yg(this),this.auth=new sm(this.core,this.logger)}static async init(e){const t=new cm(e);return await t.initialize(),t}get context(){return(0,te.oI)(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.auth.init(),await this.engine.init(),this.logger.info("SignClient Initialization Success"),setTimeout((()=>{this.engine.processRelayMessageCache()}),(0,b.toMiliseconds)(b.ONE_SECOND))}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}var lm=r(1222),um=r.n(lm);function hm(e){return"string"==typeof e?e:(t=e,JSON.stringify(t,((e,t)=>"bigint"==typeof t?t.toString()+"n":t))||"");var t}var dm=Object.defineProperty,pm=Object.defineProperties,fm=Object.getOwnPropertyDescriptors,gm=Object.getOwnPropertySymbols,mm=Object.prototype.hasOwnProperty,ym=Object.prototype.propertyIsEnumerable,wm=(e,t,r)=>t in e?dm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,bm=(e,t)=>{for(var r in t||(t={}))mm.call(t,r)&&wm(e,r,t[r]);if(gm)for(var r of gm(t))ym.call(t,r)&&wm(e,r,t[r]);return e},vm=(e,t)=>pm(e,fm(t));const Em={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"};class _m{constructor(e,t=!1){if(this.url=e,this.disableProviderPing=t,this.events=new y.EventEmitter,this.isAvailable=!1,this.registering=!1,!ph(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=t}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}off(e,t){this.events.off(e,t)}removeListener(e,t){this.events.removeListener(e,t)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e){this.isAvailable||await this.register();try{const t=hm(e),r=await(await um()(this.url,vm(bm({},Em),{body:t}))).json();this.onPayload({data:r})}catch(t){this.onError(e.id,t)}}async register(e=this.url){if(!ph(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise(((e,t)=>{this.events.once("register_error",(e=>{this.resetMaxListeners(),t(e)})),this.events.once("open",(()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return t(new Error("HTTP connection is missing or invalid"));e()}))}))}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const t=hm({id:1,jsonrpc:"2.0",method:"test",params:[]});await um()(e,vm(bm({},Em),{body:t}))}this.onOpen()}catch(e){const t=this.parseError(e);throw this.events.emit("register_error",t),this.onClose(),t}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const t="string"==typeof e.data?function(e){if("string"!=typeof e)throw new Error("Cannot safe json parse value of type "+typeof e);try{return(e=>{const t=e.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3');return JSON.parse(t,((e,t)=>"string"==typeof t&&t.match(/^\d+n$/)?BigInt(t.substring(0,t.length-1)):t))})(e)}catch(t){return e}}(e.data):e.data;this.events.emit("payload",t)}onError(e,t){const r=this.parseError(t),n=ah(e,r.message||r.toString());this.events.emit("payload",n)}parseError(e,t=this.url){return th(e,t,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}}var Am=r(8287).Buffer;const Sm="error",Cm="wc@2:universal_provider:",Im="https://rpc.walletconnect.org/v1/",Nm="generic",km=`${Im}bundler`,Tm="default_chain_changed";function xm(){}function Pm(e){return null==e||"object"!=typeof e&&"function"!=typeof e}function Om(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Rm(e){return"object"==typeof e&&null!==e}function Mm(e){return Object.getOwnPropertySymbols(e).filter((t=>Object.prototype.propertyIsEnumerable.call(e,t)))}function Um(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Bm="[object String]",Lm="[object Number]",Dm="[object Boolean]",jm="[object Arguments]";function $m(e,t,r,n=new Map,i=void 0){const s=i?.(e,t,r,n);if(null!=s)return s;if(Pm(e))return e;if(n.has(e))return n.get(e);if(Array.isArray(e)){const t=new Array(e.length);n.set(e,t);for(let s=0;s<e.length;s++)t[s]=$m(e[s],s,r,n,i);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){const t=new Map;n.set(e,t);for(const[s,o]of e)t.set(s,$m(o,s,r,n,i));return t}if(e instanceof Set){const t=new Set;n.set(e,t);for(const s of e)t.add($m(s,void 0,r,n,i));return t}if(typeof Am<"u"&&Am.isBuffer(e))return e.subarray();if(Om(e)){const t=new(Object.getPrototypeOf(e).constructor)(e.length);n.set(e,t);for(let s=0;s<e.length;s++)t[s]=$m(e[s],s,r,n,i);return t}if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return n.set(e,t),Wm(t,e,r,n,i),t}if(typeof File<"u"&&e instanceof File){const t=new File([e],e.name,{type:e.type});return n.set(e,t),Wm(t,e,r,n,i),t}if(e instanceof Blob){const t=new Blob([e],{type:e.type});return n.set(e,t),Wm(t,e,r,n,i),t}if(e instanceof Error){const t=new e.constructor;return n.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,Wm(t,e,r,n,i),t}if("object"==typeof e&&function(e){switch(Um(e)){case jm:case"[object Array]":case"[object ArrayBuffer]":case"[object DataView]":case Dm:case"[object Date]":case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Map]":case Lm:case"[object Object]":case"[object RegExp]":case"[object Set]":case Bm:case"[object Symbol]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return!0;default:return!1}}(e)){const t=Object.create(Object.getPrototypeOf(e));return n.set(e,t),Wm(t,e,r,n,i),t}return e}function Wm(e,t,r=e,n,i){const s=[...Object.keys(t),...Mm(t)];for(let o=0;o<s.length;o++){const a=s[o],c=Object.getOwnPropertyDescriptor(e,a);(null==c||c.writable)&&(e[a]=$m(t[a],a,r,n,i))}}function zm(e){return function(e,t){return function(e,t){return $m(e,void 0,e,new Map,t)}(e,((r,n,i,s)=>{const o=t?.(r,n,i,s);if(null!=o)return o;if("object"==typeof e)switch(Object.prototype.toString.call(e)){case Lm:case Bm:case Dm:{const t=new e.constructor(e?.valueOf());return Wm(t,e),t}case jm:{const t={};return Wm(t,e),t.length=e.length,t[Symbol.iterator]=e[Symbol.iterator],t}default:return}}))}(e)}function qm(e){return null!==e&&"object"==typeof e&&"[object Arguments]"===Um(e)}function Hm(e){return Om(e)}function Fm(e){if("object"!=typeof e||null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){const t=e[Symbol.toStringTag];return!(null==t||!Object.getOwnPropertyDescriptor(e,Symbol.toStringTag)?.writable)&&e.toString()===`[object ${t}]`}let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Km(e,t,r,n){if(Pm(e)&&(e=Object(e)),null==t||"object"!=typeof t)return e;if(n.has(t))return function(e){if(Pm(e))return e;if(Array.isArray(e)||Om(e)||e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer)return e.slice(0);const t=Object.getPrototypeOf(e),r=t.constructor;if(e instanceof Date||e instanceof Map||e instanceof Set)return new r(e);if(e instanceof RegExp){const t=new r(e);return t.lastIndex=e.lastIndex,t}if(e instanceof DataView)return new r(e.buffer.slice(0));if(e instanceof Error){const t=new r(e.message);return t.stack=e.stack,t.name=e.name,t.cause=e.cause,t}if(typeof File<"u"&&e instanceof File)return new r([e],e.name,{type:e.type,lastModified:e.lastModified});if("object"==typeof e){const r=Object.create(t);return Object.assign(r,e)}return e}(n.get(t));if(n.set(t,e),Array.isArray(t)){t=t.slice();for(let e=0;e<t.length;e++)t[e]=t[e]??void 0}const i=[...Object.keys(t),...Mm(t)];for(let s=0;s<i.length;s++){const o=i[s];let a=t[o],c=e[o];if(qm(a)&&(a={...a}),qm(c)&&(c={...c}),typeof Am<"u"&&Am.isBuffer(a)&&(a=zm(a)),Array.isArray(a))if("object"==typeof c&&null!=c){const e=[],t=Reflect.ownKeys(c);for(let r=0;r<t.length;r++){const n=t[r];e[n]=c[n]}c=e}else c=[];const l=r(c,a,o,e,t,n);null!=l?e[o]=l:Array.isArray(a)||Rm(c)&&Rm(a)?e[o]=Km(c,a,r,n):null==c&&Fm(a)?e[o]=Km({},a,r,n):null==c&&Hm(a)?e[o]=zm(a):(void 0===c||void 0!==a)&&(e[o]=a)}return e}var Vm=Object.defineProperty,Gm=Object.defineProperties,Zm=Object.getOwnPropertyDescriptors,Ym=Object.getOwnPropertySymbols,Jm=Object.prototype.hasOwnProperty,Xm=Object.prototype.propertyIsEnumerable,Qm=(e,t,r)=>t in e?Vm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ey=(e,t)=>{for(var r in t||(t={}))Jm.call(t,r)&&Qm(e,r,t[r]);if(Ym)for(var r of Ym(t))Xm.call(t,r)&&Qm(e,r,t[r]);return e},ty=(e,t)=>Gm(e,Zm(t));function ry(e,t,r){var n;const i=io(e);return(null==(n=t.rpcMap)?void 0:n[i.reference])||`${Im}?chainId=${i.namespace}:${i.reference}&projectId=${r}`}function ny(e){return e.includes(":")?e.split(":")[1]:e}function iy(e){return e.map((e=>`${e.split(":")[0]}:${e.split(":")[1]}`))}function sy(e={},t={}){return function(e,...t){return function(e,...t){const r=t.slice(0,-1),n=t[t.length-1];let i=e;for(let e=0;e<r.length;e++)i=Km(i,r[e],n,new Map);return i}(e,...t,xm)}(oy(e),oy(t))}function oy(e){var t,r,n,i;const s={};if(!Tu(e))return s;for(const[o,a]of Object.entries(e)){const e=Eu(o)?[o]:a.chains,c=a.methods||[],l=a.events||[],u=a.rpcMap||{},h=_u(o);s[h]=ty(ey(ey({},s[h]),a),{chains:Uo(e,null==(t=s[h])?void 0:t.chains),methods:Uo(c,null==(r=s[h])?void 0:r.methods),events:Uo(l,null==(n=s[h])?void 0:n.events),rpcMap:ey(ey({},u),null==(i=s[h])?void 0:i.rpcMap)})}return s}function ay(e){return e.includes(":")?e.split(":")[2]:e}function cy(e){const t={};for(const[r,n]of Object.entries(e)){const e=n.methods||[],i=n.events||[],s=n.accounts||[],o=Eu(r)?[r]:n.chains?n.chains:iy(n.accounts);t[r]={chains:o,methods:e,events:i,accounts:s}}return t}function ly(e){return"number"==typeof e?e:e.includes("0x")?parseInt(e,16):(e=e.includes(":")?e.split(":")[1]:e,isNaN(Number(e))?e:Number(e))}const uy={},hy=e=>uy[e],dy=(e,t)=>{uy[e]=t};var py=Object.defineProperty,fy=(e,t,r)=>((e,t,r)=>t in e?py(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class gy{constructor(e){fy(this,"name","polkadot"),fy(this,"client"),fy(this,"httpProviders"),fy(this,"events"),fy(this,"namespace"),fy(this,"chainId"),this.namespace=e.namespace,this.events=hy("events"),this.client=hy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Tm,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e&&e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2]))||[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const n=ny(t);e[n]=this.createHttpProvider(n,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||ry(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new vh(new _m(r,hy("disableProviderPing")))}}var my=Object.defineProperty,yy=Object.defineProperties,wy=Object.getOwnPropertyDescriptors,by=Object.getOwnPropertySymbols,vy=Object.prototype.hasOwnProperty,Ey=Object.prototype.propertyIsEnumerable,_y=(e,t,r)=>t in e?my(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ay=(e,t)=>{for(var r in t||(t={}))vy.call(t,r)&&_y(e,r,t[r]);if(by)for(var r of by(t))Ey.call(t,r)&&_y(e,r,t[r]);return e},Sy=(e,t)=>yy(e,wy(t)),Cy=(e,t,r)=>_y(e,"symbol"!=typeof t?t+"":t,r);class Iy{constructor(e){Cy(this,"name","eip155"),Cy(this,"client"),Cy(this,"chainId"),Cy(this,"namespace"),Cy(this,"httpProviders"),Cy(this,"events"),this.namespace=e.namespace,this.events=hy("events"),this.client=hy("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(e);case"wallet_getCallsStatus":return await this.getCallStatus(e)}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(parseInt(e),t),this.chainId=parseInt(e),this.events.emit(Tm,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,t){const r=t||ry(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new vh(new _m(r,hy("disableProviderPing")))}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const n=parseInt(ny(t));e[n]=this.createHttpProvider(n,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}getHttpProvider(){const e=this.chainId,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}async handleSwitchChain(e){var t,r;let n=e.request.params?null==(t=e.request.params[0])?void 0:t.chainId:"0x0";n=n.startsWith("0x")?n:`0x${n}`;const i=parseInt(n,16);if(this.isChainApproved(i))this.setDefaultChain(`${i}`);else{if(!this.namespace.methods.includes("wallet_switchEthereumChain"))throw new Error(`Failed to switch to chain 'eip155:${i}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:n}]},chainId:null==(r=this.namespace.chains)?void 0:r[0]}),this.setDefaultChain(`${i}`)}return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}async getCapabilities(e){var t,r,n;const i=null==(r=null==(t=e.request)?void 0:t.params)?void 0:r[0];if(!i)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const s=this.client.session.get(e.topic),o=(null==(n=s?.sessionProperties)?void 0:n.capabilities)||{};if(null!=o&&o[i])return o?.[i];const a=await this.client.request(e);try{await this.client.session.update(e.topic,{sessionProperties:Sy(Ay({},s.sessionProperties||{}),{capabilities:Sy(Ay({},o||{}),{[i]:a})})})}catch(e){console.warn("Failed to update session with capabilities",e)}return a}async getCallStatus(e){var t,r;const n=this.client.session.get(e.topic),i=null==(t=n.sessionProperties)?void 0:t.bundler_name;if(i){const t=this.getBundlerUrl(e.chainId,i);try{return await this.getUserOperationReceipt(t,e)}catch(e){console.warn("Failed to fetch call status from bundler",e,t)}}const s=null==(r=n.sessionProperties)?void 0:r.bundler_url;if(s)try{return await this.getUserOperationReceipt(s,e)}catch(e){console.warn("Failed to fetch call status from custom bundler",e,s)}if(this.namespace.methods.includes(e.request.method))return await this.client.request(e);throw new Error("Fetching call status not approved by the wallet.")}async getUserOperationReceipt(e,t){var r;const n=new URL(e),i=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(sh("eth_getUserOperationReceipt",[null==(r=t.request.params)?void 0:r[0]]))});if(!i.ok)throw new Error(`Failed to fetch user operation receipt - ${i.status}`);return await i.json()}getBundlerUrl(e,t){return`${km}?projectId=${this.client.core.projectId}&chainId=${e}&bundler=${t}`}}var Ny=Object.defineProperty,ky=(e,t,r)=>((e,t,r)=>t in e?Ny(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Ty{constructor(e){ky(this,"name","solana"),ky(this,"client"),ky(this,"httpProviders"),ky(this,"events"),ky(this,"namespace"),ky(this,"chainId"),this.namespace=e.namespace,this.events=hy("events"),this.client=hy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Tm,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const n=ny(t);e[n]=this.createHttpProvider(n,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||ry(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new vh(new _m(r,hy("disableProviderPing")))}}var xy=Object.defineProperty,Py=(e,t,r)=>((e,t,r)=>t in e?xy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Oy{constructor(e){Py(this,"name","cosmos"),Py(this,"client"),Py(this,"httpProviders"),Py(this,"events"),Py(this,"namespace"),Py(this,"chainId"),this.namespace=e.namespace,this.events=hy("events"),this.client=hy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Tm,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const n=ny(t);e[n]=this.createHttpProvider(n,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||ry(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new vh(new _m(r,hy("disableProviderPing")))}}var Ry=Object.defineProperty,My=(e,t,r)=>((e,t,r)=>t in e?Ry(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Uy{constructor(e){My(this,"name","algorand"),My(this,"client"),My(this,"httpProviders"),My(this,"events"),My(this,"namespace"),My(this,"chainId"),this.namespace=e.namespace,this.events=hy("events"),this.client=hy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(!this.httpProviders[e]){const r=t||ry(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.chainId=e,this.events.emit(Tm,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;e[t]=this.createHttpProvider(t,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||ry(e,this.namespace,this.client.core.projectId);return typeof r>"u"?void 0:new vh(new _m(r,hy("disableProviderPing")))}}var By=Object.defineProperty,Ly=(e,t,r)=>((e,t,r)=>t in e?By(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Dy{constructor(e){Ly(this,"name","cip34"),Ly(this,"client"),Ly(this,"httpProviders"),Ly(this,"events"),Ly(this,"namespace"),Ly(this,"chainId"),this.namespace=e.namespace,this.events=hy("events"),this.client=hy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Tm,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{const r=this.getCardanoRPCUrl(t),n=ny(t);e[n]=this.createHttpProvider(n,r)})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}getCardanoRPCUrl(e){const t=this.namespace.rpcMap;if(t)return t[e]}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||this.getCardanoRPCUrl(e);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new vh(new _m(r,hy("disableProviderPing")))}}var jy=Object.defineProperty,$y=(e,t,r)=>((e,t,r)=>t in e?jy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Wy{constructor(e){$y(this,"name","elrond"),$y(this,"client"),$y(this,"httpProviders"),$y(this,"events"),$y(this,"namespace"),$y(this,"chainId"),this.namespace=e.namespace,this.events=hy("events"),this.client=hy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Tm,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const n=ny(t);e[n]=this.createHttpProvider(n,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||ry(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new vh(new _m(r,hy("disableProviderPing")))}}var zy=Object.defineProperty,qy=(e,t,r)=>((e,t,r)=>t in e?zy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Hy{constructor(e){qy(this,"name","multiversx"),qy(this,"client"),qy(this,"httpProviders"),qy(this,"events"),qy(this,"namespace"),qy(this,"chainId"),this.namespace=e.namespace,this.events=hy("events"),this.client=hy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Tm,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;const n=ny(t);e[n]=this.createHttpProvider(n,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||ry(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new vh(new _m(r,hy("disableProviderPing")))}}var Fy=Object.defineProperty,Ky=(e,t,r)=>((e,t,r)=>t in e?Fy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Vy{constructor(e){Ky(this,"name","near"),Ky(this,"client"),Ky(this,"httpProviders"),Ky(this,"events"),Ky(this,"namespace"),Ky(this,"chainId"),this.namespace=e.namespace,this.events=hy("events"),this.client=hy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const r=t||ry(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Tm,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e&&e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2]))||[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{var r;e[t]=this.createHttpProvider(t,null==(r=this.namespace.rpcMap)?void 0:r[t])})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||ry(e,this.namespace);return typeof r>"u"?void 0:new vh(new _m(r,hy("disableProviderPing")))}}var Gy=Object.defineProperty,Zy=(e,t,r)=>((e,t,r)=>t in e?Gy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Yy{constructor(e){Zy(this,"name","tezos"),Zy(this,"client"),Zy(this,"httpProviders"),Zy(this,"events"),Zy(this,"namespace"),Zy(this,"chainId"),this.namespace=e.namespace,this.events=hy("events"),this.client=hy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,t){if(this.chainId=e,!this.httpProviders[e]){const r=t||ry(`${this.name}:${e}`,this.namespace);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,r)}this.events.emit(Tm,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e&&e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2]))||[]}createHttpProviders(){const e={};return this.namespace.chains.forEach((t=>{e[t]=this.createHttpProvider(t)})),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||ry(e,this.namespace);return typeof r>"u"?void 0:new vh(new _m(r))}}var Jy=Object.defineProperty,Xy=(e,t,r)=>((e,t,r)=>t in e?Jy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r)(e,"symbol"!=typeof t?t+"":t,r);class Qy{constructor(e){Xy(this,"name",Nm),Xy(this,"client"),Xy(this,"httpProviders"),Xy(this,"events"),Xy(this,"namespace"),Xy(this,"chainId"),this.namespace=e.namespace,this.events=hy("events"),this.client=hy("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(e.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(e.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(e.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(e.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider(e.chainId).request(e.request)}setDefaultChain(e,t){this.httpProviders[e]||this.setHttpProvider(e,t),this.chainId=e,this.events.emit(Tm,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter((e=>e.split(":")[1]===this.chainId.toString())).map((e=>e.split(":")[2])))]:[]}createHttpProviders(){var e,t;const r={};return null==(t=null==(e=this.namespace)?void 0:e.accounts)||t.forEach((e=>{const t=io(e);r[`${t.namespace}:${t.reference}`]=this.createHttpProvider(e)})),r}getHttpProvider(e){const t=this.httpProviders[e];if(typeof t>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return t}setHttpProvider(e,t){const r=this.createHttpProvider(e,t);r&&(this.httpProviders[e]=r)}createHttpProvider(e,t){const r=t||ry(e,this.namespace,this.client.core.projectId);if(!r)throw new Error(`No RPC url provided for chainId: ${e}`);return new vh(new _m(r,hy("disableProviderPing")))}}var ew=Object.defineProperty,tw=Object.defineProperties,rw=Object.getOwnPropertyDescriptors,nw=Object.getOwnPropertySymbols,iw=Object.prototype.hasOwnProperty,sw=Object.prototype.propertyIsEnumerable,ow=(e,t,r)=>t in e?ew(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,aw=(e,t)=>{for(var r in t||(t={}))iw.call(t,r)&&ow(e,r,t[r]);if(nw)for(var r of nw(t))sw.call(t,r)&&ow(e,r,t[r]);return e},cw=(e,t)=>tw(e,rw(t)),lw=(e,t,r)=>ow(e,"symbol"!=typeof t?t+"":t,r);class uw{constructor(e){lw(this,"client"),lw(this,"namespaces"),lw(this,"optionalNamespaces"),lw(this,"sessionProperties"),lw(this,"scopedProperties"),lw(this,"events",new(w())),lw(this,"rpcProviders",{}),lw(this,"session"),lw(this,"providerOpts"),lw(this,"logger"),lw(this,"uri"),lw(this,"disableProviderPing",!1),this.providerOpts=e,this.logger=typeof e?.logger<"u"&&"string"!=typeof e?.logger?e.logger:(0,te.h6)((0,te.iP)({level:e?.logger||Sm})),this.disableProviderPing=e?.disableProviderPing||!1}static async init(e){const t=new uw(e);return await t.initialize(),t}async request(e,t,r){const[n,i]=this.validateChain(t);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(n).request({request:aw({},e),chainId:`${n}:${i}`,topic:this.session.topic,expiry:r})}sendAsync(e,t,r,n){const i=(new Date).getTime();this.request(e,r,n).then((e=>t(null,oh(i,e)))).catch((e=>t(e,void 0)))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:null==(e=this.session)?void 0:e.topic,reason:Nu("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}async authenticate(e,t){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(e),await this.cleanupPendingPairings();const{uri:r,response:n}=await this.client.authenticate(e,t);r&&(this.uri=r,this.events.emit("display_uri",r));const i=await n();if(this.session=i.session,this.session){const e=cy(this.session.namespaces);this.namespaces=sy(this.namespaces,e),await this.persist("namespaces",this.namespaces),this.onConnect()}return i}on(e,t){this.events.on(e,t)}once(e,t){this.events.once(e,t)}removeListener(e,t){this.events.removeListener(e,t)}off(e,t){this.events.off(e,t)}get isWalletConnect(){return!0}async pair(e){const{uri:t,approval:r}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties,scopedProperties:this.scopedProperties});t&&(this.uri=t,this.events.emit("display_uri",t));const n=await r();this.session=n;const i=cy(n.namespaces);return this.namespaces=sy(this.namespaces,i),await this.persist("namespaces",this.namespaces),await this.persist("optionalNamespaces",this.optionalNamespaces),this.onConnect(),this.session}setDefaultChain(e,t){try{if(!this.session)return;const[r,n]=this.validateChain(e),i=this.getProvider(r);i.name===Nm?i.setDefaultChain(`${r}:${n}`,t):i.setDefaultChain(n,t)}catch(e){if(!/Please call connect/.test(e.message))throw e}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const t=this.client.pairing.getAll();if(ku(t)){for(const r of t)e.deletePairings?this.client.core.expirer.set(r.topic,0):await this.client.core.relayer.subscriber.unsubscribe(r.topic);this.logger.info(`Inactive pairings cleared: ${t.length}`)}}abortPairingAttempt(){this.logger.warn("abortPairingAttempt is deprecated. This is now a no-op.")}async checkStorage(){this.namespaces=await this.getFromStore("namespaces")||{},this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.session&&this.createProviders()}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){var e,t;if(this.client=this.providerOpts.client||await cm.init({core:this.providerOpts.core,logger:this.providerOpts.logger||Sm,relayUrl:this.providerOpts.relayUrl||"wss://relay.walletconnect.org",projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.providerOpts.session)try{this.session=this.client.session.get(this.providerOpts.session.topic)}catch(r){throw this.logger.error("Failed to get session",r),new Error(`The provided session: ${null==(t=null==(e=this.providerOpts)?void 0:e.session)?void 0:t.topic} doesn't exist in the Sign client`)}else{const e=this.client.session.getAll();this.session=e[0]}this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map((e=>_u(e))))];dy("client",this.client),dy("events",this.events),dy("disableProviderPing",this.disableProviderPing),e.forEach((e=>{if(!this.session)return;const t=function(e,t){const r=Object.keys(t.namespaces).filter((t=>t.includes(e)));if(!r.length)return[];const n=[];return r.forEach((e=>{const r=t.namespaces[e].accounts;n.push(...r)})),n}(e,this.session),r=iy(t),n=sy(this.namespaces,this.optionalNamespaces),i=cw(aw({},n[e]),{accounts:t,chains:r});switch(e){case"eip155":this.rpcProviders[e]=new Iy({namespace:i});break;case"algorand":this.rpcProviders[e]=new Uy({namespace:i});break;case"solana":this.rpcProviders[e]=new Ty({namespace:i});break;case"cosmos":this.rpcProviders[e]=new Oy({namespace:i});break;case"polkadot":this.rpcProviders[e]=new gy({namespace:i});break;case"cip34":this.rpcProviders[e]=new Dy({namespace:i});break;case"elrond":this.rpcProviders[e]=new Wy({namespace:i});break;case"multiversx":this.rpcProviders[e]=new Hy({namespace:i});break;case"near":this.rpcProviders[e]=new Vy({namespace:i});break;case"tezos":this.rpcProviders[e]=new Yy({namespace:i});break;default:this.rpcProviders[Nm]?this.rpcProviders[Nm].updateNamespace(i):this.rpcProviders[Nm]=new Qy({namespace:i})}}))}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",(e=>{var t;const{topic:r}=e;r===(null==(t=this.session)?void 0:t.topic)&&this.events.emit("session_ping",e)})),this.client.on("session_event",(e=>{var t;const{params:r,topic:n}=e;if(n!==(null==(t=this.session)?void 0:t.topic))return;const{event:i}=r;if("accountsChanged"===i.name){const e=i.data;e&&ku(e)&&this.events.emit("accountsChanged",e.map(ay))}else if("chainChanged"===i.name){const e=r.chainId,t=r.event.data,n=_u(e),i=ly(e)!==ly(t)?`${n}:${ly(t)}`:e;this.onChainChanged(i)}else this.events.emit(i.name,i.data);this.events.emit("session_event",e)})),this.client.on("session_update",(({topic:e,params:t})=>{var r,n;if(e!==(null==(r=this.session)?void 0:r.topic))return;const{namespaces:i}=t,s=null==(n=this.client)?void 0:n.session.get(e);this.session=cw(aw({},s),{namespaces:i}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:t})})),this.client.on("session_delete",(async e=>{var t;e.topic===(null==(t=this.session)?void 0:t.topic)&&(await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",cw(aw({},Nu("USER_DISCONNECTED")),{data:e.topic})))})),this.on(Tm,(e=>{this.onChainChanged(e,!0)}))}getProvider(e){return this.rpcProviders[e]||this.rpcProviders[Nm]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach((e=>{var t;this.getProvider(e).updateNamespace(null==(t=this.session)?void 0:t.namespaces[e])}))}setNamespaces(e){const{namespaces:t,optionalNamespaces:r,sessionProperties:n,scopedProperties:i}=e;t&&Object.keys(t).length&&(this.namespaces=t),r&&Object.keys(r).length&&(this.optionalNamespaces=r),this.sessionProperties=n,this.scopedProperties=i}validateChain(e){const[t,r]=e?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[t,r];if(t&&!Object.keys(this.namespaces||{}).map((e=>_u(e))).includes(t))throw new Error(`Namespace '${t}' is not configured. Please call connect() first with namespace config.`);if(t&&r)return[t,r];const n=_u(Object.keys(this.namespaces)[0]);return[n,this.rpcProviders[n].getDefaultChain()]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}async onChainChanged(e,t=!1){if(!this.namespaces)return;const[r,n]=this.validateChain(e);if(!n)return;this.updateNamespaceChain(r,n),this.events.emit("chainChanged",n);const i=this.getProvider(r).getDefaultChain();t||this.getProvider(r).setDefaultChain(n),this.emitAccountsChangedOnChainChange({namespace:r,previousChainId:i,newChainId:e}),await this.persist("namespaces",this.namespaces)}emitAccountsChangedOnChainChange({namespace:e,previousChainId:t,newChainId:r}){var n,i;try{if(t===r)return;const s=null==(i=null==(n=this.session)?void 0:n.namespaces[e])?void 0:i.accounts;if(!s)return;const o=s.filter((e=>e.includes(`${r}:`))).map(ay);if(!ku(o))return;this.events.emit("accountsChanged",o)}catch(e){this.logger.warn("Failed to emit accountsChanged on chain change",e)}}updateNamespaceChain(e,t){if(!this.namespaces)return;const r=this.namespaces[e]?e:`${e}:${t}`,n={chains:[],methods:[],events:[],defaultChain:t};this.namespaces[r]?this.namespaces[r]&&(this.namespaces[r].defaultChain=t):this.namespaces[r]=n}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,await this.deleteFromStore("namespaces"),await this.deleteFromStore("optionalNamespaces"),await this.deleteFromStore("sessionProperties"),this.session=void 0,await this.cleanupPendingPairings({deletePairings:!0}),await this.cleanupStorage()}async persist(e,t){var r;const n=(null==(r=this.session)?void 0:r.topic)||"";await this.client.core.storage.setItem(`${Cm}/${e}${n}`,t)}async getFromStore(e){var t;const r=(null==(t=this.session)?void 0:t.topic)||"";return await this.client.core.storage.getItem(`${Cm}/${e}${r}`)}async deleteFromStore(e){var t;const r=(null==(t=this.session)?void 0:t.topic)||"";await this.client.core.storage.removeItem(`${Cm}/${e}${r}`)}async cleanupStorage(){var e;try{if((null==(e=this.client)?void 0:e.session.length)>0)return;const t=await this.client.core.storage.getKeys();for(const e of t)e.startsWith(Cm)&&await this.client.core.storage.removeItem(e)}catch(e){this.logger.warn("Failed to cleanup storage",e)}}}},7388:(e,t,r)=>{r.d(t,{W:()=>A});var n=r(9073),i=r(4707),s=r(3495),o=r(4376),a=r(9088);function c(e,t){return a.a.getConnectorId(e)===t}var l=r(2944),u=r(6742),h=r(7508),d=r(3450),p=r(9177),f=r(184),g=r(6396),m=r(2733),y=r(8467),w=r(8508),b=r(4092);const v={currentTab:0,tokenBalance:[],smartAccountDeployed:!1,addressLabels:new Map,allAccounts:[],user:void 0},E={caipNetwork:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]},_=(0,n.BX)({chains:(0,i.zC)(),activeCaipAddress:void 0,activeChain:void 0,activeCaipNetwork:void 0,noAdapters:!1,universalAdapter:{networkControllerClient:void 0,connectionControllerClient:void 0},isSwitchingNamespace:!1}),A={state:_,subscribe:e=>(0,n.B1)(_,(()=>{e(_)})),subscribeKey:(e,t)=>(0,i.u$)(_,e,t),subscribeChainProp(e,t,r){let i;return(0,n.B1)(_.chains,(()=>{const n=r||_.activeChain;if(n){const r=_.chains.get(n)?.[e];i!==r&&(i=r,t(r))}}))},initialize(e,t,r){const{chainId:i,namespace:s}=h.i.getActiveNetworkProps(),o=t?.find((e=>e.id.toString()===i?.toString())),a=e.find((e=>e?.namespace===s))||e?.[0],c=new Set([...t?.map((e=>e.chainNamespace))??[]]);0!==e?.length&&a||(_.noAdapters=!0),_.noAdapters||(_.activeChain=a?.namespace,_.activeCaipNetwork=o,this.setChainNetworkData(a?.namespace,{caipNetwork:o}),_.activeChain&&y.z.set({activeChain:a?.namespace})),c.forEach((e=>{const i=t?.filter((t=>t.chainNamespace===e));A.state.chains.set(e,{namespace:e,networkState:(0,n.BX)({...E,caipNetwork:i?.[0]}),accountState:(0,n.BX)(v),caipNetworks:i??[],...r}),this.setRequestedCaipNetworks(i??[],e)}))},removeAdapter(e){if(_.activeChain===e){const t=Array.from(_.chains.entries()).find((([t])=>t!==e));if(t){const e=t[1]?.caipNetworks?.[0];e&&this.setActiveCaipNetwork(e)}}_.chains.delete(e)},addAdapter(e,{networkControllerClient:t,connectionControllerClient:r},n){_.chains.set(e.namespace,{namespace:e.namespace,networkState:{...E,caipNetwork:n[0]},accountState:v,caipNetworks:n,connectionControllerClient:r,networkControllerClient:t}),this.setRequestedCaipNetworks(n?.filter((t=>t.chainNamespace===e.namespace))??[],e.namespace)},addNetwork(e){const t=_.chains.get(e.chainNamespace);if(t){const r=[...t.caipNetworks||[]];t.caipNetworks?.find((t=>t.id===e.id))||r.push(e),_.chains.set(e.chainNamespace,{...t,caipNetworks:r}),this.setRequestedCaipNetworks(r,e.chainNamespace)}},removeNetwork(e,t){const r=_.chains.get(e);if(r){const n=_.activeCaipNetwork?.id===t,i=[...r.caipNetworks?.filter((e=>e.id!==t))||[]];n&&r?.caipNetworks?.[0]&&this.setActiveCaipNetwork(r.caipNetworks[0]),_.chains.set(e,{...r,caipNetworks:i}),this.setRequestedCaipNetworks(i||[],e)}},setAdapterNetworkState(e,t){const r=_.chains.get(e);r&&(r.networkState={...r.networkState||E,...t},_.chains.set(e,r))},setChainAccountData(e,t,r=!0){if(!e)throw new Error("Chain is required to update chain account data");const n=_.chains.get(e);if(n){const r={...n.accountState||v,...t};_.chains.set(e,{...n,accountState:r}),1!==_.chains.size&&_.activeChain!==e||(t.caipAddress&&(_.activeCaipAddress=t.caipAddress),d.U.replaceState(r))}},setChainNetworkData(e,t){if(!e)return;const r=_.chains.get(e);if(r){const n={...r.networkState||E,...t};_.chains.set(e,{...r,networkState:n})}},setAccountProp(e,t,r,n=!0){this.setChainAccountData(r,{[e]:t},n),"status"===e&&"disconnected"===t&&r&&a.a.removeConnectorId(r)},setActiveNamespace(e){_.activeChain=e;const t=e?_.chains.get(e):void 0,r=t?.networkState?.caipNetwork;r?.id&&e&&(_.activeCaipAddress=t?.accountState?.caipAddress,_.activeCaipNetwork=r,this.setChainNetworkData(e,{caipNetwork:r}),h.i.setActiveCaipNetworkId(r?.caipNetworkId),y.z.set({activeChain:e,selectedNetworkId:r?.caipNetworkId}))},setActiveCaipNetwork(e){if(!e)return;_.activeChain!==e.chainNamespace&&this.setIsSwitchingNamespace(!0);const t=_.chains.get(e.chainNamespace);_.activeChain=e.chainNamespace,_.activeCaipNetwork=e,this.setChainNetworkData(e.chainNamespace,{caipNetwork:e}),_.activeCaipAddress=t?.accountState?.address?`${e.chainNamespace}:${e.id}:${t?.accountState?.address}`:void 0,this.setAccountProp("caipAddress",_.activeCaipAddress,e.chainNamespace),t&&d.U.replaceState(t.accountState),b.R.resetSend(),y.z.set({activeChain:_.activeChain,selectedNetworkId:_.activeCaipNetwork?.caipNetworkId}),h.i.setActiveCaipNetworkId(e.caipNetworkId),this.checkIfSupportedNetwork(e.chainNamespace)||!m.H.state.enableNetworkSwitch||m.H.state.allowUnsupportedChain||p.x.state.wcBasic||this.showUnsupportedChainUI()},addCaipNetwork(e){if(!e)return;const t=_.chains.get(e.chainNamespace);t&&t?.caipNetworks?.push(e)},async switchActiveNamespace(e){if(!e)return;const t=e!==A.state.activeChain,r=A.getNetworkData(e)?.caipNetwork,n=A.getCaipNetworkByNamespace(e,r?.id);t&&n&&await A.switchActiveNetwork(n)},async switchActiveNetwork(e){const t=A.state.chains.get(A.state.activeChain);!t?.caipNetworks?.some((e=>e.id===_.activeCaipNetwork?.id))&&w.I.goBack();const r=this.getNetworkControllerClient(e.chainNamespace);r&&(await r.switchCaipNetwork(e),f.E.sendEvent({type:"track",event:"SWITCH_NETWORK",properties:{network:e.caipNetworkId}}))},getNetworkControllerClient(e){const t=e||_.activeChain,r=_.chains.get(t);if(!r)throw new Error("Chain adapter not found");if(!r.networkControllerClient)throw new Error("NetworkController client not set");return r.networkControllerClient},getConnectionControllerClient(e){const t=e||_.activeChain;if(!t)throw new Error("Chain is required to get connection controller client");const r=_.chains.get(t);if(!r?.connectionControllerClient)throw new Error("ConnectionController client not set");return r.connectionControllerClient},getAccountProp(e,t){let r=_.activeChain;if(t&&(r=t),!r)return;const n=_.chains.get(r)?.accountState;return n?n[e]:void 0},getNetworkProp(e,t){const r=_.chains.get(t)?.networkState;if(r)return r[e]},getRequestedCaipNetworks(e){const t=_.chains.get(e),{approvedCaipNetworkIds:r=[],requestedCaipNetworks:n=[]}=t?.networkState||{};return u.w.sortRequestedNetworks(r,n)},getAllRequestedCaipNetworks(){const e=[];return _.chains.forEach((t=>{const r=this.getRequestedCaipNetworks(t.namespace);e.push(...r)})),e},setRequestedCaipNetworks(e,t){this.setAdapterNetworkState(t,{requestedCaipNetworks:e})},getAllApprovedCaipNetworkIds(){const e=[];return _.chains.forEach((t=>{const r=this.getApprovedCaipNetworkIds(t.namespace);e.push(...r)})),e},getActiveCaipNetwork:()=>_.activeCaipNetwork,getActiveCaipAddress:()=>_.activeCaipAddress,getApprovedCaipNetworkIds(e){const t=_.chains.get(e);return t?.networkState?.approvedCaipNetworkIds||[]},async setApprovedCaipNetworksData(e){const t=this.getNetworkControllerClient(),r=await(t?.getApprovedCaipNetworksData());this.setAdapterNetworkState(e,{approvedCaipNetworkIds:r?.approvedCaipNetworkIds,supportsAllNetworks:r?.supportsAllNetworks})},checkIfSupportedNetwork(e,t){const r=t||_.activeCaipNetwork,n=this.getRequestedCaipNetworks(e);return!n.length||n?.some((e=>e.id===r?.id))},checkIfSupportedChainId(e){if(!_.activeChain)return!0;const t=this.getRequestedCaipNetworks(_.activeChain);return t?.some((t=>t.id===e))},setSmartAccountEnabledNetworks(e,t){this.setAdapterNetworkState(t,{smartAccountEnabledNetworks:e})},checkIfSmartAccountEnabled(){const e=s.L.caipNetworkIdToNumber(_.activeCaipNetwork?.caipNetworkId),t=_.activeChain;if(!t||!e)return!1;const r=this.getNetworkProp("smartAccountEnabledNetworks",t);return Boolean(r?.includes(Number(e)))},getActiveNetworkTokenAddress(){const e=_.activeCaipNetwork?.chainNamespace||"eip155";return`${e}:${_.activeCaipNetwork?.id||1}:${l.oU.NATIVE_TOKEN_ADDRESS[e]}`},showUnsupportedChainUI(){g.W.open({view:"UnsupportedChain"})},checkIfNamesSupported(){const e=_.activeCaipNetwork;return Boolean(e?.chainNamespace&&l.oU.NAMES_SUPPORTED_CHAIN_NAMESPACES.includes(e.chainNamespace))},resetNetwork(e){this.setAdapterNetworkState(e,{approvedCaipNetworkIds:void 0,supportsAllNetworks:!0,smartAccountEnabledNetworks:[]})},resetAccount(e){const t=e;if(!t)throw new Error("Chain is required to set account prop");_.activeCaipAddress=void 0,this.setChainAccountData(t,{smartAccountDeployed:!1,currentTab:0,caipAddress:void 0,address:void 0,balance:void 0,balanceSymbol:void 0,profileName:void 0,profileImage:void 0,addressExplorerUrl:void 0,tokenBalance:[],connectedWalletInfo:void 0,preferredAccountTypes:void 0,socialProvider:void 0,socialWindow:void 0,farcasterUrl:void 0,allAccounts:[],user:void 0,status:"disconnected"}),a.a.removeConnectorId(t)},async disconnect(e){const t=function(e){const t=Array.from(A.state.chains.keys());let r=[];return e?(r.push([e,A.state.chains.get(e)]),c(e,o.o.CONNECTOR_ID.WALLET_CONNECT)?t.forEach((t=>{t!==e&&c(t,o.o.CONNECTOR_ID.WALLET_CONNECT)&&r.push([t,A.state.chains.get(t)])})):c(e,o.o.CONNECTOR_ID.AUTH)&&t.forEach((t=>{t!==e&&c(t,o.o.CONNECTOR_ID.AUTH)&&r.push([t,A.state.chains.get(t)])}))):r=Array.from(A.state.chains.entries()),r}(e);try{b.R.resetSend();const r=await Promise.allSettled(t.map((async([e,t])=>{try{const{caipAddress:r}=this.getAccountData(e)||{};r&&t.connectionControllerClient?.disconnect&&await t.connectionControllerClient.disconnect(e),this.resetAccount(e),this.resetNetwork(e)}catch(t){throw new Error(`Failed to disconnect chain ${e}: ${t.message}`)}})));p.x.resetWcConnection();const n=r.filter((e=>"rejected"===e.status));if(n.length>0)throw new Error(n.map((e=>e.reason.message)).join(", "));h.i.deleteConnectedSocialProvider(),e?a.a.removeConnectorId(e):a.a.resetConnectorIds(),f.E.sendEvent({type:"track",event:"DISCONNECT_SUCCESS",properties:{namespace:e||"all"}})}catch(e){console.error(e.message||"Failed to disconnect chains"),f.E.sendEvent({type:"track",event:"DISCONNECT_ERROR",properties:{message:e.message||"Failed to disconnect chains"}})}},setIsSwitchingNamespace(e){_.isSwitchingNamespace=e},getFirstCaipNetworkSupportsAuthConnector(){const e=[];let t;if(_.chains.forEach((t=>{o.o.AUTH_CONNECTOR_SUPPORTED_CHAINS.find((e=>e===t.namespace))&&t.namespace&&e.push(t.namespace)})),e.length>0){const r=e[0];return t=r?_.chains.get(r)?.caipNetworks?.[0]:void 0,t}},getAccountData:e=>e?A.state.chains.get(e)?.accountState:d.U.state,getNetworkData(e){const t=e||_.activeChain;if(t)return A.state.chains.get(t)?.networkState},getCaipNetworkByNamespace(e,t){if(!e)return;const r=A.state.chains.get(e),n=r?.caipNetworks?.find((e=>e.id===t));return n||r?.networkState?.caipNetwork||r?.caipNetworks?.[0]},getRequestedCaipNetworkIds(){const e=a.a.state.filterByNamespace;return(e?[_.chains.get(e)]:Array.from(_.chains.values())).flatMap((e=>e?.caipNetworks||[])).map((e=>e.caipNetworkId))},getCaipNetworks:e=>e?A.getRequestedCaipNetworks(e):A.getAllRequestedCaipNetworks()}},7499:(e,t)=>{function r(e){let t;return"undefined"!=typeof window&&void 0!==window[e]&&(t=window[e]),t}t.YE=void 0,t.YE=function(){return r("document")}},7508:(e,t,r)=>{r.d(t,{i:()=>i});var n=r(6036);const i={cacheExpiry:{portfolio:3e4,nativeBalance:3e4,ens:3e5,identity:3e5},isCacheExpired:(e,t)=>Date.now()-e>t,getActiveNetworkProps(){const e=i.getActiveNamespace(),t=i.getActiveCaipNetworkId(),r=t?t.split(":")[1]:void 0;return{namespace:e,caipNetworkId:t,chainId:r?isNaN(Number(r))?r:Number(r):void 0}},setWalletConnectDeepLink({name:e,href:t}){try{n.Ud.setItem(n.Ws.DEEPLINK_CHOICE,JSON.stringify({href:t,name:e}))}catch{console.info("Unable to set WalletConnect deep link")}},getWalletConnectDeepLink(){try{const e=n.Ud.getItem(n.Ws.DEEPLINK_CHOICE);if(e)return JSON.parse(e)}catch{console.info("Unable to get WalletConnect deep link")}},deleteWalletConnectDeepLink(){try{n.Ud.removeItem(n.Ws.DEEPLINK_CHOICE)}catch{console.info("Unable to delete WalletConnect deep link")}},setActiveNamespace(e){try{n.Ud.setItem(n.Ws.ACTIVE_NAMESPACE,e)}catch{console.info("Unable to set active namespace")}},setActiveCaipNetworkId(e){try{n.Ud.setItem(n.Ws.ACTIVE_CAIP_NETWORK_ID,e),i.setActiveNamespace(e.split(":")[0])}catch{console.info("Unable to set active caip network id")}},getActiveCaipNetworkId(){try{return n.Ud.getItem(n.Ws.ACTIVE_CAIP_NETWORK_ID)}catch{return void console.info("Unable to get active caip network id")}},deleteActiveCaipNetworkId(){try{n.Ud.removeItem(n.Ws.ACTIVE_CAIP_NETWORK_ID)}catch{console.info("Unable to delete active caip network id")}},deleteConnectedConnectorId(e){try{const t=(0,n.T8)(e);n.Ud.removeItem(t)}catch{console.info("Unable to delete connected connector id")}},setAppKitRecent(e){try{const t=i.getRecentWallets();t.find((t=>t.id===e.id))||(t.unshift(e),t.length>2&&t.pop(),n.Ud.setItem(n.Ws.RECENT_WALLETS,JSON.stringify(t)))}catch{console.info("Unable to set AppKit recent")}},getRecentWallets(){try{const e=n.Ud.getItem(n.Ws.RECENT_WALLETS);return e?JSON.parse(e):[]}catch{console.info("Unable to get AppKit recent")}return[]},setConnectedConnectorId(e,t){try{const r=(0,n.T8)(e);n.Ud.setItem(r,t)}catch{console.info("Unable to set Connected Connector Id")}},getActiveNamespace(){try{return n.Ud.getItem(n.Ws.ACTIVE_NAMESPACE)}catch{console.info("Unable to get active namespace")}},getConnectedConnectorId(e){if(e)try{const t=(0,n.T8)(e);return n.Ud.getItem(t)}catch(t){console.info("Unable to get connected connector id in namespace ",e)}},setConnectedSocialProvider(e){try{n.Ud.setItem(n.Ws.CONNECTED_SOCIAL,e)}catch{console.info("Unable to set connected social provider")}},getConnectedSocialProvider(){try{return n.Ud.getItem(n.Ws.CONNECTED_SOCIAL)}catch{console.info("Unable to get connected social provider")}},deleteConnectedSocialProvider(){try{n.Ud.removeItem(n.Ws.CONNECTED_SOCIAL)}catch{console.info("Unable to delete connected social provider")}},getConnectedSocialUsername(){try{return n.Ud.getItem(n.Ws.CONNECTED_SOCIAL_USERNAME)}catch{console.info("Unable to get connected social username")}},getStoredActiveCaipNetworkId(){const e=n.Ud.getItem(n.Ws.ACTIVE_CAIP_NETWORK_ID),t=e?.split(":")?.[1];return t},setConnectionStatus(e){try{n.Ud.setItem(n.Ws.CONNECTION_STATUS,e)}catch{console.info("Unable to set connection status")}},getConnectionStatus(){try{return n.Ud.getItem(n.Ws.CONNECTION_STATUS)}catch{return}},getConnectedNamespaces(){try{const e=n.Ud.getItem(n.Ws.CONNECTED_NAMESPACES);return e?.length?e.split(","):[]}catch{return[]}},setConnectedNamespaces(e){try{const t=Array.from(new Set(e));n.Ud.setItem(n.Ws.CONNECTED_NAMESPACES,t.join(","))}catch{console.info("Unable to set namespaces in storage")}},addConnectedNamespace(e){try{const t=i.getConnectedNamespaces();t.includes(e)||(t.push(e),i.setConnectedNamespaces(t))}catch{console.info("Unable to add connected namespace")}},removeConnectedNamespace(e){try{const t=i.getConnectedNamespaces(),r=t.indexOf(e);r>-1&&(t.splice(r,1),i.setConnectedNamespaces(t))}catch{console.info("Unable to remove connected namespace")}},getTelegramSocialProvider(){try{return n.Ud.getItem(n.Ws.TELEGRAM_SOCIAL_PROVIDER)}catch{return console.info("Unable to get telegram social provider"),null}},setTelegramSocialProvider(e){try{n.Ud.setItem(n.Ws.TELEGRAM_SOCIAL_PROVIDER,e)}catch{console.info("Unable to set telegram social provider")}},removeTelegramSocialProvider(){try{n.Ud.removeItem(n.Ws.TELEGRAM_SOCIAL_PROVIDER)}catch{console.info("Unable to remove telegram social provider")}},getBalanceCache(){let e={};try{const t=n.Ud.getItem(n.Ws.PORTFOLIO_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get balance cache")}return e},removeAddressFromBalanceCache(e){try{const t=i.getBalanceCache();n.Ud.setItem(n.Ws.PORTFOLIO_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove address from balance cache",e)}},getBalanceCacheForCaipAddress(e){try{const t=i.getBalanceCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.portfolio))return t.balance;i.removeAddressFromBalanceCache(e)}catch{console.info("Unable to get balance cache for address",e)}},updateBalanceCache(e){try{const t=i.getBalanceCache();t[e.caipAddress]=e,n.Ud.setItem(n.Ws.PORTFOLIO_CACHE,JSON.stringify(t))}catch{console.info("Unable to update balance cache",e)}},getNativeBalanceCache(){let e={};try{const t=n.Ud.getItem(n.Ws.NATIVE_BALANCE_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get balance cache")}return e},removeAddressFromNativeBalanceCache(e){try{const t=i.getBalanceCache();n.Ud.setItem(n.Ws.NATIVE_BALANCE_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove address from balance cache",e)}},getNativeBalanceCacheForCaipAddress(e){try{const t=i.getNativeBalanceCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.nativeBalance))return t;console.info("Discarding cache for address",e),i.removeAddressFromBalanceCache(e)}catch{console.info("Unable to get balance cache for address",e)}},updateNativeBalanceCache(e){try{const t=i.getNativeBalanceCache();t[e.caipAddress]=e,n.Ud.setItem(n.Ws.NATIVE_BALANCE_CACHE,JSON.stringify(t))}catch{console.info("Unable to update balance cache",e)}},getEnsCache(){let e={};try{const t=n.Ud.getItem(n.Ws.ENS_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get ens name cache")}return e},getEnsFromCacheForAddress(e){try{const t=i.getEnsCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.ens))return t.ens;i.removeEnsFromCache(e)}catch{console.info("Unable to get ens name from cache",e)}},updateEnsCache(e){try{const t=i.getEnsCache();t[e.address]=e,n.Ud.setItem(n.Ws.ENS_CACHE,JSON.stringify(t))}catch{console.info("Unable to update ens name cache",e)}},removeEnsFromCache(e){try{const t=i.getEnsCache();n.Ud.setItem(n.Ws.ENS_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove ens name from cache",e)}},getIdentityCache(){let e={};try{const t=n.Ud.getItem(n.Ws.IDENTITY_CACHE);e=t?JSON.parse(t):{}}catch{console.info("Unable to get identity cache")}return e},getIdentityFromCacheForAddress(e){try{const t=i.getIdentityCache()[e];if(t&&!this.isCacheExpired(t.timestamp,this.cacheExpiry.identity))return t.identity;i.removeIdentityFromCache(e)}catch{console.info("Unable to get identity from cache",e)}},updateIdentityCache(e){try{const t=i.getIdentityCache();t[e.address]={identity:e.identity,timestamp:e.timestamp},n.Ud.setItem(n.Ws.IDENTITY_CACHE,JSON.stringify(t))}catch{console.info("Unable to update identity cache",e)}},removeIdentityFromCache(e){try{const t=i.getIdentityCache();n.Ud.setItem(n.Ws.IDENTITY_CACHE,JSON.stringify({...t,[e]:void 0}))}catch{console.info("Unable to remove identity from cache",e)}},clearAddressCache(){try{n.Ud.removeItem(n.Ws.PORTFOLIO_CACHE),n.Ud.removeItem(n.Ws.NATIVE_BALANCE_CACHE),n.Ud.removeItem(n.Ws.ENS_CACHE),n.Ud.removeItem(n.Ws.IDENTITY_CACHE)}catch{console.info("Unable to clear address cache")}},setPreferredAccountTypes(e){try{n.Ud.setItem(n.Ws.PREFERRED_ACCOUNT_TYPES,JSON.stringify(e))}catch{console.info("Unable to set preferred account types",e)}},getPreferredAccountTypes(){try{const e=n.Ud.getItem(n.Ws.PREFERRED_ACCOUNT_TYPES);return JSON.parse(e)}catch{console.info("Unable to get preferred account types")}}}},7526:(e,t)=>{t.byteLength=function(e){var t=a(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,s=a(e),o=s[0],c=s[1],l=new i(function(e,t,r){return 3*(t+r)/4-r}(0,o,c)),u=0,h=c>0?o-4:o;for(r=0;r<h;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;return 2===c&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,l[u++]=255&t),1===c&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t),l},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,s=[],o=16383,a=0,l=n-i;a<l;a+=o)s.push(c(e,a,a+o>l?l:a+o));return 1===i?(t=e[n-1],s.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],s.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),s.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)r[o]=s[o],n[s.charCodeAt(o)]=o;function a(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,n){for(var i,s,o=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(r[(s=i)>>18&63]+r[s>>12&63]+r[s>>6&63]+r[63&s]);return o.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},7601:(e,t,r)=>{r.d(t,{$:()=>c});var n=r(9073),i=r(8249),s=r(3337);const o={eip155:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",solana:"a1b58899-f671-4276-6a5e-56ca5bd59700",polkadot:"",bip122:"0b4838db-0161-4ffe-022d-532bf03dba00"},a=(0,n.BX)({networkImagePromises:{}}),c={async fetchWalletImage(e){if(e)return await i.N._fetchWalletImage(e),this.getWalletImageById(e)},async fetchNetworkImage(e){if(!e)return;return this.getNetworkImageById(e)||(a.networkImagePromises[e]||(a.networkImagePromises[e]=i.N._fetchNetworkImage(e)),await a.networkImagePromises[e],this.getNetworkImageById(e))},getWalletImageById(e){if(e)return s.j.state.walletImages[e]},getWalletImage:e=>e?.image_url?e?.image_url:e?.image_id?s.j.state.walletImages[e.image_id]:void 0,getNetworkImage:e=>e?.assets?.imageUrl?e?.assets?.imageUrl:e?.assets?.imageId?s.j.state.networkImages[e.assets.imageId]:void 0,getNetworkImageById(e){if(e)return s.j.state.networkImages[e]},getConnectorImage:e=>e?.imageUrl?e.imageUrl:e?.imageId?s.j.state.connectorImages[e.imageId]:void 0,getChainImage:e=>s.j.state.networkImages[o[e]]}},7790:()=>{},7803:(e,t,r)=>{var n=r(8287).Buffer;t.k5=function(e){{const t=n.from(e);t.reverse();const r=t.toString("hex");return 0===r.length?BigInt(0):BigInt(`0x${r}`)}},t.Bq=function(e,t){{const r=e.toString(16),i=n.from(r.padStart(2*t,"0").slice(0,2*t),"hex");return i.reverse(),i}}},8030:(e,t,r)=>{r.d(t,{B8:()=>f,D0:()=>b,LH:()=>w,Tp:()=>E,dQ:()=>g,jr:()=>y,qy:()=>_,zH:()=>p,zi:()=>h});var n=r(8293);const i=BigInt(0),s=BigInt(1),o=BigInt(2),a=BigInt(3),c=BigInt(4),l=BigInt(5),u=BigInt(8);function h(e,t){const r=e%t;return r>=i?r:t+r}function d(e,t,r){if(t<i)throw new Error("invalid exponent, negatives unsupported");if(r<=i)throw new Error("invalid modulus");if(r===s)return i;let n=s;for(;t>i;)t&s&&(n=n*e%r),e=e*e%r,t>>=s;return n}function p(e,t,r){let n=e;for(;t-- >i;)n*=n,n%=r;return n}function f(e,t){if(e===i)throw new Error("invert: expected non-zero number");if(t<=i)throw new Error("invert: expected positive modulus, got "+t);let r=h(e,t),n=t,o=i,a=s,c=s,l=i;for(;r!==i;){const e=n/r,t=n%r,i=o-c*e,s=a-l*e;n=r,r=t,o=c,a=l,c=i,l=s}if(n!==s)throw new Error("invert: does not exist");return h(o,t)}const g=(e,t)=>(h(e,t)&s)===s,m=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function y(e){const t=m.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,n.Q5)(e,t)}function w(e,t){const r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function b(e,t,r=!1,p={}){if(e<=i)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:g,nByteLength:m}=w(e,t);if(m>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let y;const b=Object.freeze({ORDER:e,isLE:r,BITS:g,BYTES:m,MASK:(0,n.OG)(g),ZERO:i,ONE:s,create:t=>h(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return i<=t&&t<e},is0:e=>e===i,isOdd:e=>(e&s)===s,neg:t=>h(-t,e),eql:(e,t)=>e===t,sqr:t=>h(t*t,e),add:(t,r)=>h(t+r,e),sub:(t,r)=>h(t-r,e),mul:(t,r)=>h(t*r,e),pow:(e,t)=>function(e,t,r){if(r<i)throw new Error("invalid exponent, negatives unsupported");if(r===i)return e.ONE;if(r===s)return t;let n=e.ONE,o=t;for(;r>i;)r&s&&(n=e.mul(n,o)),o=e.sqr(o),r>>=s;return n}(b,e,t),div:(t,r)=>h(t*f(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>f(t,e),sqrt:p.sqrt||(t=>(y||(y=function(e){if(e%c===a){const t=(e+s)/c;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}if(e%u===l){const t=(e-l)/u;return function(e,r){const n=e.mul(r,o),i=e.pow(n,t),s=e.mul(r,i),a=e.mul(e.mul(s,o),i),c=e.mul(s,e.sub(a,e.ONE));if(!e.eql(e.sqr(c),r))throw new Error("Cannot find square root");return c}}return function(e){const t=(e-s)/o;let r,n,a;for(r=e-s,n=0;r%o===i;r/=o,n++);for(a=o;a<e&&d(a,t,e)!==e-s;a++)if(a>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===n){const t=(e+s)/c;return function(e,r){const n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw new Error("Cannot find square root");return n}}const l=(r+s)/o;return function(e,i){if(e.pow(i,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let o=n,c=e.pow(e.mul(e.ONE,a),r),u=e.pow(i,l),h=e.pow(i,r);for(;!e.eql(h,e.ONE);){if(e.eql(h,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(h);t<o&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const r=e.pow(c,s<<BigInt(o-t-1));c=e.sqr(r),u=e.mul(u,r),h=e.mul(h,c),o=t}return u}}(e)}(e)),y(b,t))),invertBatch:e=>function(e,t){const r=new Array(t.length),n=t.reduce(((t,n,i)=>e.is0(n)?t:(r[i]=t,e.mul(t,n))),e.ONE),i=e.inv(n);return t.reduceRight(((t,n,i)=>e.is0(n)?t:(r[i]=e.mul(t,r[i]),e.mul(t,n))),i),r}(b,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?(0,n.z)(e,m):(0,n.lq)(e,m),fromBytes:e=>{if(e.length!==m)throw new Error("Field.fromBytes: expected "+m+" bytes, got "+e.length);return r?(0,n.lX)(e):(0,n.Ph)(e)}});return Object.freeze(b)}function v(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function E(e){const t=v(e);return t+Math.ceil(t/2)}function _(e,t,r=!1){const i=e.length,o=v(t),a=E(t);if(i<16||i<a||i>1024)throw new Error("expected "+a+"-1024 bytes of input, got "+i);const c=h(r?(0,n.lX)(e):(0,n.Ph)(e),t-s)+s;return r?(0,n.z)(c,o):(0,n.lq)(c,o)}},8169:(e,t,r)=>{r.d(t,{r:()=>l});var n=r(4353),i=r(5826),s=r(6279),o=r(3581);n.extend(s),n.extend(o);const a={...i,name:"en-web3-modal",relativeTime:{future:"in %s",past:"%s ago",s:"%d sec",m:"1 min",mm:"%d min",h:"1 hr",hh:"%d hrs",d:"1 d",dd:"%d d",M:"1 mo",MM:"%d mo",y:"1 yr",yy:"%d yr"}},c=["January","February","March","April","May","June","July","August","September","October","November","December"];n.locale("en-web3-modal",a);const l={getMonthNameByIndex:e=>c[e],getYear:(e=(new Date).toISOString())=>n(e).year(),getRelativeDateFromNow:e=>n(e).locale("en-web3-modal").fromNow(!0),formatDate:(e,t="DD MMM")=>n(e).format(t)}},8226:(e,t,r)=>{r.d(t,{sc:()=>l});var n=r(6013),i=r(2531);const s=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),o=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),a=new Uint32Array(64);class c extends n.ol{constructor(){super(64,32,8,!1),this.A=0|o[0],this.B=0|o[1],this.C=0|o[2],this.D=0|o[3],this.E=0|o[4],this.F=0|o[5],this.G=0|o[6],this.H=0|o[7]}get(){const{A:e,B:t,C:r,D:n,E:i,F:s,G:o,H:a}=this;return[e,t,r,n,i,s,o,a]}set(e,t,r,n,i,s,o,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|s,this.G=0|o,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)a[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=a[e-15],r=a[e-2],n=(0,i.Ow)(t,7)^(0,i.Ow)(t,18)^t>>>3,s=(0,i.Ow)(r,17)^(0,i.Ow)(r,19)^r>>>10;a[e]=s+a[e-7]+n+a[e-16]|0}let{A:r,B:o,C:c,D:l,E:u,F:h,G:d,H:p}=this;for(let e=0;e<64;e++){const t=p+((0,i.Ow)(u,6)^(0,i.Ow)(u,11)^(0,i.Ow)(u,25))+(0,n.r9)(u,h,d)+s[e]+a[e]|0,f=((0,i.Ow)(r,2)^(0,i.Ow)(r,13)^(0,i.Ow)(r,22))+(0,n.TQ)(r,o,c)|0;p=d,d=h,h=u,u=l+t|0,l=c,c=o,o=r,r=t+f|0}r=r+this.A|0,o=o+this.B|0,c=c+this.C|0,l=l+this.D|0,u=u+this.E|0,h=h+this.F|0,d=d+this.G|0,p=p+this.H|0,this.set(r,o,c,l,u,h,d,p)}roundClean(){a.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const l=(0,i.ld)((()=>new c))},8249:(e,t,r)=>{r.d(t,{N:()=>w});var n=r(9073),i=r(4707),s=r(7601),o=r(6742),a=r(5905),c=r(7508),l=r(3337),u=r(7388),h=r(9088),d=r(184),p=r(2733);const f=["1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79","fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa","a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393"],g=o.w.getApiUrl(),m=new a.Z({baseUrl:g,clientId:null}),y=(0,n.BX)({promises:{},page:1,count:0,featured:[],allFeatured:[],recommended:[],allRecommended:[],wallets:[],search:[],isAnalyticsEnabled:!1,excludedWallets:[],isFetchingRecommendedWallets:!1}),w={state:y,subscribeKey:(e,t)=>(0,i.u$)(y,e,t),_getSdkProperties(){const{projectId:e,sdkType:t,sdkVersion:r}=p.H.state;return{projectId:e,st:t||"appkit",sv:r||"html-wagmi-4.2.2"}},_filterOutExtensions:e=>p.H.state.isUniversalProvider?e.filter((e=>Boolean(e.mobile_link||e.desktop_link||e.webapp_link))):e,async _fetchWalletImage(e){const t=`${m.baseUrl}/getWalletImage/${e}`,r=await m.getBlob({path:t,params:w._getSdkProperties()});l.j.setWalletImage(e,URL.createObjectURL(r))},async _fetchNetworkImage(e){const t=`${m.baseUrl}/public/getAssetImage/${e}`,r=await m.getBlob({path:t,params:w._getSdkProperties()});l.j.setNetworkImage(e,URL.createObjectURL(r))},async _fetchConnectorImage(e){const t=`${m.baseUrl}/public/getAssetImage/${e}`,r=await m.getBlob({path:t,params:w._getSdkProperties()});l.j.setConnectorImage(e,URL.createObjectURL(r))},async _fetchCurrencyImage(e){const t=`${m.baseUrl}/public/getCurrencyImage/${e}`,r=await m.getBlob({path:t,params:w._getSdkProperties()});l.j.setCurrencyImage(e,URL.createObjectURL(r))},async _fetchTokenImage(e){const t=`${m.baseUrl}/public/getTokenImage/${e}`,r=await m.getBlob({path:t,params:w._getSdkProperties()});l.j.setTokenImage(e,URL.createObjectURL(r))},async fetchNetworkImages(){const e=u.W.getAllRequestedCaipNetworks(),t=e?.map((({assets:e})=>e?.imageId)).filter(Boolean).filter((e=>!s.$.getNetworkImageById(e)));t&&await Promise.allSettled(t.map((e=>w._fetchNetworkImage(e))))},async fetchConnectorImages(){const{connectors:e}=h.a.state,t=e.map((({imageId:e})=>e)).filter(Boolean);await Promise.allSettled(t.map((e=>w._fetchConnectorImage(e))))},async fetchCurrencyImages(e=[]){await Promise.allSettled(e.map((e=>w._fetchCurrencyImage(e))))},async fetchTokenImages(e=[]){await Promise.allSettled(e.map((e=>w._fetchTokenImage(e))))},async fetchWallets(e){const t=e.exclude??[];return w._getSdkProperties().sv.startsWith("html-core-")&&t.push(...f),await m.get({path:"/getWallets",params:{...w._getSdkProperties(),...e,page:String(e.page),entries:String(e.entries),include:e.include?.join(","),exclude:e.exclude?.join(",")}})},async fetchFeaturedWallets(){const{featuredWalletIds:e}=p.H.state;if(e?.length){const t={...w._getSdkProperties(),page:1,entries:e?.length??4,include:e},{data:r}=await w.fetchWallets(t);r.sort(((t,r)=>e.indexOf(t.id)-e.indexOf(r.id)));const n=r.map((e=>e.image_id)).filter(Boolean);await Promise.allSettled(n.map((e=>w._fetchWalletImage(e)))),y.featured=r,y.allFeatured=r}},async fetchRecommendedWallets(){try{y.isFetchingRecommendedWallets=!0;const{includeWalletIds:e,excludeWalletIds:t,featuredWalletIds:r}=p.H.state,n={page:1,entries:4,include:e,exclude:[...t??[],...r??[]].filter(Boolean),chains:u.W.getRequestedCaipNetworkIds().join(",")},{data:i,count:s}=await w.fetchWallets(n),o=c.i.getRecentWallets(),a=i.map((e=>e.image_id)).filter(Boolean),l=o.map((e=>e.image_id)).filter(Boolean);await Promise.allSettled([...a,...l].map((e=>w._fetchWalletImage(e)))),y.recommended=i,y.allRecommended=i,y.count=s??0}catch{}finally{y.isFetchingRecommendedWallets=!1}},async fetchWalletsByPage({page:e}){const{includeWalletIds:t,excludeWalletIds:r,featuredWalletIds:n}=p.H.state,i=u.W.getRequestedCaipNetworkIds().join(","),s={page:e,entries:40,include:t,exclude:[...y.recommended.map((({id:e})=>e)),...r??[],...n??[]].filter(Boolean),chains:i},{data:a,count:c}=await w.fetchWallets(s),l=a.slice(0,20).map((e=>e.image_id)).filter(Boolean);await Promise.allSettled(l.map((e=>w._fetchWalletImage(e)))),y.wallets=o.w.uniqueBy([...y.wallets,...w._filterOutExtensions(a)],"id"),y.count=c>y.count?c:y.count,y.page=e},async initializeExcludedWallets({ids:e}){const t=u.W.getRequestedCaipNetworkIds().join(","),r={page:1,entries:e.length,include:e,chains:t},{data:n}=await w.fetchWallets(r);n&&n.forEach((e=>{y.excludedWallets.push({rdns:e.rdns,name:e.name})}))},async searchWallet({search:e,badge:t}){const{includeWalletIds:r,excludeWalletIds:n}=p.H.state,i=u.W.getRequestedCaipNetworkIds().join(",");y.search=[];const s={page:1,entries:100,search:e?.trim(),badge_type:t,include:r,exclude:n,chains:i},{data:a}=await w.fetchWallets(s);d.E.sendEvent({type:"track",event:"SEARCH_WALLET",properties:{badge:t??"",search:e??""}});const c=a.map((e=>e.image_id)).filter(Boolean);await Promise.allSettled([...c.map((e=>w._fetchWalletImage(e))),o.w.wait(300)]),y.search=w._filterOutExtensions(a)},initPromise:(e,t)=>y.promises[e]||(y.promises[e]=t()),prefetch({fetchConnectorImages:e=!0,fetchFeaturedWallets:t=!0,fetchRecommendedWallets:r=!0,fetchNetworkImages:n=!0}={}){const i=[e&&w.initPromise("connectorImages",w.fetchConnectorImages),t&&w.initPromise("featuredWallets",w.fetchFeaturedWallets),r&&w.initPromise("recommendedWallets",w.fetchRecommendedWallets),n&&w.initPromise("networkImages",w.fetchNetworkImages)].filter(Boolean);return Promise.allSettled(i)},prefetchAnalyticsConfig(){p.H.state.features?.analytics&&w.fetchAnalyticsConfig()},async fetchAnalyticsConfig(){try{const{isAnalyticsEnabled:e}=await m.get({path:"/getAnalyticsConfig",params:w._getSdkProperties()});p.H.setFeatures({analytics:e})}catch(e){p.H.setFeatures({analytics:!1})}},setFilterByNamespace(e){if(!e)return y.featured=y.allFeatured,void(y.recommended=y.allRecommended);const t=u.W.getRequestedCaipNetworkIds().join(",");y.featured=y.allFeatured.filter((e=>e.chains?.some((e=>t.includes(e))))),y.recommended=y.allRecommended.filter((e=>e.chains?.some((e=>t.includes(e)))))}}},8287:(e,t,r)=>{const n=r(7526),i=r(251),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=function(e){return+e!=e&&(e=0),c.alloc(+e)},t.INSPECT_MAX_BYTES=50;const o=2147483647;function a(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return h(e)}return l(e,t,r)}function l(e,t,r){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|g(e,t);let n=a(r);const i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Z(e,Uint8Array)){const t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return d(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Z(e,ArrayBuffer)||e&&Z(e.buffer,ArrayBuffer))return p(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(Z(e,SharedArrayBuffer)||e&&Z(e.buffer,SharedArrayBuffer)))return p(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return c.from(n,t,r);const i=function(e){if(c.isBuffer(e)){const t=0|f(e.length),r=a(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||Y(e.length)?a(0):d(e):"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return u(e),a(e<0?0:0|f(e))}function d(e){const t=e.length<0?0:0|f(e.length),r=a(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function p(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,c.prototype),n}function f(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function g(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Z(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return K(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return V(e).length;default:if(i)return n?-1:K(e).length;t=(""+t).toLowerCase(),i=!0}}function m(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return x(this,t,r);case"utf8":case"utf-8":return I(this,t,r);case"ascii":return k(this,t,r);case"latin1":case"binary":return T(this,t,r);case"base64":return C(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function y(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function w(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Y(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=c.from(t,n)),c.isBuffer(t))return 0===t.length?-1:b(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):b(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,r,n,i){let s,o=1,a=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,a/=2,c/=2,r/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){let n=-1;for(s=r;s<a;s++)if(l(e,s)===l(t,-1===n?0:s-n)){if(-1===n&&(n=s),s-n+1===c)return n*o}else-1!==n&&(s-=s-n),n=-1}else for(r+c>a&&(r=a-c),s=r;s>=0;s--){let r=!0;for(let n=0;n<c;n++)if(l(e,s+n)!==l(t,n)){r=!1;break}if(r)return s}return-1}function v(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;const s=t.length;let o;for(n>s/2&&(n=s/2),o=0;o<n;++o){const n=parseInt(t.substr(2*o,2),16);if(Y(n))return o;e[r+o]=n}return o}function E(e,t,r,n){return G(K(t,e.length-r),e,r,n)}function _(e,t,r,n){return G(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function A(e,t,r,n){return G(V(t),e,r,n)}function S(e,t,r,n){return G(function(e,t){let r,n,i;const s=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}(t,e.length-r),e,r,n)}function C(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function I(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;for(;i<r;){const t=e[i];let s=null,o=t>239?4:t>223?3:t>191?2:1;if(i+o<=r){let r,n,a,c;switch(o){case 1:t<128&&(s=t);break;case 2:r=e[i+1],128==(192&r)&&(c=(31&t)<<6|63&r,c>127&&(s=c));break;case 3:r=e[i+1],n=e[i+2],128==(192&r)&&128==(192&n)&&(c=(15&t)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(s=c));break;case 4:r=e[i+1],n=e[i+2],a=e[i+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(c=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a,c>65535&&c<1114112&&(s=c))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=o}return function(e){const t=e.length;if(t<=N)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=N));return r}(n)}t.kMaxLength=o,c.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,r){return function(e,t,r){return u(e),e<=0?a(e):void 0!==t?"string"==typeof r?a(e).fill(t,r):a(e).fill(t):a(e)}(e,t,r)},c.allocUnsafe=function(e){return h(e)},c.allocUnsafeSlow=function(e){return h(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(Z(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),Z(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=c.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(Z(t,Uint8Array))i+t.length>n.length?(c.isBuffer(t)||(t=c.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!c.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},c.byteLength=g,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)y(this,t,t+1);return this},c.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)y(this,t,t+3),y(this,t+1,t+2);return this},c.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)y(this,t,t+7),y(this,t+1,t+6),y(this,t+2,t+5),y(this,t+3,t+4);return this},c.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?I(this,0,e):m.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},s&&(c.prototype[s]=c.prototype.inspect),c.prototype.compare=function(e,t,r,n,i){if(Z(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;let s=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0);const a=Math.min(s,o),l=this.slice(n,i),u=e.slice(t,r);for(let e=0;e<a;++e)if(l[e]!==u[e]){s=l[e],o=u[e];break}return s<o?-1:o<s?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return w(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return w(this,e,t,r,!1)},c.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let s=!1;for(;;)switch(n){case"hex":return v(this,e,t,r);case"utf8":case"utf-8":return E(this,e,t,r);case"ascii":case"latin1":case"binary":return _(this,e,t,r);case"base64":return A(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const N=4096;function k(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function T(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function x(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=J[e[n]];return i}function P(e,t,r){const n=e.slice(t,r);let i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}function O(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,r,n,i,s){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function M(e,t,r,n,i){z(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,r}function U(e,t,r,n,i){z(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r+7]=s,s>>=8,e[r+6]=s,s>>=8,e[r+5]=s,s>>=8,e[r+4]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=o,o>>=8,e[r+2]=o,o>>=8,e[r+1]=o,o>>=8,e[r]=o,r+8}function B(e,t,r,n,i,s){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function L(e,t,r,n,s){return t=+t,r>>>=0,s||B(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function D(e,t,r,n,s){return t=+t,r>>>=0,s||B(e,0,r,8),i.write(e,t,r,n,52,8),r+8}c.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,c.prototype),n},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return n},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readBigUInt64LE=X((function(e){q(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||H(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),c.prototype.readBigUInt64BE=X((function(e){q(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||H(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),c.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},c.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let n=t,i=1,s=this[e+--n];for(;n>0&&(i*=256);)s+=this[e+--n]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*t)),s},c.prototype.readInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||O(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){e>>>=0,t||O(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readBigInt64LE=X((function(e){q(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||H(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),c.prototype.readBigInt64BE=X((function(e){q(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||H(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),c.prototype.readFloatLE=function(e,t){return e>>>=0,t||O(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||O(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||O(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||O(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||R(this,e,t,r,Math.pow(2,8*r)-1,0);let i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||R(this,e,t,r,Math.pow(2,8*r)-1,0);let i=r-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+r},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigUInt64LE=X((function(e,t=0){return M(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=X((function(e,t=0){return U(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);R(this,e,t,r,n-1,-n)}let i=0,s=1,o=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/s|0)-o&255;return t+r},c.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);R(this,e,t,r,n-1,-n)}let i=r-1,s=1,o=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/s|0)-o&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigInt64LE=X((function(e,t=0){return M(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=X((function(e,t=0){return U(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(e,t,r){return L(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return L(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return D(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return D(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,n){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},c.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!c.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{const s=c.isBuffer(e)?e:c.from(e,n),o=s.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=s[i%o]}return this};const j={};function $(e,t,r){j[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function W(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function z(e,t,r,n,i,s){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let i;throw i=s>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(s+1)}${n}`:`>= -(2${n} ** ${8*(s+1)-1}${n}) and < 2 ** ${8*(s+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new j.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){q(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||H(t,e.length-(r+1))}(n,i,s)}function q(e,t){if("number"!=typeof e)throw new j.ERR_INVALID_ARG_TYPE(t,"number",e)}function H(e,t,r){if(Math.floor(e)!==e)throw q(e,r),new j.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new j.ERR_BUFFER_OUT_OF_BOUNDS;throw new j.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}$("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),$("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),$("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=W(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=W(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n}),RangeError);const F=/[^+/0-9A-Za-z-_]/g;function K(e,t){let r;t=t||1/0;const n=e.length;let i=null;const s=[];for(let o=0;o<n;++o){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function V(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(F,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function G(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function Z(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Y(e){return e!=e}const J=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function X(e){return"undefined"==typeof BigInt?Q:e}function Q(){throw new Error("BigInt not supported")}},8293:(e,t,r)=>{r.d(t,{DO:()=>a,Id:()=>E,My:()=>u,OG:()=>I,Ph:()=>m,Q5:()=>P,aK:()=>S,aT:()=>g,aY:()=>o,dJ:()=>C,e8:()=>c,fg:()=>T,lX:()=>y,lq:()=>w,qj:()=>v,r4:()=>A,x:()=>O,z:()=>b,zW:()=>h});const n=BigInt(0),i=BigInt(1),s=BigInt(2);function o(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function a(e){if(!o(e))throw new Error("Uint8Array expected")}function c(e,t){if("boolean"!=typeof t)throw new Error(e+" boolean expected, got "+t)}const l=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function u(e){a(e);let t="";for(let r=0;r<e.length;r++)t+=l[e[r]];return t}function h(e){const t=e.toString(16);return 1&t.length?"0"+t:t}function d(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?n:BigInt("0x"+e)}const p={_0:48,_9:57,A:65,F:70,a:97,f:102};function f(e){return e>=p._0&&e<=p._9?e-p._0:e>=p.A&&e<=p.F?e-(p.A-10):e>=p.a&&e<=p.f?e-(p.a-10):void 0}function g(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){const r=f(e.charCodeAt(i)),s=f(e.charCodeAt(i+1));if(void 0===r||void 0===s){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[t]=16*r+s}return n}function m(e){return d(u(e))}function y(e){return a(e),d(u(Uint8Array.from(e).reverse()))}function w(e,t){return g(e.toString(16).padStart(2*t,"0"))}function b(e,t){return w(e,t).reverse()}function v(e,t,r){let n;if("string"==typeof t)try{n=g(t)}catch(t){throw new Error(e+" must be hex string or Uint8Array, cause: "+t)}else{if(!o(t))throw new Error(e+" must be hex string or Uint8Array");n=Uint8Array.from(t)}const i=n.length;if("number"==typeof r&&i!==r)throw new Error(e+" of length "+r+" expected, got "+i);return n}function E(...e){let t=0;for(let r=0;r<e.length;r++){const n=e[r];a(n),t+=n.length}const r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){const i=e[t];r.set(i,n),n+=i.length}return r}const _=e=>"bigint"==typeof e&&n<=e;function A(e,t,r){return _(e)&&_(t)&&_(r)&&t<=e&&e<r}function S(e,t,r,n){if(!A(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function C(e){let t;for(t=0;e>n;e>>=i,t+=1);return t}const I=e=>(s<<BigInt(e-1))-i,N=e=>new Uint8Array(e),k=e=>Uint8Array.from(e);function T(e,t,r){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");let n=N(e),i=N(e),s=0;const o=()=>{n.fill(1),i.fill(0),s=0},a=(...e)=>r(i,n,...e),c=(e=N())=>{i=a(k([0]),e),n=a(),0!==e.length&&(i=a(k([1]),e),n=a())},l=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const r=[];for(;e<t;){n=a();const t=n.slice();r.push(t),e+=n.length}return E(...r)};return(e,t)=>{let r;for(o(),c(e);!(r=t(l()));)c();return o(),r}}const x={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||o(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function P(e,t,r={}){const n=(t,r,n)=>{const i=x[r];if("function"!=typeof i)throw new Error("invalid validator function");const s=e[t];if(!(n&&void 0===s||i(s,e)))throw new Error("param "+String(t)+" is invalid. Expected "+r+", got "+s)};for(const[e,r]of Object.entries(t))n(e,r,!1);for(const[e,t]of Object.entries(r))n(e,t,!0);return e}function O(e){const t=new WeakMap;return(r,...n)=>{const i=t.get(r);if(void 0!==i)return i;const s=e(r,...n);return t.set(r,s),s}}},8341:(e,t,r)=>{var n;r.d(t,{v4:()=>u});var i=new Uint8Array(16);function s(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(i)}const o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var a=[],c=0;c<256;++c)a.push((c+256).toString(16).substr(1));const l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&o.test(e)}(r))throw TypeError("Stringified UUID is invalid");return r},u=function(e,t,r){var n=(e=e||{}).random||(e.rng||s)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var i=0;i<16;++i)t[r+i]=n[i];return t}return l(n)}},8467:(e,t,r)=>{r.d(t,{z:()=>o});var n=r(9073),i=r(4707);const s=(0,n.BX)({loading:!1,open:!1,selectedNetworkId:void 0,activeChain:void 0,initialized:!1}),o={state:s,subscribe:e=>(0,n.B1)(s,(()=>e(s))),subscribeOpen:e=>(0,i.u$)(s,"open",e),set(e){Object.assign(s,{...s,...e})}}},8508:(e,t,r)=>{r.d(t,{I:()=>h});var n=r(9073),i=r(4707),s=r(3450),o=r(7388),a=r(9088),c=r(6396),l=r(2733);const u=(0,n.BX)({view:"Connect",history:["Connect"],transactionStack:[]}),h={state:u,subscribeKey:(e,t)=>(0,i.u$)(u,e,t),pushTransactionStack(e){u.transactionStack.push(e)},popTransactionStack(e){const t=u.transactionStack.pop();if(t)if(e)this.goBack(),t?.onCancel?.();else{if(t.goBack)this.goBack();else if(t.replace){const e=u.history.indexOf("ConnectingSiwe");e>0?this.goBackToIndex(e-1):(c.W.close(),u.history=[])}else t.view&&this.reset(t.view);t?.onSuccess?.()}},push(e,t){e!==u.view&&(u.view=e,u.history.push(e),u.data=t)},reset(e,t){u.view=e,u.history=[e],u.data=t},replace(e,t){u.history.at(-1)===e||(u.view=e,u.history[u.history.length-1]=e,u.data=t)},goBack(){const e=!o.W.state.activeCaipAddress&&"ConnectingFarcaster"===this.state.view;if(u.history.length>1&&!u.history.includes("UnsupportedChain")){u.history.pop();const[e]=u.history.slice(-1);e&&(u.view=e)}else c.W.close();u.data?.wallet&&(u.data.wallet=void 0),setTimeout((()=>{if(e){s.U.setFarcasterUrl(void 0,o.W.state.activeChain);const e=a.a.getAuthConnector();e?.provider?.reload();const t=(0,n.P9)(l.H.state);e?.provider?.syncDappData?.({metadata:t.metadata,sdkVersion:t.sdkVersion,projectId:t.projectId,sdkType:t.sdkType})}}),100)},goBackToIndex(e){if(u.history.length>1){u.history=u.history.slice(0,e+1);const[t]=u.history.slice(-1);t&&(u.view=t)}}}},8900:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=r(5215);n.__exportStar(r(9606),t),n.__exportStar(r(9883),t),n.__exportStar(r(2010),t),n.__exportStar(r(9026),t)},8996:(e,t,r)=>{r.d(t,{W:()=>a});var n=r(9073),i=r(3096),s=r(9088);const o=(0,n.BX)({themeMode:"dark",themeVariables:{},w3mThemeVariables:void 0}),a={state:o,subscribe:e=>(0,n.B1)(o,(()=>e(o))),setThemeMode(e){o.themeMode=e;try{const t=s.a.getAuthConnector();if(t){const r=a.getSnapshot().themeVariables;t.provider.syncTheme({themeMode:e,themeVariables:r,w3mThemeVariables:(0,i.o)(r,e)})}}catch{console.info("Unable to sync theme to auth connector")}},setThemeVariables(e){o.themeVariables={...o.themeVariables,...e};try{const e=s.a.getAuthConnector();if(e){const t=a.getSnapshot().themeVariables;e.provider.syncTheme({themeVariables:t,w3mThemeVariables:(0,i.o)(o.themeVariables,o.themeMode)})}}catch{console.info("Unable to sync theme to auth connector")}},getSnapshot:()=>(0,n.P9)(o)}},9026:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=r(5215);n.__exportStar(r(9244),t),n.__exportStar(r(1861),t)},9073:(e,t,r)=>{r.d(t,{BX:()=>h,KR:()=>f,P9:()=>p,B1:()=>d}),Symbol();const n=Symbol(),i=Object.getPrototypeOf,s=new WeakMap,o=(e,t=!0)=>{s.set(e,t)},a=e=>"object"==typeof e&&null!==e,c=new WeakMap,l=new WeakSet,[u]=((e=Object.is,t=(e,t)=>new Proxy(e,t),r=e=>a(e)&&!l.has(e)&&(Array.isArray(e)||!(Symbol.iterator in e))&&!(e instanceof WeakMap)&&!(e instanceof WeakSet)&&!(e instanceof Error)&&!(e instanceof Number)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof RegExp)&&!(e instanceof ArrayBuffer),u=e=>{switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:throw e}},h=new WeakMap,d=(e,t,r=u)=>{const n=h.get(e);if((null==n?void 0:n[0])===t)return n[1];const i=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return o(i,!0),h.set(e,[t,i]),Reflect.ownKeys(e).forEach((t=>{if(Object.getOwnPropertyDescriptor(i,t))return;const n=Reflect.get(e,t),{enumerable:s}=Reflect.getOwnPropertyDescriptor(e,t),a={value:n,enumerable:s,configurable:!0};if(l.has(n))o(n,!1);else if(n instanceof Promise)delete a.value,a.get=()=>r(n);else if(c.has(n)){const[e,t]=c.get(n);a.value=d(e,t(),r)}Object.defineProperty(i,t,a)})),Object.preventExtensions(i)},p=new WeakMap,f=[1,1],g=o=>{if(!a(o))throw new Error("object required");const u=p.get(o);if(u)return u;let h=f[0];const m=new Set,y=(e,t=++f[0])=>{h!==t&&(h=t,m.forEach((r=>r(e,t))))};let w=f[1];const b=e=>(t,r)=>{const n=[...t];n[1]=[e,...n[1]],y(n,r)},v=new Map,E=e=>{var t;const r=v.get(e);r&&(v.delete(e),null==(t=r[1])||t.call(r))},_=Array.isArray(o)?[]:Object.create(Object.getPrototypeOf(o)),A=t(_,{deleteProperty(e,t){const r=Reflect.get(e,t);E(t);const n=Reflect.deleteProperty(e,t);return n&&y(["delete",[t],r]),n},set(t,o,u,h){const d=Reflect.has(t,o),f=Reflect.get(t,o,h);if(d&&(e(f,u)||p.has(u)&&e(f,p.get(u))))return!0;var w;E(o),a(u)&&(u=(e=>e&&(s.has(e)?s.get(e):i(e)===Object.prototype||i(e)===Array.prototype))(w=u)&&w[n]||null||u);let _=u;if(u instanceof Promise)u.then((e=>{u.status="fulfilled",u.value=e,y(["resolve",[o],e])})).catch((e=>{u.status="rejected",u.reason=e,y(["reject",[o],e])}));else{!c.has(u)&&r(u)&&(_=g(u));const e=!l.has(_)&&c.get(_);e&&((e,t)=>{if(v.has(e))throw new Error("prop listener already exists");if(m.size){const r=t[3](b(e));v.set(e,[t,r])}else v.set(e,[t])})(o,e)}return Reflect.set(t,o,_,h),y(["set",[o],u,f]),!0}});p.set(o,A);const S=[_,(e=++f[1])=>(w===e||m.size||(w=e,v.forEach((([t])=>{const r=t[1](e);r>h&&(h=r)}))),h),d,e=>(m.add(e),1===m.size&&v.forEach((([e,t],r)=>{if(t)throw new Error("remove already exists");const n=e[3](b(r));v.set(r,[e,n])})),()=>{m.delete(e),0===m.size&&v.forEach((([e,t],r)=>{t&&(t(),v.set(r,[e]))}))})];return c.set(A,S),Reflect.ownKeys(o).forEach((e=>{const t=Object.getOwnPropertyDescriptor(o,e);"value"in t&&(A[e]=o[e],delete t.value,delete t.writable),Object.defineProperty(_,e,t)})),A})=>[g,c,l,e,t,r,u,h,d,p,f])();function h(e={}){return u(e)}function d(e,t,r){const n=c.get(e);let i;n||console.warn("Please use proxy object");const s=[],o=n[3];let a=!1;const l=o((e=>{s.push(e),r?t(s.splice(0)):i||(i=Promise.resolve().then((()=>{i=void 0,a&&t(s.splice(0))})))}));return a=!0,()=>{a=!1,l()}}function p(e,t){const r=c.get(e);r||console.warn("Please use proxy object");const[n,i,s]=r;return s(n,i(),t)}function f(e){return l.add(e),e}},9088:(e,t,r)=>{r.d(t,{a:()=>m});var n=r(9073),i=r(4707),s=r(4376),o=r(3096),a=r(7388);const c={handleSolanaDeeplinkRedirect(e){if(a.W.state.activeChain===s.o.CHAIN.SOLANA){const t=window.location.href,r=encodeURIComponent(t);if("Phantom"===e&&!("phantom"in window)){const e=t.startsWith("https")?"https":"http",n=t.split("/")[2],i=encodeURIComponent(`${e}://${n}`);window.location.href=`https://phantom.app/ul/browse/${r}?ref=${i}`}"Coinbase Wallet"!==e||"coinbaseSolana"in window||(window.location.href=`https://go.cb-w.com/dapp?cb_url=${r}`)}}};var l=r(7508),u=r(8249),h=r(2733),d=r(8508),p=r(8996);const f={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0},g=(0,n.BX)({allConnectors:[],connectors:[],activeConnector:void 0,filterByNamespace:void 0,activeConnectorIds:{...f}}),m={state:g,subscribe:e=>(0,n.B1)(g,(()=>{e(g)})),subscribeKey:(e,t)=>(0,i.u$)(g,e,t),initialize(e){e.forEach((e=>{const t=l.i.getConnectedConnectorId(e);t&&this.setConnectorId(t,e)}))},setActiveConnector(e){e&&(g.activeConnector=(0,n.KR)(e))},setConnectors(e){e.filter((e=>!g.allConnectors.some((t=>t.id===e.id&&this.getConnectorName(t.name)===this.getConnectorName(e.name)&&t.chain===e.chain)))).forEach((e=>{"MULTI_CHAIN"!==e.type&&g.allConnectors.push((0,n.KR)(e))})),g.connectors=this.mergeMultiChainConnectors(g.allConnectors)},removeAdapter(e){g.allConnectors=g.allConnectors.filter((t=>t.chain!==e)),g.connectors=this.mergeMultiChainConnectors(g.allConnectors)},mergeMultiChainConnectors(e){const t=this.generateConnectorMapByName(e),r=[];return t.forEach((e=>{const t=e[0],n=t?.id===s.o.CONNECTOR_ID.AUTH;e.length>1&&t?r.push({name:t.name,imageUrl:t.imageUrl,imageId:t.imageId,connectors:[...e],type:n?"AUTH":"MULTI_CHAIN",chain:"eip155",id:t?.id||""}):t&&r.push(t)})),r},generateConnectorMapByName(e){const t=new Map;return e.forEach((e=>{const{name:r}=e,n=this.getConnectorName(r);if(!n)return;const i=t.get(n)||[];i.find((t=>t.chain===e.chain))||i.push(e),t.set(n,i)})),t},getConnectorName:e=>e&&{"Trust Wallet":"Trust"}[e]||e,getUniqueConnectorsByName(e){const t=[];return e.forEach((e=>{t.find((t=>t.chain===e.chain))||t.push(e)})),t},addConnector(e){if(e.id===s.o.CONNECTOR_ID.AUTH){const t=e,r=(0,n.P9)(h.H.state),i=p.W.getSnapshot().themeMode,s=p.W.getSnapshot().themeVariables;t?.provider?.syncDappData?.({metadata:r.metadata,sdkVersion:r.sdkVersion,projectId:r.projectId,sdkType:r.sdkType}),t?.provider?.syncTheme({themeMode:i,themeVariables:s,w3mThemeVariables:(0,o.o)(s,i)}),this.setConnectors([e])}else this.setConnectors([e])},getAuthConnector(e){const t=e||a.W.state.activeChain,r=g.connectors.find((e=>e.id===s.o.CONNECTOR_ID.AUTH));if(r)return r?.connectors?.length?r.connectors.find((e=>e.chain===t)):r},getAnnouncedConnectorRdns:()=>g.connectors.filter((e=>"ANNOUNCED"===e.type)).map((e=>e.info?.rdns)),getConnectorById:e=>g.allConnectors.find((t=>t.id===e)),getConnector:(e,t)=>g.allConnectors.filter((e=>e.chain===a.W.state.activeChain)).find((r=>r.explorerId===e||r.info?.rdns===t)),syncIfAuthConnector(e){if("ID_AUTH"!==e.id)return;const t=e,r=(0,n.P9)(h.H.state),i=p.W.getSnapshot().themeMode,s=p.W.getSnapshot().themeVariables;t?.provider?.syncDappData?.({metadata:r.metadata,sdkVersion:r.sdkVersion,sdkType:r.sdkType,projectId:r.projectId}),t.provider.syncTheme({themeMode:i,themeVariables:s,w3mThemeVariables:(0,o.o)(s,i)})},getConnectorsByNamespace(e){const t=g.allConnectors.filter((t=>t.chain===e));return this.mergeMultiChainConnectors(t)},selectWalletConnector(e){const t=m.getConnector(e.id,e.rdns);a.W.state.activeChain===s.o.CHAIN.SOLANA&&c.handleSolanaDeeplinkRedirect(t?.name||e.name||""),t?d.I.push("ConnectingExternal",{connector:t}):d.I.push("ConnectingWalletConnect",{wallet:e})},getConnectors(e){return e?this.getConnectorsByNamespace(e):this.mergeMultiChainConnectors(g.allConnectors)},setFilterByNamespace(e){g.filterByNamespace=e,g.connectors=this.getConnectors(e),u.N.setFilterByNamespace(e)},setConnectorId(e,t){e&&(g.activeConnectorIds={...g.activeConnectorIds,[t]:e},l.i.setConnectedConnectorId(t,e))},removeConnectorId(e){g.activeConnectorIds={...g.activeConnectorIds,[e]:void 0},l.i.deleteConnectedConnectorId(e)},getConnectorId(e){if(e)return g.activeConnectorIds[e]},isConnected:e=>e?Boolean(g.activeConnectorIds[e]):Object.values(g.activeConnectorIds).some((e=>Boolean(e))),resetConnectorIds(){g.activeConnectorIds={...f}}}},9177:(e,t,r)=>{r.d(t,{x:()=>y});var n=r(9073),i=r(4707),s=r(6742),o=r(1122),a=r(7508),c=r(3450),l=r(7388),u=r(9088),h=r(184),d=r(6396),p=r(8508),f=r(6360);const g=(0,n.BX)({wcError:!1,buffering:!1,status:"disconnected"});let m;const y={state:g,subscribeKey:(e,t)=>(0,i.u$)(g,e,t),_getClient:()=>g._client,setClient(e){g._client=(0,n.KR)(e)},async connectWalletConnect(){if(s.w.isTelegram()||s.w.isSafari()&&s.w.isIos()){if(m)return await m,void(m=void 0);if(!s.w.isPairingExpired(g?.wcPairingExpiry)){const e=g.wcUri;return void(g.wcUri=e)}m=this._getClient()?.connectWalletConnect?.().catch((()=>{})),this.state.status="connecting",await m,m=void 0,g.wcPairingExpiry=void 0,this.state.status="connected"}else await(this._getClient()?.connectWalletConnect?.())},async connectExternal(e,t,r=!0){await(this._getClient()?.connectExternal?.(e)),r&&l.W.setActiveNamespace(t)},async reconnectExternal(e){await(this._getClient()?.reconnectExternal?.(e));const t=e.chain||l.W.state.activeChain;t&&u.a.setConnectorId(e.id,t)},async setPreferredAccountType(e,t){d.W.setLoading(!0,l.W.state.activeChain);const r=u.a.getAuthConnector();r&&(c.U.setPreferredAccountType(e,t),await r.provider.setPreferredAccount(e),a.i.setPreferredAccountTypes(c.U.state.preferredAccountTypes??{[t]:e}),await this.reconnectExternal(r),d.W.setLoading(!1,l.W.state.activeChain),h.E.sendEvent({type:"track",event:"SET_PREFERRED_ACCOUNT_TYPE",properties:{accountType:e,network:l.W.state.activeCaipNetwork?.caipNetworkId||""}}))},async signMessage(e){return this._getClient()?.signMessage(e)},parseUnits(e,t){return this._getClient()?.parseUnits(e,t)},formatUnits(e,t){return this._getClient()?.formatUnits(e,t)},async sendTransaction(e){return this._getClient()?.sendTransaction(e)},async getCapabilities(e){return this._getClient()?.getCapabilities(e)},async grantPermissions(e){return this._getClient()?.grantPermissions(e)},async walletGetAssets(e){return this._getClient()?.walletGetAssets(e)??{}},async estimateGas(e){return this._getClient()?.estimateGas(e)},async writeContract(e){return this._getClient()?.writeContract(e)},async getEnsAddress(e){return this._getClient()?.getEnsAddress(e)},async getEnsAvatar(e){return this._getClient()?.getEnsAvatar(e)},checkInstalled(e){return this._getClient()?.checkInstalled?.(e)||!1},resetWcConnection(){g.wcUri=void 0,g.wcPairingExpiry=void 0,g.wcLinking=void 0,g.recentWallet=void 0,g.status="disconnected",f.W.resetTransactions(),a.i.deleteWalletConnectDeepLink()},resetUri(){g.wcUri=void 0,g.wcPairingExpiry=void 0},finalizeWcConnection(){const{wcLinking:e,recentWallet:t}=y.state;e&&a.i.setWalletConnectDeepLink(e),t&&a.i.setAppKitRecent(t),h.E.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:e?"mobile":"qrcode",name:p.I.state.data?.wallet?.name||"Unknown"}})},setWcBasic(e){g.wcBasic=e},setUri(e){g.wcUri=e,g.wcPairingExpiry=s.w.getPairingExpiry()},setWcLinking(e){g.wcLinking=e},setWcError(e){g.wcError=e,g.buffering=!1},setRecentWallet(e){g.recentWallet=e},setBuffering(e){g.buffering=e},setStatus(e){g.status=e},async disconnect(e){try{d.W.setLoading(!0,e),await o.U.clearSessions(),await l.W.disconnect(e),d.W.setLoading(!1,e),u.a.setFilterByNamespace(void 0)}catch(e){throw new Error("Failed to disconnect")}}}},9190:(e,t,r)=>{function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function i(e,...t){if(!((r=e)instanceof Uint8Array||ArrayBuffer.isView(r)&&"Uint8Array"===r.constructor.name))throw new Error("Uint8Array expected");var r;if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function s(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function o(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function a(e,t){i(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}r.d(t,{CC:()=>o,DO:()=>i,Fe:()=>n,Ht:()=>a,sd:()=>s})},9244:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ONE_THOUSAND=t.ONE_HUNDRED=void 0,t.ONE_HUNDRED=100,t.ONE_THOUSAND=1e3},9271:(e,t,r)=>{r.d(t,{Ay:()=>h,B4:()=>c,P5:()=>a,WM:()=>l,im:()=>u,lD:()=>o});const n=BigInt(2**32-1),i=BigInt(32);function s(e,t=!1){return t?{h:Number(e&n),l:Number(e>>i&n)}:{h:0|Number(e>>i&n),l:0|Number(e&n)}}function o(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:o,l:a}=s(e[i],t);[r[i],n[i]]=[o,a]}return[r,n]}const a=(e,t,r)=>e<<r|t>>>32-r,c=(e,t,r)=>t<<r|e>>>32-r,l=(e,t,r)=>t<<r-32|e>>>64-r,u=(e,t,r)=>e<<r-32|t>>>64-r,h={fromBig:s,split:o,toBig:(e,t)=>BigInt(e>>>0)<<i|BigInt(t>>>0),shrSH:(e,t,r)=>e>>>r,shrSL:(e,t,r)=>e<<32-r|t>>>r,rotrSH:(e,t,r)=>e>>>r|t<<32-r,rotrSL:(e,t,r)=>e<<32-r|t>>>r,rotrBH:(e,t,r)=>e<<64-r|t>>>r-32,rotrBL:(e,t,r)=>e>>>r-32|t<<64-r,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:a,rotlSL:c,rotlBH:l,rotlBL:u,add:function(e,t,r,n){const i=(t>>>0)+(n>>>0);return{h:e+r+(i/2**32|0)|0,l:0|i}},add3L:(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0),add3H:(e,t,r,n)=>t+r+n+(e/2**32|0)|0,add4L:(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0),add4H:(e,t,r,n,i)=>t+r+n+i+(e/2**32|0)|0,add5H:(e,t,r,n,i,s)=>t+r+n+i+s+(e/2**32|0)|0,add5L:(e,t,r,n,i)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(i>>>0)}},9404:function(e,t,r){!function(e,t){function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function s(e,t,r){if(s.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var o;"object"==typeof e?e.exports=s:t.BN=s,s.BN=s,s.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(7790).Buffer}catch(e){}function a(e,t){var r=e.charCodeAt(t);return r>=48&&r<=57?r-48:r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:void n(!1,"Invalid character in "+e)}function c(e,t,r){var n=a(e,r);return r-1>=t&&(n|=a(e,r-1)<<4),n}function l(e,t,r,i){for(var s=0,o=0,a=Math.min(e.length,r),c=t;c<a;c++){var l=e.charCodeAt(c)-48;s*=i,o=l>=49?l-49+10:l>=17?l-17+10:l,n(l>=0&&o<i,"Invalid character"),s+=o}return s}function u(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(s.isBN=function(e){return e instanceof s||null!==e&&"object"==typeof e&&e.constructor.wordSize===s.wordSize&&Array.isArray(e.words)},s.max=function(e,t){return e.cmp(t)>0?e:t},s.min=function(e,t){return e.cmp(t)<0?e:t},s.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,r):(this._parseBase(e,t,i),"le"===r&&this._initArray(this.toArray(),t,r)))},s.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},s.prototype._initArray=function(e,t,r){if(n("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var s,o,a=0;if("be"===r)for(i=e.length-1,s=0;i>=0;i-=3)o=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);else if("le"===r)for(i=0,s=0;i<e.length;i+=3)o=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);return this._strip()},s.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var i,s=0,o=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)i=c(e,t,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)i=c(e,t,n)<<s,this.words[o]|=67108863&i,s>=18?(s-=18,o+=1,this.words[o]|=i>>>26):s+=8;this._strip()},s.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=t)n++;n--,i=i/t|0;for(var s=e.length-r,o=s%n,a=Math.min(s,s-o)+r,c=0,u=r;u<a;u+=n)c=l(e,u,u+n,t),this.imuln(i),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(0!==o){var h=1;for(c=l(e,u,e.length,t),u=0;u<o;u++)h*=t;this.imuln(h),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},s.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},s.prototype._move=function(e){u(e,this)},s.prototype.clone=function(){var e=new s(null);return this.copy(e),e},s.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch(e){s.prototype.inspect=h}else s.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function g(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var i=0|e.words[0],s=0|t.words[0],o=i*s,a=67108863&o,c=o/67108864|0;r.words[0]=a;for(var l=1;l<n;l++){for(var u=c>>>26,h=67108863&c,d=Math.min(l,t.length-1),p=Math.max(0,l-e.length+1);p<=d;p++){var f=l-p|0;u+=(o=(i=0|e.words[f])*(s=0|t.words[p])+h)/67108864|0,h=67108863&o}r.words[l]=0|h,c=0|u}return 0!==c?r.words[l]=0|c:r.length--,r._strip()}s.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var i=0,s=0,o=0;o<this.length;o++){var a=this.words[o],c=(16777215&(a<<i|s)).toString(16);s=a>>>24-i&16777215,(i+=2)>=26&&(i-=26,o--),r=0!==s||o!==this.length-1?d[6-c.length]+c+r:c+r}for(0!==s&&(r=s.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var l=p[e],u=f[e];r="";var h=this.clone();for(h.negative=0;!h.isZero();){var g=h.modrn(u).toString(e);r=(h=h.idivn(u)).isZero()?g+r:d[l-g.length]+g+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(e,t){return this.toArrayLike(o,e,t)}),s.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},s.prototype.toArrayLike=function(e,t,r){this._strip();var i=this.byteLength(),s=r||Math.max(1,i);n(i<=s,"byte array longer than desired length"),n(s>0,"Requested array length <= 0");var o=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,s);return this["_toArrayLike"+("le"===t?"LE":"BE")](o,i),o},s.prototype._toArrayLikeLE=function(e,t){for(var r=0,n=0,i=0,s=0;i<this.length;i++){var o=this.words[i]<<s|n;e[r++]=255&o,r<e.length&&(e[r++]=o>>8&255),r<e.length&&(e[r++]=o>>16&255),6===s?(r<e.length&&(e[r++]=o>>24&255),n=0,s=0):(n=o>>>24,s+=2)}if(r<e.length)for(e[r++]=n;r<e.length;)e[r++]=0},s.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,n=0,i=0,s=0;i<this.length;i++){var o=this.words[i]<<s|n;e[r--]=255&o,r>=0&&(e[r--]=o>>8&255),r>=0&&(e[r--]=o>>16&255),6===s?(r>=0&&(e[r--]=o>>24&255),n=0,s=0):(n=o>>>24,s+=2)}if(r>=0)for(e[r--]=n;r>=0;)e[r--]=0},Math.clz32?s.prototype._countBits=function(e){return 32-Math.clz32(e)}:s.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},s.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 8191&t||(r+=13,t>>>=13),127&t||(r+=7,t>>>=7),15&t||(r+=4,t>>>=4),3&t||(r+=2,t>>>=2),1&t||r++,r},s.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},s.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},s.prototype.ior=function(e){return n(!(this.negative|e.negative)),this.iuor(e)},s.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},s.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},s.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},s.prototype.iand=function(e){return n(!(this.negative|e.negative)),this.iuand(e)},s.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},s.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},s.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},s.prototype.ixor=function(e){return n(!(this.negative|e.negative)),this.iuxor(e)},s.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},s.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},s.prototype.inotn=function(e){n("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this._strip()},s.prototype.notn=function(e){return this.clone().inotn(e)},s.prototype.setn=function(e,t){n("number"==typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this._strip()},s.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var i=0,s=0;s<n.length;s++)t=(0|r.words[s])+(0|n.words[s])+i,this.words[s]=67108863&t,i=t>>>26;for(;0!==i&&s<r.length;s++)t=(0|r.words[s])+i,this.words[s]=67108863&t,i=t>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this},s.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},s.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(r=this,n=e):(r=e,n=this);for(var s=0,o=0;o<n.length;o++)s=(t=(0|r.words[o])-(0|n.words[o])+s)>>26,this.words[o]=67108863&t;for(;0!==s&&o<r.length;o++)s=(t=(0|r.words[o])+s)>>26,this.words[o]=67108863&t;if(0===s&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(e){return this.clone().isub(e)};var m=function(e,t,r){var n,i,s,o=e.words,a=t.words,c=r.words,l=0,u=0|o[0],h=8191&u,d=u>>>13,p=0|o[1],f=8191&p,g=p>>>13,m=0|o[2],y=8191&m,w=m>>>13,b=0|o[3],v=8191&b,E=b>>>13,_=0|o[4],A=8191&_,S=_>>>13,C=0|o[5],I=8191&C,N=C>>>13,k=0|o[6],T=8191&k,x=k>>>13,P=0|o[7],O=8191&P,R=P>>>13,M=0|o[8],U=8191&M,B=M>>>13,L=0|o[9],D=8191&L,j=L>>>13,$=0|a[0],W=8191&$,z=$>>>13,q=0|a[1],H=8191&q,F=q>>>13,K=0|a[2],V=8191&K,G=K>>>13,Z=0|a[3],Y=8191&Z,J=Z>>>13,X=0|a[4],Q=8191&X,ee=X>>>13,te=0|a[5],re=8191&te,ne=te>>>13,ie=0|a[6],se=8191&ie,oe=ie>>>13,ae=0|a[7],ce=8191&ae,le=ae>>>13,ue=0|a[8],he=8191&ue,de=ue>>>13,pe=0|a[9],fe=8191&pe,ge=pe>>>13;r.negative=e.negative^t.negative,r.length=19;var me=(l+(n=Math.imul(h,W))|0)+((8191&(i=(i=Math.imul(h,z))+Math.imul(d,W)|0))<<13)|0;l=((s=Math.imul(d,z))+(i>>>13)|0)+(me>>>26)|0,me&=67108863,n=Math.imul(f,W),i=(i=Math.imul(f,z))+Math.imul(g,W)|0,s=Math.imul(g,z);var ye=(l+(n=n+Math.imul(h,H)|0)|0)+((8191&(i=(i=i+Math.imul(h,F)|0)+Math.imul(d,H)|0))<<13)|0;l=((s=s+Math.imul(d,F)|0)+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(y,W),i=(i=Math.imul(y,z))+Math.imul(w,W)|0,s=Math.imul(w,z),n=n+Math.imul(f,H)|0,i=(i=i+Math.imul(f,F)|0)+Math.imul(g,H)|0,s=s+Math.imul(g,F)|0;var we=(l+(n=n+Math.imul(h,V)|0)|0)+((8191&(i=(i=i+Math.imul(h,G)|0)+Math.imul(d,V)|0))<<13)|0;l=((s=s+Math.imul(d,G)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(v,W),i=(i=Math.imul(v,z))+Math.imul(E,W)|0,s=Math.imul(E,z),n=n+Math.imul(y,H)|0,i=(i=i+Math.imul(y,F)|0)+Math.imul(w,H)|0,s=s+Math.imul(w,F)|0,n=n+Math.imul(f,V)|0,i=(i=i+Math.imul(f,G)|0)+Math.imul(g,V)|0,s=s+Math.imul(g,G)|0;var be=(l+(n=n+Math.imul(h,Y)|0)|0)+((8191&(i=(i=i+Math.imul(h,J)|0)+Math.imul(d,Y)|0))<<13)|0;l=((s=s+Math.imul(d,J)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(A,W),i=(i=Math.imul(A,z))+Math.imul(S,W)|0,s=Math.imul(S,z),n=n+Math.imul(v,H)|0,i=(i=i+Math.imul(v,F)|0)+Math.imul(E,H)|0,s=s+Math.imul(E,F)|0,n=n+Math.imul(y,V)|0,i=(i=i+Math.imul(y,G)|0)+Math.imul(w,V)|0,s=s+Math.imul(w,G)|0,n=n+Math.imul(f,Y)|0,i=(i=i+Math.imul(f,J)|0)+Math.imul(g,Y)|0,s=s+Math.imul(g,J)|0;var ve=(l+(n=n+Math.imul(h,Q)|0)|0)+((8191&(i=(i=i+Math.imul(h,ee)|0)+Math.imul(d,Q)|0))<<13)|0;l=((s=s+Math.imul(d,ee)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(I,W),i=(i=Math.imul(I,z))+Math.imul(N,W)|0,s=Math.imul(N,z),n=n+Math.imul(A,H)|0,i=(i=i+Math.imul(A,F)|0)+Math.imul(S,H)|0,s=s+Math.imul(S,F)|0,n=n+Math.imul(v,V)|0,i=(i=i+Math.imul(v,G)|0)+Math.imul(E,V)|0,s=s+Math.imul(E,G)|0,n=n+Math.imul(y,Y)|0,i=(i=i+Math.imul(y,J)|0)+Math.imul(w,Y)|0,s=s+Math.imul(w,J)|0,n=n+Math.imul(f,Q)|0,i=(i=i+Math.imul(f,ee)|0)+Math.imul(g,Q)|0,s=s+Math.imul(g,ee)|0;var Ee=(l+(n=n+Math.imul(h,re)|0)|0)+((8191&(i=(i=i+Math.imul(h,ne)|0)+Math.imul(d,re)|0))<<13)|0;l=((s=s+Math.imul(d,ne)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(T,W),i=(i=Math.imul(T,z))+Math.imul(x,W)|0,s=Math.imul(x,z),n=n+Math.imul(I,H)|0,i=(i=i+Math.imul(I,F)|0)+Math.imul(N,H)|0,s=s+Math.imul(N,F)|0,n=n+Math.imul(A,V)|0,i=(i=i+Math.imul(A,G)|0)+Math.imul(S,V)|0,s=s+Math.imul(S,G)|0,n=n+Math.imul(v,Y)|0,i=(i=i+Math.imul(v,J)|0)+Math.imul(E,Y)|0,s=s+Math.imul(E,J)|0,n=n+Math.imul(y,Q)|0,i=(i=i+Math.imul(y,ee)|0)+Math.imul(w,Q)|0,s=s+Math.imul(w,ee)|0,n=n+Math.imul(f,re)|0,i=(i=i+Math.imul(f,ne)|0)+Math.imul(g,re)|0,s=s+Math.imul(g,ne)|0;var _e=(l+(n=n+Math.imul(h,se)|0)|0)+((8191&(i=(i=i+Math.imul(h,oe)|0)+Math.imul(d,se)|0))<<13)|0;l=((s=s+Math.imul(d,oe)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(O,W),i=(i=Math.imul(O,z))+Math.imul(R,W)|0,s=Math.imul(R,z),n=n+Math.imul(T,H)|0,i=(i=i+Math.imul(T,F)|0)+Math.imul(x,H)|0,s=s+Math.imul(x,F)|0,n=n+Math.imul(I,V)|0,i=(i=i+Math.imul(I,G)|0)+Math.imul(N,V)|0,s=s+Math.imul(N,G)|0,n=n+Math.imul(A,Y)|0,i=(i=i+Math.imul(A,J)|0)+Math.imul(S,Y)|0,s=s+Math.imul(S,J)|0,n=n+Math.imul(v,Q)|0,i=(i=i+Math.imul(v,ee)|0)+Math.imul(E,Q)|0,s=s+Math.imul(E,ee)|0,n=n+Math.imul(y,re)|0,i=(i=i+Math.imul(y,ne)|0)+Math.imul(w,re)|0,s=s+Math.imul(w,ne)|0,n=n+Math.imul(f,se)|0,i=(i=i+Math.imul(f,oe)|0)+Math.imul(g,se)|0,s=s+Math.imul(g,oe)|0;var Ae=(l+(n=n+Math.imul(h,ce)|0)|0)+((8191&(i=(i=i+Math.imul(h,le)|0)+Math.imul(d,ce)|0))<<13)|0;l=((s=s+Math.imul(d,le)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(U,W),i=(i=Math.imul(U,z))+Math.imul(B,W)|0,s=Math.imul(B,z),n=n+Math.imul(O,H)|0,i=(i=i+Math.imul(O,F)|0)+Math.imul(R,H)|0,s=s+Math.imul(R,F)|0,n=n+Math.imul(T,V)|0,i=(i=i+Math.imul(T,G)|0)+Math.imul(x,V)|0,s=s+Math.imul(x,G)|0,n=n+Math.imul(I,Y)|0,i=(i=i+Math.imul(I,J)|0)+Math.imul(N,Y)|0,s=s+Math.imul(N,J)|0,n=n+Math.imul(A,Q)|0,i=(i=i+Math.imul(A,ee)|0)+Math.imul(S,Q)|0,s=s+Math.imul(S,ee)|0,n=n+Math.imul(v,re)|0,i=(i=i+Math.imul(v,ne)|0)+Math.imul(E,re)|0,s=s+Math.imul(E,ne)|0,n=n+Math.imul(y,se)|0,i=(i=i+Math.imul(y,oe)|0)+Math.imul(w,se)|0,s=s+Math.imul(w,oe)|0,n=n+Math.imul(f,ce)|0,i=(i=i+Math.imul(f,le)|0)+Math.imul(g,ce)|0,s=s+Math.imul(g,le)|0;var Se=(l+(n=n+Math.imul(h,he)|0)|0)+((8191&(i=(i=i+Math.imul(h,de)|0)+Math.imul(d,he)|0))<<13)|0;l=((s=s+Math.imul(d,de)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(D,W),i=(i=Math.imul(D,z))+Math.imul(j,W)|0,s=Math.imul(j,z),n=n+Math.imul(U,H)|0,i=(i=i+Math.imul(U,F)|0)+Math.imul(B,H)|0,s=s+Math.imul(B,F)|0,n=n+Math.imul(O,V)|0,i=(i=i+Math.imul(O,G)|0)+Math.imul(R,V)|0,s=s+Math.imul(R,G)|0,n=n+Math.imul(T,Y)|0,i=(i=i+Math.imul(T,J)|0)+Math.imul(x,Y)|0,s=s+Math.imul(x,J)|0,n=n+Math.imul(I,Q)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul(N,Q)|0,s=s+Math.imul(N,ee)|0,n=n+Math.imul(A,re)|0,i=(i=i+Math.imul(A,ne)|0)+Math.imul(S,re)|0,s=s+Math.imul(S,ne)|0,n=n+Math.imul(v,se)|0,i=(i=i+Math.imul(v,oe)|0)+Math.imul(E,se)|0,s=s+Math.imul(E,oe)|0,n=n+Math.imul(y,ce)|0,i=(i=i+Math.imul(y,le)|0)+Math.imul(w,ce)|0,s=s+Math.imul(w,le)|0,n=n+Math.imul(f,he)|0,i=(i=i+Math.imul(f,de)|0)+Math.imul(g,he)|0,s=s+Math.imul(g,de)|0;var Ce=(l+(n=n+Math.imul(h,fe)|0)|0)+((8191&(i=(i=i+Math.imul(h,ge)|0)+Math.imul(d,fe)|0))<<13)|0;l=((s=s+Math.imul(d,ge)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(D,H),i=(i=Math.imul(D,F))+Math.imul(j,H)|0,s=Math.imul(j,F),n=n+Math.imul(U,V)|0,i=(i=i+Math.imul(U,G)|0)+Math.imul(B,V)|0,s=s+Math.imul(B,G)|0,n=n+Math.imul(O,Y)|0,i=(i=i+Math.imul(O,J)|0)+Math.imul(R,Y)|0,s=s+Math.imul(R,J)|0,n=n+Math.imul(T,Q)|0,i=(i=i+Math.imul(T,ee)|0)+Math.imul(x,Q)|0,s=s+Math.imul(x,ee)|0,n=n+Math.imul(I,re)|0,i=(i=i+Math.imul(I,ne)|0)+Math.imul(N,re)|0,s=s+Math.imul(N,ne)|0,n=n+Math.imul(A,se)|0,i=(i=i+Math.imul(A,oe)|0)+Math.imul(S,se)|0,s=s+Math.imul(S,oe)|0,n=n+Math.imul(v,ce)|0,i=(i=i+Math.imul(v,le)|0)+Math.imul(E,ce)|0,s=s+Math.imul(E,le)|0,n=n+Math.imul(y,he)|0,i=(i=i+Math.imul(y,de)|0)+Math.imul(w,he)|0,s=s+Math.imul(w,de)|0;var Ie=(l+(n=n+Math.imul(f,fe)|0)|0)+((8191&(i=(i=i+Math.imul(f,ge)|0)+Math.imul(g,fe)|0))<<13)|0;l=((s=s+Math.imul(g,ge)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul(D,V),i=(i=Math.imul(D,G))+Math.imul(j,V)|0,s=Math.imul(j,G),n=n+Math.imul(U,Y)|0,i=(i=i+Math.imul(U,J)|0)+Math.imul(B,Y)|0,s=s+Math.imul(B,J)|0,n=n+Math.imul(O,Q)|0,i=(i=i+Math.imul(O,ee)|0)+Math.imul(R,Q)|0,s=s+Math.imul(R,ee)|0,n=n+Math.imul(T,re)|0,i=(i=i+Math.imul(T,ne)|0)+Math.imul(x,re)|0,s=s+Math.imul(x,ne)|0,n=n+Math.imul(I,se)|0,i=(i=i+Math.imul(I,oe)|0)+Math.imul(N,se)|0,s=s+Math.imul(N,oe)|0,n=n+Math.imul(A,ce)|0,i=(i=i+Math.imul(A,le)|0)+Math.imul(S,ce)|0,s=s+Math.imul(S,le)|0,n=n+Math.imul(v,he)|0,i=(i=i+Math.imul(v,de)|0)+Math.imul(E,he)|0,s=s+Math.imul(E,de)|0;var Ne=(l+(n=n+Math.imul(y,fe)|0)|0)+((8191&(i=(i=i+Math.imul(y,ge)|0)+Math.imul(w,fe)|0))<<13)|0;l=((s=s+Math.imul(w,ge)|0)+(i>>>13)|0)+(Ne>>>26)|0,Ne&=67108863,n=Math.imul(D,Y),i=(i=Math.imul(D,J))+Math.imul(j,Y)|0,s=Math.imul(j,J),n=n+Math.imul(U,Q)|0,i=(i=i+Math.imul(U,ee)|0)+Math.imul(B,Q)|0,s=s+Math.imul(B,ee)|0,n=n+Math.imul(O,re)|0,i=(i=i+Math.imul(O,ne)|0)+Math.imul(R,re)|0,s=s+Math.imul(R,ne)|0,n=n+Math.imul(T,se)|0,i=(i=i+Math.imul(T,oe)|0)+Math.imul(x,se)|0,s=s+Math.imul(x,oe)|0,n=n+Math.imul(I,ce)|0,i=(i=i+Math.imul(I,le)|0)+Math.imul(N,ce)|0,s=s+Math.imul(N,le)|0,n=n+Math.imul(A,he)|0,i=(i=i+Math.imul(A,de)|0)+Math.imul(S,he)|0,s=s+Math.imul(S,de)|0;var ke=(l+(n=n+Math.imul(v,fe)|0)|0)+((8191&(i=(i=i+Math.imul(v,ge)|0)+Math.imul(E,fe)|0))<<13)|0;l=((s=s+Math.imul(E,ge)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(D,Q),i=(i=Math.imul(D,ee))+Math.imul(j,Q)|0,s=Math.imul(j,ee),n=n+Math.imul(U,re)|0,i=(i=i+Math.imul(U,ne)|0)+Math.imul(B,re)|0,s=s+Math.imul(B,ne)|0,n=n+Math.imul(O,se)|0,i=(i=i+Math.imul(O,oe)|0)+Math.imul(R,se)|0,s=s+Math.imul(R,oe)|0,n=n+Math.imul(T,ce)|0,i=(i=i+Math.imul(T,le)|0)+Math.imul(x,ce)|0,s=s+Math.imul(x,le)|0,n=n+Math.imul(I,he)|0,i=(i=i+Math.imul(I,de)|0)+Math.imul(N,he)|0,s=s+Math.imul(N,de)|0;var Te=(l+(n=n+Math.imul(A,fe)|0)|0)+((8191&(i=(i=i+Math.imul(A,ge)|0)+Math.imul(S,fe)|0))<<13)|0;l=((s=s+Math.imul(S,ge)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(D,re),i=(i=Math.imul(D,ne))+Math.imul(j,re)|0,s=Math.imul(j,ne),n=n+Math.imul(U,se)|0,i=(i=i+Math.imul(U,oe)|0)+Math.imul(B,se)|0,s=s+Math.imul(B,oe)|0,n=n+Math.imul(O,ce)|0,i=(i=i+Math.imul(O,le)|0)+Math.imul(R,ce)|0,s=s+Math.imul(R,le)|0,n=n+Math.imul(T,he)|0,i=(i=i+Math.imul(T,de)|0)+Math.imul(x,he)|0,s=s+Math.imul(x,de)|0;var xe=(l+(n=n+Math.imul(I,fe)|0)|0)+((8191&(i=(i=i+Math.imul(I,ge)|0)+Math.imul(N,fe)|0))<<13)|0;l=((s=s+Math.imul(N,ge)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,n=Math.imul(D,se),i=(i=Math.imul(D,oe))+Math.imul(j,se)|0,s=Math.imul(j,oe),n=n+Math.imul(U,ce)|0,i=(i=i+Math.imul(U,le)|0)+Math.imul(B,ce)|0,s=s+Math.imul(B,le)|0,n=n+Math.imul(O,he)|0,i=(i=i+Math.imul(O,de)|0)+Math.imul(R,he)|0,s=s+Math.imul(R,de)|0;var Pe=(l+(n=n+Math.imul(T,fe)|0)|0)+((8191&(i=(i=i+Math.imul(T,ge)|0)+Math.imul(x,fe)|0))<<13)|0;l=((s=s+Math.imul(x,ge)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(D,ce),i=(i=Math.imul(D,le))+Math.imul(j,ce)|0,s=Math.imul(j,le),n=n+Math.imul(U,he)|0,i=(i=i+Math.imul(U,de)|0)+Math.imul(B,he)|0,s=s+Math.imul(B,de)|0;var Oe=(l+(n=n+Math.imul(O,fe)|0)|0)+((8191&(i=(i=i+Math.imul(O,ge)|0)+Math.imul(R,fe)|0))<<13)|0;l=((s=s+Math.imul(R,ge)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(D,he),i=(i=Math.imul(D,de))+Math.imul(j,he)|0,s=Math.imul(j,de);var Re=(l+(n=n+Math.imul(U,fe)|0)|0)+((8191&(i=(i=i+Math.imul(U,ge)|0)+Math.imul(B,fe)|0))<<13)|0;l=((s=s+Math.imul(B,ge)|0)+(i>>>13)|0)+(Re>>>26)|0,Re&=67108863;var Me=(l+(n=Math.imul(D,fe))|0)+((8191&(i=(i=Math.imul(D,ge))+Math.imul(j,fe)|0))<<13)|0;return l=((s=Math.imul(j,ge))+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,c[0]=me,c[1]=ye,c[2]=we,c[3]=be,c[4]=ve,c[5]=Ee,c[6]=_e,c[7]=Ae,c[8]=Se,c[9]=Ce,c[10]=Ie,c[11]=Ne,c[12]=ke,c[13]=Te,c[14]=xe,c[15]=Pe,c[16]=Oe,c[17]=Re,c[18]=Me,0!==l&&(c[19]=l,r.length++),r};function y(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,i=0,s=0;s<r.length-1;s++){var o=i;i=0;for(var a=67108863&n,c=Math.min(s,t.length-1),l=Math.max(0,s-e.length+1);l<=c;l++){var u=s-l,h=(0|e.words[u])*(0|t.words[l]),d=67108863&h;a=67108863&(d=d+a|0),i+=(o=(o=o+(h/67108864|0)|0)+(d>>>26)|0)>>>26,o&=67108863}r.words[s]=a,n=o,o=i}return 0!==n?r.words[s]=n:r.length--,r._strip()}function w(e,t,r){return y(e,t,r)}function b(e,t){this.x=e,this.y=t}Math.imul||(m=g),s.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?m(this,e,t):r<63?g(this,e,t):r<1024?y(this,e,t):w(this,e,t)},b.prototype.makeRBT=function(e){for(var t=new Array(e),r=s.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},b.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,i=0;i<t;i++)n|=(1&e)<<t-i-1,e>>=1;return n},b.prototype.permute=function(e,t,r,n,i,s){for(var o=0;o<s;o++)n[o]=t[e[o]],i[o]=r[e[o]]},b.prototype.transform=function(e,t,r,n,i,s){this.permute(s,e,t,r,n,i);for(var o=1;o<i;o<<=1)for(var a=o<<1,c=Math.cos(2*Math.PI/a),l=Math.sin(2*Math.PI/a),u=0;u<i;u+=a)for(var h=c,d=l,p=0;p<o;p++){var f=r[u+p],g=n[u+p],m=r[u+p+o],y=n[u+p+o],w=h*m-d*y;y=h*y+d*m,m=w,r[u+p]=f+m,n[u+p]=g+y,r[u+p+o]=f-m,n[u+p+o]=g-y,p!==a&&(w=c*h-l*d,d=c*d+l*h,h=w)}},b.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},b.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=e[n];e[n]=e[r-n-1],e[r-n-1]=i,i=t[n],t[n]=-t[r-n-1],t[r-n-1]=-i}},b.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var i=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&i,r=i<67108864?0:i/67108864|0}return e},b.prototype.convert13b=function(e,t,r,i){for(var s=0,o=0;o<t;o++)s+=0|e[o],r[2*o]=8191&s,s>>>=13,r[2*o+1]=8191&s,s>>>=13;for(o=2*t;o<i;++o)r[o]=0;n(0===s),n(!(-8192&s))},b.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},b.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(n),s=this.stub(n),o=new Array(n),a=new Array(n),c=new Array(n),l=new Array(n),u=new Array(n),h=new Array(n),d=r.words;d.length=n,this.convert13b(e.words,e.length,o,n),this.convert13b(t.words,t.length,l,n),this.transform(o,s,a,c,n,i),this.transform(l,s,u,h,n,i);for(var p=0;p<n;p++){var f=a[p]*u[p]-c[p]*h[p];c[p]=a[p]*h[p]+c[p]*u[p],a[p]=f}return this.conjugate(a,c,n),this.transform(a,c,d,s,n,i),this.conjugate(d,s,n),this.normalize13b(d,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r._strip()},s.prototype.mul=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},s.prototype.mulf=function(e){var t=new s(null);return t.words=new Array(this.length+e.length),w(this,e,t)},s.prototype.imul=function(e){return this.clone().mulTo(e,this)},s.prototype.imuln=function(e){var t=e<0;t&&(e=-e),n("number"==typeof e),n(e<67108864);for(var r=0,i=0;i<this.length;i++){var s=(0|this.words[i])*e,o=(67108863&s)+(67108863&r);r>>=26,r+=s/67108864|0,r+=o>>>26,this.words[i]=67108863&o}return 0!==r&&(this.words[i]=r,this.length++),t?this.ineg():this},s.prototype.muln=function(e){return this.clone().imuln(e)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,i=r%26;t[r]=e.words[n]>>>i&1}return t}(e);if(0===t.length)return new s(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},s.prototype.iushln=function(e){n("number"==typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,s=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(t=0;t<this.length;t++){var a=this.words[t]&s,c=(0|this.words[t])-a<<r;this.words[t]=c|o,o=a>>>26-r}o&&(this.words[t]=o,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this._strip()},s.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},s.prototype.iushrn=function(e,t,r){var i;n("number"==typeof e&&e>=0),i=t?(t-t%26)/26:0;var s=e%26,o=Math.min((e-s)/26,this.length),a=67108863^67108863>>>s<<s,c=r;if(i-=o,i=Math.max(0,i),c){for(var l=0;l<o;l++)c.words[l]=this.words[l];c.length=o}if(0===o);else if(this.length>o)for(this.length-=o,l=0;l<this.length;l++)this.words[l]=this.words[l+o];else this.words[0]=0,this.length=1;var u=0;for(l=this.length-1;l>=0&&(0!==u||l>=i);l--){var h=0|this.words[l];this.words[l]=u<<26-s|h>>>s,u=h&a}return c&&0!==u&&(c.words[c.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},s.prototype.shln=function(e){return this.clone().ishln(e)},s.prototype.ushln=function(e){return this.clone().iushln(e)},s.prototype.shrn=function(e){return this.clone().ishrn(e)},s.prototype.ushrn=function(e){return this.clone().iushrn(e)},s.prototype.testn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r||!(this.words[r]&i))},s.prototype.imaskn=function(e){n("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this._strip()},s.prototype.maskn=function(e){return this.clone().imaskn(e)},s.prototype.iaddn=function(e){return n("number"==typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},s.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},s.prototype.isubn=function(e){if(n("number"==typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},s.prototype.addn=function(e){return this.clone().iaddn(e)},s.prototype.subn=function(e){return this.clone().isubn(e)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(e,t,r){var i,s,o=e.length+r;this._expand(o);var a=0;for(i=0;i<e.length;i++){s=(0|this.words[i+r])+a;var c=(0|e.words[i])*t;a=((s-=67108863&c)>>26)-(c/67108864|0),this.words[i+r]=67108863&s}for(;i<this.length-r;i++)a=(s=(0|this.words[i+r])+a)>>26,this.words[i+r]=67108863&s;if(0===a)return this._strip();for(n(-1===a),a=0,i=0;i<this.length;i++)a=(s=-(0|this.words[i])+a)>>26,this.words[i]=67108863&s;return this.negative=1,this._strip()},s.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),i=e,o=0|i.words[i.length-1];0!=(r=26-this._countBits(o))&&(i=i.ushln(r),n.iushln(r),o=0|i.words[i.length-1]);var a,c=n.length-i.length;if("mod"!==t){(a=new s(null)).length=c+1,a.words=new Array(a.length);for(var l=0;l<a.length;l++)a.words[l]=0}var u=n.clone()._ishlnsubmul(i,1,c);0===u.negative&&(n=u,a&&(a.words[c]=1));for(var h=c-1;h>=0;h--){var d=67108864*(0|n.words[i.length+h])+(0|n.words[i.length+h-1]);for(d=Math.min(d/o|0,67108863),n._ishlnsubmul(i,d,h);0!==n.negative;)d--,n.negative=0,n._ishlnsubmul(i,1,h),n.isZero()||(n.negative^=1);a&&(a.words[h]=d)}return a&&a._strip(),n._strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},s.prototype.divmod=function(e,t,r){return n(!e.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(o=a.mod.neg(),r&&0!==o.negative&&o.iadd(e)),{div:i,mod:o}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):this.negative&e.negative?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(o=a.mod.neg(),r&&0!==o.negative&&o.isub(e)),{div:a.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new s(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new s(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new s(this.modrn(e.words[0]))}:this._wordDiv(e,t);var i,o,a},s.prototype.div=function(e){return this.divmod(e,"div",!1).div},s.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},s.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},s.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),i=e.andln(1),s=r.cmp(n);return s<0||1===i&&0===s?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},s.prototype.modrn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=(1<<26)%e,i=0,s=this.length-1;s>=0;s--)i=(r*i+(0|this.words[s]))%e;return t?-i:i},s.prototype.modn=function(e){return this.modrn(e)},s.prototype.idivn=function(e){var t=e<0;t&&(e=-e),n(e<=67108863);for(var r=0,i=this.length-1;i>=0;i--){var s=(0|this.words[i])+67108864*r;this.words[i]=s/e|0,r=s%e}return this._strip(),t?this.ineg():this},s.prototype.divn=function(e){return this.clone().idivn(e)},s.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new s(1),o=new s(0),a=new s(0),c=new s(1),l=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++l;for(var u=r.clone(),h=t.clone();!t.isZero();){for(var d=0,p=1;!(t.words[0]&p)&&d<26;++d,p<<=1);if(d>0)for(t.iushrn(d);d-- >0;)(i.isOdd()||o.isOdd())&&(i.iadd(u),o.isub(h)),i.iushrn(1),o.iushrn(1);for(var f=0,g=1;!(r.words[0]&g)&&f<26;++f,g<<=1);if(f>0)for(r.iushrn(f);f-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(u),c.isub(h)),a.iushrn(1),c.iushrn(1);t.cmp(r)>=0?(t.isub(r),i.isub(a),o.isub(c)):(r.isub(t),a.isub(i),c.isub(o))}return{a,b:c,gcd:r.iushln(l)}},s.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,o=new s(1),a=new s(0),c=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var l=0,u=1;!(t.words[0]&u)&&l<26;++l,u<<=1);if(l>0)for(t.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(c),o.iushrn(1);for(var h=0,d=1;!(r.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(r.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);t.cmp(r)>=0?(t.isub(r),o.isub(a)):(r.isub(t),a.isub(o))}return(i=0===t.cmpn(1)?o:a).cmpn(0)<0&&i.iadd(e),i},s.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=t.cmp(r);if(i<0){var s=t;t=r,r=s}else if(0===i||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},s.prototype.invm=function(e){return this.egcd(e).a.umod(e)},s.prototype.isEven=function(){return!(1&this.words[0])},s.prototype.isOdd=function(){return!(1&~this.words[0])},s.prototype.andln=function(e){return this.words[0]&e},s.prototype.bincn=function(e){n("number"==typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var s=i,o=r;0!==s&&o<this.length;o++){var a=0|this.words[o];s=(a+=s)>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)t=1;else{r&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},s.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},s.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|e.words[r];if(n!==i){n<i?t=-1:n>i&&(t=1);break}}return t},s.prototype.gtn=function(e){return 1===this.cmpn(e)},s.prototype.gt=function(e){return 1===this.cmp(e)},s.prototype.gten=function(e){return this.cmpn(e)>=0},s.prototype.gte=function(e){return this.cmp(e)>=0},s.prototype.ltn=function(e){return-1===this.cmpn(e)},s.prototype.lt=function(e){return-1===this.cmp(e)},s.prototype.lten=function(e){return this.cmpn(e)<=0},s.prototype.lte=function(e){return this.cmp(e)<=0},s.prototype.eqn=function(e){return 0===this.cmpn(e)},s.prototype.eq=function(e){return 0===this.cmp(e)},s.red=function(e){return new I(e)},s.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(e){return this.red=e,this},s.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},s.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},s.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},s.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},s.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},s.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},s.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},s.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var v={k256:null,p224:null,p192:null,p25519:null};function E(e,t){this.name=e,this.p=new s(t,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function _(){E.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function A(){E.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function S(){E.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function C(){E.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function I(e){if("string"==typeof e){var t=s._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function N(e){I.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}E.prototype._tmp=function(){var e=new s(null);return e.words=new Array(Math.ceil(this.n/13)),e},E.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},E.prototype.split=function(e,t){e.iushrn(this.n,0,t)},E.prototype.imulK=function(e){return e.imul(this.k)},i(_,E),_.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),i=0;i<n;i++)t.words[i]=e.words[i];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var s=e.words[9];for(t.words[t.length++]=s&r,i=10;i<e.length;i++){var o=0|e.words[i];e.words[i-10]=(o&r)<<4|s>>>22,s=o}s>>>=22,e.words[i-10]=s,0===s&&e.length>10?e.length-=10:e.length-=9},_.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(A,E),i(S,E),i(C,E),C.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,i=67108863&n;n>>>=26,e.words[r]=i,t=n}return 0!==t&&(e.words[e.length++]=t),e},s._prime=function(e){if(v[e])return v[e];var t;if("k256"===e)t=new _;else if("p224"===e)t=new A;else if("p192"===e)t=new S;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new C}return v[e]=t,t},I.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},I.prototype._verify2=function(e,t){n(!(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},I.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(u(e,e.umod(this.m)._forceRed(this)),e)},I.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},I.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},I.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},I.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},I.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},I.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},I.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},I.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},I.prototype.isqr=function(e){return this.imul(e,e.clone())},I.prototype.sqr=function(e){return this.mul(e,e)},I.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2==1),3===t){var r=this.m.add(new s(1)).iushrn(2);return this.pow(e,r)}for(var i=this.m.subn(1),o=0;!i.isZero()&&0===i.andln(1);)o++,i.iushrn(1);n(!i.isZero());var a=new s(1).toRed(this),c=a.redNeg(),l=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new s(2*u*u).toRed(this);0!==this.pow(u,l).cmp(c);)u.redIAdd(c);for(var h=this.pow(u,i),d=this.pow(e,i.addn(1).iushrn(1)),p=this.pow(e,i),f=o;0!==p.cmp(a);){for(var g=p,m=0;0!==g.cmp(a);m++)g=g.redSqr();n(m<f);var y=this.pow(h,new s(1).iushln(f-m-1));d=d.redMul(y),h=y.redSqr(),p=p.redMul(h),f=m}return d},I.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},I.prototype.pow=function(e,t){if(t.isZero())return new s(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new s(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],o=0,a=0,c=t.bitLength()%26;for(0===c&&(c=26),n=t.length-1;n>=0;n--){for(var l=t.words[n],u=c-1;u>=0;u--){var h=l>>u&1;i!==r[0]&&(i=this.sqr(i)),0!==h||0!==o?(o<<=1,o|=h,(4==++a||0===n&&0===u)&&(i=this.mul(i,r[o]),a=0,o=0)):a=0}c=26}return i},I.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},I.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},s.mont=function(e){return new N(e)},i(N,I),N.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},N.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},N.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},N.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new s(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},N.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=r.nmd(e),this)},9454:(e,t,r)=>{t.g=void 0;const n=r(2939);t.g=function(){let e,t;try{e=n.getDocumentOrThrow(),t=n.getLocationOrThrow()}catch(e){return null}function r(...t){const r=e.getElementsByTagName("meta");for(let e=0;e<r.length;e++){const n=r[e],i=["itemprop","property","name"].map((e=>n.getAttribute(e))).filter((e=>!!e&&t.includes(e)));if(i.length&&i){const e=n.getAttribute("content");if(e)return e}}return""}const i=function(){let t=r("name","og:site_name","og:title","twitter:title");return t||(t=e.title),t}();return{description:r("description","og:description","twitter:description","keywords"),url:t.origin,icons:function(){const r=e.getElementsByTagName("link"),n=[];for(let e=0;e<r.length;e++){const i=r[e],s=i.getAttribute("rel");if(s&&s.toLowerCase().indexOf("icon")>-1){const e=i.getAttribute("href");if(e)if(-1===e.toLowerCase().indexOf("https:")&&-1===e.toLowerCase().indexOf("http:")&&0!==e.indexOf("//")){let r=t.protocol+"//"+t.host;if(0===e.indexOf("/"))r+=e;else{const n=t.pathname.split("/");n.pop(),r+=n.join("/")+"/"+e}n.push(r)}else if(0===e.indexOf("//")){const r=t.protocol+e;n.push(r)}else n.push(e)}}return n}(),name:i}}},9510:(e,t,r)=>{r.d(t,{o:()=>n});const n={METMASK_CONNECTOR_NAME:"MetaMask",TRUST_CONNECTOR_NAME:"Trust Wallet",SOLFLARE_CONNECTOR_NAME:"Solflare",PHANTOM_CONNECTOR_NAME:"Phantom",COIN98_CONNECTOR_NAME:"Coin98",MAGIC_EDEN_CONNECTOR_NAME:"Magic Eden",BACKPACK_CONNECTOR_NAME:"Backpack",BITGET_CONNECTOR_NAME:"Bitget Wallet",FRONTIER_CONNECTOR_NAME:"Frontier",XVERSE_CONNECTOR_NAME:"Xverse Wallet",LEATHER_CONNECTOR_NAME:"Leather",EIP155:"eip155",ADD_CHAIN_METHOD:"wallet_addEthereumChain",EIP6963_ANNOUNCE_EVENT:"eip6963:announceProvider",EIP6963_REQUEST_EVENT:"eip6963:requestProvider",CONNECTOR_RDNS_MAP:{coinbaseWallet:"com.coinbase.wallet",coinbaseWalletSDK:"com.coinbase.wallet"},CONNECTOR_TYPE_EXTERNAL:"EXTERNAL",CONNECTOR_TYPE_WALLET_CONNECT:"WALLET_CONNECT",CONNECTOR_TYPE_INJECTED:"INJECTED",CONNECTOR_TYPE_ANNOUNCED:"ANNOUNCED",CONNECTOR_TYPE_AUTH:"AUTH",CONNECTOR_TYPE_MULTI_CHAIN:"MULTI_CHAIN",CONNECTOR_TYPE_W3M_AUTH:"ID_AUTH"}},9606:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=r(5215);n.__exportStar(r(2985),t),n.__exportStar(r(221),t)},9883:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Watch=void 0;class r{constructor(){this.timestamps=new Map}start(e){if(this.timestamps.has(e))throw new Error(`Watch already started for label: ${e}`);this.timestamps.set(e,{started:Date.now()})}stop(e){const t=this.get(e);if(void 0!==t.elapsed)throw new Error(`Watch already stopped for label: ${e}`);const r=Date.now()-t.started;this.timestamps.set(e,{started:t.started,elapsed:r})}get(e){const t=this.timestamps.get(e);if(void 0===t)throw new Error(`No timestamp found for label: ${e}`);return t}elapsed(e){const t=this.get(e);return t.elapsed||Date.now()-t.started}}t.Watch=r,t.default=r}},n={};function i(e){var t=n[e];if(void 0!==t)return t.exports;var s=n[e]={id:e,loaded:!1,exports:{}};return r[e].call(s.exports,s,s.exports,i),s.loaded=!0,s.exports}i.m=r,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,r)=>(i.f[r](e,t),t)),[])),i.u=e=>e+".mainModule.js",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),e={8792:0},t=t=>{var r,n,{__webpack_ids__:s,__webpack_modules__:o,__webpack_runtime__:a}=t,c=0;for(r in o)i.o(o,r)&&(i.m[r]=o[r]);for(a&&a(i);c<s.length;c++)n=s[c],i.o(e,n)&&e[n]&&e[n][0](),e[s[c]]=0},i.f.j=(r,n)=>{var s=i.o(e,r)?e[r]:void 0;if(0!==s)if(s)n.push(s[1]);else{var o=import("./"+i.u(r)).then(t,(t=>{throw 0!==e[r]&&(e[r]=void 0),t}));o=Promise.race([o,new Promise((t=>s=e[r]=[t]))]),n.push(s[1]=o)}};var s={};i.d(s,{A:()=>Ju});var o=i(6742),a=i(4376),c=i(3096),l=i(9088),u=i(9177),h=i(184),d=i(2944),p=i(8467),f=i(8249),g=i(3450),m=i(7388),y=i(2733),w=i(8996),b=i(7508),v=i(1655),E=i(5306),_=i(9510);const A={UniversalProviderErrors:{UNAUTHORIZED_DOMAIN_NOT_ALLOWED:{message:"Unauthorized: origin not allowed",alertErrorKey:"INVALID_APP_CONFIGURATION"},JWT_VALIDATION_ERROR:{message:"JWT validation error: JWT Token is not yet valid",alertErrorKey:"JWT_TOKEN_NOT_VALID"},INVALID_KEY:{message:"Unauthorized: invalid key",alertErrorKey:"INVALID_PROJECT_ID"}},ALERT_ERRORS:{SWITCH_NETWORK_NOT_FOUND:{shortMessage:"Network Not Found",longMessage:"Network not found - please make sure it is included in 'networks' array in createAppKit function"},INVALID_APP_CONFIGURATION:{shortMessage:"Invalid App Configuration",longMessage:()=>`Origin ${"undefined"!=typeof window?window.origin:"unknown"} not found on Allowlist - update configuration on cloud.reown.com`},SOCIALS_TIMEOUT:{shortMessage:"Invalid App Configuration",longMessage:()=>"There was an issue loading the embedded wallet. Please verify that your domain is allowed at cloud.reown.com"},JWT_TOKEN_NOT_VALID:{shortMessage:"Session Expired",longMessage:"Invalid session found on UniversalProvider - please check your time settings and connect again"},INVALID_PROJECT_ID:{shortMessage:"Invalid App Configuration",longMessage:"Invalid Project ID - update configuration"},PROJECT_ID_NOT_CONFIGURED:{shortMessage:"Project ID Not Configured",longMessage:"Project ID Not Configured - update configuration on cloud.reown.com"}}};var S=i(9073),C=i(4707);const I={eip155:void 0,solana:void 0,polkadot:void 0,bip122:void 0},N=(0,S.BX)({providers:{...I},providerIds:{...I}}),k={state:N,subscribeKey:(e,t)=>(0,C.u$)(N,e,t),subscribe:e=>(0,S.B1)(N,(()=>{e(N)})),subscribeProviders:e=>(0,S.B1)(N.providers,(()=>e(N.providers))),setProvider(e,t){t&&(N.providers[e]=(0,S.KR)(t))},getProvider:e=>N.providers[e],setProviderId(e,t){t&&(N.providerIds[e]=t)},getProviderId(e){if(e)return N.providerIds[e]},reset(){N.providers={...I},N.providerIds={...I}},resetChain(e){N.providers[e]=void 0,N.providerIds[e]=void 0}};var T,x,P,O=i(6409),R=i(152);(x=T||(T={})).assertEqual=e=>e,x.assertIs=function(e){},x.assertNever=function(e){throw new Error},x.arrayToEnum=e=>{const t={};for(const r of e)t[r]=r;return t},x.getValidEnumValues=e=>{const t=x.objectKeys(e).filter((t=>"number"!=typeof e[e[t]])),r={};for(const n of t)r[n]=e[n];return x.objectValues(r)},x.objectValues=e=>x.objectKeys(e).map((function(t){return e[t]})),x.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},x.find=(e,t)=>{for(const r of e)if(t(r))return r},x.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,x.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},x.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(P||(P={})).mergeShapes=(e,t)=>({...e,...t});const M=T.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),U=e=>{switch(typeof e){case"undefined":return M.undefined;case"string":return M.string;case"number":return isNaN(e)?M.nan:M.number;case"boolean":return M.boolean;case"function":return M.function;case"bigint":return M.bigint;case"symbol":return M.symbol;case"object":return Array.isArray(e)?M.array:null===e?M.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?M.promise:"undefined"!=typeof Map&&e instanceof Map?M.map:"undefined"!=typeof Set&&e instanceof Set?M.set:"undefined"!=typeof Date&&e instanceof Date?M.date:M.object;default:return M.unknown}},B=T.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class L extends Error{constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(const i of e.issues)if("invalid_union"===i.code)i.unionErrors.map(n);else if("invalid_return_type"===i.code)n(i.returnTypeError);else if("invalid_arguments"===i.code)n(i.argumentsError);else if(0===i.path.length)r._errors.push(t(i));else{let e=r,n=0;for(;n<i.path.length;){const r=i.path[n];n===i.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(i))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}toString(){return this.message}get message(){return JSON.stringify(this.issues,T.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},r=[];for(const n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}L.create=e=>new L(e);const D=(e,t)=>{let r;switch(e.code){case B.invalid_type:r=e.received===M.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case B.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,T.jsonStringifyReplacer)}`;break;case B.unrecognized_keys:r=`Unrecognized key(s) in object: ${T.joinValues(e.keys,", ")}`;break;case B.invalid_union:r="Invalid input";break;case B.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${T.joinValues(e.options)}`;break;case B.invalid_enum_value:r=`Invalid enum value. Expected ${T.joinValues(e.options)}, received '${e.received}'`;break;case B.invalid_arguments:r="Invalid function arguments";break;case B.invalid_return_type:r="Invalid function return type";break;case B.invalid_date:r="Invalid date";break;case B.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:T.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case B.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case B.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case B.custom:r="Invalid input";break;case B.invalid_intersection_types:r="Intersection results could not be merged";break;case B.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case B.not_finite:r="Number must be finite";break;default:r=t.defaultError,T.assertNever(e)}return{message:r}};let j=D;function $(){return j}const W=e=>{const{data:t,path:r,errorMaps:n,issueData:i}=e,s=[...r,...i.path||[]],o={...i,path:s};let a="";const c=n.filter((e=>!!e)).slice().reverse();for(const e of c)a=e(o,{data:t,defaultError:a}).message;return{...i,path:s,message:i.message||a}};function z(e,t){const r=W({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,$(),D].filter((e=>!!e))});e.common.issues.push(r)}class q{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const n of t){if("aborted"===n.status)return H;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const e of t)r.push({key:await e.key,value:await e.value});return q.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const n of t){const{key:t,value:i}=n;if("aborted"===t.status)return H;if("aborted"===i.status)return H;"dirty"===t.status&&e.dirty(),"dirty"===i.status&&e.dirty(),"__proto__"===t.value||void 0===i.value&&!n.alwaysSet||(r[t.value]=i.value)}return{status:e.value,value:r}}}const H=Object.freeze({status:"aborted"}),F=e=>({status:"dirty",value:e}),K=e=>({status:"valid",value:e}),V=e=>"aborted"===e.status,G=e=>"dirty"===e.status,Z=e=>"valid"===e.status,Y=e=>"undefined"!=typeof Promise&&e instanceof Promise;var J,X;(X=J||(J={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},X.toString=e=>"string"==typeof e?e:null==e?void 0:e.message;class Q{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const ee=(e,t)=>{if(Z(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new L(e.common.issues);return this._error=t,this._error}}};function te(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');return t?{errorMap:t,description:i}:{errorMap:(e,t)=>"invalid_type"!==e.code?{message:t.defaultError}:void 0===t.data?{message:null!=n?n:t.defaultError}:{message:null!=r?r:t.defaultError},description:i}}class re{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return U(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:U(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new q,ctx:{common:e.parent.common,data:e.data,parsedType:U(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Y(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;const n={common:{issues:[],async:null!==(r=null==t?void 0:t.async)&&void 0!==r&&r,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:U(e)},i=this._parseSync({data:e,path:n.path,parent:n});return ee(n,i)}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:U(e)},n=this._parse({data:e,path:r.path,parent:r}),i=await(Y(n)?n:Promise.resolve(n));return ee(r,i)}refine(e,t){const r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,n)=>{const i=e(t),s=()=>n.addIssue({code:B.custom,...r(t)});return"undefined"!=typeof Promise&&i instanceof Promise?i.then((e=>!!e||(s(),!1))):!!i||(s(),!1)}))}refinement(e,t){return this._refinement(((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1)))}_refinement(e){return new qe({schema:this,typeName:tt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return He.create(this,this._def)}nullable(){return Fe.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Se.create(this,this._def)}promise(){return ze.create(this,this._def)}or(e){return Ne.create([this,e],this._def)}and(e){return Pe.create(this,e,this._def)}transform(e){return new qe({...te(this._def),schema:this,typeName:tt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new Ke({...te(this._def),innerType:this,defaultValue:t,typeName:tt.ZodDefault})}brand(){return new Ye({typeName:tt.ZodBranded,type:this,...te(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new Ve({...te(this._def),innerType:this,catchValue:t,typeName:tt.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return Je.create(this,e)}readonly(){return Xe.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const ne=/^c[^\s-]{8,}$/i,ie=/^[a-z][a-z0-9]*$/,se=/^[0-9A-HJKMNP-TV-Z]{26}$/,oe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ae=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let ce;const le=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,ue=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;class he extends re{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==M.string){const t=this._getOrReturnCtx(e);return z(t,{code:B.invalid_type,expected:M.string,received:t.parsedType}),H}const t=new q;let r;for(const o of this._def.checks)if("min"===o.kind)e.data.length<o.value&&(r=this._getOrReturnCtx(e,r),z(r,{code:B.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),t.dirty());else if("max"===o.kind)e.data.length>o.value&&(r=this._getOrReturnCtx(e,r),z(r,{code:B.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),t.dirty());else if("length"===o.kind){const n=e.data.length>o.value,i=e.data.length<o.value;(n||i)&&(r=this._getOrReturnCtx(e,r),n?z(r,{code:B.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):i&&z(r,{code:B.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),t.dirty())}else if("email"===o.kind)ae.test(e.data)||(r=this._getOrReturnCtx(e,r),z(r,{validation:"email",code:B.invalid_string,message:o.message}),t.dirty());else if("emoji"===o.kind)ce||(ce=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),ce.test(e.data)||(r=this._getOrReturnCtx(e,r),z(r,{validation:"emoji",code:B.invalid_string,message:o.message}),t.dirty());else if("uuid"===o.kind)oe.test(e.data)||(r=this._getOrReturnCtx(e,r),z(r,{validation:"uuid",code:B.invalid_string,message:o.message}),t.dirty());else if("cuid"===o.kind)ne.test(e.data)||(r=this._getOrReturnCtx(e,r),z(r,{validation:"cuid",code:B.invalid_string,message:o.message}),t.dirty());else if("cuid2"===o.kind)ie.test(e.data)||(r=this._getOrReturnCtx(e,r),z(r,{validation:"cuid2",code:B.invalid_string,message:o.message}),t.dirty());else if("ulid"===o.kind)se.test(e.data)||(r=this._getOrReturnCtx(e,r),z(r,{validation:"ulid",code:B.invalid_string,message:o.message}),t.dirty());else if("url"===o.kind)try{new URL(e.data)}catch(n){r=this._getOrReturnCtx(e,r),z(r,{validation:"url",code:B.invalid_string,message:o.message}),t.dirty()}else"regex"===o.kind?(o.regex.lastIndex=0,o.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),z(r,{validation:"regex",code:B.invalid_string,message:o.message}),t.dirty())):"trim"===o.kind?e.data=e.data.trim():"includes"===o.kind?e.data.includes(o.value,o.position)||(r=this._getOrReturnCtx(e,r),z(r,{code:B.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),t.dirty()):"toLowerCase"===o.kind?e.data=e.data.toLowerCase():"toUpperCase"===o.kind?e.data=e.data.toUpperCase():"startsWith"===o.kind?e.data.startsWith(o.value)||(r=this._getOrReturnCtx(e,r),z(r,{code:B.invalid_string,validation:{startsWith:o.value},message:o.message}),t.dirty()):"endsWith"===o.kind?e.data.endsWith(o.value)||(r=this._getOrReturnCtx(e,r),z(r,{code:B.invalid_string,validation:{endsWith:o.value},message:o.message}),t.dirty()):"datetime"===o.kind?((s=o).precision?s.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${s.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${s.precision}}Z$`):0===s.precision?s.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):s.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$")).test(e.data)||(r=this._getOrReturnCtx(e,r),z(r,{code:B.invalid_string,validation:"datetime",message:o.message}),t.dirty()):"ip"===o.kind?(n=e.data,("v4"!==(i=o.version)&&i||!le.test(n))&&("v6"!==i&&i||!ue.test(n))&&(r=this._getOrReturnCtx(e,r),z(r,{validation:"ip",code:B.invalid_string,message:o.message}),t.dirty())):T.assertNever(o);var n,i,s;return{status:t.value,value:e.data}}_regex(e,t,r){return this.refinement((t=>e.test(t)),{validation:t,code:B.invalid_string,...J.errToObj(r)})}_addCheck(e){return new he({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...J.errToObj(e)})}url(e){return this._addCheck({kind:"url",...J.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...J.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...J.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...J.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...J.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...J.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...J.errToObj(e)})}datetime(e){var t;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,...J.errToObj(null==e?void 0:e.message)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...J.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...J.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...J.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...J.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...J.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...J.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...J.errToObj(t)})}nonempty(e){return this.min(1,J.errToObj(e))}trim(){return new he({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new he({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new he({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function de(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n;return parseInt(e.toFixed(i).replace(".",""))%parseInt(t.toFixed(i).replace(".",""))/Math.pow(10,i)}he.create=e=>{var t;return new he({checks:[],typeName:tt.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...te(e)})};class pe extends re{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==M.number){const t=this._getOrReturnCtx(e);return z(t,{code:B.invalid_type,expected:M.number,received:t.parsedType}),H}let t;const r=new q;for(const n of this._def.checks)"int"===n.kind?T.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),z(t,{code:B.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty()):"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),z(t,{code:B.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),z(t,{code:B.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty()):"multipleOf"===n.kind?0!==de(e.data,n.value)&&(t=this._getOrReturnCtx(e,t),z(t,{code:B.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),z(t,{code:B.not_finite,message:n.message}),r.dirty()):T.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,J.toString(t))}gt(e,t){return this.setLimit("min",e,!1,J.toString(t))}lte(e,t){return this.setLimit("max",e,!0,J.toString(t))}lt(e,t){return this.setLimit("max",e,!1,J.toString(t))}setLimit(e,t,r,n){return new pe({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:J.toString(n)}]})}_addCheck(e){return new pe({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:J.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:J.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:J.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:J.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:J.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:J.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:J.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:J.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:J.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&T.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}pe.create=e=>new pe({checks:[],typeName:tt.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...te(e)});class fe extends re{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==M.bigint){const t=this._getOrReturnCtx(e);return z(t,{code:B.invalid_type,expected:M.bigint,received:t.parsedType}),H}let t;const r=new q;for(const n of this._def.checks)"min"===n.kind?(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),z(t,{code:B.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"max"===n.kind?(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),z(t,{code:B.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty()):"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),z(t,{code:B.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):T.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,J.toString(t))}gt(e,t){return this.setLimit("min",e,!1,J.toString(t))}lte(e,t){return this.setLimit("max",e,!0,J.toString(t))}lt(e,t){return this.setLimit("max",e,!1,J.toString(t))}setLimit(e,t,r,n){return new fe({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:J.toString(n)}]})}_addCheck(e){return new fe({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:J.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:J.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:J.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:J.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:J.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}fe.create=e=>{var t;return new fe({checks:[],typeName:tt.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...te(e)})};class ge extends re{_parse(e){if(this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==M.boolean){const t=this._getOrReturnCtx(e);return z(t,{code:B.invalid_type,expected:M.boolean,received:t.parsedType}),H}return K(e.data)}}ge.create=e=>new ge({typeName:tt.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...te(e)});class me extends re{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==M.date){const t=this._getOrReturnCtx(e);return z(t,{code:B.invalid_type,expected:M.date,received:t.parsedType}),H}if(isNaN(e.data.getTime()))return z(this._getOrReturnCtx(e),{code:B.invalid_date}),H;const t=new q;let r;for(const n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(r=this._getOrReturnCtx(e,r),z(r,{code:B.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),t.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(r=this._getOrReturnCtx(e,r),z(r,{code:B.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),t.dirty()):T.assertNever(n);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new me({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:J.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:J.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}me.create=e=>new me({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:tt.ZodDate,...te(e)});class ye extends re{_parse(e){if(this._getType(e)!==M.symbol){const t=this._getOrReturnCtx(e);return z(t,{code:B.invalid_type,expected:M.symbol,received:t.parsedType}),H}return K(e.data)}}ye.create=e=>new ye({typeName:tt.ZodSymbol,...te(e)});class we extends re{_parse(e){if(this._getType(e)!==M.undefined){const t=this._getOrReturnCtx(e);return z(t,{code:B.invalid_type,expected:M.undefined,received:t.parsedType}),H}return K(e.data)}}we.create=e=>new we({typeName:tt.ZodUndefined,...te(e)});class be extends re{_parse(e){if(this._getType(e)!==M.null){const t=this._getOrReturnCtx(e);return z(t,{code:B.invalid_type,expected:M.null,received:t.parsedType}),H}return K(e.data)}}be.create=e=>new be({typeName:tt.ZodNull,...te(e)});class ve extends re{constructor(){super(...arguments),this._any=!0}_parse(e){return K(e.data)}}ve.create=e=>new ve({typeName:tt.ZodAny,...te(e)});class Ee extends re{constructor(){super(...arguments),this._unknown=!0}_parse(e){return K(e.data)}}Ee.create=e=>new Ee({typeName:tt.ZodUnknown,...te(e)});class _e extends re{_parse(e){const t=this._getOrReturnCtx(e);return z(t,{code:B.invalid_type,expected:M.never,received:t.parsedType}),H}}_e.create=e=>new _e({typeName:tt.ZodNever,...te(e)});class Ae extends re{_parse(e){if(this._getType(e)!==M.undefined){const t=this._getOrReturnCtx(e);return z(t,{code:B.invalid_type,expected:M.void,received:t.parsedType}),H}return K(e.data)}}Ae.create=e=>new Ae({typeName:tt.ZodVoid,...te(e)});class Se extends re{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==M.array)return z(t,{code:B.invalid_type,expected:M.array,received:t.parsedType}),H;if(null!==n.exactLength){const e=t.data.length>n.exactLength.value,i=t.data.length<n.exactLength.value;(e||i)&&(z(t,{code:e?B.too_big:B.too_small,minimum:i?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(z(t,{code:B.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(z(t,{code:B.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map(((e,r)=>n.type._parseAsync(new Q(t,e,t.path,r))))).then((e=>q.mergeArray(r,e)));const i=[...t.data].map(((e,r)=>n.type._parseSync(new Q(t,e,t.path,r))));return q.mergeArray(r,i)}get element(){return this._def.type}min(e,t){return new Se({...this._def,minLength:{value:e,message:J.toString(t)}})}max(e,t){return new Se({...this._def,maxLength:{value:e,message:J.toString(t)}})}length(e,t){return new Se({...this._def,exactLength:{value:e,message:J.toString(t)}})}nonempty(e){return this.min(1,e)}}function Ce(e){if(e instanceof Ie){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=He.create(Ce(n))}return new Ie({...e._def,shape:()=>t})}return e instanceof Se?new Se({...e._def,type:Ce(e.element)}):e instanceof He?He.create(Ce(e.unwrap())):e instanceof Fe?Fe.create(Ce(e.unwrap())):e instanceof Oe?Oe.create(e.items.map((e=>Ce(e)))):e}Se.create=(e,t)=>new Se({type:e,minLength:null,maxLength:null,exactLength:null,typeName:tt.ZodArray,...te(t)});class Ie extends re{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=T.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==M.object){const t=this._getOrReturnCtx(e);return z(t,{code:B.invalid_type,expected:M.object,received:t.parsedType}),H}const{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:i}=this._getCached(),s=[];if(!(this._def.catchall instanceof _e&&"strip"===this._def.unknownKeys))for(const e in r.data)i.includes(e)||s.push(e);const o=[];for(const e of i){const t=n[e],i=r.data[e];o.push({key:{status:"valid",value:e},value:t._parse(new Q(r,i,r.path,e)),alwaysSet:e in r.data})}if(this._def.catchall instanceof _e){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of s)o.push({key:{status:"valid",value:e},value:{status:"valid",value:r.data[e]}});else if("strict"===e)s.length>0&&(z(r,{code:B.unrecognized_keys,keys:s}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of s){const n=r.data[t];o.push({key:{status:"valid",value:t},value:e._parse(new Q(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of o){const r=await t.key;e.push({key:r,value:await t.value,alwaysSet:t.alwaysSet})}return e})).then((e=>q.mergeObjectSync(t,e))):q.mergeObjectSync(t,o)}get shape(){return this._def.shape()}strict(e){return J.errToObj,new Ie({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{var n,i,s,o;const a=null!==(s=null===(i=(n=this._def).errorMap)||void 0===i?void 0:i.call(n,t,r).message)&&void 0!==s?s:r.defaultError;return"unrecognized_keys"===t.code?{message:null!==(o=J.errToObj(e).message)&&void 0!==o?o:a}:{message:a}}}:{}})}strip(){return new Ie({...this._def,unknownKeys:"strip"})}passthrough(){return new Ie({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ie({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ie({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:tt.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Ie({...this._def,catchall:e})}pick(e){const t={};return T.objectKeys(e).forEach((r=>{e[r]&&this.shape[r]&&(t[r]=this.shape[r])})),new Ie({...this._def,shape:()=>t})}omit(e){const t={};return T.objectKeys(this.shape).forEach((r=>{e[r]||(t[r]=this.shape[r])})),new Ie({...this._def,shape:()=>t})}deepPartial(){return Ce(this)}partial(e){const t={};return T.objectKeys(this.shape).forEach((r=>{const n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()})),new Ie({...this._def,shape:()=>t})}required(e){const t={};return T.objectKeys(this.shape).forEach((r=>{if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof He;)e=e._def.innerType;t[r]=e}})),new Ie({...this._def,shape:()=>t})}keyof(){return je(T.objectKeys(this.shape))}}Ie.create=(e,t)=>new Ie({shape:()=>e,unknownKeys:"strip",catchall:_e.create(),typeName:tt.ZodObject,...te(t)}),Ie.strictCreate=(e,t)=>new Ie({shape:()=>e,unknownKeys:"strict",catchall:_e.create(),typeName:tt.ZodObject,...te(t)}),Ie.lazycreate=(e,t)=>new Ie({shape:e,unknownKeys:"strip",catchall:_e.create(),typeName:tt.ZodObject,...te(t)});class Ne extends re{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map((async e=>{const r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const r of e)if("dirty"===r.result.status)return t.common.issues.push(...r.ctx.common.issues),r.result;const r=e.map((e=>new L(e.ctx.common.issues)));return z(t,{code:B.invalid_union,unionErrors:r}),H}));{let e;const n=[];for(const i of r){const r={...t,common:{...t.common,issues:[]},parent:null},s=i._parseSync({data:t.data,path:t.path,parent:r});if("valid"===s.status)return s;"dirty"!==s.status||e||(e={result:s,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const i=n.map((e=>new L(e)));return z(t,{code:B.invalid_union,unionErrors:i}),H}}get options(){return this._def.options}}Ne.create=(e,t)=>new Ne({options:e,typeName:tt.ZodUnion,...te(t)});const ke=e=>e instanceof Le?ke(e.schema):e instanceof qe?ke(e.innerType()):e instanceof De?[e.value]:e instanceof $e?e.options:e instanceof We?Object.keys(e.enum):e instanceof Ke?ke(e._def.innerType):e instanceof we?[void 0]:e instanceof be?[null]:null;class Te extends re{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==M.object)return z(t,{code:B.invalid_type,expected:M.object,received:t.parsedType}),H;const r=this.discriminator,n=t.data[r],i=this.optionsMap.get(n);return i?t.common.async?i._parseAsync({data:t.data,path:t.path,parent:t}):i._parseSync({data:t.data,path:t.path,parent:t}):(z(t,{code:B.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),H)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const n=new Map;for(const r of t){const t=ke(r.shape[e]);if(!t)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const i of t){if(n.has(i))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(i)}`);n.set(i,r)}}return new Te({typeName:tt.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...te(r)})}}function xe(e,t){const r=U(e),n=U(t);if(e===t)return{valid:!0,data:e};if(r===M.object&&n===M.object){const r=T.objectKeys(t),n=T.objectKeys(e).filter((e=>-1!==r.indexOf(e))),i={...e,...t};for(const r of n){const n=xe(e[r],t[r]);if(!n.valid)return{valid:!1};i[r]=n.data}return{valid:!0,data:i}}if(r===M.array&&n===M.array){if(e.length!==t.length)return{valid:!1};const r=[];for(let n=0;n<e.length;n++){const i=xe(e[n],t[n]);if(!i.valid)return{valid:!1};r.push(i.data)}return{valid:!0,data:r}}return r===M.date&&n===M.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Pe extends re{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if(V(e)||V(n))return H;const i=xe(e.value,n.value);return i.valid?((G(e)||G(n))&&t.dirty(),{status:t.value,value:i.data}):(z(r,{code:B.invalid_intersection_types}),H)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then((([e,t])=>n(e,t))):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Pe.create=(e,t,r)=>new Pe({left:e,right:t,typeName:tt.ZodIntersection,...te(r)});class Oe extends re{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==M.array)return z(r,{code:B.invalid_type,expected:M.array,received:r.parsedType}),H;if(r.data.length<this._def.items.length)return z(r,{code:B.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),H;!this._def.rest&&r.data.length>this._def.items.length&&(z(r,{code:B.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const n=[...r.data].map(((e,t)=>{const n=this._def.items[t]||this._def.rest;return n?n._parse(new Q(r,e,r.path,t)):null})).filter((e=>!!e));return r.common.async?Promise.all(n).then((e=>q.mergeArray(t,e))):q.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new Oe({...this._def,rest:e})}}Oe.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Oe({items:e,typeName:tt.ZodTuple,rest:null,...te(t)})};class Re extends re{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==M.object)return z(r,{code:B.invalid_type,expected:M.object,received:r.parsedType}),H;const n=[],i=this._def.keyType,s=this._def.valueType;for(const e in r.data)n.push({key:i._parse(new Q(r,e,r.path,e)),value:s._parse(new Q(r,r.data[e],r.path,e))});return r.common.async?q.mergeObjectAsync(t,n):q.mergeObjectSync(t,n)}get element(){return this._def.valueType}static create(e,t,r){return new Re(t instanceof re?{keyType:e,valueType:t,typeName:tt.ZodRecord,...te(r)}:{keyType:he.create(),valueType:e,typeName:tt.ZodRecord,...te(t)})}}class Me extends re{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==M.map)return z(r,{code:B.invalid_type,expected:M.map,received:r.parsedType}),H;const n=this._def.keyType,i=this._def.valueType,s=[...r.data.entries()].map((([e,t],s)=>({key:n._parse(new Q(r,e,r.path,[s,"key"])),value:i._parse(new Q(r,t,r.path,[s,"value"]))})));if(r.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const r of s){const n=await r.key,i=await r.value;if("aborted"===n.status||"aborted"===i.status)return H;"dirty"!==n.status&&"dirty"!==i.status||t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const r of s){const n=r.key,i=r.value;if("aborted"===n.status||"aborted"===i.status)return H;"dirty"!==n.status&&"dirty"!==i.status||t.dirty(),e.set(n.value,i.value)}return{status:t.value,value:e}}}}Me.create=(e,t,r)=>new Me({valueType:t,keyType:e,typeName:tt.ZodMap,...te(r)});class Ue extends re{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==M.set)return z(r,{code:B.invalid_type,expected:M.set,received:r.parsedType}),H;const n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(z(r,{code:B.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(z(r,{code:B.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());const i=this._def.valueType;function s(e){const r=new Set;for(const n of e){if("aborted"===n.status)return H;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}const o=[...r.data.values()].map(((e,t)=>i._parse(new Q(r,e,r.path,t))));return r.common.async?Promise.all(o).then((e=>s(e))):s(o)}min(e,t){return new Ue({...this._def,minSize:{value:e,message:J.toString(t)}})}max(e,t){return new Ue({...this._def,maxSize:{value:e,message:J.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}Ue.create=(e,t)=>new Ue({valueType:e,minSize:null,maxSize:null,typeName:tt.ZodSet,...te(t)});class Be extends re{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==M.function)return z(t,{code:B.invalid_type,expected:M.function,received:t.parsedType}),H;function r(e,r){return W({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,$(),D].filter((e=>!!e)),issueData:{code:B.invalid_arguments,argumentsError:r}})}function n(e,r){return W({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,$(),D].filter((e=>!!e)),issueData:{code:B.invalid_return_type,returnTypeError:r}})}const i={errorMap:t.common.contextualErrorMap},s=t.data;if(this._def.returns instanceof ze){const e=this;return K((async function(...t){const o=new L([]),a=await e._def.args.parseAsync(t,i).catch((e=>{throw o.addIssue(r(t,e)),o})),c=await Reflect.apply(s,this,a);return await e._def.returns._def.type.parseAsync(c,i).catch((e=>{throw o.addIssue(n(c,e)),o}))}))}{const e=this;return K((function(...t){const o=e._def.args.safeParse(t,i);if(!o.success)throw new L([r(t,o.error)]);const a=Reflect.apply(s,this,o.data),c=e._def.returns.safeParse(a,i);if(!c.success)throw new L([n(a,c.error)]);return c.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Be({...this._def,args:Oe.create(e).rest(Ee.create())})}returns(e){return new Be({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,r){return new Be({args:e||Oe.create([]).rest(Ee.create()),returns:t||Ee.create(),typeName:tt.ZodFunction,...te(r)})}}class Le extends re{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Le.create=(e,t)=>new Le({getter:e,typeName:tt.ZodLazy,...te(t)});class De extends re{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return z(t,{received:t.data,code:B.invalid_literal,expected:this._def.value}),H}return{status:"valid",value:e.data}}get value(){return this._def.value}}function je(e,t){return new $e({values:e,typeName:tt.ZodEnum,...te(t)})}De.create=(e,t)=>new De({value:e,typeName:tt.ZodLiteral,...te(t)});class $e extends re{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),r=this._def.values;return z(t,{expected:T.joinValues(r),received:t.parsedType,code:B.invalid_type}),H}if(-1===this._def.values.indexOf(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return z(t,{received:t.data,code:B.invalid_enum_value,options:r}),H}return K(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e){return $e.create(e)}exclude(e){return $e.create(this.options.filter((t=>!e.includes(t))))}}$e.create=je;class We extends re{_parse(e){const t=T.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==M.string&&r.parsedType!==M.number){const e=T.objectValues(t);return z(r,{expected:T.joinValues(e),received:r.parsedType,code:B.invalid_type}),H}if(-1===t.indexOf(e.data)){const e=T.objectValues(t);return z(r,{received:r.data,code:B.invalid_enum_value,options:e}),H}return K(e.data)}get enum(){return this._def.values}}We.create=(e,t)=>new We({values:e,typeName:tt.ZodNativeEnum,...te(t)});class ze extends re{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==M.promise&&!1===t.common.async)return z(t,{code:B.invalid_type,expected:M.promise,received:t.parsedType}),H;const r=t.parsedType===M.promise?t.data:Promise.resolve(t.data);return K(r.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}ze.create=(e,t)=>new ze({type:e,typeName:tt.ZodPromise,...te(t)});class qe extends re{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===tt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,i={addIssue:e=>{z(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),"preprocess"===n.type){const e=n.transform(r.data,i);return r.common.issues.length?{status:"dirty",value:r.data}:r.common.async?Promise.resolve(e).then((e=>this._def.schema._parseAsync({data:e,path:r.path,parent:r}))):this._def.schema._parseSync({data:e,path:r.path,parent:r})}if("refinement"===n.type){const e=e=>{const t=n.refinement(e,i);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===r.common.async){const n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?H:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((r=>"aborted"===r.status?H:("dirty"===r.status&&t.dirty(),e(r.value).then((()=>({status:t.value,value:r.value}))))))}if("transform"===n.type){if(!1===r.common.async){const e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Z(e))return e;const s=n.transform(e.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:s}}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then((e=>Z(e)?Promise.resolve(n.transform(e.value,i)).then((e=>({status:t.value,value:e}))):e))}T.assertNever(n)}}qe.create=(e,t,r)=>new qe({schema:e,typeName:tt.ZodEffects,effect:t,...te(r)}),qe.createWithPreprocess=(e,t,r)=>new qe({schema:t,effect:{type:"preprocess",transform:e},typeName:tt.ZodEffects,...te(r)});class He extends re{_parse(e){return this._getType(e)===M.undefined?K(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}He.create=(e,t)=>new He({innerType:e,typeName:tt.ZodOptional,...te(t)});class Fe extends re{_parse(e){return this._getType(e)===M.null?K(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Fe.create=(e,t)=>new Fe({innerType:e,typeName:tt.ZodNullable,...te(t)});class Ke extends re{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===M.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}Ke.create=(e,t)=>new Ke({innerType:e,typeName:tt.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...te(t)});class Ve extends re{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Y(n)?n.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new L(r.common.issues)},input:r.data})}))):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new L(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}Ve.create=(e,t)=>new Ve({innerType:e,typeName:tt.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...te(t)});class Ge extends re{_parse(e){if(this._getType(e)!==M.nan){const t=this._getOrReturnCtx(e);return z(t,{code:B.invalid_type,expected:M.nan,received:t.parsedType}),H}return{status:"valid",value:e.data}}}Ge.create=e=>new Ge({typeName:tt.ZodNaN,...te(e)});const Ze=Symbol("zod_brand");class Ye extends re{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class Je extends re{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?H:"dirty"===e.status?(t.dirty(),F(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})();{const e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?H:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new Je({in:e,out:t,typeName:tt.ZodPipeline})}}class Xe extends re{_parse(e){const t=this._def.innerType._parse(e);return Z(t)&&(t.value=Object.freeze(t.value)),t}}Xe.create=(e,t)=>new Xe({innerType:e,typeName:tt.ZodReadonly,...te(t)});const Qe=(e,t={},r)=>e?ve.create().superRefine(((n,i)=>{var s,o;if(!e(n)){const e="function"==typeof t?t(n):"string"==typeof t?{message:t}:t,a=null===(o=null!==(s=e.fatal)&&void 0!==s?s:r)||void 0===o||o,c="string"==typeof e?{message:e}:e;i.addIssue({code:"custom",...c,fatal:a})}})):ve.create(),et={object:Ie.lazycreate};var tt,rt;(rt=tt||(tt={})).ZodString="ZodString",rt.ZodNumber="ZodNumber",rt.ZodNaN="ZodNaN",rt.ZodBigInt="ZodBigInt",rt.ZodBoolean="ZodBoolean",rt.ZodDate="ZodDate",rt.ZodSymbol="ZodSymbol",rt.ZodUndefined="ZodUndefined",rt.ZodNull="ZodNull",rt.ZodAny="ZodAny",rt.ZodUnknown="ZodUnknown",rt.ZodNever="ZodNever",rt.ZodVoid="ZodVoid",rt.ZodArray="ZodArray",rt.ZodObject="ZodObject",rt.ZodUnion="ZodUnion",rt.ZodDiscriminatedUnion="ZodDiscriminatedUnion",rt.ZodIntersection="ZodIntersection",rt.ZodTuple="ZodTuple",rt.ZodRecord="ZodRecord",rt.ZodMap="ZodMap",rt.ZodSet="ZodSet",rt.ZodFunction="ZodFunction",rt.ZodLazy="ZodLazy",rt.ZodLiteral="ZodLiteral",rt.ZodEnum="ZodEnum",rt.ZodEffects="ZodEffects",rt.ZodNativeEnum="ZodNativeEnum",rt.ZodOptional="ZodOptional",rt.ZodNullable="ZodNullable",rt.ZodDefault="ZodDefault",rt.ZodCatch="ZodCatch",rt.ZodPromise="ZodPromise",rt.ZodBranded="ZodBranded",rt.ZodPipeline="ZodPipeline",rt.ZodReadonly="ZodReadonly";const nt=he.create,it=pe.create,st=Ge.create,ot=fe.create,at=ge.create,ct=me.create,lt=ye.create,ut=we.create,ht=be.create,dt=ve.create,pt=Ee.create,ft=_e.create,gt=Ae.create,mt=Se.create,yt=Ie.create,wt=Ie.strictCreate,bt=Ne.create,vt=Te.create,Et=Pe.create,_t=Oe.create,At=Re.create,St=Me.create,Ct=Ue.create,It=Be.create,Nt=Le.create,kt=De.create,Tt=$e.create,xt=We.create,Pt=ze.create,Ot=qe.create,Rt=He.create,Mt=Fe.create,Ut=qe.createWithPreprocess,Bt=Je.create,Lt={string:e=>he.create({...e,coerce:!0}),number:e=>pe.create({...e,coerce:!0}),boolean:e=>ge.create({...e,coerce:!0}),bigint:e=>fe.create({...e,coerce:!0}),date:e=>me.create({...e,coerce:!0})},Dt=H;var jt=Object.freeze({__proto__:null,defaultErrorMap:D,setErrorMap:function(e){j=e},getErrorMap:$,makeIssue:W,EMPTY_PATH:[],addIssueToContext:z,ParseStatus:q,INVALID:H,DIRTY:F,OK:K,isAborted:V,isDirty:G,isValid:Z,isAsync:Y,get util(){return T},get objectUtil(){return P},ZodParsedType:M,getParsedType:U,ZodType:re,ZodString:he,ZodNumber:pe,ZodBigInt:fe,ZodBoolean:ge,ZodDate:me,ZodSymbol:ye,ZodUndefined:we,ZodNull:be,ZodAny:ve,ZodUnknown:Ee,ZodNever:_e,ZodVoid:Ae,ZodArray:Se,ZodObject:Ie,ZodUnion:Ne,ZodDiscriminatedUnion:Te,ZodIntersection:Pe,ZodTuple:Oe,ZodRecord:Re,ZodMap:Me,ZodSet:Ue,ZodFunction:Be,ZodLazy:Le,ZodLiteral:De,ZodEnum:$e,ZodNativeEnum:We,ZodPromise:ze,ZodEffects:qe,ZodTransformer:qe,ZodOptional:He,ZodNullable:Fe,ZodDefault:Ke,ZodCatch:Ve,ZodNaN:Ge,BRAND:Ze,ZodBranded:Ye,ZodPipeline:Je,ZodReadonly:Xe,custom:Qe,Schema:re,ZodSchema:re,late:et,get ZodFirstPartyTypeKind(){return tt},coerce:Lt,any:dt,array:mt,bigint:ot,boolean:at,date:ct,discriminatedUnion:vt,effect:Ot,enum:Tt,function:It,instanceof:(e,t={message:`Input not instance of ${e.name}`})=>Qe((t=>t instanceof e),t),intersection:Et,lazy:Nt,literal:kt,map:St,nan:st,nativeEnum:xt,never:ft,null:ht,nullable:Mt,number:it,object:yt,oboolean:()=>at().optional(),onumber:()=>it().optional(),optional:Rt,ostring:()=>nt().optional(),pipeline:Bt,preprocess:Ut,promise:Pt,record:At,set:Ct,strictObject:wt,string:nt,symbol:lt,transformer:Ot,tuple:_t,undefined:ut,union:bt,unknown:pt,void:gt,NEVER:Dt,ZodIssueCode:B,quotelessJson:e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:"),ZodError:L});const $t=jt.object({message:jt.string()});function Wt(e){return jt.literal(R.s1[e])}jt.object({accessList:jt.array(jt.string()),blockHash:jt.string().nullable(),blockNumber:jt.string().nullable(),chainId:jt.string().or(jt.number()),from:jt.string(),gas:jt.string(),hash:jt.string(),input:jt.string().nullable(),maxFeePerGas:jt.string(),maxPriorityFeePerGas:jt.string(),nonce:jt.string(),r:jt.string(),s:jt.string(),to:jt.string(),transactionIndex:jt.string().nullable(),type:jt.string(),v:jt.string(),value:jt.string()});const zt=jt.object({chainId:jt.string().or(jt.number())}),qt=jt.object({email:jt.string().email()}),Ht=jt.object({otp:jt.string()}),Ft=jt.object({uri:jt.string()}),Kt=jt.object({chainId:jt.optional(jt.string().or(jt.number())),preferredAccountType:jt.optional(jt.string())}),Vt=jt.object({provider:jt.enum(["google","github","apple","facebook","x","discord"])}),Gt=jt.object({email:jt.string().email()}),Zt=jt.object({otp:jt.string()}),Yt=jt.object({otp:jt.string()}),Jt=jt.object({themeMode:jt.optional(jt.enum(["light","dark"])),themeVariables:jt.optional(jt.record(jt.string(),jt.string().or(jt.number()))),w3mThemeVariables:jt.optional(jt.record(jt.string(),jt.string()))}),Xt=jt.object({metadata:jt.object({name:jt.string(),description:jt.string(),url:jt.string(),icons:jt.array(jt.string())}).optional(),sdkVersion:jt.string().optional(),sdkType:jt.string().optional(),projectId:jt.string()}),Qt=jt.object({type:jt.string()}),er=jt.object({action:jt.enum(["VERIFY_DEVICE","VERIFY_OTP","CONNECT"])}),tr=jt.object({url:jt.string()}),rr=jt.object({userName:jt.string()}),nr=jt.object({email:jt.string().optional().nullable(),address:jt.string(),chainId:jt.string().or(jt.number()),accounts:jt.array(jt.object({address:jt.string(),type:jt.enum([R.Vl.ACCOUNT_TYPES.EOA,R.Vl.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),userName:jt.string().optional().nullable()}),ir=jt.object({action:jt.enum(["VERIFY_PRIMARY_OTP","VERIFY_SECONDARY_OTP"])}),sr=jt.object({email:jt.string().email().optional().nullable(),address:jt.string(),chainId:jt.string().or(jt.number()),smartAccountDeployed:jt.optional(jt.boolean()),accounts:jt.array(jt.object({address:jt.string(),type:jt.enum([R.Vl.ACCOUNT_TYPES.EOA,R.Vl.ACCOUNT_TYPES.SMART_ACCOUNT])})).optional(),preferredAccountType:jt.optional(jt.string())}),or=jt.object({uri:jt.string()}),ar=jt.object({isConnected:jt.boolean()}),cr=jt.object({chainId:jt.string().or(jt.number())}),lr=jt.object({chainId:jt.string().or(jt.number())}),ur=jt.object({newEmail:jt.string().email()}),hr=jt.object({smartAccountEnabledNetworks:jt.array(jt.number())}),dr=(jt.object({address:jt.string(),isDeployed:jt.boolean()}),jt.object({version:jt.string().optional()})),pr=jt.object({type:jt.string(),address:jt.string()}),fr=jt.any(),gr=jt.object({method:jt.literal("eth_accounts")}),mr=jt.object({method:jt.literal("eth_blockNumber")}),yr=jt.object({method:jt.literal("eth_call"),params:jt.array(jt.any())}),wr=jt.object({method:jt.literal("eth_chainId")}),br=jt.object({method:jt.literal("eth_estimateGas"),params:jt.array(jt.any())}),vr=jt.object({method:jt.literal("eth_feeHistory"),params:jt.array(jt.any())}),Er=jt.object({method:jt.literal("eth_gasPrice")}),_r=jt.object({method:jt.literal("eth_getAccount"),params:jt.array(jt.any())}),Ar=jt.object({method:jt.literal("eth_getBalance"),params:jt.array(jt.any())}),Sr=jt.object({method:jt.literal("eth_getBlockByHash"),params:jt.array(jt.any())}),Cr=jt.object({method:jt.literal("eth_getBlockByNumber"),params:jt.array(jt.any())}),Ir=jt.object({method:jt.literal("eth_getBlockReceipts"),params:jt.array(jt.any())}),Nr=jt.object({method:jt.literal("eth_getBlockTransactionCountByHash"),params:jt.array(jt.any())}),kr=jt.object({method:jt.literal("eth_getBlockTransactionCountByNumber"),params:jt.array(jt.any())}),Tr=jt.object({method:jt.literal("eth_getCode"),params:jt.array(jt.any())}),xr=jt.object({method:jt.literal("eth_getFilterChanges"),params:jt.array(jt.any())}),Pr=jt.object({method:jt.literal("eth_getFilterLogs"),params:jt.array(jt.any())}),Or=jt.object({method:jt.literal("eth_getLogs"),params:jt.array(jt.any())}),Rr=jt.object({method:jt.literal("eth_getProof"),params:jt.array(jt.any())}),Mr=jt.object({method:jt.literal("eth_getStorageAt"),params:jt.array(jt.any())}),Ur=jt.object({method:jt.literal("eth_getTransactionByBlockHashAndIndex"),params:jt.array(jt.any())}),Br=jt.object({method:jt.literal("eth_getTransactionByBlockNumberAndIndex"),params:jt.array(jt.any())}),Lr=jt.object({method:jt.literal("eth_getTransactionByHash"),params:jt.array(jt.any())}),Dr=jt.object({method:jt.literal("eth_getTransactionCount"),params:jt.array(jt.any())}),jr=jt.object({method:jt.literal("eth_getTransactionReceipt"),params:jt.array(jt.any())}),$r=jt.object({method:jt.literal("eth_getUncleCountByBlockHash"),params:jt.array(jt.any())}),Wr=jt.object({method:jt.literal("eth_getUncleCountByBlockNumber"),params:jt.array(jt.any())}),zr=jt.object({method:jt.literal("eth_maxPriorityFeePerGas")}),qr=jt.object({method:jt.literal("eth_newBlockFilter")}),Hr=jt.object({method:jt.literal("eth_newFilter"),params:jt.array(jt.any())}),Fr=jt.object({method:jt.literal("eth_newPendingTransactionFilter")}),Kr=jt.object({method:jt.literal("eth_sendRawTransaction"),params:jt.array(jt.any())}),Vr=jt.object({method:jt.literal("eth_syncing"),params:jt.array(jt.any())}),Gr=jt.object({method:jt.literal("eth_uninstallFilter"),params:jt.array(jt.any())}),Zr=jt.object({method:jt.literal("personal_sign"),params:jt.array(jt.any())}),Yr=jt.object({method:jt.literal("eth_signTypedData_v4"),params:jt.array(jt.any())}),Jr=jt.object({method:jt.literal("eth_sendTransaction"),params:jt.array(jt.any())}),Xr=jt.object({method:jt.literal("solana_signMessage"),params:jt.object({message:jt.string(),pubkey:jt.string()})}),Qr=jt.object({method:jt.literal("solana_signTransaction"),params:jt.object({transaction:jt.string()})}),en=jt.object({method:jt.literal("solana_signAllTransactions"),params:jt.object({transactions:jt.array(jt.string())})}),tn=jt.object({method:jt.literal("solana_signAndSendTransaction"),params:jt.object({transaction:jt.string(),options:jt.object({skipPreflight:jt.boolean().optional(),preflightCommitment:jt.enum(["processed","confirmed","finalized","recent","single","singleGossip","root","max"]).optional(),maxRetries:jt.number().optional(),minContextSlot:jt.number().optional()}).optional()})}),rn=jt.object({method:jt.literal("wallet_sendCalls"),params:jt.array(jt.object({chainId:jt.string().or(jt.number()).optional(),from:jt.string().optional(),version:jt.string().optional(),capabilities:jt.any().optional(),calls:jt.array(jt.object({to:jt.string().startsWith("0x"),data:jt.string().startsWith("0x").optional(),value:jt.string().optional()}))}))}),nn=jt.object({method:jt.literal("wallet_getCallsStatus"),params:jt.array(jt.string())}),sn=jt.object({method:jt.literal("wallet_getCapabilities")}),on=jt.object({method:jt.literal("wallet_grantPermissions"),params:jt.array(jt.any())}),an=jt.object({method:jt.literal("wallet_revokePermissions"),params:jt.any()}),cn=jt.object({method:jt.literal("wallet_getAssets"),params:jt.any()}),ln=jt.object({token:jt.string()}),un=jt.object({id:jt.string().optional()}),hn={appEvent:un.extend({type:Wt("APP_SWITCH_NETWORK"),payload:zt}).or(un.extend({type:Wt("APP_CONNECT_EMAIL"),payload:qt})).or(un.extend({type:Wt("APP_CONNECT_DEVICE")})).or(un.extend({type:Wt("APP_CONNECT_OTP"),payload:Ht})).or(un.extend({type:Wt("APP_CONNECT_SOCIAL"),payload:Ft})).or(un.extend({type:Wt("APP_GET_FARCASTER_URI")})).or(un.extend({type:Wt("APP_CONNECT_FARCASTER")})).or(un.extend({type:Wt("APP_GET_USER"),payload:jt.optional(Kt)})).or(un.extend({type:Wt("APP_GET_SOCIAL_REDIRECT_URI"),payload:Vt})).or(un.extend({type:Wt("APP_SIGN_OUT")})).or(un.extend({type:Wt("APP_IS_CONNECTED"),payload:jt.optional(ln)})).or(un.extend({type:Wt("APP_GET_CHAIN_ID")})).or(un.extend({type:Wt("APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS")})).or(un.extend({type:Wt("APP_INIT_SMART_ACCOUNT")})).or(un.extend({type:Wt("APP_SET_PREFERRED_ACCOUNT"),payload:Qt})).or(un.extend({type:Wt("APP_RPC_REQUEST"),payload:Zr.or(cn).or(gr).or(mr).or(yr).or(wr).or(br).or(vr).or(Er).or(_r).or(Ar).or(Sr).or(Cr).or(Ir).or(Nr).or(kr).or(Tr).or(xr).or(Pr).or(Or).or(Rr).or(Mr).or(Ur).or(Br).or(Lr).or(Dr).or(jr).or($r).or(Wr).or(zr).or(qr).or(Hr).or(Fr).or(Kr).or(Vr).or(Gr).or(Zr).or(Yr).or(Jr).or(Xr).or(Qr).or(en).or(tn).or(nn).or(rn).or(sn).or(on).or(an)})).or(un.extend({type:Wt("APP_UPDATE_EMAIL"),payload:Gt})).or(un.extend({type:Wt("APP_UPDATE_EMAIL_PRIMARY_OTP"),payload:Zt})).or(un.extend({type:Wt("APP_UPDATE_EMAIL_SECONDARY_OTP"),payload:Yt})).or(un.extend({type:Wt("APP_SYNC_THEME"),payload:Jt})).or(un.extend({type:Wt("APP_SYNC_DAPP_DATA"),payload:Xt})).or(un.extend({type:Wt("APP_RELOAD")})),frameEvent:un.extend({type:Wt("FRAME_SWITCH_NETWORK_ERROR"),payload:$t}).or(un.extend({type:Wt("FRAME_SWITCH_NETWORK_SUCCESS"),payload:lr})).or(un.extend({type:Wt("FRAME_CONNECT_EMAIL_SUCCESS"),payload:er})).or(un.extend({type:Wt("FRAME_CONNECT_EMAIL_ERROR"),payload:$t})).or(un.extend({type:Wt("FRAME_GET_FARCASTER_URI_SUCCESS"),payload:tr})).or(un.extend({type:Wt("FRAME_GET_FARCASTER_URI_ERROR"),payload:$t})).or(un.extend({type:Wt("FRAME_CONNECT_FARCASTER_SUCCESS"),payload:rr})).or(un.extend({type:Wt("FRAME_CONNECT_FARCASTER_ERROR"),payload:$t})).or(un.extend({type:Wt("FRAME_CONNECT_OTP_ERROR"),payload:$t})).or(un.extend({type:Wt("FRAME_CONNECT_OTP_SUCCESS")})).or(un.extend({type:Wt("FRAME_CONNECT_DEVICE_ERROR"),payload:$t})).or(un.extend({type:Wt("FRAME_CONNECT_DEVICE_SUCCESS")})).or(un.extend({type:Wt("FRAME_CONNECT_SOCIAL_SUCCESS"),payload:nr})).or(un.extend({type:Wt("FRAME_CONNECT_SOCIAL_ERROR"),payload:$t})).or(un.extend({type:Wt("FRAME_GET_USER_ERROR"),payload:$t})).or(un.extend({type:Wt("FRAME_GET_USER_SUCCESS"),payload:sr})).or(un.extend({type:Wt("FRAME_GET_SOCIAL_REDIRECT_URI_ERROR"),payload:$t})).or(un.extend({type:Wt("FRAME_GET_SOCIAL_REDIRECT_URI_SUCCESS"),payload:or})).or(un.extend({type:Wt("FRAME_SIGN_OUT_ERROR"),payload:$t})).or(un.extend({type:Wt("FRAME_SIGN_OUT_SUCCESS")})).or(un.extend({type:Wt("FRAME_IS_CONNECTED_ERROR"),payload:$t})).or(un.extend({type:Wt("FRAME_IS_CONNECTED_SUCCESS"),payload:ar})).or(un.extend({type:Wt("FRAME_GET_CHAIN_ID_ERROR"),payload:$t})).or(un.extend({type:Wt("FRAME_GET_CHAIN_ID_SUCCESS"),payload:cr})).or(un.extend({type:Wt("FRAME_RPC_REQUEST_ERROR"),payload:$t})).or(un.extend({type:Wt("FRAME_RPC_REQUEST_SUCCESS"),payload:fr})).or(un.extend({type:Wt("FRAME_SESSION_UPDATE"),payload:ln})).or(un.extend({type:Wt("FRAME_UPDATE_EMAIL_ERROR"),payload:$t})).or(un.extend({type:Wt("FRAME_UPDATE_EMAIL_SUCCESS"),payload:ir})).or(un.extend({type:Wt("FRAME_UPDATE_EMAIL_PRIMARY_OTP_ERROR"),payload:$t})).or(un.extend({type:Wt("FRAME_UPDATE_EMAIL_PRIMARY_OTP_SUCCESS")})).or(un.extend({type:Wt("FRAME_UPDATE_EMAIL_SECONDARY_OTP_ERROR"),payload:$t})).or(un.extend({type:Wt("FRAME_UPDATE_EMAIL_SECONDARY_OTP_SUCCESS"),payload:ur})).or(un.extend({type:Wt("FRAME_SYNC_THEME_ERROR"),payload:$t})).or(un.extend({type:Wt("FRAME_SYNC_THEME_SUCCESS")})).or(un.extend({type:Wt("FRAME_SYNC_DAPP_DATA_ERROR"),payload:$t})).or(un.extend({type:Wt("FRAME_SYNC_DAPP_DATA_SUCCESS")})).or(un.extend({type:Wt("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS"),payload:hr})).or(un.extend({type:Wt("FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR"),payload:$t})).or(un.extend({type:Wt("FRAME_INIT_SMART_ACCOUNT_ERROR"),payload:$t})).or(un.extend({type:Wt("FRAME_SET_PREFERRED_ACCOUNT_SUCCESS"),payload:pr})).or(un.extend({type:Wt("FRAME_SET_PREFERRED_ACCOUNT_ERROR"),payload:$t})).or(un.extend({type:Wt("FRAME_READY"),payload:dr})).or(un.extend({type:Wt("FRAME_RELOAD_ERROR"),payload:$t})).or(un.extend({type:Wt("FRAME_RELOAD_SUCCESS")}))};function dn(e,t={}){return"string"==typeof t?.type&&t?.type?.includes(e)}class pn{constructor({projectId:e,isAppClient:t=!1,chainId:r="eip155:1",enableLogger:n=!0}){if(this.iframe=null,this.rpcUrl=a.o.BLOCKCHAIN_API_RPC_URL,this.initFrame=()=>{const e=document.getElementById("w3m-iframe");this.iframe&&!e&&document.body.appendChild(this.iframe)},this.events={registerFrameEventHandler:(e,t,r)=>{function n({data:r}){if(!dn(R.s1.FRAME_EVENT_KEY,r))return;const i=hn.frameEvent.parse(r);i.id===e&&(t(i),window.removeEventListener("message",n))}O.Q.isClient&&(window.addEventListener("message",n),r.addEventListener("abort",(()=>{window.removeEventListener("message",n)})))},onFrameEvent:e=>{O.Q.isClient&&window.addEventListener("message",(({data:t})=>{if(!dn(R.s1.FRAME_EVENT_KEY,t))return;const r=hn.frameEvent.parse(t);e(r)}))},onAppEvent:e=>{O.Q.isClient&&window.addEventListener("message",(({data:t})=>{if(!dn(R.s1.APP_EVENT_KEY,t))return;const r=hn.appEvent.parse(t);e(r)}))},postAppEvent:e=>{if(O.Q.isClient){if(!this.iframe?.contentWindow)throw new Error("W3mFrame: iframe is not set");hn.appEvent.parse(e),this.iframe.contentWindow.postMessage(e,"*")}},postFrameEvent:e=>{if(O.Q.isClient){if(!parent)throw new Error("W3mFrame: parent is not set");hn.frameEvent.parse(e),parent.postMessage(e,"*")}}},this.projectId=e,this.frameLoadPromise=new Promise(((e,t)=>{this.frameLoadPromiseResolver={resolve:e,reject:t}})),t&&(this.frameLoadPromise=new Promise(((e,t)=>{this.frameLoadPromiseResolver={resolve:e,reject:t}})),O.Q.isClient)){const t=document.createElement("iframe");t.id="w3m-iframe",t.src=`${R.hy}?projectId=${e}&chainId=${r}&version=${R.gS}&enableLogger=${n}`,t.name="w3m-secure-iframe",t.style.position="fixed",t.style.zIndex="999999",t.style.display="none",t.style.animationDelay="0s, 50ms",t.style.borderBottomLeftRadius="clamp(0px, var(--wui-border-radius-l), 44px)",t.style.borderBottomRightRadius="clamp(0px, var(--wui-border-radius-l), 44px)",this.iframe=t,this.iframe.onerror=()=>{this.frameLoadPromiseResolver?.reject("Unable to load email login dependency")},this.events.onFrameEvent((e=>{"@w3m-frame/READY"===e.type&&this.frameLoadPromiseResolver?.resolve(void 0)}))}}get networks(){const e=["eip155:1","eip155:5","eip155:11155111","eip155:10","eip155:420","eip155:42161","eip155:421613","eip155:137","eip155:80001","eip155:42220","eip155:1313161554","eip155:1313161555","eip155:56","eip155:97","eip155:43114","eip155:43113","eip155:324","eip155:280","eip155:100","eip155:8453","eip155:84531","eip155:84532","eip155:7777777","eip155:999","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1"].map((e=>({[e]:{rpcUrl:`${this.rpcUrl}/v1/?chainId=${e}&projectId=${this.projectId}`,chainId:e}})));return Object.assign({},...e)}}var fn=i(3497);class gn{constructor(e){const t=(0,fn.iP)({level:R.OH}),{logger:r,chunkLoggerController:n}=(0,fn.D5)({opts:t});this.logger=(0,fn.U5)(r,this.constructor.name),this.chunkLoggerController=n,"undefined"!=typeof window&&this.chunkLoggerController?.downloadLogsBlobInBrowser&&(window.downloadAppKitLogsBlob||(window.downloadAppKitLogsBlob={}),window.downloadAppKitLogsBlob.sdk=()=>{this.chunkLoggerController?.downloadLogsBlobInBrowser&&this.chunkLoggerController.downloadLogsBlobInBrowser({projectId:e})})}}var mn=i(6508);class yn{constructor({projectId:e,chainId:t,enableLogger:r=!0,onTimeout:n}){this.openRpcRequests=[],r&&(this.w3mLogger=new gn(e)),this.w3mFrame=new pn({projectId:e,isAppClient:!0,chainId:t,enableLogger:r}),this.onTimeout=n,this.getLoginEmailUsed()&&this.w3mFrame.initFrame(),this.initPromise=new Promise((e=>{this.w3mFrame.events.onFrameEvent((async t=>{t.type===R.s1.FRAME_READY&&(this.initPromise=void 0,await new Promise((e=>{setTimeout(e,500)})),e())}))}))}async init(){this.w3mFrame.initFrame(),this.initPromise&&await this.initPromise}getLoginEmailUsed(){return Boolean(mn.o.get(R.s1.EMAIL_LOGIN_USED_KEY))}getEmail(){return mn.o.get(R.s1.EMAIL)}getUsername(){return mn.o.get(R.s1.SOCIAL_USERNAME)}async reload(){try{this.w3mFrame.initFrame(),await this.appEvent({type:R.s1.APP_RELOAD})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error reloading iframe"),e}}async connectEmail(e){try{O.Q.checkIfAllowedToTriggerEmail(),this.w3mFrame.initFrame();const t=await this.appEvent({type:R.s1.APP_CONNECT_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),t}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting email"),e}}async connectDevice(){try{return this.appEvent({type:R.s1.APP_CONNECT_DEVICE})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting device"),e}}async connectOtp(e){try{return this.appEvent({type:R.s1.APP_CONNECT_OTP,payload:e})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting otp"),e}}async isConnected(){try{if(!this.getLoginEmailUsed())return{isConnected:!1};const e=await this.appEvent({type:R.s1.APP_IS_CONNECTED});return e?.isConnected||this.deleteAuthLoginCache(),e}catch(e){throw this.deleteAuthLoginCache(),this.w3mLogger?.logger.error({error:e},"Error checking connection"),e}}async getChainId(){try{const e=await this.appEvent({type:R.s1.APP_GET_CHAIN_ID});return this.setLastUsedChainId(e.chainId),e}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error getting chain id"),e}}async getSocialRedirectUri(e){try{return this.w3mFrame.initFrame(),this.appEvent({type:R.s1.APP_GET_SOCIAL_REDIRECT_URI,payload:e})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error getting social redirect uri"),e}}async updateEmail(e){try{const t=await this.appEvent({type:R.s1.APP_UPDATE_EMAIL,payload:e});return this.setNewLastEmailLoginTime(),t}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error updating email"),e}}async updateEmailPrimaryOtp(e){try{return this.appEvent({type:R.s1.APP_UPDATE_EMAIL_PRIMARY_OTP,payload:e})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error updating email primary otp"),e}}async updateEmailSecondaryOtp(e){try{const t=await this.appEvent({type:R.s1.APP_UPDATE_EMAIL_SECONDARY_OTP,payload:e});return this.setLoginSuccess(t.newEmail),t}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error updating email secondary otp"),e}}async syncTheme(e){try{return this.appEvent({type:R.s1.APP_SYNC_THEME,payload:e})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error syncing theme"),e}}async syncDappData(e){try{return this.appEvent({type:R.s1.APP_SYNC_DAPP_DATA,payload:e})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error syncing dapp data"),e}}async getSmartAccountEnabledNetworks(){try{const e=await this.appEvent({type:R.s1.APP_GET_SMART_ACCOUNT_ENABLED_NETWORKS});return this.persistSmartAccountEnabledNetworks(e.smartAccountEnabledNetworks),e}catch(e){throw this.persistSmartAccountEnabledNetworks([]),this.w3mLogger?.logger.error({error:e},"Error getting smart account enabled networks"),e}}async setPreferredAccount(e){try{return this.appEvent({type:R.s1.APP_SET_PREFERRED_ACCOUNT,payload:{type:e}})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error setting preferred account"),e}}async connect(e){try{const t=e?.chainId||this.getLastUsedChainId()||1,r=await this.getUser({chainId:t,preferredAccountType:e?.preferredAccountType});return this.setLoginSuccess(r.email),this.setLastUsedChainId(r.chainId),this.user=r,r}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting"),e}}async getUser(e){try{const t=e?.chainId||this.getLastUsedChainId()||1,r=await this.appEvent({type:R.s1.APP_GET_USER,payload:{...e,chainId:t}});return this.user=r,r}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting"),e}}async connectSocial(e){try{this.w3mFrame.initFrame();const t=await this.appEvent({type:R.s1.APP_CONNECT_SOCIAL,payload:{uri:e}});return t.userName&&this.setSocialLoginSuccess(t.userName),t}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting social"),e}}async getFarcasterUri(){try{return this.w3mFrame.initFrame(),await this.appEvent({type:R.s1.APP_GET_FARCASTER_URI})}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error getting farcaster uri"),e}}async connectFarcaster(){try{const e=await this.appEvent({type:R.s1.APP_CONNECT_FARCASTER});return e.userName&&this.setSocialLoginSuccess(e.userName),e}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error connecting farcaster"),e}}async switchNetwork(e){try{const t=await this.appEvent({type:R.s1.APP_SWITCH_NETWORK,payload:{chainId:e}});return this.setLastUsedChainId(t.chainId),t}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error switching network"),e}}async disconnect(){try{const e=await this.appEvent({type:R.s1.APP_SIGN_OUT});return this.deleteAuthLoginCache(),e}catch(e){throw this.w3mLogger?.logger.error({error:e},"Error disconnecting"),e}}async request(e){try{if(R.Vl.GET_CHAIN_ID===e.method)return this.getLastUsedChainId();this.rpcRequestHandler?.(e);const t=await this.appEvent({type:R.s1.APP_RPC_REQUEST,payload:e});return this.rpcSuccessHandler?.(t,e),t}catch(t){throw this.rpcErrorHandler?.(t,e),this.w3mLogger?.logger.error({error:t},"Error requesting"),t}}onRpcRequest(e){this.rpcRequestHandler=e}onRpcSuccess(e){this.rpcSuccessHandler=e}onRpcError(e){this.rpcErrorHandler=e}onIsConnected(e){this.w3mFrame.events.onFrameEvent((t=>{t.type===R.s1.FRAME_IS_CONNECTED_SUCCESS&&t.payload.isConnected&&e()}))}onNotConnected(e){this.w3mFrame.events.onFrameEvent((t=>{t.type===R.s1.FRAME_IS_CONNECTED_ERROR&&e(),t.type!==R.s1.FRAME_IS_CONNECTED_SUCCESS||t.payload.isConnected||e()}))}onConnect(e){this.w3mFrame.events.onFrameEvent((t=>{t.type===R.s1.FRAME_GET_USER_SUCCESS&&e(t.payload)}))}onSocialConnected(e){this.w3mFrame.events.onFrameEvent((t=>{t.type===R.s1.FRAME_CONNECT_SOCIAL_SUCCESS&&e(t.payload)}))}async getCapabilities(){try{return await this.request({method:"wallet_getCapabilities"})||{}}catch{return{}}}onSetPreferredAccount(e){this.w3mFrame.events.onFrameEvent((t=>{t.type===R.s1.FRAME_SET_PREFERRED_ACCOUNT_SUCCESS?e(t.payload):t.type===R.s1.FRAME_SET_PREFERRED_ACCOUNT_ERROR&&e({type:R.Vl.ACCOUNT_TYPES.EOA})}))}onGetSmartAccountEnabledNetworks(e){this.w3mFrame.events.onFrameEvent((t=>{t.type===R.s1.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_SUCCESS?e(t.payload.smartAccountEnabledNetworks):t.type===R.s1.FRAME_GET_SMART_ACCOUNT_ENABLED_NETWORKS_ERROR&&e([])}))}getAvailableChainIds(){return Object.keys(this.w3mFrame.networks)}rejectRpcRequests(){try{this.openRpcRequests.forEach((({abortController:e,method:t})=>{R.Vl.SAFE_RPC_METHODS.includes(t)||e.abort()})),this.openRpcRequests=[]}catch(e){this.w3mLogger?.logger.error({error:e},"Error aborting RPC request")}}async appEvent(e){let t;function r(e){return e.replace("@w3m-app/","")}await this.w3mFrame.frameLoadPromise;const n=new AbortController,i=r(e.type);return[R.s1.APP_CONNECT_EMAIL,R.s1.APP_CONNECT_DEVICE,R.s1.APP_CONNECT_OTP,R.s1.APP_CONNECT_SOCIAL,R.s1.APP_GET_SOCIAL_REDIRECT_URI].map(r).includes(i)&&(t=setTimeout((()=>{this.onTimeout?.(),n.abort()}),3e4)),new Promise(((r,s)=>{const o=Math.random().toString(36).substring(7);if(this.w3mLogger?.logger.info?.({event:e,id:o},"Sending app event"),this.w3mFrame.events.postAppEvent({...e,id:o}),"RPC_REQUEST"===i){const t=e;this.openRpcRequests=[...this.openRpcRequests,{...t.payload,abortController:n}]}n.signal.addEventListener("abort",(()=>{"RPC_REQUEST"===i?s(new Error("Request was aborted")):"GET_FARCASTER_URI"!==i&&s(new Error("Something went wrong"))})),this.w3mFrame.events.registerFrameEventHandler(o,(e=>{return n=e,a=this.w3mLogger,void(n.id===o&&(a?.logger.info?.({framEvent:n,id:o},"Received frame response"),n.type===`@w3m-frame/${i}_SUCCESS`?(t&&clearTimeout(t),"payload"in n&&r(n.payload),r(void 0)):n.type===`@w3m-frame/${i}_ERROR`&&(t&&clearTimeout(t),"payload"in n&&s(new Error(n.payload?.message||"An error occurred")),s(new Error("An error occurred")))));var n,a}),n.signal)}))}setNewLastEmailLoginTime(){mn.o.set(R.s1.LAST_EMAIL_LOGIN_TIME,Date.now().toString())}setSocialLoginSuccess(e){mn.o.set(R.s1.SOCIAL_USERNAME,e)}setLoginSuccess(e){e&&mn.o.set(R.s1.EMAIL,e),mn.o.set(R.s1.EMAIL_LOGIN_USED_KEY,"true"),mn.o.delete(R.s1.LAST_EMAIL_LOGIN_TIME)}deleteAuthLoginCache(){mn.o.delete(R.s1.EMAIL_LOGIN_USED_KEY),mn.o.delete(R.s1.EMAIL),mn.o.delete(R.s1.LAST_USED_CHAIN_KEY),mn.o.delete(R.s1.SOCIAL_USERNAME)}setLastUsedChainId(e){e&&mn.o.set(R.s1.LAST_USED_CHAIN_KEY,String(e))}getLastUsedChainId(){const e=mn.o.get(R.s1.LAST_USED_CHAIN_KEY)??void 0,t=Number(e);return isNaN(t)?e:t}persistSmartAccountEnabledNetworks(e){mn.o.set(R.s1.SMART_ACCOUNT_ENABLED_NETWORKS,e.join(","))}}class wn{constructor(){}static getInstance({projectId:e,chainId:t,enableLogger:r,onTimeout:n}){return wn.instance||(wn.instance=new yn({projectId:e,chainId:t,enableLogger:r,onTimeout:n})),wn.instance}}var bn=i(7305);const vn={validateCaipAddress(e){if(3!==e.split(":")?.length)throw new Error("Invalid CAIP Address");return e},parseCaipAddress(e){const t=e.split(":");if(3!==t.length)throw new Error(`Invalid CAIP-10 address: ${e}`);const[r,n,i]=t;if(!r||!n||!i)throw new Error(`Invalid CAIP-10 address: ${e}`);return{chainNamespace:r,chainId:n,address:i}},parseCaipNetworkId(e){const t=e.split(":");if(2!==t.length)throw new Error(`Invalid CAIP-2 network id: ${e}`);const[r,n]=t;if(!r||!n)throw new Error(`Invalid CAIP-2 network id: ${e}`);return{chainNamespace:r,chainId:n}}};var En=i(3495),_n=i(5595),An=i(6396),Sn=i(4549),Cn=i(7601),In=i(1871),Nn=i(8508),kn=(i(6092),i(1482),i(5042)),Tn=i(148);const xn=(e,t,r)=>JSON.stringify(e,((e,r)=>{const n="bigint"==typeof r?r.toString():r;return"function"==typeof t?t(e,n):n}),r),Pn="2.27.2";let On=({docsBaseUrl:e,docsPath:t="",docsSlug:r})=>t?`${e??"https://viem.sh"}${t}${r?`#${r}`:""}`:void 0,Rn=`viem@${Pn}`;class Mn extends Error{constructor(e,t={}){const r=t.cause instanceof Mn?t.cause.details:t.cause?.message?t.cause.message:t.details,n=t.cause instanceof Mn&&t.cause.docsPath||t.docsPath,i=On?.({...t,docsPath:n});super([e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Rn?[`Version: ${Rn}`]:[]].join("\n"),t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=n,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=Pn}walk(e){return Un(this,e)}}function Un(e,t){return t?.(e)?e:e&&"object"==typeof e&&"cause"in e&&void 0!==e.cause?Un(e.cause,t):t?null:e}class Bn extends Mn{constructor({body:e,cause:t,details:r,headers:n,status:i,url:s}){super("HTTP request failed.",{cause:t,details:r,metaMessages:[i&&`Status: ${i}`,`URL: ${s}`,e&&`Request body: ${xn(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=n,this.status=i,this.url=s}}class Ln extends Mn{constructor({body:e,error:t,url:r}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${r}`,`Request body: ${xn(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t.code,this.data=t.data}}class Dn extends Mn{constructor({body:e,url:t}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${t}`,`Request body: ${xn(e)}`],name:"TimeoutError"})}}class jn extends Mn{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}const $n=new Map;function Wn(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const zn=Wn();class qn extends Mn{constructor(e,{code:t,docsPath:r,metaMessages:n,name:i,shortMessage:s}){super(s,{cause:e,docsPath:r,metaMessages:n||e?.metaMessages,name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof Ln?e.code:t??-1}}class Hn extends qn{constructor(e,t){super(e,t),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t.data}}class Fn extends qn{constructor(e){super(e,{code:Fn.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Fn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Kn extends qn{constructor(e){super(e,{code:Kn.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Kn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Vn extends qn{constructor(e,{method:t}={}){super(e,{code:Vn.code,name:"MethodNotFoundRpcError",shortMessage:`The method${t?` "${t}"`:""} does not exist / is not available.`})}}Object.defineProperty(Vn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Gn extends qn{constructor(e){super(e,{code:Gn.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join("\n")})}}Object.defineProperty(Gn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Zn extends qn{constructor(e){super(e,{code:Zn.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Zn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Yn extends qn{constructor(e){super(e,{code:Yn.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join("\n")})}}Object.defineProperty(Yn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Jn extends qn{constructor(e){super(e,{code:Jn.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Jn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Xn extends qn{constructor(e){super(e,{code:Xn.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Xn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Qn extends qn{constructor(e){super(e,{code:Qn.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(Qn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class ei extends qn{constructor(e,{method:t}={}){super(e,{code:ei.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${t?` "${t}"`:""} is not supported.`})}}Object.defineProperty(ei,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class ti extends qn{constructor(e){super(e,{code:ti.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(ti,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class ri extends qn{constructor(e){super(e,{code:ri.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(ri,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class ni extends Hn{constructor(e){super(e,{code:ni.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(ni,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class ii extends Hn{constructor(e){super(e,{code:ii.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(ii,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class si extends Hn{constructor(e,{method:t}={}){super(e,{code:si.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${t?` " ${t}"`:""}.`})}}Object.defineProperty(si,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class oi extends Hn{constructor(e){super(e,{code:oi.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(oi,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class ai extends Hn{constructor(e){super(e,{code:ai.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(ai,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class ci extends Hn{constructor(e){super(e,{code:ci.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(ci,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class li extends Hn{constructor(e){super(e,{code:li.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(li,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class ui extends Hn{constructor(e){super(e,{code:ui.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(ui,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class hi extends Hn{constructor(e){super(e,{code:hi.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(hi,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class di extends Hn{constructor(e){super(e,{code:di.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(di,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class pi extends Hn{constructor(e){super(e,{code:pi.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(pi,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class fi extends Hn{constructor(e){super(e,{code:fi.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(fi,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class gi extends Hn{constructor(e){super(e,{code:gi.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(gi,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class mi extends qn{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}class yi extends Mn{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}}class wi extends Mn{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function bi(e){return function(e,{strict:t=!0}={}){return!!e&&"string"==typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x"))}(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}const vi=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function Ei(e,t={}){let r="";for(let t=0;t<e.length;t++)r+=vi[e[t]];const n=`0x${r}`;return"number"==typeof t.size?(function(e,{size:t}){if(bi(e)>t)throw new wi({givenSize:bi(e),maxSize:t})}(n,{size:t.size}),function(e,{dir:t,size:r=32}={}){return"string"==typeof e?function(e,{dir:t,size:r=32}={}){if(null===r)return e;const n=e.replace("0x","");if(n.length>2*r)throw new yi({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n["right"===t?"padEnd":"padStart"](2*r,"0")}`}(e,{dir:t,size:r}):function(e,{dir:t,size:r=32}={}){if(null===r)return e;if(e.length>r)throw new yi({size:e.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let i=0;i<r;i++){const s="right"===t;n[s?i:r-i-1]=e[s?i:e.length-i-1]}return n}(e,{dir:t,size:r})}(n,{dir:"right",size:t.size})):n}const _i=new TextEncoder;function Ai(e,t={}){return Ei(_i.encode(e),t)}class Si extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const e=this.keys().next().value;e&&this.delete(e)}return this}}const Ci=new Si(8192);async function Ii(e){return new Promise((t=>setTimeout(t,e)))}function Ni(e,t={}){return async(r,n={})=>{const{dedupe:i=!1,methods:s,retryDelay:o=150,retryCount:a=3,uid:c}={...t,...n},{method:l}=r;if(s?.exclude?.includes(l))throw new ei(new Error("method not supported"),{method:l});if(s?.include&&!s.include.includes(l))throw new ei(new Error("method not supported"),{method:l});return function(e,{enabled:t=!0,id:r}){if(!t||!r)return e();if(Ci.get(r))return Ci.get(r);const n=e().finally((()=>Ci.delete(r)));return Ci.set(r,n),n}((()=>function(e,{delay:t=100,retryCount:r=2,shouldRetry:n=()=>!0}={}){return new Promise(((i,s)=>{const o=async({count:a=0}={})=>{try{const t=await e();i(t)}catch(e){if(a<r&&await n({count:a,error:e}))return(async({error:e})=>{const r="function"==typeof t?t({count:a,error:e}):t;r&&await Ii(r),o({count:a+1})})({error:e});s(e)}};o()}))}((async()=>{try{return await e(r)}catch(e){const t=e;switch(t.code){case Fn.code:throw new Fn(t);case Kn.code:throw new Kn(t);case Vn.code:throw new Vn(t,{method:r.method});case Gn.code:throw new Gn(t);case Zn.code:throw new Zn(t);case Yn.code:throw new Yn(t);case Jn.code:throw new Jn(t);case Xn.code:throw new Xn(t);case Qn.code:throw new Qn(t);case ei.code:throw new ei(t,{method:r.method});case ti.code:throw new ti(t);case ri.code:throw new ri(t);case ni.code:throw new ni(t);case ii.code:throw new ii(t);case si.code:throw new si(t);case oi.code:throw new oi(t);case ai.code:throw new ai(t);case ci.code:throw new ci(t);case li.code:throw new li(t);case ui.code:throw new ui(t);case hi.code:throw new hi(t);case di.code:throw new di(t);case pi.code:throw new pi(t);case fi.code:throw new fi(t);case gi.code:throw new gi(t);case 5e3:throw new ni(t);default:if(e instanceof Mn)throw e;throw new mi(t)}}}),{delay:({count:e,error:t})=>{if(t&&t instanceof Bn){const e=t?.headers?.get("Retry-After");if(e?.match(/\d/))return 1e3*Number.parseInt(e)}return(1<<e)*o},retryCount:a,shouldRetry:({error:e})=>function(e){return"code"in e&&"number"==typeof e.code?-1===e.code||e.code===ti.code||e.code===Zn.code:!(e instanceof Bn&&e.status)||(403===e.status||408===e.status||413===e.status||429===e.status||500===e.status||502===e.status||503===e.status||504===e.status)}(e)})),{enabled:i,id:i?Ai(`${c}.${xn(r)}`):void 0})}}let ki,Ti=256;function xi({key:e,methods:t,name:r,request:n,retryCount:i=3,retryDelay:s=150,timeout:o,type:a},c){return{config:{key:e,methods:t,name:r,request:n,retryCount:i,retryDelay:s,timeout:o,type:a},request:Ni(n,{methods:t,retryCount:i,retryDelay:s,uid:function(e=11){if(!ki||Ti+e>512){ki="",Ti=0;for(let e=0;e<256;e++)ki+=(256+256*Math.random()|0).toString(16).substring(1)}return ki.substring(Ti,Ti+++e)}()}),value:c}}function Pi(e,t={}){const{batch:r,fetchOptions:n,key:i="http",methods:s,name:o="HTTP JSON-RPC",onFetchRequest:a,onFetchResponse:c,retryDelay:l,raw:u}=t;return({chain:h,retryCount:d,timeout:p})=>{const{batchSize:f=1e3,wait:g=0}="object"==typeof r?r:{},m=t.retryCount??d,y=p??t.timeout??1e4,w=e||h?.rpcUrls.default.http[0];if(!w)throw new jn;const b=function(e,t={}){return{async request(r){const{body:n,onRequest:i=t.onRequest,onResponse:s=t.onResponse,timeout:o=t.timeout??1e4}=r,a={...t.fetchOptions??{},...r.fetchOptions??{}},{headers:c,method:l,signal:u}=a;try{const t=await function(e,{errorInstance:t=new Error("timed out"),timeout:r,signal:n}){return new Promise(((i,s)=>{(async()=>{let o;try{const a=new AbortController;r>0&&(o=setTimeout((()=>{n?a.abort():s(t)}),r)),i(await e({signal:a?.signal||null}))}catch(e){"AbortError"===e?.name&&s(t),s(e)}finally{clearTimeout(o)}})()}))}((async({signal:t})=>{const r={...a,body:Array.isArray(n)?xn(n.map((e=>({jsonrpc:"2.0",id:e.id??zn.take(),...e})))):xn({jsonrpc:"2.0",id:n.id??zn.take(),...n}),headers:{"Content-Type":"application/json",...c},method:l||"POST",signal:u||(o>0?t:null)},s=new Request(e,r),h=await(i?.(s,r))??{...r,url:e};return await fetch(h.url??e,h)}),{errorInstance:new Dn({body:n,url:e}),timeout:o,signal:!0});let r;if(s&&await s(t),t.headers.get("Content-Type")?.startsWith("application/json"))r=await t.json();else{r=await t.text();try{r=JSON.parse(r||"{}")}catch(e){if(t.ok)throw e;r={error:r}}}if(!t.ok)throw new Bn({body:n,details:xn(r.error)||t.statusText,headers:t.headers,status:t.status,url:e});return r}catch(t){if(t instanceof Bn)throw t;if(t instanceof Dn)throw t;throw new Bn({body:n,cause:t,url:e})}}}}(w,{fetchOptions:n,onRequest:a,onResponse:c,timeout:y});return xi({key:i,methods:s,name:o,async request({method:e,params:t}){const n={method:e,params:t},{schedule:i}=function({fn:e,id:t,shouldSplitBatch:r,wait:n=0,sort:i}){const s=async()=>{const t=a();o();const r=t.map((({args:e})=>e));0!==r.length&&e(r).then((e=>{i&&Array.isArray(e)&&e.sort(i);for(let r=0;r<t.length;r++){const{resolve:n}=t[r];n?.([e[r],e])}})).catch((e=>{for(let r=0;r<t.length;r++){const{reject:n}=t[r];n?.(e)}}))},o=()=>$n.delete(t),a=()=>$n.get(t)||[],c=e=>$n.set(t,[...a(),e]);return{flush:o,async schedule(e){const{promise:t,resolve:i,reject:o}=function(){let e=()=>{},t=()=>{};return{promise:new Promise(((r,n)=>{e=r,t=n})),resolve:e,reject:t}}(),l=r?.([...a().map((({args:e})=>e)),e]);return l&&s(),a().length>0?(c({args:e,resolve:i,reject:o}),t):(c({args:e,resolve:i,reject:o}),setTimeout(s,n),t)}}}({id:w,wait:g,shouldSplitBatch:e=>e.length>f,fn:e=>b.request({body:e}),sort:(e,t)=>e.id-t.id}),[{error:s,result:o}]=await(async e=>r?i(e):[await b.request({body:e})])(n);if(u)return{error:s,result:o};if(s)throw new Ln({body:n,error:s,url:w});return o},retryCount:m,retryDelay:l,timeout:y,type:"http"},{fetchOptions:n,url:w})}}const Oi={ether:-9,wei:9};function Ri(e,t="wei"){return function(e,t){let r=e.toString();const n=r.startsWith("-");n&&(r=r.slice(1)),r=r.padStart(t,"0");let[i,s]=[r.slice(0,r.length-t),r.slice(r.length-t)];return s=s.replace(/(0+)$/,""),`${n?"-":""}${i||"0"}${s?`.${s}`:""}`}(e,Oi[t])}class Mi extends Mn{constructor({cause:e,message:t}={}){const r=t?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}function Ui(e,t={}){const{key:r="fallback",name:n="Fallback",rank:i=!1,shouldThrow:s=Bi,retryCount:o,retryDelay:a}=t;return({chain:t,pollingInterval:c=4e3,timeout:l,...u})=>{let h=e,d=()=>{};const p=xi({key:r,name:n,async request({method:e,params:r}){let n;const i=async(o=0)=>{const a=h[o]({...u,chain:t,retryCount:0,timeout:l});try{const t=await a.request({method:e,params:r});return d({method:e,params:r,response:t,transport:a,status:"success"}),t}catch(c){if(d({error:c,method:e,params:r,transport:a,status:"error"}),s(c))throw c;if(o===h.length-1)throw c;if(n??=h.slice(o+1).some((r=>{const{include:n,exclude:i}=r({chain:t}).config.methods||{};return n?n.includes(e):!i||!i.includes(e)})),!n)throw c;return i(o+1)}};return i()},retryCount:o,retryDelay:a,type:"fallback"},{onResponse:e=>d=e,transports:h.map((e=>e({chain:t,retryCount:0})))});if(i){const e="object"==typeof i?i:{};!function({chain:e,interval:t=4e3,onTransports:r,ping:n,sampleCount:i=10,timeout:s=1e3,transports:o,weights:a={}}){const{stability:c=.7,latency:l=.3}=a,u=[],h=async()=>{const a=await Promise.all(o.map((async t=>{const r=t({chain:e,retryCount:0,timeout:s}),i=Date.now();let o,a;try{await(n?n({transport:r}):r.request({method:"net_listening"})),a=1}catch{a=0}finally{o=Date.now()}return{latency:o-i,success:a}})));u.push(a),u.length>i&&u.shift();const d=Math.max(...u.map((e=>Math.max(...e.map((({latency:e})=>e)))))),p=o.map(((e,t)=>{const r=u.map((e=>e[t].latency)),n=1-r.reduce(((e,t)=>e+t),0)/r.length/d,i=u.map((e=>e[t].success)),s=i.reduce(((e,t)=>e+t),0)/i.length;return 0===s?[0,t]:[l*n+c*s,t]})).sort(((e,t)=>t[0]-e[0]));r(p.map((([,e])=>o[e]))),await Ii(t),h()};h()}({chain:t,interval:e.interval??c,onTransports:e=>h=e,ping:e.ping,sampleCount:e.sampleCount,timeout:e.timeout,transports:h,weights:e.weights})}return p}}function Bi(e){return!(!("code"in e)||"number"!=typeof e.code||e.code!==Qn.code&&e.code!==ni.code&&!Mi.nodeMessage.test(e.message)&&5e3!==e.code)}Object.defineProperty(Mi,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(Mi,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/}),Object.defineProperty(class extends Mn{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${Ri(t)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}},"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/}),Object.defineProperty(class extends Mn{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${Ri(t)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}},"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/}),Object.defineProperty(class extends Mn{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}},"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/}),Object.defineProperty(class extends Mn{constructor({cause:e,nonce:t}={}){super([`Nonce provided for the transaction ${t?`(${t}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join("\n"),{cause:e,name:"NonceTooLowError"})}},"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/}),Object.defineProperty(class extends Mn{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}},"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/}),Object.defineProperty(class extends Mn{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join("\n"),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}},"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/}),Object.defineProperty(class extends Mn{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}},"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/}),Object.defineProperty(class extends Mn{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}},"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/}),Object.defineProperty(class extends Mn{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}},"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/}),Object.defineProperty(class extends Mn{constructor({cause:e,maxPriorityFeePerGas:t,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${t?` = ${Ri(t)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${Ri(r)} gwei`:""}).`].join("\n"),{cause:e,name:"TipAboveFeeCapError"})}},"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});const Li={ConnectorExplorerIds:{[a.o.CONNECTOR_ID.COINBASE]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[a.o.CONNECTOR_ID.COINBASE_SDK]:"fd20dc426fb37566d803205b19bbc1d4096b248ac04548e3cfb6b3a38bd033aa",[a.o.CONNECTOR_ID.SAFE]:"225affb176778569276e484e1b92637ad061b01e13a048b35a9d280c3b58970f",[a.o.CONNECTOR_ID.LEDGER]:"19177a98252e07ddfc9af2083ba8e07ef627cb6103467ffebb3f8f4205fd7927",[a.o.CONNECTOR_ID.OKX]:"971e689d0a5be527bac79629b4ee9b925e82208e5168b733496a09c0faed0709",[_.o.METMASK_CONNECTOR_NAME]:"c57ca95b47569778a828d19178114f4db188b89b763c899ba0be274e97267d96",[_.o.TRUST_CONNECTOR_NAME]:"4622a2b2d6af1c9844944291e5e7351a6aa24cd7b23099efac1b2fd875da31a0",[_.o.SOLFLARE_CONNECTOR_NAME]:"1ca0bdd4747578705b1939af023d120677c64fe6ca76add81fda36e350605e79",[_.o.PHANTOM_CONNECTOR_NAME]:"a797aa35c0fadbfc1a53e7f675162ed5226968b44a19ee3d24385c64d1d3c393",[_.o.COIN98_CONNECTOR_NAME]:"2a3c89040ac3b723a1972a33a125b1db11e258a6975d3a61252cd64e6ea5ea01",[_.o.MAGIC_EDEN_CONNECTOR_NAME]:"8b830a2b724a9c3fbab63af6f55ed29c9dfa8a55e732dc88c80a196a2ba136c6",[_.o.BACKPACK_CONNECTOR_NAME]:"2bd8c14e035c2d48f184aaa168559e86b0e3433228d3c4075900a221785019b0",[_.o.BITGET_CONNECTOR_NAME]:"38f5d18bd8522c244bdd70cb4a68e0e718865155811c043f052fb9f1c51de662",[_.o.FRONTIER_CONNECTOR_NAME]:"85db431492aa2e8672e93f4ea7acf10c88b97b867b0d373107af63dc4880f041",[_.o.XVERSE_CONNECTOR_NAME]:"2a87d74ae02e10bdd1f51f7ce6c4e1cc53cd5f2c0b6b5ad0d7b3007d2b13de7b",[_.o.LEATHER_CONNECTOR_NAME]:"483afe1df1df63daf313109971ff3ef8356ddf1cc4e45877d205eee0b7893a13"},NetworkImageIds:{1:"ba0ba0cd-17c6-4806-ad93-f9d174f17900",42161:"3bff954d-5cb0-47a0-9a23-d20192e74600",43114:"30c46e53-e989-45fb-4549-be3bd4eb3b00",56:"93564157-2e8e-4ce7-81df-b264dbee9b00",250:"06b26297-fe0c-4733-5d6b-ffa5498aac00",10:"ab9c186a-c52f-464b-2906-ca59d760a400",137:"41d04d42-da3b-4453-8506-668cc0727900",5e3:"e86fae9b-b770-4eea-e520-150e12c81100",295:"6a97d510-cac8-4e58-c7ce-e8681b044c00",11155111:"e909ea0a-f92a-4512-c8fc-748044ea6800",84532:"a18a7ecd-e307-4360-4746-283182228e00",1301:"4eeea7ef-0014-4649-5d1d-07271a80f600",130:"2257980a-3463-48c6-cbac-a42d2a956e00",10143:"0a728e83-bacb-46db-7844-948f05434900",100:"02b53f6a-e3d4-479e-1cb4-21178987d100",9001:"f926ff41-260d-4028-635e-91913fc28e00",324:"b310f07f-4ef7-49f3-7073-2a0a39685800",314:"5a73b3dd-af74-424e-cae0-0de859ee9400",4689:"34e68754-e536-40da-c153-6ef2e7188a00",1088:"3897a66d-40b9-4833-162f-a2c90531c900",1284:"161038da-44ae-4ec7-1208-0ea569454b00",1285:"f1d73bb6-5450-4e18-38f7-fb6484264a00",7777777:"845c60df-d429-4991-e687-91ae45791600",42220:"ab781bbc-ccc6-418d-d32d-789b15da1f00",8453:"7289c336-3981-4081-c5f4-efc26ac64a00",1313161554:"3ff73439-a619-4894-9262-4470c773a100",2020:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",2021:"b8101fc0-9c19-4b6f-ec65-f6dfff106e00",80094:"e329c2c9-59b0-4a02-83e4-212ff3779900",2741:"fc2427d1-5af9-4a9c-8da5-6f94627cd900","5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp":"a1b58899-f671-4276-6a5e-56ca5bd59700","4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z":"a1b58899-f671-4276-6a5e-56ca5bd59700",EtWTRABZaYq6iMfeYKouRu166VU2xqa1:"a1b58899-f671-4276-6a5e-56ca5bd59700","000000000019d6689c085ae165831e93":"0b4838db-0161-4ffe-022d-532bf03dba00","000000000933ea01ad0ee984209779ba":"39354064-d79b-420b-065d-f980c4b78200"},ConnectorImageIds:{[a.o.CONNECTOR_ID.COINBASE]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[a.o.CONNECTOR_ID.COINBASE_SDK]:"0c2840c3-5b04-4c44-9661-fbd4b49e1800",[a.o.CONNECTOR_ID.SAFE]:"461db637-8616-43ce-035a-d89b8a1d5800",[a.o.CONNECTOR_ID.LEDGER]:"54a1aa77-d202-4f8d-0fb2-5d2bb6db0300",[a.o.CONNECTOR_ID.WALLET_CONNECT]:"ef1a1fcf-7fe8-4d69-bd6d-fda1345b4400",[a.o.CONNECTOR_ID.INJECTED]:"07ba87ed-43aa-4adf-4540-9e6a2b9cae00"},ConnectorNamesMap:{[a.o.CONNECTOR_ID.INJECTED]:"Browser Wallet",[a.o.CONNECTOR_ID.WALLET_CONNECT]:"WalletConnect",[a.o.CONNECTOR_ID.COINBASE]:"Coinbase",[a.o.CONNECTOR_ID.COINBASE_SDK]:"Coinbase",[a.o.CONNECTOR_ID.LEDGER]:"Ledger",[a.o.CONNECTOR_ID.SAFE]:"Safe"},ConnectorTypesMap:{[a.o.CONNECTOR_ID.INJECTED]:"INJECTED",[a.o.CONNECTOR_ID.WALLET_CONNECT]:"WALLET_CONNECT",[a.o.CONNECTOR_ID.EIP6963]:"ANNOUNCED",[a.o.CONNECTOR_ID.AUTH]:"AUTH"},WalletConnectRpcChainIds:[1,5,11155111,10,420,42161,421613,137,80001,42220,1313161554,1313161555,56,97,43114,43113,100,8453,84531,7777777,999,324,280]};function Di(e,t){const r=new URL("https://rpc.walletconnect.org/v1/");return r.searchParams.set("chainId",e),r.searchParams.set("projectId",t),r.toString()}const ji=["near:mainnet","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp","eip155:1101","eip155:56","eip155:42161","eip155:7777777","eip155:59144","eip155:324","solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1","eip155:5000","solana:4sgjmw1sunhzsxgspuhpqldx6wiyjntz","eip155:80084","eip155:5003","eip155:100","eip155:8453","eip155:42220","eip155:1313161555","eip155:17000","eip155:1","eip155:300","eip155:1313161554","eip155:1329","eip155:84532","eip155:421614","eip155:11155111","eip155:8217","eip155:43114","solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z","eip155:999999999","eip155:11155420","eip155:80002","eip155:97","eip155:43113","eip155:137","eip155:10","eip155:1301","bip122:000000000019d6689c085ae165831e93","bip122:000000000933ea01ad0ee984209779ba"],$i={extendRpcUrlWithProjectId(e,t){let r=!1;try{r="rpc.walletconnect.org"===new URL(e).host}catch(e){r=!1}if(r){const r=new URL(e);return r.searchParams.has("projectId")||r.searchParams.set("projectId",t),r.toString()}return e},isCaipNetwork:e=>"chainNamespace"in e&&"caipNetworkId"in e,getChainNamespace(e){return this.isCaipNetwork(e)?e.chainNamespace:a.o.CHAIN.EVM},getCaipNetworkId(e){return this.isCaipNetwork(e)?e.caipNetworkId:`${a.o.CHAIN.EVM}:${e.id}`},getDefaultRpcUrl(e,t,r){const n=e.rpcUrls?.default?.http?.[0];return ji.includes(t)?Di(t,r):n||""},extendCaipNetwork(e,{customNetworkImageUrls:t,projectId:r,customRpcUrls:n}){const i=this.getChainNamespace(e),s=this.getCaipNetworkId(e),o=e.rpcUrls.default.http?.[0],a=this.getDefaultRpcUrl(e,s,r),c=e?.rpcUrls?.chainDefault?.http?.[0]||o,l=n?.[s]?.map((e=>e.url))||[],u=[...l,a],h=[...l];return c&&!h.includes(c)&&h.push(c),{...e,chainNamespace:i,caipNetworkId:s,assets:{imageId:Li.NetworkImageIds[e.id],imageUrl:t?.[e.id]},rpcUrls:{...e.rpcUrls,default:{http:u},chainDefault:{http:h}}}},extendCaipNetworks:(e,{customNetworkImageUrls:t,projectId:r,customRpcUrls:n})=>e.map((e=>$i.extendCaipNetwork(e,{customNetworkImageUrls:t,customRpcUrls:n,projectId:r}))),getViemTransport(e,t,r){const n=[];return r?.forEach((e=>{n.push(Pi(e.url,e.config))})),ji.includes(e.caipNetworkId)&&n.push(Pi(Di(e.caipNetworkId,t),{fetchOptions:{headers:{"Content-Type":"text/plain"}}})),e?.rpcUrls?.default?.http?.forEach((e=>{n.push(Pi(e))})),Ui(n)},extendWagmiTransports(e,t,r){return ji.includes(e.caipNetworkId)?Ui([r,Pi(this.getDefaultRpcUrl(e,e.caipNetworkId,t))]):r},getUnsupportedNetwork:e=>({id:e.split(":")[1],caipNetworkId:e,name:a.o.UNSUPPORTED_NETWORK_NAME,chainNamespace:e.split(":")[0],nativeCurrency:{name:"",decimals:0,symbol:""},rpcUrls:{default:{http:[]}}}),getCaipNetworkFromStorage(e){const t=b.i.getActiveCaipNetworkId(),r=m.W.getAllRequestedCaipNetworks(),n=Array.from(m.W.state.chains?.keys()||[]),i=t?.split(":")[0],s=!!i&&n.includes(i),o=r?.find((e=>e.caipNetworkId===t));return s&&!o&&t?this.getUnsupportedNetwork(t):o||e||r?.[0]}},Wi={createLogger(e,t="error"){const r=(0,fn.iP)({level:t}),{logger:n}=(0,fn.D5)({opts:r});return n.error=(...t)=>{for(const r of t)if(r instanceof Error)return void e(r,...t);e(void 0,...t)},n}};var zi=i(1307);const qi="2.27.2";let Hi=({docsBaseUrl:e,docsPath:t="",docsSlug:r})=>t?`${e??"https://viem.sh"}${t}${r?`#${r}`:""}`:void 0,Fi=`viem@${qi}`;class Ki extends Error{constructor(e,t={}){const r=t.cause instanceof Ki?t.cause.details:t.cause?.message?t.cause.message:t.details,n=t.cause instanceof Ki&&t.cause.docsPath||t.docsPath,i=Hi?.({...t,docsPath:n});super([e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...Fi?[`Version: ${Fi}`]:[]].join("\n"),t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=n,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=qi}walk(e){return Vi(this,e)}}function Vi(e,t){return t?.(e)?e:e&&"object"==typeof e&&"cause"in e&&void 0!==e.cause?Vi(e.cause,t):t?null:e}class Gi extends Ki{constructor({max:e,min:t,signed:r,size:n,value:i}){super(`Number "${i}" is not in safe ${n?`${8*n}-bit ${r?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}}class Zi extends Ki{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}class Yi extends Ki{constructor({size:e,targetSize:t,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}}function Ji(e,{dir:t,size:r=32}={}){return"string"==typeof e?function(e,{dir:t,size:r=32}={}){if(null===r)return e;const n=e.replace("0x","");if(n.length>2*r)throw new Yi({size:Math.ceil(n.length/2),targetSize:r,type:"hex"});return`0x${n["right"===t?"padEnd":"padStart"](2*r,"0")}`}(e,{dir:t,size:r}):function(e,{dir:t,size:r=32}={}){if(null===r)return e;if(e.length>r)throw new Yi({size:e.length,targetSize:r,type:"bytes"});const n=new Uint8Array(r);for(let i=0;i<r;i++){const s="right"===t;n[s?i:r-i-1]=e[s?i:e.length-i-1]}return n}(e,{dir:t,size:r})}function Xi(e){return function(e,{strict:t=!0}={}){return!!e&&"string"==typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x"))}(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}function Qi(e,{size:t}){if(Xi(e)>t)throw new Zi({givenSize:Xi(e),maxSize:t})}const es=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function ts(e,t={}){return"number"==typeof e||"bigint"==typeof e?function(e,t={}){const{signed:r,size:n}=t,i=BigInt(e);let s;n?s=r?(1n<<8n*BigInt(n)-1n)-1n:2n**(8n*BigInt(n))-1n:"number"==typeof e&&(s=BigInt(Number.MAX_SAFE_INTEGER));const o="bigint"==typeof s&&r?-s-1n:0;if(s&&i>s||i<o){const t="bigint"==typeof e?"n":"";throw new Gi({max:s?`${s}${t}`:void 0,min:`${o}${t}`,signed:r,size:n,value:`${e}${t}`})}const a=`0x${(r&&i<0?(1n<<BigInt(8*n))+BigInt(i):i).toString(16)}`;return n?Ji(a,{size:n}):a}(e,t):"string"==typeof e?function(e,t={}){return rs(ns.encode(e),t)}(e,t):"boolean"==typeof e?function(e,t={}){const r=`0x${Number(e)}`;return"number"==typeof t.size?(Qi(r,{size:t.size}),Ji(r,{size:t.size})):r}(e,t):rs(e,t)}function rs(e,t={}){let r="";for(let t=0;t<e.length;t++)r+=es[e[t]];const n=`0x${r}`;return"number"==typeof t.size?(Qi(n,{size:t.size}),Ji(n,{dir:"right",size:t.size})):n}const ns=new TextEncoder;var is=i(1122);function ss(e){return{formatters:void 0,fees:void 0,serializers:void 0,...e}}const os=ss({id:"5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",name:"Solana",network:"solana-mainnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!1,chainNamespace:"solana",caipNetworkId:"solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",deprecatedCaipNetworkId:"solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ"}),as=ss({id:"EtWTRABZaYq6iMfeYKouRu166VU2xqa1",name:"Solana Devnet",network:"solana-devnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",deprecatedCaipNetworkId:"solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K"}),cs=ss({id:"4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z",name:"Solana Testnet",network:"solana-testnet",nativeCurrency:{name:"Solana",symbol:"SOL",decimals:9},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},blockExplorers:{default:{name:"Solscan",url:"https://solscan.io"}},testnet:!0,chainNamespace:"solana",caipNetworkId:"solana:4uhcVJyU9pJkvQyS88uRDiswHXSCkY3z"}),ls=(ss({id:"000000000019d6689c085ae165831e93",caipNetworkId:"bip122:000000000019d6689c085ae165831e93",chainNamespace:"bip122",name:"Bitcoin",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}}}),ss({id:"000000000933ea01ad0ee984209779ba",caipNetworkId:"bip122:000000000933ea01ad0ee984209779ba",chainNamespace:"bip122",name:"Bitcoin Testnet",nativeCurrency:{name:"Bitcoin",symbol:"BTC",decimals:8},rpcUrls:{default:{http:["https://rpc.walletconnect.org/v1"]}},testnet:!0}),{solana:["solana_signMessage","solana_signTransaction","solana_requestAccounts","solana_getAccounts","solana_signAllTransactions","solana_signAndSendTransaction"],eip155:["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_showCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"],bip122:["sendTransfer","signMessage","signPsbt","getAccountAddresses"]}),us={getMethodsByChainNamespace:e=>ls[e]||[],createDefaultNamespace(e){return{methods:this.getMethodsByChainNamespace(e),events:["accountsChanged","chainChanged"],chains:[],rpcMap:{}}},applyNamespaceOverrides(e,t){if(!t)return{...e};const r={...e},n=new Set;if(t.methods&&Object.keys(t.methods).forEach((e=>n.add(e))),t.chains&&Object.keys(t.chains).forEach((e=>n.add(e))),t.events&&Object.keys(t.events).forEach((e=>n.add(e))),t.rpcMap&&Object.keys(t.rpcMap).forEach((e=>{const[t]=e.split(":");t&&n.add(t)})),n.forEach((e=>{r[e]||(r[e]=this.createDefaultNamespace(e))})),t.methods&&Object.entries(t.methods).forEach((([e,t])=>{r[e]&&(r[e].methods=t)})),t.chains&&Object.entries(t.chains).forEach((([e,t])=>{r[e]&&(r[e].chains=t)})),t.events&&Object.entries(t.events).forEach((([e,t])=>{r[e]&&(r[e].events=t)})),t.rpcMap){const e=new Set;Object.entries(t.rpcMap).forEach((([t,n])=>{const[i,s]=t.split(":");i&&s&&r[i]&&(r[i].rpcMap||(r[i].rpcMap={}),e.has(i)||(r[i].rpcMap={},e.add(i)),r[i].rpcMap[s]=n)}))}return r},createNamespaces(e,t){const r=e.reduce(((e,t)=>{const{id:r,chainNamespace:n,rpcUrls:i}=t,s=i.default.http[0];e[n]||(e[n]=this.createDefaultNamespace(n));const o=`${n}:${r}`,a=e[n];switch(a.chains.push(o),o){case os.caipNetworkId:a.chains.push(os.deprecatedCaipNetworkId);break;case as.caipNetworkId:a.chains.push(as.deprecatedCaipNetworkId)}return a?.rpcMap&&s&&(a.rpcMap[r]=s),e}),{});return this.applyNamespaceOverrides(r,t)},resolveReownName:async e=>{const t=await Sn.f.resolveName(e),r=Object.values(t?.addresses)||[];return r[0]?.address||!1},getChainsFromNamespaces:(e={})=>Object.values(e).flatMap((e=>{const t=e.chains||[],r=e.accounts.map((e=>{const[t,r]=e.split(":");return`${t}:${r}`}));return Array.from(new Set([...t,...r]))})),isSessionEventData:e=>"object"==typeof e&&null!==e&&"id"in e&&"topic"in e&&"params"in e&&"object"==typeof e.params&&null!==e.params&&"chainId"in e.params&&"event"in e.params&&"object"==typeof e.params.event&&null!==e.params.event};class hs{constructor({provider:e,namespace:t}){this.id=a.o.CONNECTOR_ID.WALLET_CONNECT,this.name=Li.ConnectorNamesMap[a.o.CONNECTOR_ID.WALLET_CONNECT],this.type="WALLET_CONNECT",this.imageId=Li.ConnectorImageIds[a.o.CONNECTOR_ID.WALLET_CONNECT],this.getCaipNetworks=m.W.getCaipNetworks.bind(m.W),this.caipNetworks=this.getCaipNetworks(),this.provider=e,this.chain=t}get chains(){return this.getCaipNetworks()}async connectWalletConnect(){if(!await this.authenticate()){const e=this.getCaipNetworks(),t=y.H.state.universalProviderConfigOverride,r=us.createNamespaces(e,t);await this.provider.connect({optionalNamespaces:r})}return{clientId:await this.provider.client.core.crypto.getClientId(),session:this.provider.session}}async disconnect(){await this.provider.disconnect()}async authenticate(){const e=this.chains.map((e=>e.caipNetworkId));return is.U.universalProviderAuthenticate({universalProvider:this.provider,chains:e,methods:ds})}}const ds=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_getCallsStatus","wallet_sendCalls","wallet_getCapabilities","wallet_grantPermissions","wallet_revokePermissions","wallet_getAssets"];class ps{constructor(e){this.availableConnectors=[],this.eventListeners=new Map,this.getCaipNetworks=e=>m.W.getCaipNetworks(e),e&&this.construct(e)}construct(e){this.projectId=e.projectId,this.namespace=e.namespace,this.adapterType=e.adapterType}get connectors(){return this.availableConnectors}get networks(){return this.getCaipNetworks(this.namespace)}setAuthProvider(e){this.addConnector({id:a.o.CONNECTOR_ID.AUTH,type:"AUTH",name:a.o.CONNECTOR_NAMES.AUTH,provider:e,imageId:Li.ConnectorImageIds[a.o.CONNECTOR_ID.AUTH],chain:this.namespace,chains:[]})}addConnector(...e){const t=new Set;this.availableConnectors=[...e,...this.availableConnectors].filter((e=>!t.has(e.id)&&(t.add(e.id),!0))),this.emit("connectors",this.availableConnectors)}setStatus(e,t){g.U.setStatus(e,t)}on(e,t){this.eventListeners.has(e)||this.eventListeners.set(e,new Set),this.eventListeners.get(e)?.add(t)}off(e,t){const r=this.eventListeners.get(e);r&&r.delete(t)}removeAllEventListeners(){this.eventListeners.forEach((e=>{e.clear()}))}emit(e,t){const r=this.eventListeners.get(e);r&&r.forEach((e=>e(t)))}async connectWalletConnect(e){const t=this.getWalletConnectConnector();return{clientId:(await t.connectWalletConnect()).clientId}}async switchNetwork(e){const{caipNetwork:t,providerType:r}=e;if(!e.provider)return;const n="provider"in e.provider?e.provider.provider:e.provider;if("WALLET_CONNECT"!==r){if(n&&"AUTH"===r){const e=n,r=g.U.state.preferredAccountTypes?.[t.chainNamespace];await e.switchNetwork(t.caipNetworkId);const i=await e.getUser({chainId:t.caipNetworkId,preferredAccountType:r});this.emit("switchNetwork",i)}}else n.setDefaultChain(t.caipNetworkId)}getWalletConnectConnector(){const e=this.connectors.find((e=>e instanceof hs));if(!e)throw new Error("WalletConnectConnector not found");return e}}class fs extends ps{setUniversalProvider(e){this.addConnector(new hs({provider:e,caipNetworks:this.getCaipNetworks(),namespace:this.namespace}))}async connect(e){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:Number(e.chainId),provider:this.provider,address:""})}async disconnect(){try{const e=this.getWalletConnectConnector();await e.disconnect()}catch(e){console.warn("UniversalAdapter:disconnect - error",e)}}async getAccounts({namespace:e}){const t=this.provider,r=t?.session?.namespaces?.[e]?.accounts?.map((e=>{const[,,t]=e.split(":");return t})).filter(((e,t,r)=>r.indexOf(e)===t))||[];return Promise.resolve({accounts:r.map((t=>o.w.createAccount(e,t,"bip122"===e?"payment":"eoa")))})}async syncConnectors(){return Promise.resolve()}async getBalance(e){if(!e.caipNetwork||!d.oU.BALANCE_SUPPORTED_CHAINS.includes(e.caipNetwork?.chainNamespace)||e.caipNetwork?.testnet)return{balance:"0.00",symbol:e.caipNetwork?.nativeCurrency.symbol||""};if(g.U.state.balanceLoading&&e.chainId===m.W.state.activeCaipNetwork?.id)return{balance:g.U.state.balance||"0.00",symbol:g.U.state.balanceSymbol||""};const t=(await g.U.fetchTokenBalance()).find((t=>t.chainId===`${e.caipNetwork?.chainNamespace}:${e.chainId}`&&t.symbol===e.caipNetwork?.nativeCurrency.symbol));return{balance:t?.quantity.numeric||"0.00",symbol:t?.symbol||e.caipNetwork?.nativeCurrency.symbol||""}}async signMessage(e){const{provider:t,message:r,address:n}=e;if(!t)throw new Error("UniversalAdapter:signMessage - provider is undefined");let i="";return i=m.W.state.activeCaipNetwork?.chainNamespace===a.o.CHAIN.SOLANA?(await t.request({method:"solana_signMessage",params:{message:zi.A.encode((new TextEncoder).encode(r)),pubkey:n}},m.W.state.activeCaipNetwork?.caipNetworkId)).signature:await t.request({method:"personal_sign",params:[r,n]},m.W.state.activeCaipNetwork?.caipNetworkId),{signature:i}}async estimateGas(){return Promise.resolve({gas:BigInt(0)})}async getProfile(){return Promise.resolve({profileImage:"",profileName:""})}async sendTransaction(){return Promise.resolve({hash:""})}walletGetAssets(e){return Promise.resolve({})}async writeContract(){return Promise.resolve({hash:""})}async getEnsAddress(){return Promise.resolve({address:!1})}parseUnits(){return 0n}formatUnits(){return"0"}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async syncConnection(){return Promise.resolve({id:"WALLET_CONNECT",type:"WALLET_CONNECT",chainId:1,provider:this.provider,address:""})}async switchNetwork(e){const{caipNetwork:t}=e,r=this.getWalletConnectConnector();if(t.chainNamespace===a.o.CHAIN.EVM)try{await(r.provider?.request({method:"wallet_switchEthereumChain",params:[{chainId:ts(t.id)}]}))}catch(e){if(4902===e.code||32603===e.code||5e3===e.code||4902===e?.data?.originalError?.code)try{await(r.provider?.request({method:"wallet_addEthereumChain",params:[{chainId:ts(t.id),rpcUrls:[t?.rpcUrls.chainDefault?.http],chainName:t.name,nativeCurrency:t.nativeCurrency,blockExplorerUrls:[t.blockExplorers?.default.url]}]}))}catch(e){throw new Error("Chain is not supported")}}r.provider.setDefaultChain(t.caipNetworkId)}getWalletConnectProvider(){const e=this.connectors.find((e=>"WALLET_CONNECT"===e.type)),t=e?.provider;return t}}class gs{constructor(e){this.chainNamespaces=[],this.reportedAlertErrors={},this.getCaipNetwork=(e,t)=>{if(e){const r=m.W.getNetworkData(e)?.requestedCaipNetworks?.find((e=>e.id===t));if(r)return r;const n=m.W.getNetworkData(e)?.caipNetwork;return n||m.W.getRequestedCaipNetworks(e).filter((t=>t.chainNamespace===e))?.[0]}return m.W.state.activeCaipNetwork||this.defaultCaipNetwork},this.getCaipNetworkId=()=>{const e=this.getCaipNetwork();if(e)return e.id},this.getCaipNetworks=e=>m.W.getCaipNetworks(e),this.getActiveChainNamespace=()=>m.W.state.activeChain,this.setRequestedCaipNetworks=(e,t)=>{m.W.setRequestedCaipNetworks(e,t)},this.getApprovedCaipNetworkIds=()=>m.W.getAllApprovedCaipNetworkIds(),this.getCaipAddress=e=>m.W.state.activeChain!==e&&e?m.W.getAccountProp("caipAddress",e):m.W.state.activeCaipAddress,this.setClientId=e=>{_n.T.setClientId(e)},this.getProvider=e=>k.getProvider(e),this.getProviderType=e=>k.getProviderId(e),this.getPreferredAccountType=e=>g.U.state.preferredAccountTypes?.[e],this.setCaipAddress=(e,t)=>{g.U.setCaipAddress(e,t)},this.setBalance=(e,t,r)=>{g.U.setBalance(e,t,r)},this.setProfileName=(e,t)=>{g.U.setProfileName(e,t)},this.setProfileImage=(e,t)=>{g.U.setProfileImage(e,t)},this.setUser=(e,t)=>{g.U.setUser(e,t),y.H.state.enableEmbedded&&An.W.close()},this.resetAccount=e=>{g.U.resetAccount(e)},this.setCaipNetwork=e=>{m.W.setActiveCaipNetwork(e)},this.setCaipNetworkOfNamespace=(e,t)=>{m.W.setChainNetworkData(t,{caipNetwork:e})},this.setAllAccounts=(e,t)=>{g.U.setAllAccounts(e,t),y.H.setHasMultipleAddresses(e?.length>1)},this.setStatus=(e,t)=>{g.U.setStatus(e,t),l.a.isConnected()?b.i.setConnectionStatus("connected"):b.i.setConnectionStatus("disconnected")},this.getAddressByChainNamespace=e=>m.W.getAccountProp("address",e),this.setConnectors=e=>{const t=[...l.a.state.allConnectors,...e];l.a.setConnectors(t)},this.fetchIdentity=e=>_n.T.fetchIdentity(e),this.getReownName=e=>Sn.f.getNamesForAddress(e),this.getConnectors=()=>l.a.getConnectors(),this.getConnectorImage=e=>Cn.$.getConnectorImage(e),this.setConnectedWalletInfo=(e,t)=>{const r=k.getProviderId(t),n=e?{...e,type:r}:void 0;g.U.setConnectedWalletInfo(n,t)},this.getIsConnectedState=()=>Boolean(m.W.state.activeCaipAddress),this.addAddressLabel=(e,t,r)=>{g.U.addAddressLabel(e,t,r)},this.removeAddressLabel=(e,t)=>{g.U.removeAddressLabel(e,t)},this.getAddress=e=>m.W.state.activeChain!==e&&e?m.W.getAccountProp("address",e):g.U.state.address,this.setApprovedCaipNetworksData=e=>m.W.setApprovedCaipNetworksData(e),this.resetNetwork=e=>{m.W.resetNetwork(e)},this.addConnector=e=>{l.a.addConnector(e)},this.resetWcConnection=()=>{u.x.resetWcConnection()},this.setAddressExplorerUrl=(e,t)=>{g.U.setAddressExplorerUrl(e,t)},this.setSmartAccountDeployed=(e,t)=>{g.U.setSmartAccountDeployed(e,t)},this.setSmartAccountEnabledNetworks=(e,t)=>{m.W.setSmartAccountEnabledNetworks(e,t)},this.setPreferredAccountType=(e,t)=>{g.U.setPreferredAccountType(e,t)},this.setEIP6963Enabled=e=>{y.H.setEIP6963Enabled(e)},this.handleUnsafeRPCRequest=()=>{if(this.isOpen()){if(this.isTransactionStackEmpty())return;this.redirect("ApproveTransaction")}else this.open({view:"ApproveTransaction"})},this.options=e,this.version=e.sdkVersion,this.caipNetworks=this.extendCaipNetworks(e),this.chainNamespaces=this.getChainNamespacesSet(e.adapters,this.caipNetworks),this.defaultCaipNetwork=this.extendDefaultCaipNetwork(e),this.chainAdapters=this.createAdapters(e.adapters),this.initialize(e)}getChainNamespacesSet(e,t){const r=e?.map((e=>e.namespace)).filter((e=>Boolean(e)));if(r?.length)return[...new Set(r)];const n=t?.map((e=>e.chainNamespace));return[...new Set(n)]}async initialize(e){this.initControllers(e),await this.initChainAdapters(),await this.injectModalUi(),this.sendInitializeEvent(e),p.z.set({initialized:!0}),await this.syncExistingConnection()}sendInitializeEvent(e){const{...t}=e;delete t.adapters,delete t.universalProvider,h.E.sendEvent({type:"track",event:"INITIALIZE",properties:{...t,networks:e.networks.map((e=>e.id)),siweConfig:{options:e.siweConfig?.options||{}}}})}initControllers(e){this.initializeOptionsController(e),this.initializeChainController(e),this.initializeThemeController(e),this.initializeConnectionController(e),this.initializeConnectorController()}initializeThemeController(e){e.themeMode&&w.W.setThemeMode(e.themeMode),e.themeVariables&&w.W.setThemeVariables(e.themeVariables)}initializeChainController(e){if(!this.connectionControllerClient||!this.networkControllerClient)throw new Error("ConnectionControllerClient and NetworkControllerClient must be set");m.W.initialize(e.adapters??[],this.caipNetworks,{connectionControllerClient:this.connectionControllerClient,networkControllerClient:this.networkControllerClient});const t=this.getDefaultNetwork();t&&m.W.setActiveCaipNetwork(t)}initializeConnectionController(e){u.x.setWcBasic(e.basic??!1)}initializeConnectorController(){l.a.initialize(this.chainNamespaces)}initializeOptionsController(e){y.H.setDebug(!1!==e.debug),y.H.setEnableWalletConnect(!1!==e.enableWalletConnect),y.H.setEnableWalletGuide(!1!==e.enableWalletGuide),y.H.setEnableWallets(!1!==e.enableWallets),y.H.setEIP6963Enabled(!1!==e.enableEIP6963),y.H.setEnableNetworkSwitch(!1!==e.enableNetworkSwitch),y.H.setEnableAuthLogger(!1!==e.enableAuthLogger),y.H.setCustomRpcUrls(e.customRpcUrls),y.H.setSdkVersion(e.sdkVersion),y.H.setProjectId(e.projectId),y.H.setEnableEmbedded(e.enableEmbedded),y.H.setAllWallets(e.allWallets),y.H.setIncludeWalletIds(e.includeWalletIds),y.H.setExcludeWalletIds(e.excludeWalletIds),y.H.setFeaturedWalletIds(e.featuredWalletIds),y.H.setTokens(e.tokens),y.H.setTermsConditionsUrl(e.termsConditionsUrl),y.H.setPrivacyPolicyUrl(e.privacyPolicyUrl),y.H.setCustomWallets(e.customWallets),y.H.setFeatures(e.features),y.H.setAllowUnsupportedChain(e.allowUnsupportedChain),y.H.setUniversalProviderConfigOverride(e.universalProviderConfigOverride),y.H.setDefaultAccountTypes(e.defaultAccountTypes);const t=b.i.getPreferredAccountTypes(),r={...y.H.state.defaultAccountTypes,...t};g.U.setPreferredAccountTypes(r);const n=this.getDefaultMetaData();if(!e.metadata&&n&&(e.metadata=n),y.H.setMetadata(e.metadata),y.H.setDisableAppend(e.disableAppend),y.H.setEnableEmbedded(e.enableEmbedded),y.H.setSIWX(e.siwx),!e.projectId)return void v.h.open(A.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");const i=e.adapters?.find((e=>e.namespace===a.o.CHAIN.EVM));if(i&&e.siweConfig){if(e.siwx)throw new Error("Cannot set both `siweConfig` and `siwx` options");y.H.setSIWX(e.siweConfig.mapToSIWX())}}getDefaultMetaData(){return"undefined"!=typeof window&&"undefined"!=typeof document?{name:document.getElementsByTagName("title")?.[0]?.textContent||"",description:document.querySelector('meta[property="og:description"]')?.content||"",url:window.location.origin,icons:[document.querySelector('link[rel~="icon"]')?.href||""]}:null}setUnsupportedNetwork(e){const t=this.getActiveChainNamespace();if(t){const r=$i.getUnsupportedNetwork(`${t}:${e}`);m.W.setActiveCaipNetwork(r)}}getDefaultNetwork(){return $i.getCaipNetworkFromStorage(this.defaultCaipNetwork)}extendCaipNetwork(e,t){return $i.extendCaipNetwork(e,{customNetworkImageUrls:t.chainImages,projectId:t.projectId})}extendCaipNetworks(e){return $i.extendCaipNetworks(e.networks,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId})}extendDefaultCaipNetwork(e){const t=e.networks.find((t=>t.id===e.defaultNetwork?.id));return t?$i.extendCaipNetwork(t,{customNetworkImageUrls:e.chainImages,customRpcUrls:e.customRpcUrls,projectId:e.projectId}):void 0}createClients(){this.connectionControllerClient={connectWalletConnect:async()=>{const e=m.W.state.activeChain,t=this.getAdapter(e),r=this.getCaipNetwork(e)?.id;if(!t)throw new Error("Adapter not found");const n=await t.connectWalletConnect(r);this.close(),this.setClientId(n?.clientId||null),b.i.setConnectedNamespaces([...m.W.state.chains.keys()]),this.chainNamespaces.forEach((e=>{l.a.setConnectorId(_.o.CONNECTOR_TYPE_WALLET_CONNECT,e)})),await this.syncWalletConnectAccount()},connectExternal:async({id:e,info:t,type:r,provider:n,chain:i,caipNetwork:s})=>{const o=m.W.state.activeChain,a=i||o,c=this.getAdapter(a);if(i&&i!==o&&!s){const e=this.getCaipNetworks().find((e=>e.chainNamespace===i));e&&this.setCaipNetwork(e)}if(!c)throw new Error("Adapter not found");const l=this.getCaipNetwork(a),u=await c.connect({id:e,info:t,type:r,provider:n,chainId:s?.id||l?.id,rpcUrl:s?.rpcUrls?.default?.http?.[0]||l?.rpcUrls?.default?.http?.[0]});if(!u)return;b.i.addConnectedNamespace(a),this.syncProvider({...u,chainNamespace:a});const{accounts:h}=await c.getAccounts({namespace:a,id:e});this.setAllAccounts(h,a),this.setStatus("connected",a)},reconnectExternal:async({id:e,info:t,type:r,provider:n})=>{const i=m.W.state.activeChain,s=this.getAdapter(i);s?.reconnect&&(await(s?.reconnect({id:e,info:t,type:r,provider:n,chainId:this.getCaipNetwork()?.id})),b.i.addConnectedNamespace(i))},disconnect:async e=>{const t=e||m.W.state.activeChain,r=this.getAdapter(t),n=k.getProvider(t),i=k.getProviderId(t);await(r?.disconnect({provider:n,providerType:i})),b.i.removeConnectedNamespace(t),k.resetChain(t),this.setUser(void 0,t),this.setStatus("disconnected",t)},checkInstalled:e=>e?e.some((e=>Boolean(window.ethereum?.[String(e)]))):Boolean(window.ethereum),signMessage:async e=>{const t=this.getAdapter(m.W.state.activeChain),r=await(t?.signMessage({message:e,address:g.U.state.address,provider:k.getProvider(m.W.state.activeChain)}));return r?.signature||""},sendTransaction:async e=>{if(e.chainNamespace===a.o.CHAIN.EVM){const t=this.getAdapter(m.W.state.activeChain),r=k.getProvider(m.W.state.activeChain),n=await(t?.sendTransaction({...e,caipNetwork:this.getCaipNetwork(),provider:r}));return n?.hash||""}return""},estimateGas:async e=>{if(e.chainNamespace===a.o.CHAIN.EVM){const t=this.getAdapter(m.W.state.activeChain),r=k.getProvider(m.W.state.activeChain),n=this.getCaipNetwork();if(!n)throw new Error("CaipNetwork is undefined");const i=await(t?.estimateGas({...e,provider:r,caipNetwork:n}));return i?.gas||0n}return 0n},getEnsAvatar:async()=>{const e=this.getAdapter(m.W.state.activeChain),t=await(e?.getProfile({address:g.U.state.address,chainId:Number(this.getCaipNetwork()?.id)}));return t?.profileImage||!1},getEnsAddress:async e=>{const t=this.getAdapter(m.W.state.activeChain),r=this.getCaipNetwork();if(!r)return!1;const n=await(t?.getEnsAddress({name:e,caipNetwork:r}));return n?.address||!1},writeContract:async e=>{const t=this.getAdapter(m.W.state.activeChain),r=this.getCaipNetwork(),n=this.getCaipAddress(),i=k.getProvider(m.W.state.activeChain);if(!r||!n)throw new Error("CaipNetwork or CaipAddress is undefined");const s=await(t?.writeContract({...e,caipNetwork:r,provider:i,caipAddress:n}));return s?.hash},parseUnits:(e,t)=>{const r=this.getAdapter(m.W.state.activeChain);return r?.parseUnits({value:e,decimals:t})??0n},formatUnits:(e,t)=>{const r=this.getAdapter(m.W.state.activeChain);return r?.formatUnits({value:e,decimals:t})??"0"},getCapabilities:async e=>{const t=this.getAdapter(m.W.state.activeChain);return await(t?.getCapabilities(e))},grantPermissions:async e=>{const t=this.getAdapter(m.W.state.activeChain);return await(t?.grantPermissions(e))},revokePermissions:async e=>{const t=this.getAdapter(m.W.state.activeChain);return t?.revokePermissions?await t.revokePermissions(e):"0x"},walletGetAssets:async e=>{const t=this.getAdapter(m.W.state.activeChain);return await(t?.walletGetAssets(e))??{}}},this.networkControllerClient={switchCaipNetwork:async e=>await this.switchCaipNetwork(e),getApprovedCaipNetworksData:async()=>this.getApprovedCaipNetworksData()},u.x.setClient(this.connectionControllerClient)}getApprovedCaipNetworksData(){if(k.getProviderId(m.W.state.activeChain)===_.o.CONNECTOR_TYPE_WALLET_CONNECT){const e=this.universalProvider?.session?.namespaces;return{supportsAllNetworks:"MetaMask Wallet"===this.universalProvider?.session?.peer?.metadata.name,approvedCaipNetworkIds:this.getChainsFromNamespaces(e)}}return{supportsAllNetworks:!0,approvedCaipNetworkIds:[]}}async switchCaipNetwork(e){if(!e)return;const t=e.chainNamespace;if(this.getAddressByChainNamespace(e.chainNamespace)){const r=k.getProvider(t),n=k.getProviderId(t);if(e.chainNamespace===m.W.state.activeChain){const i=this.getAdapter(t);await(i?.switchNetwork({caipNetwork:e,provider:r,providerType:n}))}else if(this.setCaipNetwork(e),n===_.o.CONNECTOR_TYPE_WALLET_CONNECT)this.syncWalletConnectAccount();else{const r=this.getAddressByChainNamespace(t);r&&this.syncAccount({address:r,chainId:e.id,chainNamespace:t})}}else this.setCaipNetwork(e)}getChainsFromNamespaces(e={}){return Object.values(e).flatMap((e=>{const t=e.chains||[],r=e.accounts.map((e=>{const{chainId:t,chainNamespace:r}=vn.parseCaipAddress(e);return`${r}:${t}`}));return Array.from(new Set([...t,...r]))}))}createAdapters(e){return this.createClients(),this.chainNamespaces.reduce(((t,r)=>{const n=e?.find((e=>e.namespace===r));return n?(n.construct({namespace:r,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),t[r]=n):t[r]=new fs({namespace:r,networks:this.getCaipNetworks()}),t}),{})}async initChainAdapter(e){this.onConnectors(e),this.listenAdapter(e),this.chainAdapters?.[e].syncConnectors(this.options,this),await this.createUniversalProviderForAdapter(e)}async initChainAdapters(){await Promise.all(this.chainNamespaces.map((async e=>{await this.initChainAdapter(e)})))}onConnectors(e){const t=this.getAdapter(e);t?.on("connectors",this.setConnectors.bind(this))}listenAdapter(e){const t=this.getAdapter(e);if(!t)return;const r=b.i.getConnectionStatus();"connected"===r?this.setStatus("connecting",e):"disconnected"===r?(b.i.clearAddressCache(),this.setStatus(r,e)):this.setStatus(r,e),t.on("switchNetwork",(({address:t,chainId:r})=>{const n=this.getCaipNetworks().find((e=>e.id===r||e.caipNetworkId===r)),i=m.W.state.activeChain===e,s=m.W.getAccountProp("address",e);if(n){const r=i&&t?t:s;r&&this.syncAccount({address:r,chainId:n.id,chainNamespace:e})}else this.setUnsupportedNetwork(r)})),t.on("disconnect",this.disconnect.bind(this,e)),t.on("pendingTransactions",(()=>{const e=g.U.state.address,t=m.W.state.activeCaipNetwork;e&&t?.id&&this.updateNativeBalance(e,t.id,t.chainNamespace)})),t.on("accountChanged",(({address:t,chainId:r})=>{const n=m.W.state.activeChain===e;n&&r?this.syncAccount({address:t,chainId:r,chainNamespace:e}):n&&m.W.state.activeCaipNetwork?.id?this.syncAccount({address:t,chainId:m.W.state.activeCaipNetwork?.id,chainNamespace:e}):this.syncAccountInfo(t,r,e)}))}async createUniversalProviderForAdapter(e){await this.getUniversalProvider(),this.universalProvider&&this.chainAdapters?.[e]?.setUniversalProvider?.(this.universalProvider)}async syncExistingConnection(){await Promise.allSettled(this.chainNamespaces.map((e=>this.syncNamespaceConnection(e))))}async syncNamespaceConnection(e){try{const t=l.a.getConnectorId(e);switch(this.setStatus("connecting",e),t){case a.o.CONNECTOR_ID.WALLET_CONNECT:await this.syncWalletConnectAccount();break;case a.o.CONNECTOR_ID.AUTH:break;default:await this.syncAdapterConnection(e)}}catch(t){console.warn("AppKit couldn't sync existing connection",t),this.setStatus("disconnected",e)}}async syncAdapterConnection(e){const t=this.getAdapter(e),r=l.a.getConnectorId(e),n=this.getCaipNetwork(e),i=l.a.getConnectors(e).find((e=>e.id===r));try{if(!t||!i)throw new Error(`Adapter or connector not found for namespace ${e}`);if(!n?.id)throw new Error("CaipNetwork not found");const r=await(t?.syncConnection({namespace:e,id:i.id,chainId:n.id,rpcUrl:n?.rpcUrls?.default?.http?.[0]}));if(r){const n=await(t?.getAccounts({namespace:e,id:i.id}));n&&n.accounts.length>0?this.setAllAccounts(n.accounts,e):this.setAllAccounts([o.w.createAccount(e,r.address,"eoa")],e),this.syncProvider({...r,chainNamespace:e}),await this.syncAccount({...r,chainNamespace:e}),this.setStatus("connected",e)}else this.setStatus("disconnected",e)}catch(t){this.setStatus("disconnected",e)}}async syncWalletConnectAccount(){const e=this.chainNamespaces.map((async e=>{const t=this.getAdapter(e),r=this.universalProvider?.session?.namespaces?.[e]?.accounts||[],n=m.W.state.activeCaipNetwork?.id,i=r.find((e=>{const{chainId:t}=vn.parseCaipAddress(e);return t===n?.toString()}))||r[0];if(i){const r=vn.validateCaipAddress(i),{chainId:n,address:s}=vn.parseCaipAddress(r);if(k.setProviderId(e,_.o.CONNECTOR_TYPE_WALLET_CONNECT),this.caipNetworks&&m.W.state.activeCaipNetwork&&t?.namespace!==a.o.CHAIN.EVM){const r=t?.getWalletConnectProvider({caipNetworks:this.getCaipNetworks(),provider:this.universalProvider,activeCaipNetwork:m.W.state.activeCaipNetwork});k.setProvider(e,r)}else k.setProvider(e,this.universalProvider);l.a.setConnectorId(a.o.CONNECTOR_ID.WALLET_CONNECT,e),b.i.addConnectedNamespace(e),this.syncWalletConnectAccounts(e),await this.syncAccount({address:s,chainId:n,chainNamespace:e})}else this.setStatus("disconnected",e);await m.W.setApprovedCaipNetworksData(e)}));await Promise.all(e)}syncWalletConnectAccounts(e){const t=this.universalProvider?.session?.namespaces?.[e]?.accounts?.map((e=>{const{address:t}=vn.parseCaipAddress(e);return t})).filter(((e,t,r)=>r.indexOf(e)===t));t&&this.setAllAccounts(t.map((t=>o.w.createAccount(e,t,"bip122"===e?"payment":"eoa"))),e)}syncProvider({type:e,provider:t,id:r,chainNamespace:n}){k.setProviderId(n,e),k.setProvider(n,t),l.a.setConnectorId(r,n)}async syncAccount(e){const t=e.chainNamespace===m.W.state.activeChain,r=m.W.getCaipNetworkByNamespace(e.chainNamespace,e.chainId),{address:n,chainId:i,chainNamespace:s}=e,{chainId:o}=b.i.getActiveNetworkProps(),c=i||o,l=m.W.state.activeCaipNetwork?.name===a.o.UNSUPPORTED_NETWORK_NAME,u=m.W.getNetworkProp("supportsAllNetworks",s);if(this.setStatus("connected",s),(!l||u)&&c){let e=this.getCaipNetworks().find((e=>e.id.toString()===c.toString())),i=this.getCaipNetworks().find((e=>e.chainNamespace===s));if(!u&&!e&&!i){const t=this.getApprovedCaipNetworkIds()||[],r=t.find((e=>vn.parseCaipNetworkId(e)?.chainId===c.toString())),n=t.find((e=>vn.parseCaipNetworkId(e)?.chainNamespace===s));e=this.getCaipNetworks().find((e=>e.caipNetworkId===r)),i=this.getCaipNetworks().find((e=>e.caipNetworkId===n||"deprecatedCaipNetworkId"in e&&e.deprecatedCaipNetworkId===n))}const o=e||i;o?.chainNamespace===m.W.state.activeChain?y.H.state.enableNetworkSwitch&&!y.H.state.allowUnsupportedChain&&m.W.state.activeCaipNetwork?.name===a.o.UNSUPPORTED_NETWORK_NAME?m.W.showUnsupportedChainUI():this.setCaipNetwork(o):t||r&&this.setCaipNetworkOfNamespace(r,s),this.syncConnectedWalletInfo(s),E.y.isLowerCaseMatch(n,g.U.state.address)||this.syncAccountInfo(n,o?.id,s),t?await this.syncBalance({address:n,chainId:o?.id,chainNamespace:s}):await this.syncBalance({address:n,chainId:r?.id,chainNamespace:s})}}async syncAccountInfo(e,t,r){const n=this.getCaipAddress(r),i=t||n?.split(":")[1];if(!i)return;const s=`${r}:${i}:${e}`;this.setCaipAddress(s,r),await this.syncIdentity({address:e,chainId:i,chainNamespace:r})}async syncReownName(e,t){try{const r=await this.getReownName(e);if(r[0]){const e=r[0];this.setProfileName(e.name,t)}else this.setProfileName(null,t)}catch{this.setProfileName(null,t)}}syncConnectedWalletInfo(e){const t=l.a.getConnectorId(e),r=k.getProviderId(e);if(r===_.o.CONNECTOR_TYPE_ANNOUNCED||r===_.o.CONNECTOR_TYPE_INJECTED){if(t){const r=this.getConnectors().find((e=>e.id===t));if(r){const{info:t,name:n,imageUrl:i}=r,s=i||this.getConnectorImage(r);this.setConnectedWalletInfo({name:n,icon:s,...t},e)}}}else if(r===_.o.CONNECTOR_TYPE_WALLET_CONNECT){const t=k.getProvider(e);t?.session&&this.setConnectedWalletInfo({...t.session.peer.metadata,name:t.session.peer.metadata.name,icon:t.session.peer.metadata.icons?.[0]},e)}else if(t)if(t===a.o.CONNECTOR_ID.COINBASE){const t=this.getConnectors().find((e=>e.id===a.o.CONNECTOR_ID.COINBASE));this.setConnectedWalletInfo({name:"Coinbase Wallet",icon:this.getConnectorImage(t)},e)}else this.setConnectedWalletInfo({name:t},e)}async syncBalance(e){En.L.getNetworksByNamespace(this.getCaipNetworks(),e.chainNamespace).find((t=>t.id.toString()===e.chainId?.toString()))&&e.chainId&&await this.updateNativeBalance(e.address,e.chainId,e.chainNamespace)}async updateNativeBalance(e,t,r){const n=this.getAdapter(r),i=m.W.getCaipNetworkByNamespace(r,t);if(n){const s=await n.getBalance({address:e,chainId:t,caipNetwork:i,tokens:this.options.tokens});this.setBalance(s.balance,s.symbol,r)}}async initializeUniversalAdapter(){const e=Wi.createLogger(((e,...t)=>{e&&this.handleAlertError(e),console.error(...t)})),t={projectId:this.options?.projectId,metadata:{name:this.options?.metadata?this.options?.metadata.name:"",description:this.options?.metadata?this.options?.metadata.description:"",url:this.options?.metadata?this.options?.metadata.url:"",icons:this.options?.metadata?this.options?.metadata.icons:[""]},logger:e};y.H.setManualWCControl(Boolean(this.options?.manualWCControl)),this.universalProvider=this.options.universalProvider??await bn.A.init(t),this.listenWalletConnect()}listenWalletConnect(){this.universalProvider&&(this.universalProvider.on("display_uri",(e=>{u.x.setUri(e)})),this.universalProvider.on("connect",u.x.finalizeWcConnection),this.universalProvider.on("disconnect",(()=>{this.chainNamespaces.forEach((e=>{this.resetAccount(e)})),u.x.resetWcConnection()})),this.universalProvider.on("chainChanged",(e=>{const t=this.getCaipNetworks().find((t=>t.id==e)),r=this.getCaipNetwork();t?r?.id!==t?.id&&this.setCaipNetwork(t):this.setUnsupportedNetwork(e)})),this.universalProvider.on("session_event",(e=>{if(us.isSessionEventData(e)){const{name:t,data:r}=e.params.event;"accountsChanged"===t&&Array.isArray(r)&&o.w.isCaipAddress(r[0])&&this.syncAccount(vn.parseCaipAddress(r[0]))}})))}createUniversalProvider(){return!this.universalProviderInitPromise&&o.w.isClient()&&this.options?.projectId&&(this.universalProviderInitPromise=this.initializeUniversalAdapter()),this.universalProviderInitPromise}async getUniversalProvider(){if(!this.universalProvider)try{await this.createUniversalProvider()}catch(e){h.E.sendEvent({type:"error",event:"INTERNAL_SDK_ERROR",properties:{errorType:"UniversalProviderInitError",errorMessage:e instanceof Error?e.message:"Unknown",uncaught:!1}}),console.error("AppKit:getUniversalProvider - Cannot create provider",e)}return this.universalProvider}handleAlertError(e){const t=Object.entries(A.UniversalProviderErrors).find((([,{message:t}])=>e.message.includes(t))),[r,n]=t??[],{message:i,alertErrorKey:s}=n??{};if(r&&i&&!this.reportedAlertErrors[r]){const e=A.ALERT_ERRORS[s];e&&(v.h.open(e,"error"),this.reportedAlertErrors[r]=!0)}}getAdapter(e){if(e)return this.chainAdapters?.[e]}createAdapter(e){if(!e)return;const t=e.namespace;if(!t)return;this.createClients();const r=e;r.namespace=t,r.construct({namespace:t,projectId:this.options?.projectId,networks:this.getCaipNetworks()}),this.chainNamespaces.includes(t)||this.chainNamespaces.push(t),this.chainAdapters&&(this.chainAdapters[t]=r)}async open(e){return await this.injectModalUi(),e?.uri&&u.x.setUri(e.uri),e?.arguments&&"Swap"===e?.view?An.W.open({...e,data:{swap:e.arguments}}):An.W.open(e)}async close(){await this.injectModalUi(),An.W.close()}setLoading(e,t){An.W.setLoading(e,t)}async disconnect(e){await u.x.disconnect(e)}getError(){return""}getChainId(){return m.W.state.activeCaipNetwork?.id}async switchNetwork(e){const t=this.getCaipNetworks().find((t=>t.id===e.id));t?await m.W.switchActiveNetwork(t):v.h.open(A.ALERT_ERRORS.SWITCH_NETWORK_NOT_FOUND,"error")}getWalletProvider(){return m.W.state.activeChain?k.state.providers[m.W.state.activeChain]:null}getWalletProviderType(){return k.getProviderId(m.W.state.activeChain)}subscribeProviders(e){return k.subscribeProviders(e)}getThemeMode(){return w.W.state.themeMode}getThemeVariables(){return w.W.state.themeVariables}setThemeMode(e){w.W.setThemeMode(e),(0,Tn.JX)(w.W.state.themeMode)}setTermsConditionsUrl(e){y.H.setTermsConditionsUrl(e)}setPrivacyPolicyUrl(e){y.H.setPrivacyPolicyUrl(e)}setThemeVariables(e){w.W.setThemeVariables(e),(0,Tn.ds)(w.W.state.themeVariables)}subscribeTheme(e){return w.W.subscribe(e)}getWalletInfo(){return g.U.state.connectedWalletInfo}getAccount(e){const t=l.a.getAuthConnector(e),r=m.W.getAccountData(e),n=m.W.state.activeChain;if(r)return{allAccounts:r.allAccounts,caipAddress:r.caipAddress,address:o.w.getPlainAddress(r.caipAddress),isConnected:Boolean(r.caipAddress),status:r.status,embeddedWalletInfo:t?{user:r.user?{...r.user,username:b.i.getConnectedSocialUsername()}:void 0,authProvider:r.socialProvider||"email",accountType:r.preferredAccountTypes?.[e||n],isSmartAccountDeployed:Boolean(r.smartAccountDeployed)}:void 0}}subscribeAccount(e,t){const r=()=>{const r=this.getAccount(t);r&&e(r)};t?m.W.subscribeChainProp("accountState",r,t):m.W.subscribe(r),l.a.subscribe(r)}subscribeNetwork(e){return m.W.subscribe((({activeCaipNetwork:t})=>{e({caipNetwork:t,chainId:t?.id,caipNetworkId:t?.caipNetworkId})}))}subscribeWalletInfo(e){return g.U.subscribeKey("connectedWalletInfo",e)}subscribeShouldUpdateToAddress(e){g.U.subscribeKey("shouldUpdateToAddress",e)}subscribeCaipNetworkChange(e){m.W.subscribeKey("activeCaipNetwork",e)}getState(){return p.z.state}subscribeState(e){return p.z.subscribe(e)}showErrorMessage(e){In.P.showError(e)}showSuccessMessage(e){In.P.showSuccess(e)}getEvent(){return{...h.E.state}}subscribeEvents(e){return h.E.subscribe(e)}replace(e){Nn.I.replace(e)}redirect(e){Nn.I.push(e)}popTransactionStack(e){Nn.I.popTransactionStack(e)}isOpen(){return An.W.state.open}isTransactionStackEmpty(){return 0===Nn.I.state.transactionStack.length}isTransactionShouldReplaceView(){return Nn.I.state.transactionStack[Nn.I.state.transactionStack.length-1]?.replace}static getInstance(){return this.instance}updateFeatures(e){y.H.setFeatures(e)}updateOptions(e){const t={...y.H.state||{},...e};y.H.setOptions(t)}setConnectMethodsOrder(e){y.H.setConnectMethodsOrder(e)}setWalletFeaturesOrder(e){y.H.setWalletFeaturesOrder(e)}setCollapseWallets(e){y.H.setCollapseWallets(e)}setSocialsOrder(e){y.H.setSocialsOrder(e)}getConnectMethodsOrder(){return kn.A.getConnectOrderMethod(y.H.state.features,l.a.getConnectors())}addNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);const r=this.extendCaipNetwork(t,this.options);this.getCaipNetworks().find((e=>e.id===r.id))||m.W.addNetwork(r)}removeNetwork(e,t){if(this.chainAdapters&&!this.chainAdapters[e])throw new Error(`Adapter for namespace ${e} doesn't exist`);this.getCaipNetworks().find((e=>e.id===t))&&m.W.removeNetwork(e,t)}}let ms=!1;var ys=i(8287),ws=i(6013),bs=i(9271),vs=i(2531);const[Es,_s]=(()=>bs.Ay.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),As=new Uint32Array(80),Ss=new Uint32Array(80);class Cs extends ws.ol{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:r,Bl:n,Ch:i,Cl:s,Dh:o,Dl:a,Eh:c,El:l,Fh:u,Fl:h,Gh:d,Gl:p,Hh:f,Hl:g}=this;return[e,t,r,n,i,s,o,a,c,l,u,h,d,p,f,g]}set(e,t,r,n,i,s,o,a,c,l,u,h,d,p,f,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|i,this.Cl=0|s,this.Dh=0|o,this.Dl=0|a,this.Eh=0|c,this.El=0|l,this.Fh=0|u,this.Fl=0|h,this.Gh=0|d,this.Gl=0|p,this.Hh=0|f,this.Hl=0|g}process(e,t){for(let r=0;r<16;r++,t+=4)As[r]=e.getUint32(t),Ss[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|As[e-15],r=0|Ss[e-15],n=bs.Ay.rotrSH(t,r,1)^bs.Ay.rotrSH(t,r,8)^bs.Ay.shrSH(t,r,7),i=bs.Ay.rotrSL(t,r,1)^bs.Ay.rotrSL(t,r,8)^bs.Ay.shrSL(t,r,7),s=0|As[e-2],o=0|Ss[e-2],a=bs.Ay.rotrSH(s,o,19)^bs.Ay.rotrBH(s,o,61)^bs.Ay.shrSH(s,o,6),c=bs.Ay.rotrSL(s,o,19)^bs.Ay.rotrBL(s,o,61)^bs.Ay.shrSL(s,o,6),l=bs.Ay.add4L(i,c,Ss[e-7],Ss[e-16]),u=bs.Ay.add4H(l,n,a,As[e-7],As[e-16]);As[e]=0|u,Ss[e]=0|l}let{Ah:r,Al:n,Bh:i,Bl:s,Ch:o,Cl:a,Dh:c,Dl:l,Eh:u,El:h,Fh:d,Fl:p,Gh:f,Gl:g,Hh:m,Hl:y}=this;for(let e=0;e<80;e++){const t=bs.Ay.rotrSH(u,h,14)^bs.Ay.rotrSH(u,h,18)^bs.Ay.rotrBH(u,h,41),w=bs.Ay.rotrSL(u,h,14)^bs.Ay.rotrSL(u,h,18)^bs.Ay.rotrBL(u,h,41),b=u&d^~u&f,v=h&p^~h&g,E=bs.Ay.add5L(y,w,v,_s[e],Ss[e]),_=bs.Ay.add5H(E,m,t,b,Es[e],As[e]),A=0|E,S=bs.Ay.rotrSH(r,n,28)^bs.Ay.rotrBH(r,n,34)^bs.Ay.rotrBH(r,n,39),C=bs.Ay.rotrSL(r,n,28)^bs.Ay.rotrBL(r,n,34)^bs.Ay.rotrBL(r,n,39),I=r&i^r&o^i&o,N=n&s^n&a^s&a;m=0|f,y=0|g,f=0|d,g=0|p,d=0|u,p=0|h,({h:u,l:h}=bs.Ay.add(0|c,0|l,0|_,0|A)),c=0|o,l=0|a,o=0|i,a=0|s,i=0|r,s=0|n;const k=bs.Ay.add3L(A,C,N);r=bs.Ay.add3H(k,_,S,I),n=0|k}({h:r,l:n}=bs.Ay.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:s}=bs.Ay.add(0|this.Bh,0|this.Bl,0|i,0|s)),({h:o,l:a}=bs.Ay.add(0|this.Ch,0|this.Cl,0|o,0|a)),({h:c,l}=bs.Ay.add(0|this.Dh,0|this.Dl,0|c,0|l)),({h:u,l:h}=bs.Ay.add(0|this.Eh,0|this.El,0|u,0|h)),({h:d,l:p}=bs.Ay.add(0|this.Fh,0|this.Fl,0|d,0|p)),({h:f,l:g}=bs.Ay.add(0|this.Gh,0|this.Gl,0|f,0|g)),({h:m,l:y}=bs.Ay.add(0|this.Hh,0|this.Hl,0|m,0|y)),this.set(r,n,i,s,o,a,c,l,u,h,d,p,f,g,m,y)}roundClean(){As.fill(0),Ss.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Is=(0,vs.ld)((()=>new Cs));var Ns=i(615),ks=i(8030),Ts=i(8293);const xs=BigInt(0),Ps=BigInt(1),Os=BigInt(2),Rs=BigInt(8),Ms={zip215:!0};const Us=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),Bs=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),Ls=(BigInt(0),BigInt(1)),Ds=BigInt(2),js=(BigInt(3),BigInt(5)),$s=BigInt(8);function Ws(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function zs(e,t){const r=Us,n=(0,ks.zi)(t*t*t,r),i=function(e){const t=BigInt(10),r=BigInt(20),n=BigInt(40),i=BigInt(80),s=Us,o=e*e%s*e%s,a=(0,ks.zH)(o,Ds,s)*o%s,c=(0,ks.zH)(a,Ls,s)*e%s,l=(0,ks.zH)(c,js,s)*c%s,u=(0,ks.zH)(l,t,s)*l%s,h=(0,ks.zH)(u,r,s)*u%s,d=(0,ks.zH)(h,n,s)*h%s,p=(0,ks.zH)(d,i,s)*d%s,f=(0,ks.zH)(p,i,s)*d%s,g=(0,ks.zH)(f,t,s)*l%s;return{pow_p_5_8:(0,ks.zH)(g,Ds,s)*e%s,b2:o}}(e*(0,ks.zi)(n*n*t,r)).pow_p_5_8;let s=(0,ks.zi)(e*n*i,r);const o=(0,ks.zi)(t*s*s,r),a=s,c=(0,ks.zi)(s*Bs,r),l=o===e,u=o===(0,ks.zi)(-e,r),h=o===(0,ks.zi)(-e*Bs,r);return l&&(s=a),(u||h)&&(s=c),(0,ks.dQ)(s,r)&&(s=(0,ks.zi)(-s,r)),{isValid:l||u,value:s}}const qs=(()=>(0,ks.D0)(Us,void 0,!0))(),Hs=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:qs,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:$s,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Is,randomBytes:vs.po,adjustScalarBytes:Ws,uvRatio:zs}))(),Fs=(()=>function(e){const t=function(e){const t=(0,Ns.hp)(e);return Ts.Q5(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}(e),{Fp:r,n,prehash:i,hash:s,randomBytes:o,nByteLength:a,h:c}=t,l=Os<<BigInt(8*a)-Ps,u=r.create,h=(0,ks.D0)(t.n,t.nBitLength),d=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:r.sqrt(e*r.inv(t))}}catch(e){return{isValid:!1,value:xs}}}),p=t.adjustScalarBytes||(e=>e),f=t.domain||((e,t,r)=>{if((0,Ts.e8)("phflag",r),t.length||r)throw new Error("Contexts/pre-hash are not supported");return e});function g(e,t){Ts.aK("coordinate "+e,t,xs,l)}function m(e){if(!(e instanceof b))throw new Error("ExtendedPoint expected")}const y=(0,Ts.x)(((e,t)=>{const{ex:n,ey:i,ez:s}=e,o=e.is0();null==t&&(t=o?Rs:r.inv(s));const a=u(n*t),c=u(i*t),l=u(s*t);if(o)return{x:xs,y:Ps};if(l!==Ps)throw new Error("invZ was invalid");return{x:a,y:c}})),w=(0,Ts.x)((e=>{const{a:r,d:n}=t;if(e.is0())throw new Error("bad point: ZERO");const{ex:i,ey:s,ez:o,et:a}=e,c=u(i*i),l=u(s*s),h=u(o*o),d=u(h*h),p=u(c*r);if(u(h*u(p+l))!==u(d+u(n*u(c*l))))throw new Error("bad point: equation left != right (1)");if(u(i*s)!==u(o*a))throw new Error("bad point: equation left != right (2)");return!0}));class b{constructor(e,t,r,n){this.ex=e,this.ey=t,this.ez=r,this.et=n,g("x",e),g("y",t),g("z",r),g("t",n),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof b)throw new Error("extended point not allowed");const{x:t,y:r}=e||{};return g("x",t),g("y",r),new b(t,r,Ps,u(t*r))}static normalizeZ(e){const t=r.invertBatch(e.map((e=>e.ez)));return e.map(((e,r)=>e.toAffine(t[r]))).map(b.fromAffine)}static msm(e,t){return(0,Ns.Xf)(b,h,e,t)}_setWindowSize(e){_.setWindowSize(this,e)}assertValidity(){w(this)}equals(e){m(e);const{ex:t,ey:r,ez:n}=this,{ex:i,ey:s,ez:o}=e,a=u(t*o),c=u(i*n),l=u(r*o),h=u(s*n);return a===c&&l===h}is0(){return this.equals(b.ZERO)}negate(){return new b(u(-this.ex),this.ey,this.ez,u(-this.et))}double(){const{a:e}=t,{ex:r,ey:n,ez:i}=this,s=u(r*r),o=u(n*n),a=u(Os*u(i*i)),c=u(e*s),l=r+n,h=u(u(l*l)-s-o),d=c+o,p=d-a,f=c-o,g=u(h*p),m=u(d*f),y=u(h*f),w=u(p*d);return new b(g,m,w,y)}add(e){m(e);const{a:r,d:n}=t,{ex:i,ey:s,ez:o,et:a}=this,{ex:c,ey:l,ez:h,et:d}=e;if(r===BigInt(-1)){const e=u((s-i)*(l+c)),t=u((s+i)*(l-c)),r=u(t-e);if(r===xs)return this.double();const n=u(o*Os*d),p=u(a*Os*h),f=p+n,g=t+e,m=p-n,y=u(f*r),w=u(g*m),v=u(f*m),E=u(r*g);return new b(y,w,E,v)}const p=u(i*c),f=u(s*l),g=u(a*n*d),y=u(o*h),w=u((i+s)*(c+l)-p-f),v=y-g,E=y+g,_=u(f-r*p),A=u(w*v),S=u(E*_),C=u(w*_),I=u(v*E);return new b(A,S,I,C)}subtract(e){return this.add(e.negate())}wNAF(e){return _.wNAFCached(this,e,b.normalizeZ)}multiply(e){const t=e;Ts.aK("scalar",t,Ps,n);const{p:r,f:i}=this.wNAF(t);return b.normalizeZ([r,i])[0]}multiplyUnsafe(e,t=b.ZERO){const r=e;return Ts.aK("scalar",r,xs,n),r===xs?E:this.is0()||r===Ps?this:_.wNAFCachedUnsafe(this,r,b.normalizeZ,t)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return _.unsafeLadder(this,n).is0()}toAffine(e){return y(this,e)}clearCofactor(){const{h:e}=t;return e===Ps?this:this.multiplyUnsafe(e)}static fromHex(e,n=!1){const{d:i,a:s}=t,o=r.BYTES;e=(0,Ts.qj)("pointHex",e,o),(0,Ts.e8)("zip215",n);const a=e.slice(),c=e[o-1];a[o-1]=-129&c;const h=Ts.lX(a),p=n?l:r.ORDER;Ts.aK("pointHex.y",h,xs,p);const f=u(h*h),g=u(f-Ps),m=u(i*f-s);let{isValid:y,value:w}=d(g,m);if(!y)throw new Error("Point.fromHex: invalid y coordinate");const v=(w&Ps)===Ps,E=!!(128&c);if(!n&&w===xs&&E)throw new Error("Point.fromHex: x=0 and x_0=1");return E!==v&&(w=u(-w)),b.fromAffine({x:w,y:h})}static fromPrivateKey(e){return C(e).point}toRawBytes(){const{x:e,y:t}=this.toAffine(),n=Ts.z(t,r.BYTES);return n[n.length-1]|=e&Ps?128:0,n}toHex(){return Ts.My(this.toRawBytes())}}b.BASE=new b(t.Gx,t.Gy,Ps,u(t.Gx*t.Gy)),b.ZERO=new b(xs,Ps,Ps,xs);const{BASE:v,ZERO:E}=b,_=(0,Ns.hT)(b,8*a);function A(e){return(0,ks.zi)(e,n)}function S(e){return A(Ts.lX(e))}function C(e){const t=r.BYTES;e=(0,Ts.qj)("private key",e,t);const n=(0,Ts.qj)("hashed private key",s(e),2*t),i=p(n.slice(0,t)),o=n.slice(t,2*t),a=S(i),c=v.multiply(a),l=c.toRawBytes();return{head:i,prefix:o,scalar:a,point:c,pointBytes:l}}function I(e=new Uint8Array,...t){const r=Ts.Id(...t);return S(s(f(r,(0,Ts.qj)("context",e),!!i)))}const N=Ms;return v._setWindowSize(8),{CURVE:t,getPublicKey:function(e){return C(e).pointBytes},sign:function(e,t,s={}){e=(0,Ts.qj)("message",e),i&&(e=i(e));const{prefix:o,scalar:a,pointBytes:c}=C(t),l=I(s.context,o,e),u=v.multiply(l).toRawBytes(),h=A(l+I(s.context,u,c,e)*a);Ts.aK("signature.s",h,xs,n);const d=Ts.Id(u,Ts.z(h,r.BYTES));return(0,Ts.qj)("result",d,2*r.BYTES)},verify:function(e,t,n,s=N){const{context:o,zip215:a}=s,c=r.BYTES;e=(0,Ts.qj)("signature",e,2*c),t=(0,Ts.qj)("message",t),n=(0,Ts.qj)("publicKey",n,c),void 0!==a&&(0,Ts.e8)("zip215",a),i&&(t=i(t));const l=Ts.lX(e.slice(c,2*c));let u,h,d;try{u=b.fromHex(n,a),h=b.fromHex(e.slice(0,c),a),d=v.multiplyUnsafe(l)}catch(e){return!1}if(!a&&u.isSmallOrder())return!1;const p=I(o,h.toRawBytes(),u.toRawBytes(),t);return h.add(u.multiplyUnsafe(p)).subtract(d).clearCofactor().equals(b.ZERO)},ExtendedPoint:b,utils:{getExtendedPublicKey:C,randomPrivateKey:()=>o(r.BYTES),precompute:(e=8,t=b.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}}(Hs))();var Ks=i(9404),Vs=i.n(Ks),Gs=i(3466),Zs=i.n(Gs),Ys=i(8226),Js=i(2755),Xs=i(601),Qs=i(7803);class eo extends TypeError{constructor(e,t){let r;const{message:n,explanation:i,...s}=e,{path:o}=e,a=0===o.length?n:`At path: ${o.join(".")} -- ${n}`;super(i??a),null!=i&&(this.cause=a),Object.assign(this,s),this.name=this.constructor.name,this.failures=()=>r??(r=[e,...t()])}}function to(e){return"object"==typeof e&&null!=e}function ro(e){return to(e)&&!Array.isArray(e)}function no(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function io(e,t,r,n){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});const{path:i,branch:s}=t,{type:o}=r,{refinement:a,message:c=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${no(n)}\``}=e;return{value:n,type:o,refinement:a,key:i[i.length-1],path:i,branch:s,...e,message:c}}function*so(e,t,r,n){var i;to(i=e)&&"function"==typeof i[Symbol.iterator]||(e=[e]);for(const i of e){const e=io(i,t,r,n);e&&(yield e)}}function*oo(e,t,r={}){const{path:n=[],branch:i=[e],coerce:s=!1,mask:o=!1}=r,a={path:n,branch:i,mask:o};s&&(e=t.coercer(e,a));let c="valid";for(const n of t.validator(e,a))n.explanation=r.message,c="not_valid",yield[n,void 0];for(let[l,u,h]of t.entries(e,a)){const t=oo(u,h,{path:void 0===l?n:[...n,l],branch:void 0===l?i:[...i,u],coerce:s,mask:o,message:r.message});for(const r of t)r[0]?(c=null!=r[0].refinement?"not_refined":"not_valid",yield[r[0],void 0]):s&&(u=r[1],void 0===l?e=u:e instanceof Map?e.set(l,u):e instanceof Set?e.add(u):to(e)&&(void 0!==u||l in e)&&(e[l]=u))}if("not_valid"!==c)for(const n of t.refiner(e,a))n.explanation=r.message,c="not_refined",yield[n,void 0];"valid"===c&&(yield[void 0,e])}class ao{constructor(e){const{type:t,schema:r,validator:n,refiner:i,coercer:s=e=>e,entries:o=function*(){}}=e;this.type=t,this.schema=r,this.entries=o,this.coercer=s,this.validator=n?(e,t)=>so(n(e,t),t,this,e):()=>[],this.refiner=i?(e,t)=>so(i(e,t),t,this,e):()=>[]}assert(e,t){return function(e,t,r){const n=uo(e,t,{message:r});if(n[0])throw n[0]}(e,this,t)}create(e,t){return co(e,this,t)}is(e){return lo(e,this)}mask(e,t){return function(e,t,r){const n=uo(e,t,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}(e,this,t)}validate(e,t={}){return uo(e,this,t)}}function co(e,t,r){const n=uo(e,t,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function lo(e,t){return!uo(e,t)[0]}function uo(e,t,r={}){const n=oo(e,t,r),i=function(e){const{done:t,value:r}=e.next();return t?void 0:r}(n);return i[0]?[new eo(i[0],(function*(){for(const e of n)e[0]&&(yield e[0])})),void 0]:[void 0,i[1]]}function ho(e,t){return new ao({type:e,schema:null,validator:t})}function po(e){return new ao({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[r,n]of t.entries())yield[r,n,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${no(e)}`})}function fo(){return ho("boolean",(e=>"boolean"==typeof e))}function go(e){return ho("instance",(t=>t instanceof e||`Expected a \`${e.name}\` instance, but received: ${no(t)}`))}function mo(e){const t=no(e),r=typeof e;return new ao({type:"literal",schema:"string"===r||"number"===r||"boolean"===r?e:null,validator:r=>r===e||`Expected the literal \`${t}\`, but received: ${no(r)}`})}function yo(e){return new ao({...e,validator:(t,r)=>null===t||e.validator(t,r),refiner:(t,r)=>null===t||e.refiner(t,r)})}function wo(){return ho("number",(e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${no(e)}`))}function bo(e){return new ao({...e,validator:(t,r)=>void 0===t||e.validator(t,r),refiner:(t,r)=>void 0===t||e.refiner(t,r)})}function vo(e,t){return new ao({type:"record",schema:null,*entries(r){if(to(r))for(const n in r){const i=r[n];yield[n,n,e],yield[n,i,t]}},validator:e=>ro(e)||`Expected an object, but received: ${no(e)}`,coercer:e=>ro(e)?{...e}:e})}function Eo(){return ho("string",(e=>"string"==typeof e||`Expected a string, but received: ${no(e)}`))}function _o(e){const t=ho("never",(()=>!1));return new ao({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(e.length,r.length);for(let i=0;i<n;i++)yield[i,r[i],e[i]||t]}},validator:e=>Array.isArray(e)||`Expected an array, but received: ${no(e)}`,coercer:e=>Array.isArray(e)?e.slice():e})}function Ao(e){const t=Object.keys(e);return new ao({type:"type",schema:e,*entries(r){if(to(r))for(const n of t)yield[n,r[n],e[n]]},validator:e=>ro(e)||`Expected an object, but received: ${no(e)}`,coercer:e=>ro(e)?{...e}:e})}function So(e){const t=e.map((e=>e.type)).join(" | ");return new ao({type:"union",schema:null,coercer(t,r){for(const n of e){const[e,i]=n.validate(t,{coerce:!0,mask:r.mask});if(!e)return i}return t},validator(r,n){const i=[];for(const t of e){const[...e]=oo(r,t,n),[s]=e;if(!s[0])return[];for(const[t]of e)t&&i.push(t)}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${no(r)}`,...i]}})}function Co(){return ho("unknown",(()=>!0))}function Io(e,t,r){return new ao({...e,coercer:(n,i)=>lo(n,t)?e.coercer(r(n,i),i):e.coercer(n,i)})}var No=i(22),ko=i.n(No),To=i(3678),xo=class extends To{socket;constructor(e,t,r){super(),this.socket=new window.WebSocket(e,r),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=e=>this.emit("message",e.data),this.socket.onerror=e=>this.emit("error",e),this.socket.onclose=e=>{this.emit("close",e.code,e.reason)}}send(e,t,r){const n=r||t;try{this.socket.send(e),n()}catch(e){n(e)}}close(e,t){this.socket.close(e,t)}addEventListener(e,t,r){this.socket.addEventListener(e,t,r)}};var Po=class{encode(e){return JSON.stringify(e)}decode(e){return JSON.parse(e)}},Oo=class extends To{address;rpc_id;queue;options;autoconnect;ready;reconnect;reconnect_timer_id;reconnect_interval;max_reconnects;rest_options;current_reconnects;generate_request_id;socket;webSocketFactory;dataPack;constructor(e,t="ws://localhost:8080",{autoconnect:r=!0,reconnect:n=!0,reconnect_interval:i=1e3,max_reconnects:s=5,...o}={},a,c){super(),this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=t,this.autoconnect=r,this.ready=!1,this.reconnect=n,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=s,this.rest_options=o,this.current_reconnects=0,this.generate_request_id=a||(()=>"number"==typeof this.rpc_id?++this.rpc_id:Number(this.rpc_id)+1),this.dataPack=c||new Po,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,t,r,n){return n||"object"!=typeof r||(n=r,r=null),new Promise(((i,s)=>{if(!this.ready)return s(new Error("socket not ready"));const o=this.generate_request_id(e,t),a={jsonrpc:"2.0",method:e,params:t||void 0,id:o};this.socket.send(this.dataPack.encode(a),n,(e=>{if(e)return s(e);this.queue[o]={promise:[i,s]},r&&(this.queue[o].timeout=setTimeout((()=>{delete this.queue[o],s(new Error("reply timeout"))}),r))}))}))}async login(e){const t=await this.call("rpc.login",e);if(!t)throw new Error("authentication failed");return t}async listMethods(){return await this.call("__listMethods")}notify(e,t){return new Promise(((r,n)=>{if(!this.ready)return n(new Error("socket not ready"));const i={jsonrpc:"2.0",method:e,params:t};this.socket.send(this.dataPack.encode(i),(e=>{if(e)return n(e);r()}))}))}async subscribe(e){"string"==typeof e&&(e=[e]);const t=await this.call("rpc.on",e);if("string"==typeof e&&"ok"!==t[e])throw new Error("Failed subscribing to an event '"+e+"' with: "+t[e]);return t}async unsubscribe(e){"string"==typeof e&&(e=[e]);const t=await this.call("rpc.off",e);if("string"==typeof e&&"ok"!==t[e])throw new Error("Failed unsubscribing from an event with: "+t);return t}close(e,t){this.socket.close(e||1e3,t)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}_connect(e,t){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,t),this.socket.addEventListener("open",(()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0})),this.socket.addEventListener("message",(({data:e})=>{e instanceof ArrayBuffer&&(e=ys.Buffer.from(e).toString());try{e=this.dataPack.decode(e)}catch(e){return}if(e.notification&&this.listeners(e.notification).length){if(!Object.keys(e.params).length)return this.emit(e.notification);const t=[e.notification];if(e.params.constructor===Object)t.push(e.params);else for(let r=0;r<e.params.length;r++)t.push(e.params[r]);return Promise.resolve().then((()=>{this.emit.apply(this,t)}))}if(!this.queue[e.id])return e.method?Promise.resolve().then((()=>{this.emit(e.method,e?.params)})):void 0;"error"in e=="result"in e&&this.queue[e.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[e.id].timeout&&clearTimeout(this.queue[e.id].timeout),e.error?this.queue[e.id].promise[1](e.error):this.queue[e.id].promise[0](e.result),delete this.queue[e.id]})),this.socket.addEventListener("error",(e=>this.emit("error",e))),this.socket.addEventListener("close",(({code:r,reason:n})=>{this.ready&&setTimeout((()=>this.emit("close",r,n)),0),this.ready=!1,this.socket=void 0,1e3!==r&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||0===this.max_reconnects)&&(this.reconnect_timer_id=setTimeout((()=>this._connect(e,t)),this.reconnect_interval)))}))}},Ro=i(7238),Mo=i(2959);Fs.utils.randomPrivateKey;const Uo=()=>{const e=Fs.utils.randomPrivateKey(),t=Bo(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),{publicKey:t,secretKey:r}},Bo=Fs.getPublicKey;function Lo(e){try{return Fs.ExtendedPoint.fromHex(e),!0}catch{return!1}}const Do=(e,t)=>Fs.sign(e,t.slice(0,32)),jo=Fs.verify,$o=e=>ys.Buffer.isBuffer(e)?e:e instanceof Uint8Array?ys.Buffer.from(e.buffer,e.byteOffset,e.byteLength):ys.Buffer.from(e);class Wo{constructor(e){Object.assign(this,e)}encode(){return ys.Buffer.from((0,Js.serialize)(zo,this))}static decode(e){return(0,Js.deserialize)(zo,this,e)}static decodeUnchecked(e){return(0,Js.deserializeUnchecked)(zo,this,e)}}const zo=new Map;var qo;const Ho=32;let Fo=1;class Ko extends Wo{constructor(e){if(super({}),this._bn=void 0,function(e){return void 0!==e._bn}(e))this._bn=e._bn;else{if("string"==typeof e){const t=Zs().decode(e);if(t.length!=Ho)throw new Error("Invalid public key input");this._bn=new(Vs())(t)}else this._bn=new(Vs())(e);if(this._bn.byteLength()>Ho)throw new Error("Invalid public key input")}}static unique(){const e=new Ko(Fo);return Fo+=1,new Ko(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return Zs().encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(ys.Buffer);if(e.length===Ho)return e;const t=ys.Buffer.alloc(32);return e.copy(t,32-e.length),t}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,t,r){const n=ys.Buffer.concat([e.toBuffer(),ys.Buffer.from(t),r.toBuffer()]),i=(0,Ys.sc)(n);return new Ko(i)}static createProgramAddressSync(e,t){let r=ys.Buffer.alloc(0);e.forEach((function(e){if(e.length>32)throw new TypeError("Max seed length exceeded");r=ys.Buffer.concat([r,$o(e)])})),r=ys.Buffer.concat([r,t.toBuffer(),ys.Buffer.from("ProgramDerivedAddress")]);const n=(0,Ys.sc)(r);if(Lo(n))throw new Error("Invalid seeds, address must fall off the curve");return new Ko(n)}static async createProgramAddress(e,t){return this.createProgramAddressSync(e,t)}static findProgramAddressSync(e,t){let r,n=255;for(;0!=n;){try{const i=e.concat(ys.Buffer.from([n]));r=this.createProgramAddressSync(i,t)}catch(e){if(e instanceof TypeError)throw e;n--;continue}return[r,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,t){return this.findProgramAddressSync(e,t)}static isOnCurve(e){return Lo(new Ko(e).toBytes())}}qo=Ko,Ko.default=new qo("11111111111111111111111111111111"),zo.set(Ko,{kind:"struct",fields:[["_bn","u256"]]}),new Ko("BPFLoader1111111111111111111111111111111111");const Vo=1232;class Go extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Go.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Zo extends Error{constructor(e,t){super(`Transaction was not confirmed in ${t.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Zo.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Yo extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Yo.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class Jo{constructor(e,t){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=t}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const t of this.keySegments()){if(e<t.length)return t[e];e-=t.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const t=new Map;this.keySegments().flat().forEach(((e,r)=>{t.set(e.toBase58(),r)}));const r=e=>{const r=t.get(e.toBase58());if(void 0===r)throw new Error("Encountered an unknown instruction account key during compilation");return r};return e.map((e=>({programIdIndex:r(e.programId),accountKeyIndexes:e.keys.map((e=>r(e.pubkey))),data:e.data})))}}const Xo=(e="publicKey")=>Xs.av(32,e),Qo=(e="signature")=>Xs.av(64,e),ea=(e="string")=>{const t=Xs.w3([Xs.DH("length"),Xs.DH("lengthPadding"),Xs.av(Xs.cY(Xs.DH(),-8),"chars")],e),r=t.decode.bind(t),n=t.encode.bind(t),i=t;return i.decode=(e,t)=>r(e,t).chars.toString(),i.encode=(e,t,r)=>{const i={chars:ys.Buffer.from(e,"utf8")};return n(i,t,r)},i.alloc=e=>Xs.DH().span+Xs.DH().span+ys.Buffer.from(e,"utf8").length,i};function ta(e,t){const r=e=>{if(e.span>=0)return e.span;if("function"==typeof e.alloc)return e.alloc(t[e.property]);if("count"in e&&"elementLayout"in e){const n=t[e.property];if(Array.isArray(n))return n.length*r(e.elementLayout)}else if("fields"in e)return ta({layout:e},t[e.property]);return 0};let n=0;return e.layout.fields.forEach((e=>{n+=r(e)})),n}function ra(e){let t=0,r=0;for(;;){let n=e.shift();if(t|=(127&n)<<7*r,r+=1,!(128&n))break}return t}function na(e,t){let r=t;for(;;){let t=127&r;if(r>>=7,0==r){e.push(t);break}t|=128,e.push(t)}}function ia(e,t){if(!e)throw new Error(t||"Assertion failed")}class sa{constructor(e,t){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=t}static compile(e,t){const r=new Map,n=e=>{const t=e.toBase58();let n=r.get(t);return void 0===n&&(n={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(t,n)),n},i=n(t);i.isSigner=!0,i.isWritable=!0;for(const t of e){n(t.programId).isInvoked=!0;for(const e of t.keys){const t=n(e.pubkey);t.isSigner||=e.isSigner,t.isWritable||=e.isWritable}}return new sa(t,r)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];ia(e.length<=256,"Max static account keys length exceeded");const t=e.filter((([,e])=>e.isSigner&&e.isWritable)),r=e.filter((([,e])=>e.isSigner&&!e.isWritable)),n=e.filter((([,e])=>!e.isSigner&&e.isWritable)),i=e.filter((([,e])=>!e.isSigner&&!e.isWritable)),s={numRequiredSignatures:t.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{ia(t.length>0,"Expected at least one writable signer key");const[e]=t[0];ia(e===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}return[s,[...t.map((([e])=>new Ko(e))),...r.map((([e])=>new Ko(e))),...n.map((([e])=>new Ko(e))),...i.map((([e])=>new Ko(e)))]]}extractTableLookup(e){const[t,r]=this.drainKeysFoundInLookupTable(e.state.addresses,(e=>!e.isSigner&&!e.isInvoked&&e.isWritable)),[n,i]=this.drainKeysFoundInLookupTable(e.state.addresses,(e=>!e.isSigner&&!e.isInvoked&&!e.isWritable));if(0!==t.length||0!==n.length)return[{accountKey:e.key,writableIndexes:t,readonlyIndexes:n},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(e,t){const r=new Array,n=new Array;for(const[i,s]of this.keyMetaMap.entries())if(t(s)){const t=new Ko(i),s=e.findIndex((e=>e.equals(t)));s>=0&&(ia(s<256,"Max lookup table index exceeded"),r.push(s),n.push(t),this.keyMetaMap.delete(i))}return[r,n]}}const oa="Reached end of buffer unexpectedly";function aa(e){if(0===e.length)throw new Error(oa);return e.shift()}function ca(e,...t){const[r]=t;if(2===t.length?r+(t[1]??0)>e.length:r>=e.length)throw new Error(oa);return e.splice(...t)}class la{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map((e=>new Ko(e))),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach((e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex])))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map((e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Zs().decode(e.data)})))}get addressTableLookups(){return[]}getAccountKeys(){return new Jo(this.staticAccountKeys)}static compile(e){const t=sa.compile(e.instructions,e.payerKey),[r,n]=t.getMessageComponents(),i=new Jo(n).compileInstructions(e.instructions).map((e=>({programIdIndex:e.programIdIndex,accounts:e.accountKeyIndexes,data:Zs().encode(e.data)})));return new la({header:r,accountKeys:n,recentBlockhash:e.recentBlockhash,instructions:i})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures;return e>=this.header.numRequiredSignatures?e-t<this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts:e<t-this.header.numReadonlySignedAccounts}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter(((e,t)=>!this.isProgramId(t)))}serialize(){const e=this.accountKeys.length;let t=[];na(t,e);const r=this.instructions.map((e=>{const{accounts:t,programIdIndex:r}=e,n=Array.from(Zs().decode(e.data));let i=[];na(i,t.length);let s=[];return na(s,n.length),{programIdIndex:r,keyIndicesCount:ys.Buffer.from(i),keyIndices:t,dataLength:ys.Buffer.from(s),data:n}}));let n=[];na(n,r.length);let i=ys.Buffer.alloc(Vo);ys.Buffer.from(n).copy(i);let s=n.length;r.forEach((e=>{const t=Xs.w3([Xs.u8("programIdIndex"),Xs.av(e.keyIndicesCount.length,"keyIndicesCount"),Xs.O6(Xs.u8("keyIndex"),e.keyIndices.length,"keyIndices"),Xs.av(e.dataLength.length,"dataLength"),Xs.O6(Xs.u8("userdatum"),e.data.length,"data")]).encode(e,i,s);s+=t})),i=i.slice(0,s);const o=Xs.w3([Xs.av(1,"numRequiredSignatures"),Xs.av(1,"numReadonlySignedAccounts"),Xs.av(1,"numReadonlyUnsignedAccounts"),Xs.av(t.length,"keyCount"),Xs.O6(Xo("key"),e,"keys"),Xo("recentBlockhash")]),a={numRequiredSignatures:ys.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ys.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ys.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ys.Buffer.from(t),keys:this.accountKeys.map((e=>$o(e.toBytes()))),recentBlockhash:Zs().decode(this.recentBlockhash)};let c=ys.Buffer.alloc(2048);const l=o.encode(a,c);return i.copy(c,l),c.slice(0,l+i.length)}static from(e){let t=[...e];const r=aa(t);if(r!==(127&r))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const n=aa(t),i=aa(t),s=ra(t);let o=[];for(let e=0;e<s;e++){const e=ca(t,0,Ho);o.push(new Ko(ys.Buffer.from(e)))}const a=ca(t,0,Ho),c=ra(t);let l=[];for(let e=0;e<c;e++){const e=aa(t),r=ca(t,0,ra(t)),n=ca(t,0,ra(t)),i=Zs().encode(ys.Buffer.from(n));l.push({programIdIndex:e,accounts:r,data:i})}const u={header:{numRequiredSignatures:r,numReadonlySignedAccounts:n,numReadonlyUnsignedAccounts:i},recentBlockhash:Zs().encode(ys.Buffer.from(a)),accountKeys:o,instructions:l};return new la(u)}}class ua{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const t of this.addressTableLookups)e+=t.readonlyIndexes.length+t.writableIndexes.length;return e}getAccountKeys(e){let t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new Jo(this.staticAccountKeys,t)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const t=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;return e>=r?e-r<this.addressTableLookups.reduce(((e,t)=>e+t.writableIndexes.length),0):e>=this.header.numRequiredSignatures?e-t<r-t-this.header.numReadonlyUnsignedAccounts:e<t-this.header.numReadonlySignedAccounts}resolveAddressTableLookups(e){const t={writable:[],readonly:[]};for(const r of this.addressTableLookups){const n=e.find((e=>e.key.equals(r.accountKey)));if(!n)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const e of r.writableIndexes){if(!(e<n.state.addresses.length))throw new Error(`Failed to find address for index ${e} in address lookup table ${r.accountKey.toBase58()}`);t.writable.push(n.state.addresses[e])}for(const e of r.readonlyIndexes){if(!(e<n.state.addresses.length))throw new Error(`Failed to find address for index ${e} in address lookup table ${r.accountKey.toBase58()}`);t.readonly.push(n.state.addresses[e])}}return t}static compile(e){const t=sa.compile(e.instructions,e.payerKey),r=new Array,n={writable:new Array,readonly:new Array},i=e.addressLookupTableAccounts||[];for(const e of i){const i=t.extractTableLookup(e);if(void 0!==i){const[e,{writable:t,readonly:s}]=i;r.push(e),n.writable.push(...t),n.readonly.push(...s)}}const[s,o]=t.getMessageComponents(),a=new Jo(o,n).compileInstructions(e.instructions);return new ua({header:s,staticAccountKeys:o,recentBlockhash:e.recentBlockhash,compiledInstructions:a,addressTableLookups:r})}serialize(){const e=Array();na(e,this.staticAccountKeys.length);const t=this.serializeInstructions(),r=Array();na(r,this.compiledInstructions.length);const n=this.serializeAddressTableLookups(),i=Array();na(i,this.addressTableLookups.length);const s=Xs.w3([Xs.u8("prefix"),Xs.w3([Xs.u8("numRequiredSignatures"),Xs.u8("numReadonlySignedAccounts"),Xs.u8("numReadonlyUnsignedAccounts")],"header"),Xs.av(e.length,"staticAccountKeysLength"),Xs.O6(Xo(),this.staticAccountKeys.length,"staticAccountKeys"),Xo("recentBlockhash"),Xs.av(r.length,"instructionsLength"),Xs.av(t.length,"serializedInstructions"),Xs.av(i.length,"addressTableLookupsLength"),Xs.av(n.length,"serializedAddressTableLookups")]),o=new Uint8Array(Vo),a=s.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map((e=>e.toBytes())),recentBlockhash:Zs().decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:n},o);return o.slice(0,a)}serializeInstructions(){let e=0;const t=new Uint8Array(Vo);for(const r of this.compiledInstructions){const n=Array();na(n,r.accountKeyIndexes.length);const i=Array();na(i,r.data.length),e+=Xs.w3([Xs.u8("programIdIndex"),Xs.av(n.length,"encodedAccountKeyIndexesLength"),Xs.O6(Xs.u8(),r.accountKeyIndexes.length,"accountKeyIndexes"),Xs.av(i.length,"encodedDataLength"),Xs.av(r.data.length,"data")]).encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(n),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},t,e)}return t.slice(0,e)}serializeAddressTableLookups(){let e=0;const t=new Uint8Array(Vo);for(const r of this.addressTableLookups){const n=Array();na(n,r.writableIndexes.length);const i=Array();na(i,r.readonlyIndexes.length),e+=Xs.w3([Xo("accountKey"),Xs.av(n.length,"encodedWritableIndexesLength"),Xs.O6(Xs.u8(),r.writableIndexes.length,"writableIndexes"),Xs.av(i.length,"encodedReadonlyIndexesLength"),Xs.O6(Xs.u8(),r.readonlyIndexes.length,"readonlyIndexes")]).encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(n),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},t,e)}return t.slice(0,e)}static deserialize(e){let t=[...e];const r=aa(t),n=127&r;ia(r!==n,"Expected versioned message but received legacy message"),ia(0===n,`Expected versioned message with version 0 but found version ${n}`);const i={numRequiredSignatures:aa(t),numReadonlySignedAccounts:aa(t),numReadonlyUnsignedAccounts:aa(t)},s=[],o=ra(t);for(let e=0;e<o;e++)s.push(new Ko(ca(t,0,Ho)));const a=Zs().encode(ca(t,0,Ho)),c=ra(t),l=[];for(let e=0;e<c;e++){const e=aa(t),r=ca(t,0,ra(t)),n=ra(t),i=new Uint8Array(ca(t,0,n));l.push({programIdIndex:e,accountKeyIndexes:r,data:i})}const u=ra(t),h=[];for(let e=0;e<u;e++){const e=new Ko(ca(t,0,Ho)),r=ca(t,0,ra(t)),n=ca(t,0,ra(t));h.push({accountKey:e,writableIndexes:r,readonlyIndexes:n})}return new ua({header:i,staticAccountKeys:s,recentBlockhash:a,compiledInstructions:l,addressTableLookups:h})}}const ha={deserializeMessageVersion(e){const t=e[0],r=127&t;return r===t?"legacy":r},deserialize:e=>{const t=ha.deserializeMessageVersion(e);if("legacy"===t)return la.from(e);if(0===t)return ua.deserialize(e);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let da=function(e){return e[e.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",e[e.PROCESSED=1]="PROCESSED",e[e.TIMED_OUT=2]="TIMED_OUT",e[e.NONCE_INVALID=3]="NONCE_INVALID",e}({});const pa=ys.Buffer.alloc(64).fill(0);class fa{constructor(e){this.keys=void 0,this.programId=void 0,this.data=ys.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map((({pubkey:e,isSigner:t,isWritable:r})=>({pubkey:e.toJSON(),isSigner:t,isWritable:r}))),programId:this.programId.toJSON(),data:[...this.data]}}}class ga{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:t,nonceInfo:r}=e;this.minNonceContextSlot=t,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:t,lastValidBlockHeight:r}=e;this.recentBlockhash=t,this.lastValidBlockHeight=r}else{const{recentBlockhash:t,nonceInfo:r}=e;r&&(this.nonceInfo=r),this.recentBlockhash=t}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map((e=>e.toJSON())),signers:this.signatures.map((({publicKey:e})=>e.toJSON()))}}add(...e){if(0===e.length)throw new Error("No instructions");return e.forEach((e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new fa(e))})),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,t,r;if(this.nonceInfo?(e=this.nonceInfo.nonce,t=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction,...this.instructions]:this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");if(t.length<1&&console.warn("No instructions provided"),this.feePayer)r=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");r=this.signatures[0].publicKey}for(let e=0;e<t.length;e++)if(void 0===t[e].programId)throw new Error(`Transaction instruction index ${e} has undefined program id`);const n=[],i=[];t.forEach((e=>{e.keys.forEach((e=>{i.push({...e})}));const t=e.programId.toString();n.includes(t)||n.push(t)})),n.forEach((e=>{i.push({pubkey:new Ko(e),isSigner:!1,isWritable:!1})}));const s=[];i.forEach((e=>{const t=e.pubkey.toString(),r=s.findIndex((e=>e.pubkey.toString()===t));r>-1?(s[r].isWritable=s[r].isWritable||e.isWritable,s[r].isSigner=s[r].isSigner||e.isSigner):s.push(e)})),s.sort((function(e,t){return e.isSigner!==t.isSigner?e.isSigner?-1:1:e.isWritable!==t.isWritable?e.isWritable?-1:1:e.pubkey.toBase58().localeCompare(t.pubkey.toBase58(),"en",{localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"})}));const o=s.findIndex((e=>e.pubkey.equals(r)));if(o>-1){const[e]=s.splice(o,1);e.isSigner=!0,e.isWritable=!0,s.unshift(e)}else s.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const e of this.signatures){const t=s.findIndex((t=>t.pubkey.equals(e.publicKey)));if(!(t>-1))throw new Error(`unknown signer: ${e.publicKey.toString()}`);s[t].isSigner||(s[t].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."))}let a=0,c=0,l=0;const u=[],h=[];s.forEach((({pubkey:e,isSigner:t,isWritable:r})=>{t?(u.push(e.toString()),a+=1,r||(c+=1)):(h.push(e.toString()),r||(l+=1))}));const d=u.concat(h),p=t.map((e=>{const{data:t,programId:r}=e;return{programIdIndex:d.indexOf(r.toString()),accounts:e.keys.map((e=>d.indexOf(e.pubkey.toString()))),data:Zs().encode(t)}}));return p.forEach((e=>{ia(e.programIdIndex>=0),e.accounts.forEach((e=>ia(e>=0)))})),new la({header:{numRequiredSignatures:a,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:l},accountKeys:d,recentBlockhash:e,instructions:p})}_compile(){const e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===t.length&&this.signatures.every(((e,r)=>t[r].equals(e.publicKey)))||(this.signatures=t.map((e=>({signature:null,publicKey:e})))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(0===e.length)throw new Error("No signers");const t=new Set;this.signatures=e.filter((e=>{const r=e.toString();return!t.has(r)&&(t.add(r),!0)})).map((e=>({signature:null,publicKey:e})))}sign(...e){if(0===e.length)throw new Error("No signers");const t=new Set,r=[];for(const n of e){const e=n.publicKey.toString();t.has(e)||(t.add(e),r.push(n))}this.signatures=r.map((e=>({signature:null,publicKey:e.publicKey})));const n=this._compile();this._partialSign(n,...r)}partialSign(...e){if(0===e.length)throw new Error("No signers");const t=new Set,r=[];for(const n of e){const e=n.publicKey.toString();t.has(e)||(t.add(e),r.push(n))}const n=this._compile();this._partialSign(n,...r)}_partialSign(e,...t){const r=e.serialize();t.forEach((e=>{const t=Do(r,e.secretKey);this._addSignature(e.publicKey,$o(t))}))}addSignature(e,t){this._compile(),this._addSignature(e,t)}_addSignature(e,t){ia(64===t.length);const r=this.signatures.findIndex((t=>e.equals(t.publicKey)));if(r<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[r].signature=ys.Buffer.from(t)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,t){const r={};for(const{signature:n,publicKey:i}of this.signatures)null===n?t&&(r.missing||=[]).push(i):jo(n,e,i.toBytes())||(r.invalid||=[]).push(i);return r.invalid||r.missing?r:void 0}serialize(e){const{requireAllSignatures:t,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),n=this.serializeMessage();if(r){const e=this._getMessageSignednessErrors(n,t);if(e){let t="Signature verification failed.";throw e.invalid&&(t+=`\nInvalid signature for public key${1===e.invalid.length?"":"(s)"} [\`${e.invalid.map((e=>e.toBase58())).join("`, `")}\`].`),e.missing&&(t+=`\nMissing signature for public key${1===e.missing.length?"":"(s)"} [\`${e.missing.map((e=>e.toBase58())).join("`, `")}\`].`),new Error(t)}}return this._serialize(n)}_serialize(e){const{signatures:t}=this,r=[];na(r,t.length);const n=r.length+64*t.length+e.length,i=ys.Buffer.alloc(n);return ia(t.length<256),ys.Buffer.from(r).copy(i,0),t.forEach((({signature:e},t)=>{null!==e&&(ia(64===e.length,"signature has invalid length"),ys.Buffer.from(e).copy(i,r.length+64*t))})),e.copy(i,r.length+64*t.length),ia(i.length<=Vo,`Transaction too large: ${i.length} > 1232`),i}get keys(){return ia(1===this.instructions.length),this.instructions[0].keys.map((e=>e.pubkey))}get programId(){return ia(1===this.instructions.length),this.instructions[0].programId}get data(){return ia(1===this.instructions.length),this.instructions[0].data}static from(e){let t=[...e];const r=ra(t);let n=[];for(let e=0;e<r;e++){const e=ca(t,0,64);n.push(Zs().encode(ys.Buffer.from(e)))}return ga.populate(la.from(t),n)}static populate(e,t=[]){const r=new ga;return r.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(r.feePayer=e.accountKeys[0]),t.forEach(((t,n)=>{const i={signature:t==Zs().encode(pa)?null:Zs().decode(t),publicKey:e.accountKeys[n]};r.signatures.push(i)})),e.instructions.forEach((t=>{const n=t.accounts.map((t=>{const n=e.accountKeys[t];return{pubkey:n,isSigner:r.signatures.some((e=>e.publicKey.toString()===n.toString()))||e.isAccountSigner(t),isWritable:e.isAccountWritable(t)}}));r.instructions.push(new fa({keys:n,programId:e.accountKeys[t.programIdIndex],data:Zs().decode(t.data)}))})),r._message=e,r._json=r.toJSON(),r}}class ma{get version(){return this.message.version}constructor(e,t){if(this.signatures=void 0,this.message=void 0,void 0!==t)ia(t.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=t;else{const t=[];for(let r=0;r<e.header.numRequiredSignatures;r++)t.push(new Uint8Array(64));this.signatures=t}this.message=e}serialize(){const e=this.message.serialize(),t=Array();na(t,this.signatures.length);const r=Xs.w3([Xs.av(t.length,"encodedSignaturesLength"),Xs.O6(Qo(),this.signatures.length,"signatures"),Xs.av(e.length,"serializedMessage")]),n=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},n);return n.slice(0,i)}static deserialize(e){let t=[...e];const r=[],n=ra(t);for(let e=0;e<n;e++)r.push(new Uint8Array(ca(t,0,64)));const i=ha.deserialize(new Uint8Array(t));return new ma(i,r)}sign(e){const t=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const n of e){const e=r.findIndex((e=>e.equals(n.publicKey)));ia(e>=0,`Cannot sign with non signer key ${n.publicKey.toBase58()}`),this.signatures[e]=Do(t,n.secretKey)}}addSignature(e,t){ia(64===t.byteLength,"Signature must be 64 bytes long");const r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex((t=>t.equals(e)));ia(r>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[r]=t}}const ya=new Ko("SysvarC1ock11111111111111111111111111111111"),wa=(new Ko("SysvarEpochSchedu1e111111111111111111111111"),new Ko("Sysvar1nstructions1111111111111111111111111"),new Ko("SysvarRecentB1ockHashes11111111111111111111")),ba=new Ko("SysvarRent111111111111111111111111111111111"),va=(new Ko("SysvarRewards111111111111111111111111111111"),new Ko("SysvarS1otHashes111111111111111111111111111"),new Ko("SysvarS1otHistory11111111111111111111111111"),new Ko("SysvarStakeHistory1111111111111111111111111"));class Ea extends Error{constructor({action:e,signature:t,transactionMessage:r,logs:n}){const i=n?`Logs: \n${JSON.stringify(n.slice(-10),null,2)}. `:"",s="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let o;switch(e){case"send":o=`Transaction ${t} resulted in an error. \n${r}. `+i+s;break;case"simulate":o=`Simulation failed. \nMessage: ${r}. \n`+i+s;break;default:o=`Unknown action '${e}'`}super(o),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=t,this.transactionMessage=r,this.transactionLogs=n||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(null==e||"object"!=typeof e||!("then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise(((t,r)=>{e.getTransaction(this.signature).then((e=>{if(e&&e.meta&&e.meta.logMessages){const r=e.meta.logMessages;this.transactionLogs=r,t(r)}else r(new Error("Log messages not found"))})).catch(r)}))),await this.transactionLogs}}class _a extends Error{constructor({code:e,message:t,data:r},n){super(null!=n?`${n}: ${t}`:t),this.code=void 0,this.data=void 0,this.code=e,this.data=r,this.name="SolanaJSONRPCError"}}async function Aa(e,t,r,n){const i=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},s=await e.sendTransaction(t,r,i);let o;if(null!=t.recentBlockhash&&null!=t.lastValidBlockHeight)o=(await e.confirmTransaction({abortSignal:n?.abortSignal,signature:s,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},n&&n.commitment)).value;else if(null!=t.minNonceContextSlot&&null!=t.nonceInfo){const{nonceInstruction:r}=t.nonceInfo,i=r.keys[0].pubkey;o=(await e.confirmTransaction({abortSignal:n?.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:i,nonceValue:t.nonceInfo.nonce,signature:s},n&&n.commitment)).value}else null!=n?.abortSignal&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),o=(await e.confirmTransaction(s,n&&n.commitment)).value;if(o.err){if(null!=s)throw new Ea({action:"send",signature:s,transactionMessage:`Status: (${JSON.stringify(o)})`});throw new Error(`Transaction ${s} failed (${JSON.stringify(o)})`)}return s}function Sa(e){return new Promise((t=>setTimeout(t,e)))}function Ca(e,t){const r=e.layout.span>=0?e.layout.span:ta(e,t),n=ys.Buffer.alloc(r),i=Object.assign({instruction:e.index},t);return e.layout.encode(i,n),n}const Ia=Xs.I0("lamportsPerSignature"),Na=Xs.w3([Xs.DH("version"),Xs.DH("state"),Xo("authorizedPubkey"),Xo("nonce"),Xs.w3([Ia],"feeCalculator")]),ka=Na.span;class Ta{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const t=Na.decode($o(e),0);return new Ta({authorizedPubkey:new Ko(t.authorizedPubkey),nonce:new Ko(t.nonce).toString(),feeCalculator:t.feeCalculator})}}const xa=e=>{const t=(0,Xs.av)(8,e),{encode:r,decode:n}=(e=>({decode:e.decode.bind(e),encode:e.encode.bind(e)}))(t),i=t;return i.decode=(e,t)=>{const r=n(e,t);return(0,Qs.k5)(ys.Buffer.from(r))},i.encode=(e,t,n)=>{const i=(0,Qs.Bq)(e,8);return r(i,t,n)},i};const Pa=Object.freeze({Create:{index:0,layout:Xs.w3([Xs.DH("instruction"),Xs.Wg("lamports"),Xs.Wg("space"),Xo("programId")])},Assign:{index:1,layout:Xs.w3([Xs.DH("instruction"),Xo("programId")])},Transfer:{index:2,layout:Xs.w3([Xs.DH("instruction"),xa("lamports")])},CreateWithSeed:{index:3,layout:Xs.w3([Xs.DH("instruction"),Xo("base"),ea("seed"),Xs.Wg("lamports"),Xs.Wg("space"),Xo("programId")])},AdvanceNonceAccount:{index:4,layout:Xs.w3([Xs.DH("instruction")])},WithdrawNonceAccount:{index:5,layout:Xs.w3([Xs.DH("instruction"),Xs.Wg("lamports")])},InitializeNonceAccount:{index:6,layout:Xs.w3([Xs.DH("instruction"),Xo("authorized")])},AuthorizeNonceAccount:{index:7,layout:Xs.w3([Xs.DH("instruction"),Xo("authorized")])},Allocate:{index:8,layout:Xs.w3([Xs.DH("instruction"),Xs.Wg("space")])},AllocateWithSeed:{index:9,layout:Xs.w3([Xs.DH("instruction"),Xo("base"),ea("seed"),Xs.Wg("space"),Xo("programId")])},AssignWithSeed:{index:10,layout:Xs.w3([Xs.DH("instruction"),Xo("base"),ea("seed"),Xo("programId")])},TransferWithSeed:{index:11,layout:Xs.w3([Xs.DH("instruction"),xa("lamports"),ea("seed"),Xo("programId")])},UpgradeNonceAccount:{index:12,layout:Xs.w3([Xs.DH("instruction")])}});class Oa{constructor(){}static createAccount(e){const t=Ca(Pa.Create,{lamports:e.lamports,space:e.space,programId:$o(e.programId.toBuffer())});return new fa({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:t})}static transfer(e){let t,r;return"basePubkey"in e?(t=Ca(Pa.TransferWithSeed,{lamports:BigInt(e.lamports),seed:e.seed,programId:$o(e.programId.toBuffer())}),r=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]):(t=Ca(Pa.Transfer,{lamports:BigInt(e.lamports)}),r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]),new fa({keys:r,programId:this.programId,data:t})}static assign(e){let t,r;return"basePubkey"in e?(t=Ca(Pa.AssignWithSeed,{base:$o(e.basePubkey.toBuffer()),seed:e.seed,programId:$o(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]):(t=Ca(Pa.Assign,{programId:$o(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]),new fa({keys:r,programId:this.programId,data:t})}static createAccountWithSeed(e){const t=Ca(Pa.CreateWithSeed,{base:$o(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:$o(e.programId.toBuffer())});let r=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey.equals(e.fromPubkey)||r.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new fa({keys:r,programId:this.programId,data:t})}static createNonceAccount(e){const t=new ga;"basePubkey"in e&&"seed"in e?t.add(Oa.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:ka,programId:this.programId})):t.add(Oa.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.noncePubkey,lamports:e.lamports,space:ka,programId:this.programId}));const r={noncePubkey:e.noncePubkey,authorizedPubkey:e.authorizedPubkey};return t.add(this.nonceInitialize(r)),t}static nonceInitialize(e){const t=Ca(Pa.InitializeNonceAccount,{authorized:$o(e.authorizedPubkey.toBuffer())}),r={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:wa,isSigner:!1,isWritable:!1},{pubkey:ba,isSigner:!1,isWritable:!1}],programId:this.programId,data:t};return new fa(r)}static nonceAdvance(e){const t=Ca(Pa.AdvanceNonceAccount),r={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:wa,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t};return new fa(r)}static nonceWithdraw(e){const t=Ca(Pa.WithdrawNonceAccount,{lamports:e.lamports});return new fa({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:wa,isSigner:!1,isWritable:!1},{pubkey:ba,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}static nonceAuthorize(e){const t=Ca(Pa.AuthorizeNonceAccount,{authorized:$o(e.newAuthorizedPubkey.toBuffer())});return new fa({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}static allocate(e){let t,r;return"basePubkey"in e?(t=Ca(Pa.AllocateWithSeed,{base:$o(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:$o(e.programId.toBuffer())}),r=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]):(t=Ca(Pa.Allocate,{space:e.space}),r=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]),new fa({keys:r,programId:this.programId,data:t})}}Oa.programId=new Ko("11111111111111111111111111111111");class Ra{constructor(){}static getMinNumSignatures(e){return 2*(Math.ceil(e/Ra.chunkSize)+1+1)}static async load(e,t,r,n,i){{const s=await e.getMinimumBalanceForRentExemption(i.length),o=await e.getAccountInfo(r.publicKey,"confirmed");let a=null;if(null!==o){if(o.executable)return console.error("Program load failed, account is already executable"),!1;o.data.length!==i.length&&(a=a||new ga,a.add(Oa.allocate({accountPubkey:r.publicKey,space:i.length}))),o.owner.equals(n)||(a=a||new ga,a.add(Oa.assign({accountPubkey:r.publicKey,programId:n}))),o.lamports<s&&(a=a||new ga,a.add(Oa.transfer({fromPubkey:t.publicKey,toPubkey:r.publicKey,lamports:s-o.lamports})))}else a=(new ga).add(Oa.createAccount({fromPubkey:t.publicKey,newAccountPubkey:r.publicKey,lamports:s>0?s:1,space:i.length,programId:n}));null!==a&&await Aa(e,a,[t,r],{commitment:"confirmed"})}const s=Xs.w3([Xs.DH("instruction"),Xs.DH("offset"),Xs.DH("bytesLength"),Xs.DH("bytesLengthPadding"),Xs.O6(Xs.u8("byte"),Xs.cY(Xs.DH(),-8),"bytes")]),o=Ra.chunkSize;let a=0,c=i,l=[];for(;c.length>0;){const i=c.slice(0,o),u=ys.Buffer.alloc(o+16);s.encode({instruction:0,offset:a,bytes:i,bytesLength:0,bytesLengthPadding:0},u);const h=(new ga).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0}],programId:n,data:u});if(l.push(Aa(e,h,[t,r],{commitment:"confirmed"})),e._rpcEndpoint.includes("solana.com")){const e=4;await Sa(1e3/e)}a+=o,c=c.slice(o)}await Promise.all(l);{const i=Xs.w3([Xs.DH("instruction")]),s=ys.Buffer.alloc(i.span);i.encode({instruction:1},s);const o=(new ga).add({keys:[{pubkey:r.publicKey,isSigner:!0,isWritable:!0},{pubkey:ba,isSigner:!1,isWritable:!1}],programId:n,data:s}),a="processed",c=await e.sendTransaction(o,[t,r],{preflightCommitment:a}),{context:l,value:u}=await e.confirmTransaction({signature:c,lastValidBlockHeight:o.lastValidBlockHeight,blockhash:o.recentBlockhash},a);if(u.err)throw new Error(`Transaction ${c} failed (${JSON.stringify(u)})`);for(;;){try{if(await e.getSlot({commitment:a})>l.slot)break}catch{}await new Promise((e=>setTimeout(e,Math.round(200))))}}return!0}}function Ma(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ua,Ba;function La(){if(Ba)return Ua;Ba=1;var e=Object.prototype.toString,t=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};function r(n,i){var s,o,a,c,l,u,h;if(!0===n)return"true";if(!1===n)return"false";switch(typeof n){case"object":if(null===n)return null;if(n.toJSON&&"function"==typeof n.toJSON)return r(n.toJSON(),i);if("[object Array]"===(h=e.call(n))){for(a="[",o=n.length-1,s=0;s<o;s++)a+=r(n[s],!0)+",";return o>-1&&(a+=r(n[s],!0)),a+"]"}if("[object Object]"===h){for(o=(c=t(n).sort()).length,a="",s=0;s<o;)void 0!==(u=r(n[l=c[s]],!1))&&(a&&(a+=","),a+=JSON.stringify(l)+":"+u),s++;return"{"+a+"}"}return JSON.stringify(n);case"function":case"undefined":return i?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return Ua=function(e){var t=r(e,!1);if(void 0!==t)return""+t}}Ra.chunkSize=932,new Ko("BPFLoader2111111111111111111111111111111111");var Da=Ma(La());function ja(e){let t=0;for(;e>1;)e/=2,t++;return t}class $a{constructor(e,t,r,n,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=t,this.warmup=r,this.firstNormalEpoch=n,this.firstNormalSlot=i}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const r=ja(0===(t=e+32+1)?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,1+(t|=t>>32)))-ja(32)-1;return[r,e-(this.getSlotsInEpoch(r)-32)]}{const t=e-this.firstNormalSlot,r=Math.floor(t/this.slotsPerEpoch);return[this.firstNormalEpoch+r,t%this.slotsPerEpoch]}var t}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?32*(Math.pow(2,e)-1):(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+ja(32)):this.slotsPerEpoch}}var Wa=globalThis.fetch;class za extends Oo{constructor(e,t,r){super((e=>{const r=function(e,t){return new xo(e,t)}(e,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...t});return this.underlyingSocket="socket"in r?r.socket:r,r}),e,t,r),this.underlyingSocket=void 0}call(...e){const t=this.underlyingSocket?.readyState;return 1===t?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}notify(...e){const t=this.underlyingSocket?.readyState;return 1===t?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+t+")"))}}class qa{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const t=function(e,t){let r;try{r=e.layout.decode(t)}catch(e){throw new Error("invalid instruction; "+e)}if(r.typeIndex!==e.index)throw new Error(`invalid account data; account type mismatch ${r.typeIndex} != ${e.index}`);return r}(Ha,e),r=e.length-56;ia(r>=0,"lookup table is invalid"),ia(r%32==0,"lookup table is invalid");const n=r/32,{addresses:i}=Xs.w3([Xs.O6(Xo(),n,"addresses")]).decode(e.slice(56));return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:0!==t.authority.length?new Ko(t.authority[0]):void 0,addresses:i.map((e=>new Ko(e)))}}}const Ha={index:1,layout:Xs.w3([Xs.DH("typeIndex"),xa("deactivationSlot"),Xs.I0("lastExtendedSlot"),Xs.u8("lastExtendedStartIndex"),Xs.u8(),Xs.O6(Xo(),Xs.cY(Xs.u8(),-1),"authority")])},Fa=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i,Ka=Io(go(Ko),Eo(),(e=>new Ko(e))),Va=_o([Eo(),mo("base64")]),Ga=Io(go(ys.Buffer),Va,(e=>ys.Buffer.from(e[0],"base64")));function Za(e){let t,r;if("string"==typeof e)t=e;else if(e){const{commitment:n,...i}=e;t=n,r=i}return{commitment:t,config:r}}function Ya(e){return e.map((e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e))}function Ja(e){return So([Ao({jsonrpc:mo("2.0"),id:Eo(),result:e}),Ao({jsonrpc:mo("2.0"),id:Eo(),error:Ao({code:Co(),message:Eo(),data:bo(ho("any",(()=>!0)))})})])}const Xa=Ja(Co());function Qa(e){return Io(Ja(e),Xa,(t=>"error"in t?t:{...t,result:co(t.result,e)}))}function ec(e){return Qa(Ao({context:Ao({slot:wo()}),value:e}))}function tc(e){return Ao({context:Ao({slot:wo()}),value:e})}function rc(e,t){return 0===e?new ua({header:t.header,staticAccountKeys:t.accountKeys.map((e=>new Ko(e))),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map((e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Zs().decode(e.data)}))),addressTableLookups:t.addressTableLookups}):new la(t)}const nc=Ao({foundation:wo(),foundationTerm:wo(),initial:wo(),taper:wo(),terminal:wo()}),ic=Qa(po(yo(Ao({epoch:wo(),effectiveSlot:wo(),amount:wo(),postBalance:wo(),commission:bo(yo(wo()))})))),sc=po(Ao({slot:wo(),prioritizationFee:wo()})),oc=Ao({total:wo(),validator:wo(),foundation:wo(),epoch:wo()}),ac=Ao({epoch:wo(),slotIndex:wo(),slotsInEpoch:wo(),absoluteSlot:wo(),blockHeight:bo(wo()),transactionCount:bo(wo())}),cc=Ao({slotsPerEpoch:wo(),leaderScheduleSlotOffset:wo(),warmup:fo(),firstNormalEpoch:wo(),firstNormalSlot:wo()}),lc=vo(Eo(),po(wo())),uc=yo(So([Ao({}),Eo()])),hc=Ao({err:uc}),dc=mo("receivedSignature"),pc=Ao({"solana-core":Eo(),"feature-set":bo(wo())}),fc=Ao({program:Eo(),programId:Ka,parsed:Co()}),gc=Ao({programId:Ka,accounts:po(Ka),data:Eo()}),mc=ec(Ao({err:yo(So([Ao({}),Eo()])),logs:yo(po(Eo())),accounts:bo(yo(po(yo(Ao({executable:fo(),owner:Eo(),lamports:wo(),data:po(Eo()),rentEpoch:bo(wo())}))))),unitsConsumed:bo(wo()),returnData:bo(yo(Ao({programId:Eo(),data:_o([Eo(),mo("base64")])}))),innerInstructions:bo(yo(po(Ao({index:wo(),instructions:po(So([fc,gc]))}))))})),yc=ec(Ao({byIdentity:vo(Eo(),po(wo())),range:Ao({firstSlot:wo(),lastSlot:wo()})})),wc=Qa(nc),bc=Qa(oc),vc=Qa(sc),Ec=Qa(ac),_c=Qa(cc),Ac=Qa(lc),Sc=Qa(wo()),Cc=ec(Ao({total:wo(),circulating:wo(),nonCirculating:wo(),nonCirculatingAccounts:po(Ka)})),Ic=Ao({amount:Eo(),uiAmount:yo(wo()),decimals:wo(),uiAmountString:bo(Eo())}),Nc=ec(po(Ao({address:Ka,amount:Eo(),uiAmount:yo(wo()),decimals:wo(),uiAmountString:bo(Eo())}))),kc=ec(po(Ao({pubkey:Ka,account:Ao({executable:fo(),owner:Ka,lamports:wo(),data:Ga,rentEpoch:wo()})}))),Tc=Ao({program:Eo(),parsed:Co(),space:wo()}),xc=ec(po(Ao({pubkey:Ka,account:Ao({executable:fo(),owner:Ka,lamports:wo(),data:Tc,rentEpoch:wo()})}))),Pc=ec(po(Ao({lamports:wo(),address:Ka}))),Oc=Ao({executable:fo(),owner:Ka,lamports:wo(),data:Ga,rentEpoch:wo()}),Rc=Ao({pubkey:Ka,account:Oc}),Mc=Io(So([go(ys.Buffer),Tc]),So([Va,Tc]),(e=>Array.isArray(e)?co(e,Ga):e)),Uc=Ao({executable:fo(),owner:Ka,lamports:wo(),data:Mc,rentEpoch:wo()}),Bc=Ao({pubkey:Ka,account:Uc}),Lc=Ao({state:So([mo("active"),mo("inactive"),mo("activating"),mo("deactivating")]),active:wo(),inactive:wo()}),Dc=Qa(po(Ao({signature:Eo(),slot:wo(),err:uc,memo:yo(Eo()),blockTime:bo(yo(wo()))}))),jc=Qa(po(Ao({signature:Eo(),slot:wo(),err:uc,memo:yo(Eo()),blockTime:bo(yo(wo()))}))),$c=Ao({subscription:wo(),result:tc(Oc)}),Wc=Ao({pubkey:Ka,account:Oc}),zc=Ao({subscription:wo(),result:tc(Wc)}),qc=Ao({parent:wo(),slot:wo(),root:wo()}),Hc=Ao({subscription:wo(),result:qc}),Fc=So([Ao({type:So([mo("firstShredReceived"),mo("completed"),mo("optimisticConfirmation"),mo("root")]),slot:wo(),timestamp:wo()}),Ao({type:mo("createdBank"),parent:wo(),slot:wo(),timestamp:wo()}),Ao({type:mo("frozen"),slot:wo(),timestamp:wo(),stats:Ao({numTransactionEntries:wo(),numSuccessfulTransactions:wo(),numFailedTransactions:wo(),maxTransactionsPerEntry:wo()})}),Ao({type:mo("dead"),slot:wo(),timestamp:wo(),err:Eo()})]),Kc=Ao({subscription:wo(),result:Fc}),Vc=Ao({subscription:wo(),result:tc(So([hc,dc]))}),Gc=Ao({subscription:wo(),result:wo()}),Zc=Ao({pubkey:Eo(),gossip:yo(Eo()),tpu:yo(Eo()),rpc:yo(Eo()),version:yo(Eo())}),Yc=Ao({votePubkey:Eo(),nodePubkey:Eo(),activatedStake:wo(),epochVoteAccount:fo(),epochCredits:po(_o([wo(),wo(),wo()])),commission:wo(),lastVote:wo(),rootSlot:yo(wo())}),Jc=Qa(Ao({current:po(Yc),delinquent:po(Yc)})),Xc=So([mo("processed"),mo("confirmed"),mo("finalized")]),Qc=Ao({slot:wo(),confirmations:yo(wo()),err:uc,confirmationStatus:bo(Xc)}),el=ec(po(yo(Qc))),tl=Qa(wo()),rl=Ao({accountKey:Ka,writableIndexes:po(wo()),readonlyIndexes:po(wo())}),nl=Ao({signatures:po(Eo()),message:Ao({accountKeys:po(Eo()),header:Ao({numRequiredSignatures:wo(),numReadonlySignedAccounts:wo(),numReadonlyUnsignedAccounts:wo()}),instructions:po(Ao({accounts:po(wo()),data:Eo(),programIdIndex:wo()})),recentBlockhash:Eo(),addressTableLookups:bo(po(rl))})}),il=Ao({pubkey:Ka,signer:fo(),writable:fo(),source:bo(So([mo("transaction"),mo("lookupTable")]))}),sl=Ao({accountKeys:po(il),signatures:po(Eo())}),ol=Ao({parsed:Co(),program:Eo(),programId:Ka}),al=Ao({accounts:po(Ka),data:Eo(),programId:Ka}),cl=Io(So([al,ol]),So([Ao({parsed:Co(),program:Eo(),programId:Eo()}),Ao({accounts:po(Eo()),data:Eo(),programId:Eo()})]),(e=>co(e,"accounts"in e?al:ol))),ll=Ao({signatures:po(Eo()),message:Ao({accountKeys:po(il),instructions:po(cl),recentBlockhash:Eo(),addressTableLookups:bo(yo(po(rl)))})}),ul=Ao({accountIndex:wo(),mint:Eo(),owner:bo(Eo()),programId:bo(Eo()),uiTokenAmount:Ic}),hl=Ao({writable:po(Ka),readonly:po(Ka)}),dl=Ao({err:uc,fee:wo(),innerInstructions:bo(yo(po(Ao({index:wo(),instructions:po(Ao({accounts:po(wo()),data:Eo(),programIdIndex:wo()}))})))),preBalances:po(wo()),postBalances:po(wo()),logMessages:bo(yo(po(Eo()))),preTokenBalances:bo(yo(po(ul))),postTokenBalances:bo(yo(po(ul))),loadedAddresses:bo(hl),computeUnitsConsumed:bo(wo())}),pl=Ao({err:uc,fee:wo(),innerInstructions:bo(yo(po(Ao({index:wo(),instructions:po(cl)})))),preBalances:po(wo()),postBalances:po(wo()),logMessages:bo(yo(po(Eo()))),preTokenBalances:bo(yo(po(ul))),postTokenBalances:bo(yo(po(ul))),loadedAddresses:bo(hl),computeUnitsConsumed:bo(wo())}),fl=So([mo(0),mo("legacy")]),gl=Ao({pubkey:Eo(),lamports:wo(),postBalance:yo(wo()),rewardType:yo(Eo()),commission:bo(yo(wo()))}),ml=Qa(yo(Ao({blockhash:Eo(),previousBlockhash:Eo(),parentSlot:wo(),transactions:po(Ao({transaction:nl,meta:yo(dl),version:bo(fl)})),rewards:bo(po(gl)),blockTime:yo(wo()),blockHeight:yo(wo())}))),yl=Qa(yo(Ao({blockhash:Eo(),previousBlockhash:Eo(),parentSlot:wo(),rewards:bo(po(gl)),blockTime:yo(wo()),blockHeight:yo(wo())}))),wl=Qa(yo(Ao({blockhash:Eo(),previousBlockhash:Eo(),parentSlot:wo(),transactions:po(Ao({transaction:sl,meta:yo(dl),version:bo(fl)})),rewards:bo(po(gl)),blockTime:yo(wo()),blockHeight:yo(wo())}))),bl=Qa(yo(Ao({blockhash:Eo(),previousBlockhash:Eo(),parentSlot:wo(),transactions:po(Ao({transaction:ll,meta:yo(pl),version:bo(fl)})),rewards:bo(po(gl)),blockTime:yo(wo()),blockHeight:yo(wo())}))),vl=Qa(yo(Ao({blockhash:Eo(),previousBlockhash:Eo(),parentSlot:wo(),transactions:po(Ao({transaction:sl,meta:yo(pl),version:bo(fl)})),rewards:bo(po(gl)),blockTime:yo(wo()),blockHeight:yo(wo())}))),El=Qa(yo(Ao({blockhash:Eo(),previousBlockhash:Eo(),parentSlot:wo(),rewards:bo(po(gl)),blockTime:yo(wo()),blockHeight:yo(wo())}))),_l=Qa(yo(Ao({blockhash:Eo(),previousBlockhash:Eo(),parentSlot:wo(),transactions:po(Ao({transaction:nl,meta:yo(dl)})),rewards:bo(po(gl)),blockTime:yo(wo())}))),Al=Qa(yo(Ao({blockhash:Eo(),previousBlockhash:Eo(),parentSlot:wo(),signatures:po(Eo()),blockTime:yo(wo())}))),Sl=Qa(yo(Ao({slot:wo(),meta:yo(dl),blockTime:bo(yo(wo())),transaction:nl,version:bo(fl)}))),Cl=Qa(yo(Ao({slot:wo(),transaction:ll,meta:yo(pl),blockTime:bo(yo(wo())),version:bo(fl)}))),Il=ec(Ao({blockhash:Eo(),lastValidBlockHeight:wo()})),Nl=ec(fo()),kl=Qa(po(Ao({slot:wo(),numTransactions:wo(),numSlots:wo(),samplePeriodSecs:wo()}))),Tl=ec(yo(Ao({feeCalculator:Ao({lamportsPerSignature:wo()})}))),xl=Qa(Eo()),Pl=Qa(Eo()),Ol=Ao({err:uc,logs:po(Eo()),signature:Eo()}),Rl=Ao({result:tc(Ol),subscription:wo()}),Ml={"solana-client":"js/1.0.0-maintenance"};class Ul{constructor(e,t){let r,n,i,s,o,a;var c;this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const e={};return async t=>{const{commitment:r,config:n}=Za(t),i=this._buildArgs([],r,void 0,n),s=Da(i);return e[s]=e[s]??(async()=>{try{const e=co(await this._rpcRequest("getBlockHeight",i),Qa(wo()));if("error"in e)throw new _a(e.error,"failed to get block height information");return e.result}finally{delete e[s]}})(),await e[s]}})(),t&&"string"==typeof t?this._commitment=t:t&&(this._commitment=t.commitment,this._confirmTransactionInitialTimeout=t.confirmTransactionInitialTimeout,r=t.wsEndpoint,n=t.httpHeaders,i=t.fetch,s=t.fetchMiddleware,o=t.disableRetryOnRateLimit,a=t.httpAgent),this._rpcEndpoint=function(e){if(!1===/^https?:/.test(e))throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return e}(e),this._rpcWsEndpoint=r||function(e){const t=e.match(Fa);if(null==t)throw TypeError(`Failed to validate endpoint URL \`${e}\``);const[r,n,i,s]=t,o=e.startsWith("https:")?"wss:":"ws:",a=null==i?null:parseInt(i.slice(1),10);return`${o}//${n}${null==a?"":`:${a+1}`}${s}`}(e),this._rpcClient=function(e,t,r,n,i,s){const o=r||Wa;let a;return null!=s&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments."),n&&(a=async(e,t)=>{const r=await new Promise(((r,i)=>{try{n(e,t,((e,t)=>r([e,t])))}catch(e){i(e)}}));return await o(...r)}),new(ko())((async(r,n)=>{const s={method:"POST",body:r,agent:void 0,headers:Object.assign({"Content-Type":"application/json"},t||{},Ml)};try{let t,r=5,c=500;for(;t=a?await a(e,s):await o(e,s),429===t.status&&!0!==i&&(r-=1,0!==r);)console.error(`Server responded with ${t.status} ${t.statusText}.  Retrying after ${c}ms delay...`),await Sa(c),c*=2;const l=await t.text();t.ok?n(null,l):n(new Error(`${t.status} ${t.statusText}: ${l}`))}catch(e){e instanceof Error&&n(e)}}),{})}(e,n,i,s,o,a),this._rpcRequest=(c=this._rpcClient,(e,t)=>new Promise(((r,n)=>{c.request(e,t,((e,t)=>{e?n(e):r(t)}))}))),this._rpcBatchRequest=function(e){return t=>new Promise(((r,n)=>{0===t.length&&r([]);const i=t.map((t=>e.request(t.methodName,t.args)));e.request(i,((e,t)=>{e?n(e):r(t)}))}))}(this._rpcClient),this._rpcWebSocket=new za(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,t){const{commitment:r,config:n}=Za(t),i=this._buildArgs([e.toBase58()],r,void 0,n),s=co(await this._rpcRequest("getBalance",i),ec(wo()));if("error"in s)throw new _a(s.error,`failed to get balance for ${e.toBase58()}`);return s.result}async getBalance(e,t){return await this.getBalanceAndContext(e,t).then((e=>e.value)).catch((t=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+t)}))}async getBlockTime(e){const t=co(await this._rpcRequest("getBlockTime",[e]),Qa(yo(wo())));if("error"in t)throw new _a(t.error,`failed to get block time for slot ${e}`);return t.result}async getMinimumLedgerSlot(){const e=co(await this._rpcRequest("minimumLedgerSlot",[]),Qa(wo()));if("error"in e)throw new _a(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const e=co(await this._rpcRequest("getFirstAvailableBlock",[]),Sc);if("error"in e)throw new _a(e.error,"failed to get first available block");return e.result}async getSupply(e){let t={};t="string"==typeof e?{commitment:e}:e?{...e,commitment:e&&e.commitment||this.commitment}:{commitment:this.commitment};const r=co(await this._rpcRequest("getSupply",[t]),Cc);if("error"in r)throw new _a(r.error,"failed to get supply");return r.result}async getTokenSupply(e,t){const r=this._buildArgs([e.toBase58()],t),n=co(await this._rpcRequest("getTokenSupply",r),ec(Ic));if("error"in n)throw new _a(n.error,"failed to get token supply");return n.result}async getTokenAccountBalance(e,t){const r=this._buildArgs([e.toBase58()],t),n=co(await this._rpcRequest("getTokenAccountBalance",r),ec(Ic));if("error"in n)throw new _a(n.error,"failed to get token account balance");return n.result}async getTokenAccountsByOwner(e,t,r){const{commitment:n,config:i}=Za(r);let s=[e.toBase58()];"mint"in t?s.push({mint:t.mint.toBase58()}):s.push({programId:t.programId.toBase58()});const o=this._buildArgs(s,n,"base64",i),a=co(await this._rpcRequest("getTokenAccountsByOwner",o),kc);if("error"in a)throw new _a(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getParsedTokenAccountsByOwner(e,t,r){let n=[e.toBase58()];"mint"in t?n.push({mint:t.mint.toBase58()}):n.push({programId:t.programId.toBase58()});const i=this._buildArgs(n,r,"jsonParsed"),s=co(await this._rpcRequest("getTokenAccountsByOwner",i),xc);if("error"in s)throw new _a(s.error,`failed to get token accounts owned by account ${e.toBase58()}`);return s.result}async getLargestAccounts(e){const t={...e,commitment:e&&e.commitment||this.commitment},r=t.filter||t.commitment?[t]:[],n=co(await this._rpcRequest("getLargestAccounts",r),Pc);if("error"in n)throw new _a(n.error,"failed to get largest accounts");return n.result}async getTokenLargestAccounts(e,t){const r=this._buildArgs([e.toBase58()],t),n=co(await this._rpcRequest("getTokenLargestAccounts",r),Nc);if("error"in n)throw new _a(n.error,"failed to get token largest accounts");return n.result}async getAccountInfoAndContext(e,t){const{commitment:r,config:n}=Za(t),i=this._buildArgs([e.toBase58()],r,"base64",n),s=co(await this._rpcRequest("getAccountInfo",i),ec(yo(Oc)));if("error"in s)throw new _a(s.error,`failed to get info about account ${e.toBase58()}`);return s.result}async getParsedAccountInfo(e,t){const{commitment:r,config:n}=Za(t),i=this._buildArgs([e.toBase58()],r,"jsonParsed",n),s=co(await this._rpcRequest("getAccountInfo",i),ec(yo(Uc)));if("error"in s)throw new _a(s.error,`failed to get info about account ${e.toBase58()}`);return s.result}async getAccountInfo(e,t){try{return(await this.getAccountInfoAndContext(e,t)).value}catch(t){throw new Error("failed to get info about account "+e.toBase58()+": "+t)}}async getMultipleParsedAccounts(e,t){const{commitment:r,config:n}=Za(t),i=e.map((e=>e.toBase58())),s=this._buildArgs([i],r,"jsonParsed",n),o=co(await this._rpcRequest("getMultipleAccounts",s),ec(po(yo(Uc))));if("error"in o)throw new _a(o.error,`failed to get info for accounts ${i}`);return o.result}async getMultipleAccountsInfoAndContext(e,t){const{commitment:r,config:n}=Za(t),i=e.map((e=>e.toBase58())),s=this._buildArgs([i],r,"base64",n),o=co(await this._rpcRequest("getMultipleAccounts",s),ec(po(yo(Oc))));if("error"in o)throw new _a(o.error,`failed to get info for accounts ${i}`);return o.result}async getMultipleAccountsInfo(e,t){return(await this.getMultipleAccountsInfoAndContext(e,t)).value}async getStakeActivation(e,t,r){const{commitment:n,config:i}=Za(t),s=this._buildArgs([e.toBase58()],n,void 0,{...i,epoch:null!=r?r:i?.epoch}),o=co(await this._rpcRequest("getStakeActivation",s),Qa(Lc));if("error"in o)throw new _a(o.error,`failed to get Stake Activation ${e.toBase58()}`);return o.result}async getProgramAccounts(e,t){const{commitment:r,config:n}=Za(t),{encoding:i,...s}=n||{},o=this._buildArgs([e.toBase58()],r,i||"base64",{...s,...s.filters?{filters:Ya(s.filters)}:null}),a=await this._rpcRequest("getProgramAccounts",o),c=po(Rc),l=!0===s.withContext?co(a,ec(c)):co(a,Qa(c));if("error"in l)throw new _a(l.error,`failed to get accounts owned by program ${e.toBase58()}`);return l.result}async getParsedProgramAccounts(e,t){const{commitment:r,config:n}=Za(t),i=this._buildArgs([e.toBase58()],r,"jsonParsed",n),s=co(await this._rpcRequest("getProgramAccounts",i),Qa(po(Bc)));if("error"in s)throw new _a(s.error,`failed to get accounts owned by program ${e.toBase58()}`);return s.result}async confirmTransaction(e,t){let r,n;if("string"==typeof e)r=e;else{const t=e;if(t.abortSignal?.aborted)return Promise.reject(t.abortSignal.reason);r=t.signature}try{n=Zs().decode(r)}catch(e){throw new Error("signature must be base58 encoded: "+r)}return ia(64===n.length,"signature has invalid length"),"string"==typeof e?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:t||this.commitment,signature:r}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:t||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise(((t,r)=>{null!=e&&(e.aborted?r(e.reason):e.addEventListener("abort",(()=>{r(e.reason)})))}))}getTransactionConfirmationPromise({commitment:e,signature:t}){let r,n,i=!1;return{abortConfirmation:()=>{n&&(n(),n=void 0),null!=r&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:new Promise(((s,o)=>{try{r=this.onSignature(t,((e,t)=>{r=void 0;const n={context:t,value:e};s({__type:da.PROCESSED,response:n})}),e);const a=new Promise((e=>{null==r?e():n=this._onSubscriptionStateChange(r,(t=>{"subscribed"===t&&e()}))}));(async()=>{if(await a,i)return;const r=await this.getSignatureStatus(t);if(i)return;if(null==r)return;const{context:n,value:c}=r;if(null!=c)if(c?.err)o(c.err);else{switch(e){case"confirmed":case"single":case"singleGossip":if("processed"===c.confirmationStatus)return;break;case"finalized":case"max":case"root":if("processed"===c.confirmationStatus||"confirmed"===c.confirmationStatus)return}i=!0,s({__type:da.PROCESSED,response:{context:n,value:c}})}})()}catch(e){o(e)}}))}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:t,lastValidBlockHeight:r,signature:n}}){let i=!1;const s=new Promise((t=>{const n=async()=>{try{return await this.getBlockHeight(e)}catch(e){return-1}};(async()=>{let e=await n();if(!i){for(;e<=r;){if(await Sa(1e3),i)return;if(e=await n(),i)return}t({__type:da.BLOCKHEIGHT_EXCEEDED})}})()})),{abortConfirmation:o,confirmationPromise:a}=this.getTransactionConfirmationPromise({commitment:e,signature:n}),c=this.getCancellationPromise(t);let l;try{const e=await Promise.race([c,a,s]);if(e.__type!==da.PROCESSED)throw new Go(n);l=e.response}finally{i=!0,o()}return l}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:t,minContextSlot:r,nonceAccountPubkey:n,nonceValue:i,signature:s}}){let o=!1;const a=new Promise((t=>{let s=i,a=null;const c=async()=>{try{const{context:t,value:i}=await this.getNonceAndContext(n,{commitment:e,minContextSlot:r});return a=t.slot,i?.nonce}catch(e){return s}};(async()=>{if(s=await c(),!o)for(;;){if(i!==s)return void t({__type:da.NONCE_INVALID,slotInWhichNonceDidAdvance:a});if(await Sa(2e3),o)return;if(s=await c(),o)return}})()})),{abortConfirmation:c,confirmationPromise:l}=this.getTransactionConfirmationPromise({commitment:e,signature:s}),u=this.getCancellationPromise(t);let h;try{const t=await Promise.race([u,l,a]);if(t.__type===da.PROCESSED)h=t.response;else{let n;for(;;){const e=await this.getSignatureStatus(s);if(null==e)break;if(!(e.context.slot<(t.slotInWhichNonceDidAdvance??r))){n=e;break}await Sa(400)}if(!n?.value)throw new Yo(s);{const t=e||"finalized",{confirmationStatus:r}=n.value;switch(t){case"processed":case"recent":if("processed"!==r&&"confirmed"!==r&&"finalized"!==r)throw new Yo(s);break;case"confirmed":case"single":case"singleGossip":if("confirmed"!==r&&"finalized"!==r)throw new Yo(s);break;case"finalized":case"max":case"root":if("finalized"!==r)throw new Yo(s)}h={context:n.context,value:{err:n.value.err}}}}}finally{o=!0,c()}return h}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:t}){let r;const n=new Promise((t=>{let n=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":n=this._confirmTransactionInitialTimeout||3e4}r=setTimeout((()=>t({__type:da.TIMED_OUT,timeoutMs:n})),n)})),{abortConfirmation:i,confirmationPromise:s}=this.getTransactionConfirmationPromise({commitment:e,signature:t});let o;try{const e=await Promise.race([s,n]);if(e.__type!==da.PROCESSED)throw new Zo(t,e.timeoutMs/1e3);o=e.response}finally{clearTimeout(r),i()}return o}async getClusterNodes(){const e=co(await this._rpcRequest("getClusterNodes",[]),Qa(po(Zc)));if("error"in e)throw new _a(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(e){const t=this._buildArgs([],e),r=co(await this._rpcRequest("getVoteAccounts",t),Jc);if("error"in r)throw new _a(r.error,"failed to get vote accounts");return r.result}async getSlot(e){const{commitment:t,config:r}=Za(e),n=this._buildArgs([],t,void 0,r),i=co(await this._rpcRequest("getSlot",n),Qa(wo()));if("error"in i)throw new _a(i.error,"failed to get slot");return i.result}async getSlotLeader(e){const{commitment:t,config:r}=Za(e),n=this._buildArgs([],t,void 0,r),i=co(await this._rpcRequest("getSlotLeader",n),Qa(Eo()));if("error"in i)throw new _a(i.error,"failed to get slot leader");return i.result}async getSlotLeaders(e,t){const r=[e,t],n=co(await this._rpcRequest("getSlotLeaders",r),Qa(po(Ka)));if("error"in n)throw new _a(n.error,"failed to get slot leaders");return n.result}async getSignatureStatus(e,t){const{context:r,value:n}=await this.getSignatureStatuses([e],t);return ia(1===n.length),{context:r,value:n[0]}}async getSignatureStatuses(e,t){const r=[e];t&&r.push(t);const n=co(await this._rpcRequest("getSignatureStatuses",r),el);if("error"in n)throw new _a(n.error,"failed to get signature status");return n.result}async getTransactionCount(e){const{commitment:t,config:r}=Za(e),n=this._buildArgs([],t,void 0,r),i=co(await this._rpcRequest("getTransactionCount",n),Qa(wo()));if("error"in i)throw new _a(i.error,"failed to get transaction count");return i.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const t=this._buildArgs([],e),r=co(await this._rpcRequest("getInflationGovernor",t),wc);if("error"in r)throw new _a(r.error,"failed to get inflation");return r.result}async getInflationReward(e,t,r){const{commitment:n,config:i}=Za(r),s=this._buildArgs([e.map((e=>e.toBase58()))],n,void 0,{...i,epoch:null!=t?t:i?.epoch}),o=co(await this._rpcRequest("getInflationReward",s),ic);if("error"in o)throw new _a(o.error,"failed to get inflation reward");return o.result}async getInflationRate(){const e=co(await this._rpcRequest("getInflationRate",[]),bc);if("error"in e)throw new _a(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(e){const{commitment:t,config:r}=Za(e),n=this._buildArgs([],t,void 0,r),i=co(await this._rpcRequest("getEpochInfo",n),Ec);if("error"in i)throw new _a(i.error,"failed to get epoch info");return i.result}async getEpochSchedule(){const e=co(await this._rpcRequest("getEpochSchedule",[]),_c);if("error"in e)throw new _a(e.error,"failed to get epoch schedule");const t=e.result;return new $a(t.slotsPerEpoch,t.leaderScheduleSlotOffset,t.warmup,t.firstNormalEpoch,t.firstNormalSlot)}async getLeaderSchedule(){const e=co(await this._rpcRequest("getLeaderSchedule",[]),Ac);if("error"in e)throw new _a(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(e,t){const r=this._buildArgs([e],t),n=co(await this._rpcRequest("getMinimumBalanceForRentExemption",r),tl);return"error"in n?(console.warn("Unable to fetch minimum balance for rent exemption"),0):n.result}async getRecentBlockhashAndContext(e){const{context:t,value:{blockhash:r}}=await this.getLatestBlockhashAndContext(e);return{context:t,value:{blockhash:r,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON:()=>({})}}}}async getRecentPerformanceSamples(e){const t=co(await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),kl);if("error"in t)throw new _a(t.error,"failed to get recent performance samples");return t.result}async getFeeCalculatorForBlockhash(e,t){const r=this._buildArgs([e],t),n=co(await this._rpcRequest("getFeeCalculatorForBlockhash",r),Tl);if("error"in n)throw new _a(n.error,"failed to get fee calculator");const{context:i,value:s}=n.result;return{context:i,value:null!==s?s.feeCalculator:null}}async getFeeForMessage(e,t){const r=$o(e.serialize()).toString("base64"),n=this._buildArgs([r],t),i=co(await this._rpcRequest("getFeeForMessage",n),ec(yo(wo())));if("error"in i)throw new _a(i.error,"failed to get fee for message");if(null===i.result)throw new Error("invalid blockhash");return i.result}async getRecentPrioritizationFees(e){const t=e?.lockedWritableAccounts?.map((e=>e.toBase58())),r=t?.length?[t]:[],n=co(await this._rpcRequest("getRecentPrioritizationFees",r),vc);if("error"in n)throw new _a(n.error,"failed to get recent prioritization fees");return n.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(e){const{commitment:t,config:r}=Za(e),n=this._buildArgs([],t,void 0,r),i=co(await this._rpcRequest("getLatestBlockhash",n),Il);if("error"in i)throw new _a(i.error,"failed to get latest blockhash");return i.result}async isBlockhashValid(e,t){const{commitment:r,config:n}=Za(t),i=this._buildArgs([e],r,void 0,n),s=co(await this._rpcRequest("isBlockhashValid",i),Nl);if("error"in s)throw new _a(s.error,"failed to determine if the blockhash `"+e+"`is valid");return s.result}async getVersion(){const e=co(await this._rpcRequest("getVersion",[]),Qa(pc));if("error"in e)throw new _a(e.error,"failed to get version");return e.result}async getGenesisHash(){const e=co(await this._rpcRequest("getGenesisHash",[]),Qa(Eo()));if("error"in e)throw new _a(e.error,"failed to get genesis hash");return e.result}async getBlock(e,t){const{commitment:r,config:n}=Za(t),i=this._buildArgsAtLeastConfirmed([e],r,void 0,n),s=await this._rpcRequest("getBlock",i);try{switch(n?.transactionDetails){case"accounts":{const e=co(s,wl);if("error"in e)throw e.error;return e.result}case"none":{const e=co(s,yl);if("error"in e)throw e.error;return e.result}default:{const e=co(s,ml);if("error"in e)throw e.error;const{result:t}=e;return t?{...t,transactions:t.transactions.map((({transaction:e,meta:t,version:r})=>({meta:t,transaction:{...e,message:rc(r,e.message)},version:r})))}:null}}}catch(e){throw new _a(e,"failed to get confirmed block")}}async getParsedBlock(e,t){const{commitment:r,config:n}=Za(t),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n),s=await this._rpcRequest("getBlock",i);try{switch(n?.transactionDetails){case"accounts":{const e=co(s,vl);if("error"in e)throw e.error;return e.result}case"none":{const e=co(s,El);if("error"in e)throw e.error;return e.result}default:{const e=co(s,bl);if("error"in e)throw e.error;return e.result}}}catch(e){throw new _a(e,"failed to get block")}}async getBlockProduction(e){let t,r;if("string"==typeof e)r=e;else if(e){const{commitment:n,...i}=e;r=n,t=i}const n=this._buildArgs([],r,"base64",t),i=co(await this._rpcRequest("getBlockProduction",n),yc);if("error"in i)throw new _a(i.error,"failed to get block production information");return i.result}async getTransaction(e,t){const{commitment:r,config:n}=Za(t),i=this._buildArgsAtLeastConfirmed([e],r,void 0,n),s=co(await this._rpcRequest("getTransaction",i),Sl);if("error"in s)throw new _a(s.error,"failed to get transaction");const o=s.result;return o?{...o,transaction:{...o.transaction,message:rc(o.version,o.transaction.message)}}:o}async getParsedTransaction(e,t){const{commitment:r,config:n}=Za(t),i=this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n),s=co(await this._rpcRequest("getTransaction",i),Cl);if("error"in s)throw new _a(s.error,"failed to get transaction");return s.result}async getParsedTransactions(e,t){const{commitment:r,config:n}=Za(t),i=e.map((e=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([e],r,"jsonParsed",n)})));return(await this._rpcBatchRequest(i)).map((e=>{const t=co(e,Cl);if("error"in t)throw new _a(t.error,"failed to get transactions");return t.result}))}async getTransactions(e,t){const{commitment:r,config:n}=Za(t),i=e.map((e=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([e],r,void 0,n)})));return(await this._rpcBatchRequest(i)).map((e=>{const t=co(e,Sl);if("error"in t)throw new _a(t.error,"failed to get transactions");const r=t.result;return r?{...r,transaction:{...r.transaction,message:rc(r.version,r.transaction.message)}}:r}))}async getConfirmedBlock(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),n=co(await this._rpcRequest("getBlock",r),_l);if("error"in n)throw new _a(n.error,"failed to get confirmed block");const i=n.result;if(!i)throw new Error("Confirmed block "+e+" not found");const s={...i,transactions:i.transactions.map((({transaction:e,meta:t})=>{const r=new la(e.message);return{meta:t,transaction:{...e,message:r}}}))};return{...s,transactions:s.transactions.map((({transaction:e,meta:t})=>({meta:t,transaction:ga.populate(e.message,e.signatures)})))}}async getBlocks(e,t,r){const n=this._buildArgsAtLeastConfirmed(void 0!==t?[e,t]:[e],r),i=co(await this._rpcRequest("getBlocks",n),Qa(po(wo())));if("error"in i)throw new _a(i.error,"failed to get blocks");return i.result}async getBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),n=co(await this._rpcRequest("getBlock",r),Al);if("error"in n)throw new _a(n.error,"failed to get block");const i=n.result;if(!i)throw new Error("Block "+e+" not found");return i}async getConfirmedBlockSignatures(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,void 0,{transactionDetails:"signatures",rewards:!1}),n=co(await this._rpcRequest("getBlock",r),Al);if("error"in n)throw new _a(n.error,"failed to get confirmed block");const i=n.result;if(!i)throw new Error("Confirmed block "+e+" not found");return i}async getConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t),n=co(await this._rpcRequest("getTransaction",r),Sl);if("error"in n)throw new _a(n.error,"failed to get transaction");const i=n.result;if(!i)return i;const s=new la(i.transaction.message),o=i.transaction.signatures;return{...i,transaction:ga.populate(s,o)}}async getParsedConfirmedTransaction(e,t){const r=this._buildArgsAtLeastConfirmed([e],t,"jsonParsed"),n=co(await this._rpcRequest("getTransaction",r),Cl);if("error"in n)throw new _a(n.error,"failed to get confirmed transaction");return n.result}async getParsedConfirmedTransactions(e,t){const r=e.map((e=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([e],t,"jsonParsed")})));return(await this._rpcBatchRequest(r)).map((e=>{const t=co(e,Cl);if("error"in t)throw new _a(t.error,"failed to get confirmed transactions");return t.result}))}async getConfirmedSignaturesForAddress(e,t,r){let n={},i=await this.getFirstAvailableBlock();for(;!("until"in n)&&!(--t<=0||t<i);)try{const e=await this.getConfirmedBlockSignatures(t,"finalized");e.signatures.length>0&&(n.until=e.signatures[e.signatures.length-1].toString())}catch(e){if(e instanceof Error&&e.message.includes("skipped"))continue;throw e}let s=await this.getSlot("finalized");for(;!("before"in n||++r>s);)try{const e=await this.getConfirmedBlockSignatures(r);e.signatures.length>0&&(n.before=e.signatures[e.signatures.length-1].toString())}catch(e){if(e instanceof Error&&e.message.includes("skipped"))continue;throw e}return(await this.getConfirmedSignaturesForAddress2(e,n)).map((e=>e.signature))}async getConfirmedSignaturesForAddress2(e,t,r){const n=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),i=co(await this._rpcRequest("getConfirmedSignaturesForAddress2",n),Dc);if("error"in i)throw new _a(i.error,"failed to get confirmed signatures for address");return i.result}async getSignaturesForAddress(e,t,r){const n=this._buildArgsAtLeastConfirmed([e.toBase58()],r,void 0,t),i=co(await this._rpcRequest("getSignaturesForAddress",n),jc);if("error"in i)throw new _a(i.error,"failed to get signatures for address");return i.result}async getAddressLookupTable(e,t){const{context:r,value:n}=await this.getAccountInfoAndContext(e,t);let i=null;return null!==n&&(i=new qa({key:e,state:qa.deserialize(n.data)})),{context:r,value:i}}async getNonceAndContext(e,t){const{context:r,value:n}=await this.getAccountInfoAndContext(e,t);let i=null;return null!==n&&(i=Ta.fromAccountData(n.data)),{context:r,value:i}}async getNonce(e,t){return await this.getNonceAndContext(e,t).then((e=>e.value)).catch((t=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+t)}))}async requestAirdrop(e,t){const r=co(await this._rpcRequest("requestAirdrop",[e.toBase58(),t]),xl);if("error"in r)throw new _a(r.error,`airdrop to ${e.toBase58()} failed`);return r.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Sa(100);const e=Date.now()-this._blockhashInfo.lastFetch>=3e4;if(null!==this._blockhashInfo.latestBlockhash&&!e)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),t=this._blockhashInfo.latestBlockhash,r=t?t.blockhash:null;for(let e=0;e<50;e++){const e=await this.getLatestBlockhash("finalized");if(r!==e.blockhash)return this._blockhashInfo={latestBlockhash:e,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},e;await Sa(200)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:t,config:r}=Za(e),n=this._buildArgs([],t,"base64",r),i=co(await this._rpcRequest("getStakeMinimumDelegation",n),ec(wo()));if("error"in i)throw new _a(i.error,"failed to get stake minimum delegation");return i.result}async simulateTransaction(e,t,r){if("message"in e){const n=e.serialize(),i=ys.Buffer.from(n).toString("base64");if(Array.isArray(t)||void 0!==r)throw new Error("Invalid arguments");const s=t||{};s.encoding="base64","commitment"in s||(s.commitment=this.commitment),t&&"object"==typeof t&&"innerInstructions"in t&&(s.innerInstructions=t.innerInstructions);const o=[i,s],a=co(await this._rpcRequest("simulateTransaction",o),mc);if("error"in a)throw new Error("failed to simulate transaction: "+a.error.message);return a.result}let n;if(e instanceof ga){let t=e;n=new ga,n.feePayer=t.feePayer,n.instructions=e.instructions,n.nonceInfo=t.nonceInfo,n.signatures=t.signatures}else n=ga.populate(e),n._message=n._json=void 0;if(void 0!==t&&!Array.isArray(t))throw new Error("Invalid arguments");const i=t;if(n.nonceInfo&&i)n.sign(...i);else{let e=this._disableBlockhashCaching;for(;;){const t=await this._blockhashWithExpiryBlockHeight(e);if(n.lastValidBlockHeight=t.lastValidBlockHeight,n.recentBlockhash=t.blockhash,!i)break;if(n.sign(...i),!n.signature)throw new Error("!signature");const r=n.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(r)&&!this._blockhashInfo.transactionSignatures.includes(r)){this._blockhashInfo.simulatedSignatures.push(r);break}e=!0}}const s=n._compile(),o=s.serialize(),a=n._serialize(o).toString("base64"),c={encoding:"base64",commitment:this.commitment};if(r){const e=(Array.isArray(r)?r:s.nonProgramIds()).map((e=>e.toBase58()));c.accounts={encoding:"base64",addresses:e}}i&&(c.sigVerify=!0),t&&"object"==typeof t&&"innerInstructions"in t&&(c.innerInstructions=t.innerInstructions);const l=[a,c],u=co(await this._rpcRequest("simulateTransaction",l),mc);if("error"in u){let e;if("data"in u.error&&(e=u.error.data.logs,e&&Array.isArray(e))){const t="\n    ",r=t+e.join(t);console.error(u.error.message,r)}throw new Ea({action:"simulate",signature:"",transactionMessage:u.error.message,logs:e})}return u.result}async sendTransaction(e,t,r){if("version"in e){if(t&&Array.isArray(t))throw new Error("Invalid arguments");const r=e.serialize();return await this.sendRawTransaction(r,t)}if(void 0===t||!Array.isArray(t))throw new Error("Invalid arguments");const n=t;if(e.nonceInfo)e.sign(...n);else{let t=this._disableBlockhashCaching;for(;;){const r=await this._blockhashWithExpiryBlockHeight(t);if(e.lastValidBlockHeight=r.lastValidBlockHeight,e.recentBlockhash=r.blockhash,e.sign(...n),!e.signature)throw new Error("!signature");const i=e.signature.toString("base64");if(!this._blockhashInfo.transactionSignatures.includes(i)){this._blockhashInfo.transactionSignatures.push(i);break}t=!0}}const i=e.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(e,t){const r=$o(e).toString("base64");return await this.sendEncodedTransaction(r,t)}async sendEncodedTransaction(e,t){const r={encoding:"base64"},n=t&&t.skipPreflight,i=!0===n?"processed":t&&t.preflightCommitment||this.commitment;t&&null!=t.maxRetries&&(r.maxRetries=t.maxRetries),t&&null!=t.minContextSlot&&(r.minContextSlot=t.minContextSlot),n&&(r.skipPreflight=n),i&&(r.preflightCommitment=i);const s=[e,r],o=co(await this._rpcRequest("sendTransaction",s),Pl);if("error"in o){let e;throw"data"in o.error&&(e=o.error.data.logs),new Ea({action:n?"send":"simulate",signature:"",transactionMessage:o.error.message,logs:e})}return o.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval((()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()}),5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3!==e?(this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach((([e,t])=>{this._setSubscription(e,{...t,state:"pending"})}))):this._updateSubscriptions()}_setSubscription(e,t){const r=this._subscriptionsByHash[e]?.state;if(this._subscriptionsByHash[e]=t,r!==t.state){const r=this._subscriptionStateChangeCallbacksByHash[e];r&&r.forEach((e=>{try{e(t.state)}catch{}}))}}_onSubscriptionStateChange(e,t){const r=this._subscriptionHashByClientSubscriptionId[e];if(null==r)return()=>{};const n=this._subscriptionStateChangeCallbacksByHash[r]||=new Set;return n.add(t),()=>{n.delete(t),0===n.size&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(0===Object.keys(this._subscriptionsByHash).length)return void(this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout((()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(e){e instanceof Error&&console.log(`Error when closing socket connection: ${e.message}`)}}),500)));if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected)return void this._rpcWebSocket.connect();const e=this._rpcWebSocketGeneration,t=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map((async e=>{const r=this._subscriptionsByHash[e];if(void 0!==r)switch(r.state){case"pending":case"unsubscribed":if(0===r.callbacks.size)return delete this._subscriptionsByHash[e],"unsubscribed"===r.state&&delete this._subscriptionCallbacksByServerSubscriptionId[r.serverSubscriptionId],void await this._updateSubscriptions();await(async()=>{const{args:n,method:i}=r;try{this._setSubscription(e,{...r,state:"subscribing"});const t=await this._rpcWebSocket.call(i,n);this._setSubscription(e,{...r,serverSubscriptionId:t,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[t]=r.callbacks,await this._updateSubscriptions()}catch(s){if(console.error(`Received ${s instanceof Error?"":"JSON-RPC "}error calling \`${i}\``,{args:n,error:s}),!t())return;this._setSubscription(e,{...r,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":0===r.callbacks.size&&await(async()=>{const{serverSubscriptionId:n,unsubscribeMethod:i}=r;if(this._subscriptionsAutoDisposedByRpc.has(n))this._subscriptionsAutoDisposedByRpc.delete(n);else{this._setSubscription(e,{...r,state:"unsubscribing"}),this._setSubscription(e,{...r,state:"unsubscribing"});try{await this._rpcWebSocket.call(i,[n])}catch(n){if(n instanceof Error&&console.error(`${i} error:`,n.message),!t())return;return this._setSubscription(e,{...r,state:"subscribed"}),void await this._updateSubscriptions()}}this._setSubscription(e,{...r,state:"unsubscribed"}),await this._updateSubscriptions()})()}})))}_handleServerNotification(e,t){const r=this._subscriptionCallbacksByServerSubscriptionId[e];void 0!==r&&r.forEach((e=>{try{e(...t)}catch(e){console.error(e)}}))}_wsOnAccountNotification(e){const{result:t,subscription:r}=co(e,$c);this._handleServerNotification(r,[t.value,t.context])}_makeSubscription(e,t){const r=this._nextClientSubscriptionId++,n=Da([e.method,t]),i=this._subscriptionsByHash[n];return void 0===i?this._subscriptionsByHash[n]={...e,args:t,callbacks:new Set([e.callback]),state:"pending"}:i.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=n,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const t=this._subscriptionsByHash[n];ia(void 0!==t,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),t.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(e,t,r){const{commitment:n,config:i}=Za(r),s=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},s)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:t,subscription:r}=co(e,zc);this._handleServerNotification(r,[{accountId:t.value.pubkey,accountInfo:t.value.account},t.context])}onProgramAccountChange(e,t,r,n){const{commitment:i,config:s}=Za(r),o=this._buildArgs([e.toBase58()],i||this._commitment||"finalized","base64",s||(n?{filters:Ya(n)}:void 0));return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},o)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,t,r){const n=this._buildArgs(["object"==typeof e?{mentions:[e.toString()]}:e],r||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},n)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:t,subscription:r}=co(e,Rl);this._handleServerNotification(r,[t.value,t.context])}_wsOnSlotNotification(e){const{result:t,subscription:r}=co(e,Hc);this._handleServerNotification(r,[t])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:t,subscription:r}=co(e,Kc);this._handleServerNotification(r,[t])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,t){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${t}' events could not be found.`)}_buildArgs(e,t,r,n){const i=t||this._commitment;if(i||r||n){let t={};r&&(t.encoding=r),i&&(t.commitment=i),n&&(t=Object.assign(t,n)),e.push(t)}return e}_buildArgsAtLeastConfirmed(e,t,r,n){const i=t||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,r,n)}_wsOnSignatureNotification(e){const{result:t,subscription:r}=co(e,Vc);"receivedSignature"!==t.value&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,"receivedSignature"===t.value?[{type:"received"},t.context]:[{type:"status",result:t.value},t.context])}onSignature(e,t,r){const n=this._buildArgs([e],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(e,r)=>{if("status"===e.type){t(e.result,r);try{this.removeSignatureListener(i)}catch(e){}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},n);return i}onSignatureWithOptions(e,t,r){const{commitment:n,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},s=this._buildArgs([e],n,void 0,i),o=this._makeSubscription({callback:(e,r)=>{t(e,r);try{this.removeSignatureListener(o)}catch(e){}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return o}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:t,subscription:r}=co(e,Gc);this._handleServerNotification(r,[t])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}class Bl{constructor(e){this._keypair=void 0,this._keypair=e??Uo()}static generate(){return new Bl(Uo())}static fromSecretKey(e,t){if(64!==e.byteLength)throw new Error("bad secret key size");const r=e.slice(32,64);if(!t||!t.skipValidation){const t=e.slice(0,32),n=Bo(t);for(let e=0;e<32;e++)if(r[e]!==n[e])throw new Error("provided secretKey is invalid")}return new Bl({publicKey:r,secretKey:e})}static fromSeed(e){const t=Bo(e),r=new Uint8Array(64);return r.set(e),r.set(t,32),new Bl({publicKey:t,secretKey:r})}get publicKey(){return new Ko(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}Object.freeze({CreateLookupTable:{index:0,layout:Xs.w3([Xs.DH("instruction"),xa("recentSlot"),Xs.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:Xs.w3([Xs.DH("instruction")])},ExtendLookupTable:{index:2,layout:Xs.w3([Xs.DH("instruction"),xa(),Xs.O6(Xo(),Xs.cY(Xs.DH(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:Xs.w3([Xs.DH("instruction")])},CloseLookupTable:{index:4,layout:Xs.w3([Xs.DH("instruction")])}});new Ko("AddressLookupTab1e1111111111111111111111111");const Ll=Object.freeze({RequestUnits:{index:0,layout:Xs.w3([Xs.u8("instruction"),Xs.DH("units"),Xs.DH("additionalFee")])},RequestHeapFrame:{index:1,layout:Xs.w3([Xs.u8("instruction"),Xs.DH("bytes")])},SetComputeUnitLimit:{index:2,layout:Xs.w3([Xs.u8("instruction"),Xs.DH("units")])},SetComputeUnitPrice:{index:3,layout:Xs.w3([Xs.u8("instruction"),xa("microLamports")])}});class Dl{constructor(){}static requestUnits(e){const t=Ca(Ll.RequestUnits,e);return new fa({keys:[],programId:this.programId,data:t})}static requestHeapFrame(e){const t=Ca(Ll.RequestHeapFrame,e);return new fa({keys:[],programId:this.programId,data:t})}static setComputeUnitLimit(e){const t=Ca(Ll.SetComputeUnitLimit,e);return new fa({keys:[],programId:this.programId,data:t})}static setComputeUnitPrice(e){const t=Ca(Ll.SetComputeUnitPrice,{microLamports:BigInt(e.microLamports)});return new fa({keys:[],programId:this.programId,data:t})}}Dl.programId=new Ko("ComputeBudget111111111111111111111111111111");const jl=Xs.w3([Xs.u8("numSignatures"),Xs.u8("padding"),Xs.NX("signatureOffset"),Xs.NX("signatureInstructionIndex"),Xs.NX("publicKeyOffset"),Xs.NX("publicKeyInstructionIndex"),Xs.NX("messageDataOffset"),Xs.NX("messageDataSize"),Xs.NX("messageInstructionIndex")]);class $l{constructor(){}static createInstructionWithPublicKey(e){const{publicKey:t,message:r,signature:n,instructionIndex:i}=e;ia(32===t.length,`Public Key must be 32 bytes but received ${t.length} bytes`),ia(64===n.length,`Signature must be 64 bytes but received ${n.length} bytes`);const s=jl.span,o=s+t.length,a=o+n.length,c=ys.Buffer.alloc(a+r.length),l=null==i?65535:i;return jl.encode({numSignatures:1,padding:0,signatureOffset:o,signatureInstructionIndex:l,publicKeyOffset:s,publicKeyInstructionIndex:l,messageDataOffset:a,messageDataSize:r.length,messageInstructionIndex:l},c),c.fill(t,s),c.fill(n,o),c.fill(r,a),new fa({keys:[],programId:$l.programId,data:c})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:r,instructionIndex:n}=e;ia(64===t.length,`Private key must be 64 bytes but received ${t.length} bytes`);try{const e=Bl.fromSecretKey(t),i=e.publicKey.toBytes(),s=Do(r,e.secretKey);return this.createInstructionWithPublicKey({publicKey:i,message:r,signature:s,instructionIndex:n})}catch(e){throw new Error(`Error creating instruction; ${e}`)}}}$l.programId=new Ko("Ed25519SigVerify111111111111111111111111111"),Mo.secp256k1.utils.isValidPrivateKey;const Wl=Mo.secp256k1.getPublicKey,zl=Xs.w3([Xs.u8("numSignatures"),Xs.NX("signatureOffset"),Xs.u8("signatureInstructionIndex"),Xs.NX("ethAddressOffset"),Xs.u8("ethAddressInstructionIndex"),Xs.NX("messageDataOffset"),Xs.NX("messageDataSize"),Xs.u8("messageInstructionIndex"),Xs.av(20,"ethAddress"),Xs.av(64,"signature"),Xs.u8("recoveryId")]);class ql{constructor(){}static publicKeyToEthAddress(e){ia(64===e.length,`Public key must be 64 bytes but received ${e.length} bytes`);try{return ys.Buffer.from((0,Ro.lY)($o(e))).slice(-20)}catch(e){throw new Error(`Error constructing Ethereum address: ${e}`)}}static createInstructionWithPublicKey(e){const{publicKey:t,message:r,signature:n,recoveryId:i,instructionIndex:s}=e;return ql.createInstructionWithEthAddress({ethAddress:ql.publicKeyToEthAddress(t),message:r,signature:n,recoveryId:i,instructionIndex:s})}static createInstructionWithEthAddress(e){const{ethAddress:t,message:r,signature:n,recoveryId:i,instructionIndex:s=0}=e;let o;o="string"==typeof t?t.startsWith("0x")?ys.Buffer.from(t.substr(2),"hex"):ys.Buffer.from(t,"hex"):t,ia(20===o.length,`Address must be 20 bytes but received ${o.length} bytes`);const a=12+o.length,c=a+n.length+1,l=ys.Buffer.alloc(zl.span+r.length);return zl.encode({numSignatures:1,signatureOffset:a,signatureInstructionIndex:s,ethAddressOffset:12,ethAddressInstructionIndex:s,messageDataOffset:c,messageDataSize:r.length,messageInstructionIndex:s,signature:$o(n),ethAddress:$o(o),recoveryId:i},l),l.fill($o(r),zl.span),new fa({keys:[],programId:ql.programId,data:l})}static createInstructionWithPrivateKey(e){const{privateKey:t,message:r,instructionIndex:n}=e;ia(32===t.length,`Private key must be 32 bytes but received ${t.length} bytes`);try{const e=$o(t),i=Wl(e,!1).slice(1),s=ys.Buffer.from((0,Ro.lY)($o(r))),[o,a]=((e,t)=>{const r=Mo.secp256k1.sign(e,t);return[r.toCompactRawBytes(),r.recovery]})(s,e);return this.createInstructionWithPublicKey({publicKey:i,message:r,signature:o,recoveryId:a,instructionIndex:n})}catch(e){throw new Error(`Error creating instruction; ${e}`)}}}var Hl;ql.programId=new Ko("KeccakSecp256k11111111111111111111111111111");const Fl=new Ko("StakeConfig11111111111111111111111111111111");class Kl{constructor(e,t,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=t,this.custodian=r}}Hl=Kl,Kl.default=new Hl(0,0,Ko.default);const Vl=Object.freeze({Initialize:{index:0,layout:Xs.w3([Xs.DH("instruction"),((e="authorized")=>Xs.w3([Xo("staker"),Xo("withdrawer")],e))(),((e="lockup")=>Xs.w3([Xs.Wg("unixTimestamp"),Xs.Wg("epoch"),Xo("custodian")],e))()])},Authorize:{index:1,layout:Xs.w3([Xs.DH("instruction"),Xo("newAuthorized"),Xs.DH("stakeAuthorizationType")])},Delegate:{index:2,layout:Xs.w3([Xs.DH("instruction")])},Split:{index:3,layout:Xs.w3([Xs.DH("instruction"),Xs.Wg("lamports")])},Withdraw:{index:4,layout:Xs.w3([Xs.DH("instruction"),Xs.Wg("lamports")])},Deactivate:{index:5,layout:Xs.w3([Xs.DH("instruction")])},Merge:{index:7,layout:Xs.w3([Xs.DH("instruction")])},AuthorizeWithSeed:{index:8,layout:Xs.w3([Xs.DH("instruction"),Xo("newAuthorized"),Xs.DH("stakeAuthorizationType"),ea("authoritySeed"),Xo("authorityOwner")])}});Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class Gl{constructor(){}static initialize(e){const{stakePubkey:t,authorized:r,lockup:n}=e,i=n||Kl.default,s=Ca(Vl.Initialize,{authorized:{staker:$o(r.staker.toBuffer()),withdrawer:$o(r.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:$o(i.custodian.toBuffer())}}),o={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ba,isSigner:!1,isWritable:!1}],programId:this.programId,data:s};return new fa(o)}static createAccountWithSeed(e){const t=new ga;t.add(Oa.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=e;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static createAccount(e){const t=new ga;t.add(Oa.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));const{stakePubkey:r,authorized:n,lockup:i}=e;return t.add(this.initialize({stakePubkey:r,authorized:n,lockup:i}))}static delegate(e){const{stakePubkey:t,authorizedPubkey:r,votePubkey:n}=e,i=Ca(Vl.Delegate);return(new ga).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:ya,isSigner:!1,isWritable:!1},{pubkey:va,isSigner:!1,isWritable:!1},{pubkey:Fl,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static authorize(e){const{stakePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:n,stakeAuthorizationType:i,custodianPubkey:s}=e,o=Ca(Vl.Authorize,{newAuthorized:$o(n.toBuffer()),stakeAuthorizationType:i.index}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ya,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&a.push({pubkey:s,isSigner:!0,isWritable:!1}),(new ga).add({keys:a,programId:this.programId,data:o})}static authorizeWithSeed(e){const{stakePubkey:t,authorityBase:r,authoritySeed:n,authorityOwner:i,newAuthorizedPubkey:s,stakeAuthorizationType:o,custodianPubkey:a}=e,c=Ca(Vl.AuthorizeWithSeed,{newAuthorized:$o(s.toBuffer()),stakeAuthorizationType:o.index,authoritySeed:n,authorityOwner:$o(i.toBuffer())}),l=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1},{pubkey:ya,isSigner:!1,isWritable:!1}];return a&&l.push({pubkey:a,isSigner:!0,isWritable:!1}),(new ga).add({keys:l,programId:this.programId,data:c})}static splitInstruction(e){const{stakePubkey:t,authorizedPubkey:r,splitStakePubkey:n,lamports:i}=e,s=Ca(Vl.Split,{lamports:i});return new fa({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:s})}static split(e,t){const r=new ga;return r.add(Oa.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:t,space:this.space,programId:this.programId})),r.add(this.splitInstruction(e))}static splitWithSeed(e,t){const{stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,basePubkey:s,seed:o,lamports:a}=e,c=new ga;return c.add(Oa.allocate({accountPubkey:i,basePubkey:s,seed:o,space:this.space,programId:this.programId})),t&&t>0&&c.add(Oa.transfer({fromPubkey:e.authorizedPubkey,toPubkey:i,lamports:t})),c.add(this.splitInstruction({stakePubkey:r,authorizedPubkey:n,splitStakePubkey:i,lamports:a}))}static merge(e){const{stakePubkey:t,sourceStakePubKey:r,authorizedPubkey:n}=e,i=Ca(Vl.Merge);return(new ga).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:ya,isSigner:!1,isWritable:!1},{pubkey:va,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}static withdraw(e){const{stakePubkey:t,authorizedPubkey:r,toPubkey:n,lamports:i,custodianPubkey:s}=e,o=Ca(Vl.Withdraw,{lamports:i}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:ya,isSigner:!1,isWritable:!1},{pubkey:va,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return s&&a.push({pubkey:s,isSigner:!0,isWritable:!1}),(new ga).add({keys:a,programId:this.programId,data:o})}static deactivate(e){const{stakePubkey:t,authorizedPubkey:r}=e,n=Ca(Vl.Deactivate);return(new ga).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ya,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}}Gl.programId=new Ko("Stake11111111111111111111111111111111111111"),Gl.space=200;const Zl=Object.freeze({InitializeAccount:{index:0,layout:Xs.w3([Xs.DH("instruction"),((e="voteInit")=>Xs.w3([Xo("nodePubkey"),Xo("authorizedVoter"),Xo("authorizedWithdrawer"),Xs.u8("commission")],e))()])},Authorize:{index:1,layout:Xs.w3([Xs.DH("instruction"),Xo("newAuthorized"),Xs.DH("voteAuthorizationType")])},Withdraw:{index:3,layout:Xs.w3([Xs.DH("instruction"),Xs.Wg("lamports")])},UpdateValidatorIdentity:{index:4,layout:Xs.w3([Xs.DH("instruction")])},AuthorizeWithSeed:{index:10,layout:Xs.w3([Xs.DH("instruction"),((e="voteAuthorizeWithSeedArgs")=>Xs.w3([Xs.DH("voteAuthorizationType"),Xo("currentAuthorityDerivedKeyOwnerPubkey"),ea("currentAuthorityDerivedKeySeed"),Xo("newAuthorized")],e))()])}});Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class Yl{constructor(){}static initializeAccount(e){const{votePubkey:t,nodePubkey:r,voteInit:n}=e,i=Ca(Zl.InitializeAccount,{voteInit:{nodePubkey:$o(n.nodePubkey.toBuffer()),authorizedVoter:$o(n.authorizedVoter.toBuffer()),authorizedWithdrawer:$o(n.authorizedWithdrawer.toBuffer()),commission:n.commission}}),s={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ba,isSigner:!1,isWritable:!1},{pubkey:ya,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i};return new fa(s)}static createAccount(e){const t=new ga;return t.add(Oa.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}static authorize(e){const{votePubkey:t,authorizedPubkey:r,newAuthorizedPubkey:n,voteAuthorizationType:i}=e,s=Ca(Zl.Authorize,{newAuthorized:$o(n.toBuffer()),voteAuthorizationType:i.index}),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:ya,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new ga).add({keys:o,programId:this.programId,data:s})}static authorizeWithSeed(e){const{currentAuthorityDerivedKeyBasePubkey:t,currentAuthorityDerivedKeyOwnerPubkey:r,currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:i,voteAuthorizationType:s,votePubkey:o}=e,a=Ca(Zl.AuthorizeWithSeed,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:$o(r.toBuffer()),currentAuthorityDerivedKeySeed:n,newAuthorized:$o(i.toBuffer()),voteAuthorizationType:s.index}}),c=[{pubkey:o,isSigner:!1,isWritable:!0},{pubkey:ya,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return(new ga).add({keys:c,programId:this.programId,data:a})}static withdraw(e){const{votePubkey:t,authorizedWithdrawerPubkey:r,lamports:n,toPubkey:i}=e,s=Ca(Zl.Withdraw,{lamports:n}),o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!0,isWritable:!1}];return(new ga).add({keys:o,programId:this.programId,data:s})}static safeWithdraw(e,t,r){if(e.lamports>t-r)throw new Error("Withdraw will leave vote account with insufficient funds.");return Yl.withdraw(e)}static updateValidatorIdentity(e){const{votePubkey:t,authorizedWithdrawerPubkey:r,nodePubkey:n}=e,i=Ca(Zl.UpdateValidatorIdentity),s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}];return(new ga).add({keys:s,programId:this.programId,data:i})}}Yl.programId=new Ko("Vote111111111111111111111111111111111111111"),Yl.space=3762,new Ko("Va1idator1nfo111111111111111111111111111111"),Ao({name:Eo(),website:bo(Eo()),details:bo(Eo()),iconUrl:bo(Eo()),keybaseUsername:bo(Eo())}),new Ko("Vote111111111111111111111111111111111111111"),Xs.w3([Xo("nodePubkey"),Xo("authorizedWithdrawer"),Xs.u8("commission"),Xs.I0(),Xs.O6(Xs.w3([Xs.I0("slot"),Xs.DH("confirmationCount")]),Xs.cY(Xs.DH(),-8),"votes"),Xs.u8("rootSlotValid"),Xs.I0("rootSlot"),Xs.I0(),Xs.O6(Xs.w3([Xs.I0("epoch"),Xo("authorizedVoter")]),Xs.cY(Xs.DH(),-8),"authorizedVoters"),Xs.w3([Xs.O6(Xs.w3([Xo("authorizedPubkey"),Xs.I0("epochOfLastAuthorizedSwitch"),Xs.I0("targetEpoch")]),32,"buf"),Xs.I0("idx"),Xs.u8("isEmpty")],"priorVoters"),Xs.I0(),Xs.O6(Xs.w3([Xs.I0("epoch"),Xs.I0("credits"),Xs.I0("prevCredits")]),Xs.cY(Xs.DH(),-8),"epochCredits"),Xs.w3([Xs.I0("slot"),Xs.I0("timestamp")],"lastTimestamp")]),new Ko("58PwtjSDuFHuUkYjH9BYnnQKHfwo9reZhC2zMJv9JPkx"),new Ko("namesLPneVptA9Z5rqUDD9tMTWEJwofgaYwp8cawRkX"),new Ko("33m47vH6Eav6jr5Ry86XjhRft2jRBLDnDgPSHoquXi2Z"),a.o.CHAIN.SOLANA,a.o.BLOCKCHAIN_API_RPC_URL;const Jl="solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp",Xl="solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1",Ql="solana:4sGjMW1sUnHzSxGspuhpqLDx6wiyjNtZ",eu="solana:8E9rvCKLFQia2Y35HXjjpWzj8weVo44K";function tu(e){return"version"in e}function ru(e){if("string"==typeof e)return`solana:${e}`}class nu{constructor(){this.listeners={accountsChanged:[],chainChanged:[],connect:[],disconnect:[],pendingTransaction:[],auth_rpcRequest:[],auth_rpcSuccess:[],auth_rpcError:[]}}on(e,t){this.listeners[e].push(t)}removeListener(e,t){this.listeners[e]=this.listeners[e].filter((e=>e!==t))}emit(e,t){this.listeners[e].forEach((e=>e(t)))}}class iu extends nu{constructor(e){super(),this.id=a.o.CONNECTOR_ID.AUTH,this.name=a.o.CONNECTOR_NAMES.AUTH,this.type="AUTH",this.chain=a.o.CHAIN.SOLANA,this.provider=e.w3mFrameProvider,this.requestedChains=e.chains,this.getActiveChain=e.getActiveChain}get publicKey(){const e=this.provider.user?.address;return e?new Ko(e):void 0}get chains(){const e=this.provider.getAvailableChainIds();return this.requestedChains.filter((t=>e.includes(t.caipNetworkId)))}async connect(e={}){const t=e.chainId||this.getActiveChain()?.id,r=g.U.state.preferredAccountTypes?.solana;if(await this.provider.connect({chainId:ru(t),preferredAccountType:r}),!this.publicKey)throw new Error("Failed to connect to the wallet");return this.emit("connect",this.publicKey),this.publicKey.toBase58()}async disconnect(){await this.provider.disconnect(),this.emit("disconnect",void 0)}async signMessage(e){if(!this.publicKey)throw new Error("Wallet not connected");const t=await this.provider.request({method:"solana_signMessage",params:{message:zi.A.encode(e),pubkey:this.publicKey.toBase58()}});return zi.A.decode(t.signature)}async signTransaction(e){const t=await this.provider.request({method:"solana_signTransaction",params:{transaction:this.serializeTransaction(e)}}),r=zi.A.decode(t.transaction);return tu(e)?ma.deserialize(r):ga.from(r)}async signAndSendTransaction(e,t){const r=this.serializeTransaction(e);return(await this.provider.request({method:"solana_signAndSendTransaction",params:{transaction:r,options:t}})).signature}async sendTransaction(e,t,r){const n=await this.signTransaction(e);return await t.sendRawTransaction(n.serialize(),r)}async signAllTransactions(e){return(await this.provider.request({method:"solana_signAllTransactions",params:{transactions:e.map((e=>this.serializeTransaction(e)))}})).transactions.map(((t,r)=>{const n=e[r];if(!n)throw new Error("Invalid solana_signAllTransactions response");const i=zi.A.decode(t);return tu(n)?ma.deserialize(i):ga.from(i)}))}async request(e){return this.provider.request({method:e.method,params:e.params})}async getAccounts(){return this.publicKey?Promise.resolve([{namespace:this.chain,address:this.publicKey.toBase58(),type:"eoa"}]):Promise.resolve([])}serializeTransaction(e){return zi.A.encode(new Uint8Array(e.serialize({verifySignatures:!1})))}}class su extends nu{constructor(e){super(),this.name="Coinbase Wallet",this.id=Li.ConnectorExplorerIds[a.o.CONNECTOR_ID.COINBASE_SDK]||this.name,this.explorerId=Li.ConnectorExplorerIds[a.o.CONNECTOR_ID.COINBASE_SDK],this.type="ANNOUNCED",this.imageUrl="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8Y2lyY2xlIGN4PSI1MTIiIGN5PSI1MTIiIHI9IjUxMiIgZmlsbD0iIzAwNTJGRiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE1MiA1MTJDMTUyIDcxMC44MjMgMzEzLjE3NyA4NzIgNTEyIDg3MkM3MTAuODIzIDg3MiA4NzIgNzEwLjgyMyA4NzIgNTEyQzg3MiAzMTMuMTc3IDcxMC44MjMgMTUyIDUxMiAxNTJDMzEzLjE3NyAxNTIgMTUyIDMxMy4xNzcgMTUyIDUxMlpNNDIwIDM5NkM0MDYuNzQ1IDM5NiAzOTYgNDA2Ljc0NSAzOTYgNDIwVjYwNEMzOTYgNjE3LjI1NSA0MDYuNzQ1IDYyOCA0MjAgNjI4SDYwNEM2MTcuMjU1IDYyOCA2MjggNjE3LjI1NSA2MjggNjA0VjQyMEM2MjggNDA2Ljc0NSA2MTcuMjU1IDM5NiA2MDQgMzk2SDQyMFoiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=",this.chain=a.o.CHAIN.SOLANA,this.provider=this,this.coinbase=e.provider,this.requestedChains=e.chains}get chains(){return this.requestedChains.filter((e=>e.id===os.id))}get publicKey(){return this.coinbase.publicKey}get imageId(){return Li.ConnectorImageIds[a.o.CONNECTOR_ID.COINBASE]}async connect(){try{await this.coinbase.connect();const e=this.getAccount(!0);return this.coinbase.emit("connect",this.coinbase.publicKey),this.emit("connect",e),e.toBase58()}catch(e){throw this.coinbase.emit("error",e),e}}async disconnect(){await this.coinbase.disconnect(),this.coinbase.emit("disconnect",void 0),this.emit("disconnect",void 0)}async signMessage(e){return(await this.coinbase.signMessage(e)).signature}async signTransaction(e){return this.coinbase.signTransaction(e)}async signAndSendTransaction(e,t){return(await this.coinbase.signAndSendTransaction(e,t)).signature}async sendTransaction(e,t,r){const n=await this.signTransaction(e);return await t.sendRawTransaction(n.serialize(),r)}async signAllTransactions(e){return await this.coinbase.signAllTransactions(e)}async request(e){return Promise.reject(new Error('The "request" method is not supported on Coinbase Wallet'))}async getAccounts(){const e=this.getAccount();return e?Promise.resolve([{namespace:this.chain,address:e.toBase58(),type:"eoa"}]):Promise.resolve([])}getAccount(e){const t=this.coinbase.publicKey;if(e&&!t)throw new Error("Not connected");return t}}class ou extends Error{constructor(e){super(`The wallet does not support the "${e}" feature`)}}class au extends Error{constructor(e){super(`The method "${e}" is not supported by the wallet`)}}var cu=i(8287).Buffer;class lu extends hs{constructor({provider:e,chains:t,getActiveChain:r}){super({caipNetworks:t,namespace:"solana",provider:e}),this.eventEmitter=new nu,this.emit=this.eventEmitter.emit.bind(this.eventEmitter),this.on=this.eventEmitter.on.bind(this.eventEmitter),this.removeListener=this.eventEmitter.removeListener.bind(this.eventEmitter),this.getActiveChain=r}get session(){return this.provider.session}get chains(){return this.sessionChains.map((e=>{let t=e;return t===Ql?t=Jl:t===eu&&(t=Xl),this.caipNetworks.find((e=>e.caipNetworkId===t))})).filter(Boolean)}get publicKey(){const e=this.getAccount(!1);if(e)return new Ko(e.publicKey)}async connect(){await super.connectWalletConnect();const e=this.getAccount(!0);return this.emit("connect",new Ko(e.publicKey)),e.address}async disconnect(){await super.disconnect(),this.emit("disconnect",void 0)}async signMessage(e){this.checkIfMethodIsSupported("solana_signMessage");const t=await this.internalRequest("solana_signMessage",{message:zi.A.encode(e),pubkey:this.getAccount(!0).address});return zi.A.decode(t.signature)}async signTransaction(e){this.checkIfMethodIsSupported("solana_signTransaction");const t=this.serializeTransaction(e),r=await this.internalRequest("solana_signTransaction",{transaction:t,pubkey:this.getAccount(!0).address,...this.getRawRPCParams(e)});if("signature"in r){const t=zi.A.decode(r.signature);return e.addSignature(new Ko(this.getAccount(!0).publicKey),cu.from(t)),e}const n=cu.from(r.transaction,"base64");return tu(e)?ma.deserialize(new Uint8Array(n)):ga.from(n)}async signAndSendTransaction(e,t){this.checkIfMethodIsSupported("solana_signAndSendTransaction");const r=this.serializeTransaction(e),n=await this.internalRequest("solana_signAndSendTransaction",{transaction:r,pubkey:this.getAccount(!0).address,sendOptions:t});return this.emit("pendingTransaction",void 0),n.signature}async sendTransaction(e,t,r){const n=await this.signTransaction(e),i=await t.sendRawTransaction(n.serialize(),r);return this.emit("pendingTransaction",void 0),i}async signAllTransactions(e){try{return this.checkIfMethodIsSupported("solana_signAllTransactions"),(await this.internalRequest("solana_signAllTransactions",{transactions:e.map((e=>this.serializeTransaction(e)))})).transactions.map(((t,r)=>{const n=e[r];if(!n)throw new Error("Invalid transactions response");const i=cu.from(t,"base64");return tu(n)?ma.deserialize(new Uint8Array(i)):(this.emit("pendingTransaction",void 0),ga.from(i))}))}catch(t){if(t instanceof au){const t=[];for(const r of e)t.push(await this.signTransaction(r));return t}throw t}}request(e){return this.internalRequest(e.method,e.params)}async getAccounts(){const e=this.session?.namespaces.solana?.accounts||[];return Promise.resolve(e.map((e=>({namespace:this.chain,address:vn.parseCaipAddress(e).address,type:"eoa"}))))}internalRequest(e,t){const r=this.chains.find((e=>this.getActiveChain()?.id===e.id));let n=r?.caipNetworkId;switch(n){case Jl:this.sessionChains.includes(Jl)||(n=Ql);break;case Xl:this.sessionChains.includes(Xl)||(n=eu)}return this.provider?.request({method:e,params:t},n)}get sessionChains(){return us.getChainsFromNamespaces(this.session?.namespaces)}serializeTransaction(e){return cu.from(new Uint8Array(e.serialize({verifySignatures:!1}))).toString("base64")}getAccount(e){const t=this.session?.namespaces.solana?.accounts[0];if(!t){if(e)throw new Error("Account not found");return}const r=t.split(":")[2];if(r)return{address:r,publicKey:zi.A.decode(r)};if(e)throw new Error("Address not found")}getRawRPCParams(e){return tu(e)?{}:{feePayer:e.feePayer?.toBase58()??"",instructions:e.instructions.map((e=>({data:zi.A.encode(new Uint8Array(e.data)),keys:e.keys.map((e=>({isWritable:e.isWritable,isSigner:e.isSigner,pubkey:e.pubkey.toBase58()}))),programId:e.programId.toBase58()}))),recentBlockhash:e.recentBlockhash??""}}checkIfMethodIsSupported(e){if(!this.session?.namespaces.solana?.methods.includes(e))throw new au(e)}}const uu=(0,S.BX)({connection:null}),hu={state:uu,subscribeKey:(e,t)=>(0,C.u$)(uu,e,t),subscribe:e=>(0,S.B1)(uu,(()=>e(uu))),setConnection(e){uu.connection=(0,S.KR)(e)}};async function du({provider:e,to:t,value:r,connection:n}){if(!e.publicKey)throw Error("No public key found");const i=new Ko(t),s=Math.floor(1e9*r),{blockhash:o,lastValidBlockHeight:a}=await n.getLatestBlockhash(),c=[Dl.setComputeUnitPrice({microLamports:2e7}),Dl.setComputeUnitLimit({units:500}),Oa.transfer({fromPubkey:e.publicKey,toPubkey:i,lamports:s})];return new ga({feePayer:e.publicKey,blockhash:o,lastValidBlockHeight:a}).add(...c)}const pu="solana:signAndSendTransaction",fu="solana:signTransaction",gu="standard:connect",mu="standard:events";function yu(e){return gu in e.features&&mu in e.features&&(pu in e.features||fu in e.features)}var wu;let bu;const vu=new Set,Eu={};function _u(...e){return(e=e.filter((e=>!vu.has(e)))).length?(e.forEach((e=>function(e){Au=void 0,vu.add(e)}(e))),Eu.register?.forEach((t=>Iu((()=>t(...e))))),function(){e.forEach((e=>function(e){Au=void 0,vu.delete(e)}(e))),Eu.unregister?.forEach((t=>Iu((()=>t(...e)))))}):()=>{}}let Au;function Su(){return Au||(Au=[...vu]),Au}function Cu(e,t){return Eu[e]?.push(t)||(Eu[e]=[t]),function(){Eu[e]=Eu[e]?.filter((e=>t!==e))}}function Iu(e){try{e()}catch(e){console.error(e)}}class Nu extends Event{get detail(){return function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}(this,wu,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),wu.set(this,void 0),function(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===n?i.call(e,r):i?i.value=r:t.set(e,r)}(this,wu,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}wu=new WeakMap;class ku extends Error{constructor(e,t){super(e),this.error=t}}class Tu extends ku{constructor(){super(...arguments),this.name="WalletAccountError"}}class xu extends ku{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class Pu extends ku{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class Ou extends ku{constructor(){super(...arguments),this.name="WalletSignMessageError"}}function Ru(e){switch(e){case"processed":case"confirmed":case"finalized":case void 0:return e;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const Mu={"solana:mainnet":os,"solana:testnet":cs,"solana:devnet":as};class Uu extends nu{constructor({wallet:e,getActiveChain:t,requestedChains:r}){super(),this.chain=a.o.CHAIN.SOLANA,this.provider=this,this.wallet=e,this.getActiveChain=t,this.requestedChains=r,this.bindEvents()}get id(){const e=this.name;return Li.ConnectorExplorerIds[e]||e}get name(){return"Trust"===this.wallet.name?"Trust Wallet":this.wallet.name}get type(){return"ANNOUNCED"}get explorerId(){return Li.ConnectorExplorerIds[this.name]}get publicKey(){const e=this.getAccount(!1);if(e)return new Ko(e.publicKey)}get imageUrl(){return this.wallet.icon}get chains(){return this.wallet.chains.map((e=>this.requestedChains.find((t=>t.id===e||t.id===Mu[e]?.id)))).filter(Boolean)}async connect(){const e=this.getWalletFeature(gu);await e.connect();const t=this.getAccount(!0),r=new Ko(t.publicKey);return this.emit("connect",r),t.address}async disconnect(){const e=this.getWalletFeature("standard:disconnect");await e.disconnect(),this.emit("disconnect",void 0)}async signMessage(e){const t=this.getWalletFeature("solana:signMessage"),r=this.getAccount(!0),[n]=await t.signMessage({message:e,account:r});if(!n)throw new Ou("Empty result");return n.signature}async signTransaction(e){const t=this.getWalletFeature(fu),r=this.getAccount(!0),n=this.serializeTransaction(e),[i]=await t.signTransaction({account:r,transaction:new Uint8Array(n),chain:this.getActiveChainName()});if(!i)throw new Pu("Empty result");return this.emit("pendingTransaction",void 0),tu(e)?ma.deserialize(i.signedTransaction):ga.from(i.signedTransaction)}async signAndSendTransaction(e,t){const r=this.getWalletFeature(pu),n=this.getAccount(!0),[i]=await r.signAndSendTransaction({account:n,transaction:new Uint8Array(this.serializeTransaction(e)),options:{...t,preflightCommitment:Ru(t?.preflightCommitment)},chain:this.getActiveChainName()});if(!i)throw new xu("Empty result");return this.emit("pendingTransaction",void 0),zi.A.encode(i.signature)}async sendTransaction(e,t,r){const n=await this.signTransaction(e);return await t.sendRawTransaction(n.serialize(),r)}async signAllTransactions(e){const t=this.getWalletFeature(fu),r=this.getAccount(!0),n=this.getActiveChainName();return(await t.signTransaction(...e.map((e=>({transaction:new Uint8Array(this.serializeTransaction(e)),account:r,chain:n}))))).map((({signedTransaction:t},r)=>{const n=e[r];if(!n)throw new Pu("Invalid transaction signature response");return this.emit("pendingTransaction",void 0),tu(n)?ma.deserialize(t):ga.from(t)}))}async request(e){return Promise.reject(new ou("request"))}async getAccounts(){return Promise.resolve(this.wallet.accounts.map((e=>({namespace:this.chain,address:e.address,type:"eoa"}))))}serializeTransaction(e){return e.serialize({verifySignatures:!1})}getAccount(e){const t=this.wallet.accounts[0];if(e&&!t)throw new Tu;return t}getWalletFeature(e){if(!(e in this.wallet.features))throw new ou(e);return this.wallet.features[e]}getActiveChainName(){const e=Object.entries(Mu).find((([,e])=>e.id===this.getActiveChain()?.id));if(!e)throw new Error("Invalid chain id");return e[0]}bindEvents(){this.getWalletFeature(mu).on("change",(e=>{if(e.accounts){const t=e.accounts[0];t&&this.emit("accountsChanged",new Ko(t.publicKey))}}))}}const{get:Bu,on:Lu}=function(){if(bu)return bu;if(bu=Object.freeze({register:_u,get:Su,on:Cu}),"undefined"==typeof window)return bu;const e=Object.freeze({register:_u});try{window.addEventListener("wallet-standard:register-wallet",(({detail:t})=>t(e)))}catch(e){console.error("wallet-standard:register-wallet event listener could not be added\n",e)}try{window.dispatchEvent(new Nu(e))}catch(e){console.error("wallet-standard:app-ready event could not be dispatched\n",e)}return bu}();let Du=[];function ju(e,t,r){return e.filter(yu).map((e=>new Uu({wallet:e,requestedChains:t,getActiveChain:r})))}function $u(e){return $u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$u(e)}function Wu(){Wu=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",a=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var s=t&&t.prototype instanceof y?t:y,o=Object.create(s.prototype),a=new x(n||[]);return i(o,"_invoke",{value:I(e,r,a)}),o}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",p="suspendedYield",f="executing",g="completed",m={};function y(){}function w(){}function b(){}var v={};l(v,o,(function(){return this}));var E=Object.getPrototypeOf,_=E&&E(E(P([])));_&&_!==r&&n.call(_,o)&&(v=_);var A=b.prototype=y.prototype=Object.create(v);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(i,s,o,a){var c=h(e[i],e,s);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==$u(u)&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,o,a)}),(function(e){r("throw",e,o,a)})):t.resolve(u).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,a)}))}a(c.arg)}var s;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return s=s?s.then(i,i):i()}})}function I(t,r,n){var i=d;return function(s,o){if(i===f)throw Error("Generator is already running");if(i===g){if("throw"===s)throw o;return{value:e,done:!0}}for(n.method=s,n.arg=o;;){var a=n.delegate;if(a){var c=N(a,n);if(c){if(c===m)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===d)throw i=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=f;var l=h(t,r,n);if("normal"===l.type){if(i=n.done?g:p,l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=g,n.method="throw",n.arg=l.arg)}}}function N(t,r){var n=r.method,i=t.iterator[n];if(i===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,N(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var s=h(i,t.iterator,r.arg);if("throw"===s.type)return r.method="throw",r.arg=s.arg,r.delegate=null,m;var o=s.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function P(t){if(t||""===t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return s.next=s}}throw new TypeError($u(t)+" is not iterable")}return w.prototype=b,i(A,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:w,configurable:!0}),w.displayName=l(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,l(e,c,"GeneratorFunction")),e.prototype=Object.create(A),e},t.awrap=function(e){return{__await:e}},S(C.prototype),l(C.prototype,a,(function(){return this})),t.AsyncIterator=C,t.async=function(e,r,n,i,s){void 0===s&&(s=Promise);var o=new C(u(e,r,n,i),s);return t.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(A),l(A,c,"Generator"),l(A,o,(function(){return this})),l(A,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=P,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(n,i){return a.type="throw",a.arg=t,r.next=n,i&&(r.method="next",r.arg=e),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var o=this.tryEntries[s],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=t,s?(this.method="next",this.next=s.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;T(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function zu(e,t,r,n,i,s,o){try{var a=e[s](o),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function qu(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var s=e.apply(t,r);function o(e){zu(s,n,i,o,a,"next",e)}function a(e){zu(s,n,i,o,a,"throw",e)}o(void 0)}))}}function Hu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Fu(n.key),n)}}function Fu(e){var t=function(e){if("object"!=$u(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=$u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==$u(t)?t:t+""}var Ku,Vu=new class extends ps{constructor(e={}){super({adapterType:a.o.ADAPTER_TYPES.SOLANA,namespace:a.o.CHAIN.SOLANA}),this.balancePromises={},this.providerHandlers=null,this.connectionSettings=e.connectionSettings||"confirmed",this.wallets=e.wallets}construct(e){super.construct(e);const t=b.i.getActiveCaipNetworkId(),r=e.networks?.find((e=>e.caipNetworkId===t))||e.networks?.[0],n=r?.rpcUrls.default.http[0];n&&hu.setConnection(new Ul(n,this.connectionSettings))}setAuthProvider(e){this.addConnector(new iu({w3mFrameProvider:e,getActiveChain:()=>m.W.getCaipNetworkByNamespace(this.namespace),chains:this.getCaipNetworks()}))}syncConnectors(e,t){e.projectId||v.h.open(A.ALERT_ERRORS.PROJECT_ID_NOT_CONFIGURED,"error");const r=()=>t.getCaipNetwork(this.namespace);o.w.isClient()&&"coinbaseSolana"in window&&this.addConnector(new su({provider:window.coinbaseSolana,chains:this.getCaipNetworks(),getActiveChain:r})),function(e,t,r){Lu("register",((...n)=>{Du=[...Du,...ju(n,e,t)],r(...Du)})),Lu("unregister",((...e)=>{Du=Du.filter((t=>e.some((e=>e.name===t.wallet.name)))),r(...Du)}));Du=ju(Bu(),e,t),r(...Du)}(this.getCaipNetworks(),r,this.addConnector.bind(this))}async getEnsAddress(e){return{address:e.name}}async writeContract(){return Promise.resolve({hash:""})}async getCapabilities(){return Promise.resolve({})}async grantPermissions(){return Promise.resolve({})}async revokePermissions(){return Promise.resolve("0x")}async walletGetAssets(e){return Promise.resolve({})}async getAccounts(e){const t=this.connectors.find((t=>t.id===e.id));return t?{accounts:await t.getAccounts()}:{accounts:[]}}async signMessage(e){const t=e.provider;if(!t)throw new Error("connectionControllerClient:signMessage - provider is undefined");const r=await t.signMessage((new TextEncoder).encode(e.message));return{signature:zi.A.encode(r)}}async estimateGas(e){const t=hu.state.connection;if(!t||!e.provider)throw new Error("Connection is not set");const r=await du({provider:e.provider,connection:t,to:"11111111111111111111111111111111",value:1}),n=await r.getEstimatedFee(t);return{gas:BigInt(n||0)}}async sendTransaction(e){const t=hu.state.connection;if(!t||!e.address||!e.provider)throw new Error("Connection is not set");const r=e.provider,n=await du({provider:r,connection:t,to:e.to,value:e.value}),i=await r.sendTransaction(n,t);return await new Promise((e=>{const r=setInterval((async()=>{const n=await t.getSignatureStatus(i);n?.value&&(clearInterval(r),e())}),1e3)})),{hash:i}}parseUnits(){return 0n}formatUnits(){return""}async connect(e){const t=this.connectors.find((t=>t.id===e.id));if(!t)throw new Error("Provider not found");const r=e.rpcUrl||this.getCaipNetworks()?.find((t=>t.id===e.chainId))?.rpcUrls.default.http[0];if(!r)throw new Error(`RPC URL not found for chainId: ${e.chainId}`);const n=await t.connect({chainId:e.chainId});return this.listenProviderEvents(t),hu.setConnection(new Ul(r,this.connectionSettings)),this.emit("accountChanged",{address:n,chainId:e.chainId}),{id:t.id,address:n,chainId:e.chainId,provider:t,type:t.type}}async getBalance(e){const t=e.address,r=this.getCaipNetworks()?.find((t=>t.id===e.chainId));if(!t)return Promise.resolve({balance:"0.00",symbol:"SOL"});const n=new Ul(r?.rpcUrls?.default?.http?.[0],this.connectionSettings),i=`${r?.caipNetworkId}:${e.address}`,s=this.balancePromises[i];if(s)return s;const o=b.i.getNativeBalanceCacheForCaipAddress(i);return o?{balance:o.balance,symbol:o.symbol}:(this.balancePromises[i]=new Promise((async r=>{try{const s=(await n.getBalance(new Ko(t))/1e9).toString();if(b.i.updateNativeBalanceCache({caipAddress:i,balance:s,symbol:e.caipNetwork?.nativeCurrency.symbol||"SOL",timestamp:Date.now()}),!e.caipNetwork)throw new Error("caipNetwork is required");r({balance:s,symbol:e.caipNetwork?.nativeCurrency.symbol})}catch(e){r({balance:"0.00",symbol:"SOL"})}})).finally((()=>{delete this.balancePromises[i]})),this.balancePromises[i]||{balance:"0.00",symbol:"SOL"})}async switchNetwork(e){await super.switchNetwork(e);const{caipNetwork:t}=e;t?.rpcUrls?.default?.http?.[0]&&hu.setConnection(new Ul(t.rpcUrls.default.http[0],this.connectionSettings))}listenProviderEvents(e){const t=()=>{this.removeProviderListeners(e),this.emit("disconnect")},r=e=>{const t=e.toBase58();t&&this.emit("accountChanged",{address:t})};e.on("disconnect",t),e.on("accountsChanged",r),e.on("connect",r),e.on("pendingTransaction",(()=>{this.emit("pendingTransactions")})),this.providerHandlers={disconnect:t,accountsChanged:r}}removeProviderListeners(e){this.providerHandlers&&(e.removeListener("disconnect",this.providerHandlers.disconnect),e.removeListener("accountsChanged",this.providerHandlers.accountsChanged),e.removeListener("connect",this.providerHandlers.accountsChanged),this.providerHandlers=null)}setUniversalProvider(e){this.addConnector(new lu({provider:e,chains:this.getCaipNetworks(),getActiveChain:()=>m.W.getCaipNetworkByNamespace(this.namespace)}))}async connectWalletConnect(e){const t=await super.connectWalletConnect(e),r=this.getCaipNetworks()?.find((t=>t.id===e))?.rpcUrls.default.http[0],n=new Ul(r,this.connectionSettings);return hu.setConnection(n),t}async disconnect(e){if(!e.provider||!e.providerType)throw new Error("Provider or providerType not provided");await e.provider.disconnect()}async getProfile(){return Promise.resolve({profileName:void 0,profileImage:void 0})}async syncConnection(e){return this.connect({...e,type:""})}getWalletConnectProvider(e){return new lu({provider:e.provider,chains:e.caipNetworks,getActiveChain:()=>m.W.getCaipNetworkByNamespace(this.namespace)})}},Gu=(Ku={adapters:[Vu],networks:[os,as],metadata:{name:"Roast Rush",description:"Roast Rush game",url:"https://roastrush.ai/",icons:["icons/icon-16.png"]},projectId:"61f529aa30c77838f2502740d05202ad",features:{analytics:!0}},new class extends gs{setupAuthConnectorListeners(e){e.onRpcRequest((t=>{O.Q.checkIfRequestExists(t)?O.Q.checkIfRequestIsSafe(t)||this.handleUnsafeRPCRequest():(this.open(),console.error(R.Vl.RPC_METHOD_NOT_ALLOWED_MESSAGE,{method:t.method}),setTimeout((()=>{this.showErrorMessage(R.Vl.RPC_METHOD_NOT_ALLOWED_UI_MESSAGE)}),300),e.rejectRpcRequests())})),e.onRpcError((()=>{this.isOpen()&&(this.isTransactionStackEmpty()?this.close():this.popTransactionStack(!0))})),e.onRpcSuccess(((e,t)=>{const r=O.Q.checkIfRequestIsSafe(t),n=g.U.state.address,i=m.W.state.activeCaipNetwork;r||(this.isTransactionStackEmpty()?(this.close(),n&&i?.id&&this.updateNativeBalance(n,i.id,i.chainNamespace)):(this.popTransactionStack(),n&&i?.id&&this.updateNativeBalance(n,i.id,i.chainNamespace)))})),e.onNotConnected((()=>{const e=m.W.state.activeChain;l.a.getConnectorId(e)===a.o.CONNECTOR_ID.AUTH&&(this.setCaipAddress(void 0,e),this.setLoading(!1,e))})),e.onConnect((async t=>{const r=m.W.state.activeChain,n=r===a.o.CHAIN.EVM?`eip155:${t.chainId}:${t.address}`:`${t.chainId}:${t.address}`,i=t.preferredAccountType||g.U.state.preferredAccountTypes?.[r]||y.H.state.defaultAccountTypes[r];E.y.isLowerCaseMatch(t.address,g.U.state.address)||this.syncIdentity({address:t.address,chainId:t.chainId,chainNamespace:r}),this.setCaipAddress(n,r),this.setUser({...g.U.state.user||{},...t},r),this.setSmartAccountDeployed(Boolean(t.smartAccountDeployed),r),this.setPreferredAccountType(i,r);const s=t.accounts?.map((e=>o.w.createAccount(r,e.address,e.type||g.U.state.preferredAccountTypes?.[r]||y.H.state.defaultAccountTypes[r])));this.setAllAccounts(s||[o.w.createAccount(r,t.address,t.preferredAccountType||i)],r),await e.getSmartAccountEnabledNetworks(),this.setLoading(!1,r)})),e.onSocialConnected((({userName:e})=>{this.setUser({...g.U.state.user||{},username:e},m.W.state.activeChain)})),e.onGetSmartAccountEnabledNetworks((e=>{this.setSmartAccountEnabledNetworks(e,m.W.state.activeChain)})),e.onSetPreferredAccount((({address:e,type:t})=>{e&&this.setPreferredAccountType(t,m.W.state.activeChain)}))}async syncAuthConnector(e,t){const r=a.o.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(t);if(!r)return;this.setLoading(!0,t);const n=e.getLoginEmailUsed();this.setLoading(n,t),n&&this.setStatus("connecting",t);const i=e.getEmail(),s=e.getUsername();this.setUser({...g.U.state?.user||{},username:s,email:i},m.W.state.activeChain),this.setupAuthConnectorListeners(e);const{isConnected:o}=await e.isConnected(),u=w.W.getSnapshot(),h=y.H.getSnapshot();e.syncDappData({metadata:h.metadata,sdkVersion:h.sdkVersion,projectId:h.projectId,sdkType:h.sdkType}),e.syncTheme({themeMode:u.themeMode,themeVariables:u.themeVariables,w3mThemeVariables:(0,c.o)(u.themeVariables,u.themeMode)}),t&&r&&(o&&this.connectionControllerClient?.connectExternal?(await(this.connectionControllerClient?.connectExternal({id:a.o.CONNECTOR_ID.AUTH,info:{name:a.o.CONNECTOR_ID.AUTH},type:_.o.CONNECTOR_TYPE_AUTH,provider:e,chainId:m.W.state.activeCaipNetwork?.id,chain:t})),this.setStatus("connected",t)):l.a.getConnectorId(t)===a.o.CONNECTOR_ID.AUTH&&(this.setStatus("disconnected",t),b.i.removeConnectedNamespace(t))),this.setLoading(!1,t)}async checkExistingTelegramSocialConnection(e){try{if(!o.w.isTelegram())return;const t=b.i.getTelegramSocialProvider();if(!t)return;if("undefined"==typeof window||"undefined"==typeof document)return;const r=new URL(window.location.href).searchParams.get("result_uri");if(!r)return;g.U.setSocialProvider(t,e),await(this.authProvider?.init());const n=l.a.getAuthConnector();t&&n&&(this.setLoading(!0,e),await n.provider.connectSocial(r),await u.x.connectExternal(n,n.chain),b.i.setConnectedSocialProvider(t),b.i.removeTelegramSocialProvider(),h.E.sendEvent({type:"track",event:"SOCIAL_LOGIN_SUCCESS",properties:{provider:t}}))}catch(t){this.setLoading(!1,e),console.error("checkExistingSTelegramocialConnection error",t)}try{const e=new URL(window.location.href);e.searchParams.delete("result_uri"),window.history.replaceState({},document.title,e.toString())}catch(e){console.error("tma social login failed",e)}}createAuthProvider(e){if(!a.o.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(e))return;const t=void 0===this.options?.features?.email?d.oU.DEFAULT_FEATURES.email:this.options?.features?.email,r=this.options?.features?.socials?this.options?.features?.socials?.length>0:d.oU.DEFAULT_FEATURES.socials,n=t||r;!this.authProvider&&this.options?.projectId&&n&&(this.authProvider=wn.getInstance({projectId:this.options.projectId,enableLogger:this.options.enableAuthLogger,chainId:this.getCaipNetwork(e)?.caipNetworkId,onTimeout:()=>{v.h.open(A.ALERT_ERRORS.SOCIALS_TIMEOUT,"error")}}),p.z.subscribeOpen((e=>{!e&&this.isTransactionStackEmpty()&&this.authProvider?.rejectRpcRequests()})),e===a.o.CHAIN.EVM&&g.U.state.preferredAccountTypes?.eip155&&this.authProvider.setPreferredAccount(g.U.state.preferredAccountTypes?.eip155),this.syncAuthConnector(this.authProvider,e),this.checkExistingTelegramSocialConnection(e))}createAuthProviderForAdapter(e){this.createAuthProvider(e),this.authProvider&&this.chainAdapters?.[e]?.setAuthProvider?.(this.authProvider)}initControllers(e){super.initControllers(e),this.options.excludeWalletIds&&f.N.initializeExcludedWallets({ids:this.options.excludeWalletIds})}async switchCaipNetwork(e){if(!e)return;const t=m.W.state.activeChain,r=e.chainNamespace,n=this.getAddressByChainNamespace(e.chainNamespace);if(e.chainNamespace===m.W.state.activeChain&&n){const t=this.getAdapter(r),n=k.getProvider(r),i=k.getProviderId(r);await(t?.switchNetwork({caipNetwork:e,provider:n,providerType:i})),this.setCaipNetwork(e)}else{const i=k.getProviderId(t)===_.o.CONNECTOR_TYPE_AUTH,s=k.getProviderId(r),o=s===_.o.CONNECTOR_TYPE_AUTH,c=a.o.AUTH_CONNECTOR_SUPPORTED_CHAINS.includes(r);if((i||o)&&c)try{m.W.state.activeChain=e.chainNamespace,await(this.connectionControllerClient?.connectExternal?.({id:a.o.CONNECTOR_ID.AUTH,provider:this.authProvider,chain:r,chainId:e.id,type:_.o.CONNECTOR_TYPE_AUTH,caipNetwork:e})),this.setCaipNetwork(e)}catch(t){const n=this.getAdapter(r);await(n?.switchNetwork({caipNetwork:e,provider:this.authProvider,providerType:s}))}else s===_.o.CONNECTOR_TYPE_WALLET_CONNECT?(this.setCaipNetwork(e),this.syncWalletConnectAccount()):(this.setCaipNetwork(e),n&&this.syncAccount({address:n,chainId:e.id,chainNamespace:r}))}}async initChainAdapter(e){await super.initChainAdapter(e),this.createAuthProviderForAdapter(e)}async syncIdentity({address:e,chainId:t,chainNamespace:r}){const n=`${r}:${t}`,i=this.caipNetworks?.find((e=>e.caipNetworkId===n));if(r!==a.o.CHAIN.EVM||i?.testnet)return this.setProfileName(null,r),void this.setProfileImage(null,r);try{const{name:i,avatar:s}=await this.fetchIdentity({address:e,caipNetworkId:n});if(this.setProfileName(i,r),this.setProfileImage(s,r),!i){const n=this.getAdapter(r),i=await(n?.getProfile({address:e,chainId:Number(t)}));i?.profileName?(this.setProfileName(i.profileName,r),i.profileImage&&this.setProfileImage(i.profileImage,r)):(await this.syncReownName(e,r),this.setProfileImage(null,r))}}catch{await this.syncReownName(e,r),1!==t&&this.setProfileImage(null,r)}}syncConnectedWalletInfo(e){const t=k.getProviderId(e);if(t===_.o.CONNECTOR_TYPE_AUTH){const r=this.authProvider;if(r){const n=b.i.getConnectedSocialProvider()??"email",i=r.getEmail()??r.getUsername();this.setConnectedWalletInfo({name:t,identifier:i,social:n},e)}}else super.syncConnectedWalletInfo(e)}async injectModalUi(){if(!ms&&o.w.isClient()){const e={...d.oU.DEFAULT_FEATURES,...this.options.features},t=[];if(e&&((e.email||e.socials&&e.socials.length)&&t.push(Promise.all([i.e(6554),i.e(9922),i.e(3796)]).then(i.bind(i,3796))),e.email&&t.push(Promise.all([i.e(6554),i.e(9922),i.e(8831)]).then(i.bind(i,8831))),e.socials&&t.push(Promise.all([i.e(6554),i.e(6283),i.e(1786),i.e(3573)]).then(i.bind(i,3302))),e.swaps&&t.push(Promise.all([i.e(6554),i.e(9922),i.e(239),i.e(2280)]).then(i.bind(i,2280))),e.send&&t.push(Promise.all([i.e(6554),i.e(9922),i.e(239),i.e(2167)]).then(i.bind(i,2167))),e.receive&&t.push(Promise.all([i.e(6554),i.e(6283),i.e(9567)]).then(i.bind(i,9567))),e.onramp&&t.push(Promise.all([i.e(6554),i.e(9922),i.e(1786),i.e(564),i.e(9976)]).then(i.bind(i,9976))),e.history&&t.push(Promise.all([i.e(6554),i.e(9874),i.e(6406)]).then(i.bind(i,4951)))),await Promise.all([...t,Promise.all([i.e(6554),i.e(9922),i.e(6283),i.e(1786),i.e(564),i.e(9874),i.e(5201),i.e(1967)]).then(i.bind(i,1967)),Promise.all([i.e(6554),i.e(5201),i.e(9984)]).then(i.bind(i,8109))]),!document.querySelector("w3m-modal")){const e=document.createElement("w3m-modal");y.H.state.disableAppend||y.H.state.enableEmbedded||document.body.insertAdjacentElement("beforeend",e)}ms=!0}}}({...Ku,sdkVersion:o.w.generateSdkVersion(Ku.adapters??[],"html","1.7.3")})),Zu={},Yu={};Gu.subscribeProviders((function(e){var t=(Zu=e.solana).getActiveChain().rpcUrls.default.http[0];Yu=new Ul(t)}));const Ju=function(){return e=function e(t,r,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wallets=new Map,this.activeWallet=this.getConnectedWallet(),this.isMobile=!1,this.APP_IDENTITY={name:r||"Roast Rush",uri:n||"https://ff93-179-42-145-50.ngrok-free.app/",icon:i||"public/icon-16.ico"},this.auth_token=void 0},t=[{key:"initializeWallets",value:function(){console.log("Initializing wallet")}},{key:"setMobile",value:function(e){this.isMobile=e}},{key:"transact",value:(o=qu(Wu().mark((function e(){return Wu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Transact called");case 1:case"end":return e.stop()}}),e)}))),function(){return o.apply(this,arguments)})},{key:"connectWallet",value:(s=qu(Wu().mark((function e(){return Wu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=qu(Wu().mark((function e(t){var r,n;return Wu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("connectWallet called"),!(r=Gu.getAccount("solana"))||!r.isConnected){e.next=6;break}return t(r),console.log(r),e.abrupt("return");case 6:Gu.open(),n=Gu.subscribeState((function(e){e.open||(n(),t(Gu.getAccount("solana")))}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),function(){return s.apply(this,arguments)})},{key:"disconnectWallet",value:(i=qu(Wu().mark((function e(){return Wu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,Gu.disconnect("solana"),console.log("Disconnect wallet called"),e.next=9;break;case 5:throw e.prev=5,e.t0=e.catch(0),console.error("Error disconnecting wallet:",e.t0),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,5]])}))),function(){return i.apply(this,arguments)})},{key:"getConnectedWallet",value:function(){return Gu.getAccount("solana").address}},{key:"getWallets",value:function(){var e=Gu.getWalletInfo();return e?[{name:e.name,icon:e.icon}]:[]}},{key:"sendTransaction",value:(n=qu(Wu().mark((function e(t,r,n){var i,s,o,a,c,l,u;return Wu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Gu.getAccount("solana"))||i.address){e.next=8;break}return e.next=4,this.connectWallet();case 4:if(i=e.sent){e.next=8;break}return console.error("No account found"),e.abrupt("return",{success:!1});case 8:return s=i.address,o=new Ko(s),e.next=12,Yu.getLatestBlockhash();case 12:return a=e.sent,c=new ga({feePayer:o,recentBlockhash:null==a?void 0:a.blockhash}).add(Oa.transfer({fromPubkey:o,toPubkey:new Ko(r),lamports:Math.round(n*Math.pow(10,9))})),e.prev=14,e.next=17,Zu.signTransaction(c);case 17:return l=e.sent,e.next=20,Yu.sendRawTransaction(l.serialize());case 20:return u=e.sent,e.next=23,Yu.confirmTransaction(u);case 23:return e.abrupt("return",{success:!0,signature:u});case 26:return e.prev=26,e.t0=e.catch(14),console.error("Error sending transaction:",e.t0),e.abrupt("return",{success:!1,error:e.t0.message});case 30:case"end":return e.stop()}}),e,this,[[14,26]])}))),function(e,t,r){return n.apply(this,arguments)})},{key:"sendMessage",value:(r=qu(Wu().mark((function e(){return Wu().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Send message called");case 1:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},{key:"onNewWalletAvailable",value:function(e){console.log("Wallet avaiable callback")}},{key:"onWalletConnected",value:function(e){console.log("Wallet connected callback wtf")}},{key:"onWalletDisconnected",value:function(e){console.log("Wallet disconnect called")}}],t&&Hu(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r,n,i,s,o}();var Xu=s.A;export{Xu as default};